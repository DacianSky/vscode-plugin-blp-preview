(()=>{"use strict";var e={d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>a});class a{timeout=[];requestsMap={};constructor(){window.addEventListener("message",(async e=>{this.requestsMap[e.data.requestId]&&(this.requestsMap[e.data.requestId].resolve(e.data.data),delete this.requestsMap[e.data.requestId])}))}async load(){return await this._trans("load")}async loadBlp(e){return await this._trans("loadBlp",e)}async loadText(e){return await this._trans("loadText",e)}async loadTextArray(e){return await this._trans("loadTextArray",e)}async loadResource(e){return await this._trans("loadResource",e)}_trans(e,t=null,a=-1){const s=parseInt((Math.random()+"").slice(2),10),r={requestId:s,resolve:null},o=new Promise(((o,d)=>{r.resolve=o,a>0&&setTimeout((()=>{delete this.requestsMap[s],d(`call method ${e} data=${t} timeout ${a}`)}),a)}));return this.requestsMap[s]=r,vscode.postMessage({type:e,requestId:s,data:t}),o}}window.message=new a,module.exports=t})();