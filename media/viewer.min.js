/*!
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2021 Chananya Freiman
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 */
var ModelViewer;(()=>{var e={7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,a=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,a){function r(n){e.removeListener(t,i),a(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,r,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var l=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,a){var r,i,l,u;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),l=i[t]),void 0===l)l=i[t]=n,++e._eventsCount;else if("function"==typeof l?l=i[t]=a?[n,l]:[l,n]:a?l.unshift(n):l.push(n),(r=o(e))>0&&l.length>r&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=c.bind(a);return r.listener=n,a.wrapFn=r,r}function h(e,t,n){var a=e._events;if(void 0===a)return[];var r=a[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):_(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function m(e,t,n,a){if("function"==typeof e.on)a.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){a.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return o(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var s=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw s.context=l,s}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)a(o,this,t);else{var u=o.length,c=_(o,u);for(n=0;n<u;++n)a(c[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,a,r,i,l;if(s(t),void 0===(a=this._events))return this;if(void 0===(n=a[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){l=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(a[e]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",e,l||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,a;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9775:(e,t,n)=>{"use strict";let a,r,i;if(a="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){let t=0,n=e.length,a=new Uint8Array(n);for(;n>t;)a[t]=e[t++];return a},"function"==typeof(new Uint8Array).indexOf)r=function(e,t,n){return e.indexOf(t,n)};else{let e=[].indexOf;if(0!==e.call(new Uint8Array(1),0))throw Error("missing .indexOf");r=function(t,n,a){return e.call(t,n,a)}}i="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return a(arguments)};const l=function(e){return e instanceof Uint8Array},s="cannot convert invalid utf8 to javascript string",o=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce((function(e,t){return e[t.charCodeAt(0)]=!0,e}),{}),u={},c=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){let t=u[e];if(l(t))return t}let n=e.length,r=Array(n),i=0;for(let t=0;t<n;++t){let a=e.charCodeAt(t);if(a<=127)r[i++]=a;else if(a<=2047)r[i++]=192|a>>6,r[i++]=128|63&a;else{if(a>=55296&&a<=56319&&t+1<n){let n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(t++,a=1024*(a-55296)+n+9216)}a<=65535?(r[i++]=224|a>>12,r[i++]=128|a>>6&63,r[i++]=128|63&a):(r[i++]=240|a>>18,r[i++]=128|a>>12&63,r[i++]=128|a>>6&63,r[i++]=128|63&a)}}return r=a(r),t&&(u[e]=r),r};e.exports.luastring_from=a,e.exports.luastring_indexOf=r,e.exports.luastring_of=i,e.exports.is_luastring=l,e.exports.luastring_eq=function(e,t){if(e!==t){let n=e.length;if(n!==t.length)return!1;for(let a=0;a<n;a++)if(e[a]!==t[a])return!1}return!0},e.exports.to_jsstring=function(e,t,n,a){if(!l(e))throw new TypeError("to_jsstring expects a Uint8Array");n=void 0===n?e.length:Math.min(e.length,n);let r="";for(let i=void 0!==t?t:0;i<n;){let t=e[i++];if(t<128)r+=String.fromCharCode(t);else if(t<194||t>244){if(!a)throw RangeError(s);r+="�"}else if(t<=223){if(i>=n){if(!a)throw RangeError(s);r+="�";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="�";continue}r+=String.fromCharCode(((31&t)<<6)+(63&l))}else if(t<=239){if(i+1>=n){if(!a)throw RangeError(s);r+="�";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="�";continue}let o=e[i++];if(128!=(192&o)){if(!a)throw RangeError(s);r+="�";continue}let u=((15&t)<<12)+((63&l)<<6)+(63&o);if(u<=65535)r+=String.fromCharCode(u);else{u-=65536;let e=55296+(u>>10),t=u%1024+56320;r+=String.fromCharCode(e,t)}}else{if(i+2>=n){if(!a)throw RangeError(s);r+="�";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="�";continue}let o=e[i++];if(128!=(192&o)){if(!a)throw RangeError(s);r+="�";continue}let u=e[i++];if(128!=(192&u)){if(!a)throw RangeError(s);r+="�";continue}let c=((7&t)<<18)+((63&l)<<12)+((63&o)<<6)+(63&u);c-=65536;let d=55296+(c>>10),h=c%1024+56320;r+=String.fromCharCode(d,h)}}return r},e.exports.to_uristring=function(e){if(!l(e))throw new TypeError("to_uristring expects a Uint8Array");let t="";for(let n=0;n<e.length;n++){let a=e[n];o[a]?t+=String.fromCharCode(a):t+="%"+(a<16?"0":"")+a.toString(16)}return t},e.exports.to_luastring=c,e.exports.from_userstring=function(e){if(!l(e)){if("string"!=typeof e)throw new TypeError("expects an array of bytes or javascript string");e=c(e)}return e};const d=c("Lua"),h="Lua 5.3",f="Lua 5.3.4";e.exports.LUA_SIGNATURE=d,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION=h,e.exports.LUA_RELEASE=f,e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";const _={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};_.LUA_TSHRSTR=0|_.LUA_TSTRING,_.LUA_TLNGSTR=16|_.LUA_TSTRING,_.LUA_TNUMFLT=0|_.LUA_TNUMBER,_.LUA_TNUMINT=16|_.LUA_TNUMBER,_.LUA_TLCL=0|_.LUA_TFUNCTION,_.LUA_TLCF=16|_.LUA_TFUNCTION,_.LUA_TCCL=32|_.LUA_TFUNCTION;const{LUAI_MAXSTACK:m}=n(947),p=-m-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=p,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=_,e.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},e.exports.lua_upvalueindex=function(e){return p-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},5745:(e,t,n)=>{const a=n(9775),r="Fengari 0.1",i="Fengari 0.1.4",l="B. Giannangeli, Daurnimator",s="Fengari 0.1.4  Copyright (C) 2017-2018 "+l+"\nBased on: "+a.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS=l,e.exports.FENGARI_COPYRIGHT=s,e.exports.FENGARI_RELEASE=i,e.exports.FENGARI_VERSION=r,e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=a.is_luastring,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_from=a.luastring_from,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring,e.exports.from_userstring=a.from_userstring},8973:(e,t,n)=>{"use strict";const{LUA_MULTRET:a,LUA_OPBNOT:r,LUA_OPEQ:i,LUA_OPLE:l,LUA_OPLT:s,LUA_OPUNM:o,LUA_REGISTRYINDEX:u,LUA_RIDX_GLOBALS:c,LUA_VERSION_NUM:d,constant_types:{LUA_NUMTAGS:h,LUA_TBOOLEAN:f,LUA_TCCL:_,LUA_TFUNCTION:m,LUA_TLCF:p,LUA_TLCL:g,LUA_TLIGHTUSERDATA:b,LUA_TLNGSTR:w,LUA_TNIL:v,LUA_TNONE:A,LUA_TNUMFLT:y,LUA_TNUMINT:L,LUA_TSHRSTR:S,LUA_TTABLE:T,LUA_TTHREAD:E,LUA_TUSERDATA:k},thread_status:{LUA_OK:x},from_userstring:I,to_luastring:M}=n(9775),{api_check:U}=n(3568),P=n(8821),R=n(983),{luaU_dump:O}=n(1957),C=n(8897),B=n(6435),F=n(6137),{luaS_bless:D,luaS_new:G,luaS_newliteral:N}=n(8878),V=n(7670),{LUAI_MAXSTACK:H}=n(947),j=n(427),K=n(3718),{ZIO:z}=n(4161),X=B.TValue,J=B.CClosure,Y=function(e){e.top++,U(e,e.top<=e.ci.top,"stack overflow")},$=function(e,t){U(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},q=function(e){if(!e)throw TypeError("invalid argument")},W=function(e){q("number"==typeof e&&(0|e)===e)},Z=function(e){return e!==B.luaO_nilobject},Q=function(e,t){let n=e.ci;if(t>0){let a=n.funcOff+t;return U(e,t<=n.top-(n.funcOff+1),"unacceptable index"),a>=e.top?B.luaO_nilobject:e.stack[a]}return t>u?(U(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===u?e.l_G.l_registry:(U(e,(t=u-t)<=C.MAXUPVAL+1,"upvalue index too large"),n.func.ttislcf()?B.luaO_nilobject:t<=n.func.value.nupvalues?n.func.value.upvalue[t-1]:B.luaO_nilobject)},ee=function(e,t){let n=e.ci;if(t>0){let a=n.funcOff+t;return U(e,t<=n.top-(n.funcOff+1),"unacceptable index"),a>=e.top?null:a}if(t>u)return U(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},te=function(e,t){let n,a=e.ci.funcOff;t>=0?(U(e,t<=e.stack_last-(a+1),"new top too large"),n=a+1+t):(U(e,-(t+1)<=e.top-(a+1),"invalid new top"),n=e.top+t+1),R.adjust_top(e,n)},ne=function(e,t){te(e,-t-1)},ae=function(e,t,n){for(;t<n;t++,n--){let a=e.stack[t],r=new X(a.type,a.value);B.setobjs2s(e,t,n),B.setobj2s(e,n,r)}},re=function(e,t,n){let a=e.top-1,r=ee(e,t),i=e.stack[r];U(e,Z(i)&&t>u,"index not in the stack"),U(e,(n>=0?n:-n)<=a-r+1,"invalid 'n'");let l=n>=0?a-n:r-n-1;ae(e,r,l),ae(e,l+1,e.top-1),ae(e,r,e.top-1)},ie=function(e,t,n){let a=Q(e,t);Q(e,n).setfrom(a)},le=function(e,t,n){if(q("function"==typeof t),W(n),0===n)e.stack[e.top]=new X(p,t);else{$(e,n),U(e,n<=C.MAXUPVAL,"upvalue index too large");let a=new J(e,t,n);for(let t=0;t<n;t++)a.upvalue[t].setfrom(e.stack[e.top-n+t]);for(let t=1;t<n;t++)delete e.stack[--e.top];n>0&&--e.top,e.stack[e.top].setclCvalue(a)}Y(e)},se=le,oe=function(e,t){le(e,t,0)},ue=oe,ce=function(e,t,n){let a=G(e,I(n));$(e,1),B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),j.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},de=function(e,t){ce(e,K.luaH_getint(e.l_G.l_registry.value,c),t)},he=function(e,t,n){let a=G(e,I(n));return B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),j.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},fe=function(e,t,n){let a=Q(e,t);return W(n),U(e,a.ttistable(),"table expected"),B.pushobj2s(e,K.luaH_getint(a.value,n)),U(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},_e=function(e,t,n){let a=new B.TValue(T,K.luaH_new(e));e.stack[e.top]=a,Y(e)},me=function(e,t,n){switch(W(n),t.ttype()){case _:{let e=t.value;return 1<=n&&n<=e.nupvalues?{name:M("",!0),val:e.upvalue[n-1]}:null}case g:{let e=t.value,a=e.p;if(!(1<=n&&n<=a.upvalues.length))return null;let r=a.upvalues[n-1].name;return{name:r?r.getstr():M("(*no name)",!0),val:e.upvals[n-1]}}default:return null}},pe=function(e,t){let n=Q(e,t);if(!n.ttisstring()){if(!j.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.svalue()},ge=pe,be=function(e,t){return j.tointeger(Q(e,t))},we=function(e,t){return j.tonumber(Q(e,t))},ve=new WeakMap,Ae=function(e,t){R.luaD_callnoyield(e,t.funcOff,t.nresults)},ye=function(e,t){let n=Q(e,t);return Z(n)?n.ttnov():A},Le=M("?"),Se=function(e,t,n){U(e,n===a||e.ci.top-e.top>=n-t,"results from function overflow current stack size")},Te=function(e,t,n,r,i){U(e,null===i||!(e.ci.callstatus&F.CIST_LUA),"cannot use continuations inside hooks"),$(e,t+1),U(e,e.status===x,"cannot do calls on non-normal thread"),Se(e,t,n);let l=e.top-(t+1);null!==i&&0===e.nny?(e.ci.c_k=i,e.ci.c_ctx=r,R.luaD_call(e,l,n)):R.luaD_callnoyield(e,l,n),n===a&&e.ci.top<e.top&&(e.ci.top=e.top)},Ee=function(e,t,n,r,i,l){let s,o;U(e,null===l||!(e.ci.callstatus&F.CIST_LUA),"cannot use continuations inside hooks"),$(e,t+1),U(e,e.status===x,"cannot do calls on non-normal thread"),Se(e,t,n),o=0===r?0:ee(e,r);let u=e.top-(t+1);if(null===l||e.nny>0){let t={funcOff:u,nresults:n};s=R.luaD_pcall(e,Ae,t,u,o)}else{let t=e.ci;t.c_k=l,t.c_ctx=i,t.extra=u,t.c_old_errfunc=e.errfunc,e.errfunc=o,t.callstatus&=~F.CIST_OAH|e.allowhook,t.callstatus|=F.CIST_YPCALL,R.luaD_call(e,u,n),t.callstatus&=~F.CIST_YPCALL,e.errfunc=t.c_old_errfunc,s=x}return n===a&&e.ci.top<e.top&&(e.ci.top=e.top),s},ke=function(e,t,n){let a=Q(e,t);U(e,a.ttisLclosure(),"Lua function expected");let r=a.value;return W(n),U(e,1<=n&&n<=r.p.upvalues.length,"invalid upvalue index"),{f:r,i:n-1}};e.exports.api_incr_top=Y,e.exports.api_checknelems=$,e.exports.lua_absindex=function(e,t){return t>0||t<=u?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==o&&t!==r?$(e,2):($(e,1),B.pushobj2s(e,e.stack[e.top-1]),U(e,e.top<=e.ci.top,"stack overflow")),B.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){let n=e.l_G.panic;return e.l_G.panic=t,n},e.exports.lua_atnativeerror=function(e,t){let n=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,n},e.exports.lua_call=function(e,t,n){Te(e,t,n,0,null)},e.exports.lua_callk=Te,e.exports.lua_checkstack=function(e,t){let n,a=e.ci;if(U(e,t>=0,"negative 'n'"),e.stack_last-e.top>t)n=!0;else{e.top+F.EXTRA_STACK>H-t?n=!1:(R.luaD_growstack(e,t),n=!0)}return n&&a.top<e.top+t&&(a.top=e.top+t),n},e.exports.lua_compare=function(e,t,n,a){let r=Q(e,t),o=Q(e,n),u=0;if(Z(r)&&Z(o))switch(a){case i:u=j.luaV_equalobj(e,r,o);break;case s:u=j.luaV_lessthan(e,r,o);break;case l:u=j.luaV_lessequal(e,r,o);break;default:U(e,!1,"invalid option")}return u},e.exports.lua_concat=function(e,t){$(e,t),t>=2?j.luaV_concat(e,t):0===t&&(B.pushsvalue2s(e,D(e,M("",!0))),U(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=ie,e.exports.lua_createtable=_e,e.exports.lua_dump=function(e,t,n,a){$(e,1);let r=e.stack[e.top-1];return r.ttisLclosure()?O(e,r.value.p,t,n,a):1},e.exports.lua_error=function(e){$(e,1),P.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,t,n){return he(e,Q(e,t),n)},e.exports.lua_getglobal=function(e,t){return he(e,K.luaH_getint(e.l_G.l_registry.value,c),t)},e.exports.lua_geti=function(e,t,n){let a=Q(e,t);return W(n),e.stack[e.top]=new X(L,n),Y(e),j.luaV_gettable(e,a,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){let n,a=Q(e,t),r=!1;switch(a.ttnov()){case T:case k:n=a.value.metatable;break;default:n=e.l_G.mt[a.ttnov()]}return null!=n&&(e.stack[e.top]=new X(T,n),Y(e),r=!0),r},e.exports.lua_gettable=function(e,t){let n=Q(e,t);return j.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,n){let a=me(0,Q(e,t),n);if(a){let t=a.name,n=a.val;return B.pushobj2s(e,n),U(e,e.top<=e.ci.top,"stack overflow"),t}return null},e.exports.lua_getuservalue=function(e,t){let n=Q(e,t);U(e,n.ttisfulluserdata(),"full userdata expected");let a=n.value.uservalue;return e.stack[e.top]=new X(a.type,a.value),Y(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){re(e,t,1)},e.exports.lua_isboolean=function(e,t){return ye(e,t)===f},e.exports.lua_iscfunction=function(e,t){let n=Q(e,t);return n.ttislcf(n)||n.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return ye(e,t)===m},e.exports.lua_isinteger=function(e,t){return Q(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return ye(e,t)===b},e.exports.lua_isnil=function(e,t){return ye(e,t)===v},e.exports.lua_isnone=function(e,t){return ye(e,t)===A},e.exports.lua_isnoneornil=function(e,t){return ye(e,t)<=0},e.exports.lua_isnumber=function(e,t){return!1!==j.tonumber(Q(e,t))},e.exports.lua_isproxy=function(e,t){let n=ve.get(e);return!!n&&(null===t||t.l_G===n)},e.exports.lua_isstring=function(e,t){let n=Q(e,t);return n.ttisstring()||j.cvt2str(n)},e.exports.lua_istable=function(e,t){return Q(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return ye(e,t)===E},e.exports.lua_isuserdata=function(e,t){let n=Q(e,t);return n.ttisfulluserdata(n)||n.ttislightuserdata()},e.exports.lua_len=function(e,t){let n=Q(e,t),a=new X;j.luaV_objlen(e,a,n),e.stack[e.top]=a,Y(e)},e.exports.lua_load=function(e,t,n,a,r){a=a?I(a):Le,null!==r&&(r=I(r));let i=new z(e,t,n),l=R.luaD_protectedparser(e,i,a,r);if(l===x){let t=e.stack[e.top-1].value;if(t.nupvalues>=1){let n=K.luaH_getint(e.l_G.l_registry.value,c);t.upvals[0].setfrom(n)}}return l},e.exports.lua_newtable=function(e){_e(e)},e.exports.lua_newuserdata=function(e,t){let n=function(e,t){return new B.Udata(e,t)}(e,t);return e.stack[e.top]=new B.TValue(k,n),Y(e),n.data},e.exports.lua_next=function(e,t){let n=Q(e,t);return U(e,n.ttistable(),"table expected"),e.stack[e.top]=new X,K.luaH_next(e,n.value,e.top-1)?(Y(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,n,a){return Ee(e,t,n,a,0,null)},e.exports.lua_pcallk=Ee,e.exports.lua_pop=ne,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new X(f,!!t),Y(e)},e.exports.lua_pushcclosure=le,e.exports.lua_pushcfunction=oe,e.exports.lua_pushfstring=function(e,t,...n){return t=I(t),B.luaO_pushvfstring(e,t,n)},e.exports.lua_pushglobaltable=function(e){fe(e,u,c)},e.exports.lua_pushinteger=function(e,t){W(t),e.stack[e.top]=new X(L,t),Y(e)},e.exports.lua_pushjsclosure=se,e.exports.lua_pushjsfunction=ue,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new X(b,t),Y(e)},e.exports.lua_pushliteral=function(e,t){if(null==t)e.stack[e.top]=new X(v,null),e.top++;else{q("string"==typeof t);let n=N(e,t);B.pushsvalue2s(e,n),t=n.getstr()}return U(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushlstring=function(e,t,n){let a;return W(n),0===n?(t=M("",!0),a=D(e,t)):(t=I(t),U(e,t.length>=n,"invalid length to lua_pushlstring"),a=G(e,t.subarray(0,n))),B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),a.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new X(v,null),Y(e)},e.exports.lua_pushnumber=function(e,t){q("number"==typeof t),e.stack[e.top]=new X(y,t),Y(e)},e.exports.lua_pushstring=function(e,t){if(null==t)e.stack[e.top]=new X(v,null),e.top++;else{let n=G(e,I(t));B.pushsvalue2s(e,n),t=n.getstr()}return U(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new X(E,e),Y(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){B.pushobj2s(e,Q(e,t)),U(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,t,n){return t=I(t),B.luaO_pushvfstring(e,t,n)},e.exports.lua_rawequal=function(e,t,n){let a=Q(e,t),r=Q(e,n);return Z(a)&&Z(r)?j.luaV_equalobj(null,a,r):0},e.exports.lua_rawget=function(e,t){let n=Q(e,t);return U(e,n.ttistable(n),"table expected"),B.setobj2s(e,e.top-1,K.luaH_get(e,n.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=fe,e.exports.lua_rawgetp=function(e,t,n){let a=Q(e,t);U(e,a.ttistable(),"table expected");let r=new X(b,n);return B.pushobj2s(e,K.luaH_get(e,a.value,r)),U(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){let n=Q(e,t);switch(n.ttype()){case S:case w:return n.vslen();case k:return n.value.len;case T:return K.luaH_getn(n.value);default:return 0}},e.exports.lua_rawset=function(e,t){$(e,2);let n=Q(e,t);U(e,n.ttistable(),"table expected");let a=e.stack[e.top-2],r=e.stack[e.top-1];K.luaH_setfrom(e,n.value,a,r),K.invalidateTMcache(n.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,n){W(n),$(e,1);let a=Q(e,t);U(e,a.ttistable(),"table expected"),K.luaH_setint(a.value,n,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,n){$(e,1);let a=Q(e,t);U(e,a.ttistable(),"table expected");let r=new X(b,n),i=e.stack[e.top-1];K.luaH_setfrom(e,a.value,r,i),delete e.stack[--e.top]},e.exports.lua_register=function(e,t,n){oe(e,n),de(e,t)},e.exports.lua_remove=function(e,t){re(e,t,-1),ne(e,1)},e.exports.lua_replace=function(e,t){ie(e,-1,t),ne(e,1)},e.exports.lua_rotate=re,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,t,n){ce(e,Q(e,t),n)},e.exports.lua_setglobal=de,e.exports.lua_seti=function(e,t,n){W(n),$(e,1);let a=Q(e,t);e.stack[e.top]=new X(L,n),Y(e),j.settable(e,a,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){let n;$(e,1);let a=Q(e,t);switch(e.stack[e.top-1].ttisnil()?n=null:(U(e,e.stack[e.top-1].ttistable(),"table expected"),n=e.stack[e.top-1].value),a.ttnov()){case k:case T:a.value.metatable=n;break;default:e.l_G.mt[a.ttnov()]=n}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,t){$(e,2);let n=Q(e,t);j.settable(e,n,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=te,e.exports.lua_setupvalue=function(e,t,n){let a=Q(e,t);$(e,1);let r=me(0,a,n);if(r){let t=r.name;return r.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],t}return null},e.exports.lua_setuservalue=function(e,t){$(e,1);let n=Q(e,t);U(e,n.ttisfulluserdata(),"full userdata expected"),n.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){let n=new X,a=B.luaO_str2num(t,n);return 0!==a&&(e.stack[e.top]=n,Y(e)),a},e.exports.lua_toboolean=function(e,t){return!Q(e,t).l_isfalse()},e.exports.lua_tocfunction=function(e,t){let n=Q(e,t);return n.ttislcf()||n.ttisCclosure()?n.value:null},e.exports.lua_todataview=function(e,t){let n=pe(e,t);return new DataView(n.buffer,n.byteOffset,n.byteLength)},e.exports.lua_tointeger=function(e,t){let n=be(e,t);return!1===n?0:n},e.exports.lua_tointegerx=be,e.exports.lua_tojsstring=function(e,t){let n=Q(e,t);if(!n.ttisstring()){if(!j.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.jsstring()},e.exports.lua_tolstring=pe,e.exports.lua_tonumber=function(e,t){let n=we(e,t);return!1===n?0:n},e.exports.lua_tonumberx=we,e.exports.lua_topointer=function(e,t){let n=Q(e,t);switch(n.ttype()){case T:case g:case _:case p:case E:case k:case b:return n.value;default:return null}},e.exports.lua_toproxy=function(e,t){let n=Q(e,t);return function(e,t,n){let a=function(a){U(a,a instanceof F.lua_State&&e===a.l_G,"must be from same global state"),a.stack[a.top]=new X(t,n),Y(a)};return ve.set(a,e),a}(e.l_G,n.type,n.value)},e.exports.lua_tostring=ge,e.exports.lua_tothread=function(e,t){let n=Q(e,t);return n.ttisthread()?n.value:null},e.exports.lua_touserdata=function(e,t){let n=Q(e,t);switch(n.ttnov()){case k:return n.value.data;case b:return n.value;default:return null}},e.exports.lua_type=ye,e.exports.lua_typename=function(e,t){return U(e,A<=t&&t<h,"invalid tag"),V.ttypename(t)},e.exports.lua_upvalueid=function(e,t,n){let a=Q(e,t);switch(a.ttype()){case g:{let a=ke(e,t,n);return a.f.upvals[a.i]}case _:{let t=a.value;return U(e,(0|n)===n&&n>0&&n<=t.nupvalues,"invalid upvalue index"),t.upvalue[n-1]}default:return U(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,t,n,a,r){let i=ke(e,t,n),l=ke(e,a,r),s=l.f.upvals[l.i];i.f.upvals[i.i]=s},e.exports.lua_version=function(e){return null===e?d:e.l_G.version},e.exports.lua_xmove=function(e,t,n){if(e!==t){$(e,n),U(e,e.l_G===t.l_G,"moving among independent states"),U(e,t.ci.top-t.top>=n,"stack overflow"),e.top-=n;for(let a=0;a<n;a++)t.stack[t.top]=new B.TValue,B.setobj2s(t,t.top,e.stack[e.top+a]),delete e.stack[e.top+a],t.top++}}},670:(e,t,n)=>{"use strict";const{LUAL_BUFFERSIZE:a}=n(947),{LUA_ERRERR:r,LUA_MULTRET:i,LUA_REGISTRYINDEX:l,LUA_SIGNATURE:s,LUA_TBOOLEAN:o,LUA_TLIGHTUSERDATA:u,LUA_TNIL:c,LUA_TNONE:d,LUA_TNUMBER:h,LUA_TSTRING:f,LUA_TTABLE:_,LUA_VERSION_NUM:m,lua_Debug:p,lua_absindex:g,lua_atpanic:b,lua_call:w,lua_checkstack:v,lua_concat:A,lua_copy:y,lua_createtable:L,lua_error:S,lua_getfield:T,lua_getinfo:E,lua_getmetatable:k,lua_getstack:x,lua_gettop:I,lua_insert:M,lua_isinteger:U,lua_isnil:P,lua_isnumber:R,lua_isstring:O,lua_istable:C,lua_len:B,lua_load:F,lua_newstate:D,lua_newtable:G,lua_next:N,lua_pcall:V,lua_pop:H,lua_pushboolean:j,lua_pushcclosure:K,lua_pushcfunction:z,lua_pushfstring:X,lua_pushinteger:J,lua_pushliteral:Y,lua_pushlstring:$,lua_pushnil:q,lua_pushstring:W,lua_pushvalue:Z,lua_pushvfstring:Q,lua_rawequal:ee,lua_rawget:te,lua_rawgeti:ne,lua_rawlen:ae,lua_rawseti:re,lua_remove:ie,lua_setfield:le,lua_setglobal:se,lua_setmetatable:oe,lua_settop:ue,lua_toboolean:ce,lua_tointeger:de,lua_tointegerx:he,lua_tojsstring:fe,lua_tolstring:_e,lua_tonumber:me,lua_tonumberx:pe,lua_topointer:ge,lua_tostring:be,lua_touserdata:we,lua_type:ve,lua_typename:Ae,lua_version:ye}=n(7870),{from_userstring:Le,luastring_eq:Se,to_luastring:Te,to_uristring:Ee}=n(5745),ke=r+1,xe=Te("_LOADED"),Ie=Te("_PRELOAD"),Me=Te("FILE*"),Ue=Te("__name"),Pe=Te("__tostring"),Re=new Uint8Array(0);class Oe{constructor(){this.L=null,this.b=Re,this.n=0}}const Ce=function(e,t,n){if(0===n||!C(e,-1))return 0;for(q(e);N(e,-2);){if(ve(e,-2)===f){if(ee(e,t,-1))return H(e,1),1;if(Ce(e,t,n-1))return ie(e,-2),Y(e,"."),M(e,-2),A(e,3),1}H(e,1)}return 0},Be=function(e,t){let n=I(e);if(E(e,Te("f"),t),T(e,l,xe),Ce(e,n+1,2)){let t=be(e,-1);return 95===t[0]&&71===t[1]&&46===t[2]&&(W(e,t.subarray(3)),ie(e,-2)),y(e,-1,n+1),H(e,2),1}return ue(e,n),0},Fe=function(e,t){Be(e,t)?(X(e,Te("function '%s'"),be(e,-1)),ie(e,-2)):0!==t.namewhat.length?X(e,Te("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?Y(e,"main chunk"):t.what&&76===t.what[0]?X(e,Te("function <%s:%d>"),t.short_src,t.linedefined):Y(e,"?")},De=function(e){let t="PANIC: unprotected error in call to Lua API ("+fe(e,-1)+")";throw new Error(t)},Ge=function(e,t,n){let a=new p;return x(e,0,a)?(E(e,Te("n"),a),Se(a.namewhat,Te("method"))&&0===--t?He(e,Te("calling '%s' on bad self (%s)"),a.name,n):(null===a.name&&(a.name=Be(e,a)?be(e,-1):Te("?")),He(e,Te("bad argument #%d to '%s' (%s)"),t,a.name,n))):He(e,Te("bad argument #%d (%s)"),t,n)},Ne=function(e,t,n){let a;a=dt(e,t,Ue)===f?be(e,-1):ve(e,t)===u?Te("light userdata",!0):Je(e,t);let r=X(e,Te("%s expected, got %s"),n,a);return Ge(e,t,r)},Ve=function(e,t){let n=new p;x(e,t,n)&&(E(e,Te("Sl",!0),n),n.currentline>0)?X(e,Te("%s:%d: "),n.short_src,n.currentline):W(e,Te(""))},He=function(e,t,...n){return Ve(e,1),Q(e,t,n),A(e,2),S(e)},je=function(e,t,n,a){if(t)return j(e,1),1;{let t,r;return q(e),a?(t=a.message,r=-a.errno):(t="Success",r=0),n?X(e,Te("%s: %s"),n,Te(t)):W(e,Te(t)),J(e,r),3}},Ke=function(e,t){return T(e,l,t)},ze=function(e,t,n){let a=we(e,t);return null!==a&&k(e,t)?(Ke(e,n),ee(e,-1,-2)||(a=null),H(e,2),a):null},Xe=function(e,t,n){Ne(e,t,Ae(e,n))},Je=function(e,t){return Ae(e,ve(e,t))},Ye=function(e,t){let n=_e(e,t);return null==n&&Xe(e,t,f),n},$e=Ye,qe=function(e,t,n){return ve(e,t)<=0?null===n?null:Le(n):Ye(e,t)},We=qe,Ze=function(e,t){let n=pe(e,t);return!1===n&&Xe(e,t,h),n},Qe=function(e,t){let n=he(e,t);return!1===n&&function(e,t){R(e,t)?Ge(e,t,Te("number has no integer representation",!0)):Xe(e,t,h)}(e,t),n},et=function(e,t){let n=e.n+t;if(e.b.length<n){let t=Math.max(2*e.b.length,n),a=new Uint8Array(t);a.set(e.b),e.b=a}return e.b.subarray(e.n,n)},tt=function(e,t){t.L=e,t.b=Re},nt=function(e,t,n){if(n>0){t=Le(t),et(e,n).set(t.subarray(0,n)),it(e,n)}},at=function(e,t){t=Le(t),nt(e,t,t.length)},rt=function(e){$(e.L,e.b,e.n),e.n=0,e.b=Re},it=function(e,t){e.n+=t},lt=function(e,t,n,a){return ve(e,n)<=0?a:t(e,n)},st=function(e,t){let n=t.string;return t.string=null,n},ot=function(e,t,n,a,r){return F(e,st,{string:t},a,r)},ut=function(e,t,n,a){return ot(e,t,0,a,null)},ct=function(e,t){return ut(e,t,t.length,t)},dt=function(e,t,n){if(k(e,t)){W(e,n);let t=te(e,-2);return t===c?H(e,2):ie(e,-2),t}return c},ht=function(e,t,n){return t=g(e,t),dt(e,t,n)!==c&&(Z(e,t),w(e,1,1),!0)},ft=Te("%I"),_t=Te("%f"),mt=function(e,t,n){var a=n>>>0,r=t.length,i=e.length+1-r;e:for(;a<i;a++){for(let n=0;n<r;n++)if(e[a+n]!==t[n])continue e;return a}return-1},pt=function(e,t,n){return T(e,t,n)===_||(H(e,1),t=g(e,t),G(e),Z(e,-1),le(e,t,n),!1)},gt=function(e,t,n){bt(e,n,Te("too many upvalues",!0));for(let a in t){for(let t=0;t<n;t++)Z(e,-n);K(e,t[a],n),le(e,-(n+2),Te(a))}H(e,n)},bt=function(e,t,n){v(e,t)||(n?He(e,Te("stack overflow (%s)"),n):He(e,Te("stack overflow",!0)))},wt=function(e,t,n,a){let r=a.message,i=be(e,n).subarray(1);return X(e,Te("cannot %s %s: %s"),Te(t),i,Te(r)),ie(e,n),ke};let vt;const At=[239,187,191],yt=function(e){let t=function(e){let t;e.n=0;let n=0;do{if(t=vt(e),null===t||t!==At[n])return t;n++,e.buff[e.n++]=t}while(n<At.length);return e.n=0,vt(e)}(e);if(35===t){do{t=vt(e)}while(t&&10!==t);return{skipped:!0,c:vt(e)}}return{skipped:!1,c:t}};let Lt;{class e{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}}const t=function(e,t){let n=t;if(null!==n.f&&n.n>0){let e=n.n;return n.n=0,n.f=n.f.subarray(n.pos),n.buff.subarray(0,e)}let a=n.f;return n.f=null,a};vt=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},Lt=function(n,a,r){let i=new e,l=I(n)+1;if(null===a)throw new Error("Can't read stdin in the browser");{X(n,Te("@%s"),a);let e=Ee(a),t=new XMLHttpRequest;if(t.open("GET",e,!1),"undefined"==typeof window&&(t.responseType="arraybuffer"),t.send(),!(t.status>=200&&t.status<=299))return i.err=t.status,wt(n,"open",l,{message:`${t.status}: ${t.statusText}`});"string"==typeof t.response?i.f=Te(t.response):i.f=new Uint8Array(t.response)}let o=yt(i);o.c===s[0]&&a||o.skipped&&(i.buff[i.n++]=10),null!==o.c&&(i.buff[i.n++]=o.c);let u=F(n,t,i,be(n,-1),r),c=i.err;return c?(ue(n,l),wt(n,"read",l,c)):(ie(n,l),u)}}const St=function(e,t){return Lt(e,t,null)},Tt=function(e,t,n){let a=ye(e);72!=n&&He(e,Te("core and library have incompatible numeric types")),a!=ye(null)?He(e,Te("multiple Lua VMs detected")):a!==t&&He(e,Te("version mismatch: app. needs %f, Lua core provides %f"),t,a)};e.exports.LUA_ERRFILE=ke,e.exports.LUA_FILEHANDLE=Me,e.exports.LUA_LOADED_TABLE=xe,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Ie,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Oe,e.exports.luaL_addchar=function(e,t){et(e,1),e.b[e.n++]=t},e.exports.luaL_addlstring=nt,e.exports.luaL_addsize=it,e.exports.luaL_addstring=at,e.exports.luaL_addvalue=function(e){let t=e.L,n=be(t,-1);nt(e,n,n.length),H(t,1)},e.exports.luaL_argcheck=function(e,t,n,a){t||Ge(e,n,a)},e.exports.luaL_argerror=Ge,e.exports.luaL_buffinit=tt,e.exports.luaL_buffinitsize=function(e,t,n){return tt(e,t),et(t,n)},e.exports.luaL_callmeta=ht,e.exports.luaL_checkany=function(e,t){ve(e,t)===d&&Ge(e,t,Te("value expected",!0))},e.exports.luaL_checkinteger=Qe,e.exports.luaL_checklstring=Ye,e.exports.luaL_checknumber=Ze,e.exports.luaL_checkoption=function(e,t,n,a){let r=null!==n?We(e,t,n):$e(e,t);for(let e=0;a[e];e++)if(Se(a[e],r))return e;return Ge(e,t,X(e,Te("invalid option '%s'"),r))},e.exports.luaL_checkstack=bt,e.exports.luaL_checkstring=$e,e.exports.luaL_checktype=function(e,t,n){ve(e,t)!==n&&Xe(e,t,n)},e.exports.luaL_checkudata=function(e,t,n){let a=ze(e,t,n);return null===a&&Ne(e,t,n),a},e.exports.luaL_checkversion=function(e){Tt(e,m,72)},e.exports.luaL_checkversion_=Tt,e.exports.luaL_dofile=function(e,t){return St(e,t)||V(e,0,i,0)},e.exports.luaL_dostring=function(e,t){return ct(e,t)||V(e,0,i,0)},e.exports.luaL_error=He,e.exports.luaL_execresult=function(e,t){let n,a;if(null===t)return j(e,1),Y(e,"exit"),J(e,0),3;if(t.status)n="exit",a=t.status;else{if(!t.signal)return je(e,0,null,t);n="signal",a=t.signal}return q(e),Y(e,n),J(e,a),3},e.exports.luaL_fileresult=je,e.exports.luaL_getmetafield=dt,e.exports.luaL_getmetatable=Ke,e.exports.luaL_getsubtable=pt,e.exports.luaL_gsub=function(e,t,n,a){let r,i=new Oe;for(tt(e,i);(r=mt(t,n))>=0;)nt(i,t,r),at(i,a),t=t.subarray(r+n.length);return at(i,t),rt(i),be(e,-1)},e.exports.luaL_len=function(e,t){B(e,t);let n=he(e,-1);return!1===n&&He(e,Te("object length is not an integer",!0)),H(e,1),n},e.exports.luaL_loadbuffer=ut,e.exports.luaL_loadbufferx=ot,e.exports.luaL_loadfile=St,e.exports.luaL_loadfilex=Lt,e.exports.luaL_loadstring=ct,e.exports.luaL_newlib=function(e,t){L(e),gt(e,t,0)},e.exports.luaL_newlibtable=function(e){L(e)},e.exports.luaL_newmetatable=function(e,t){return Ke(e,t)!==c?0:(H(e,1),L(e,0,2),W(e,t),le(e,-2,Ue),Z(e,-1),le(e,l,t),1)},e.exports.luaL_newstate=function(){let e=D();return e&&b(e,De),e},e.exports.luaL_opt=lt,e.exports.luaL_optinteger=function(e,t,n){return lt(e,Qe,t,n)},e.exports.luaL_optlstring=qe,e.exports.luaL_optnumber=function(e,t,n){return lt(e,Ze,t,n)},e.exports.luaL_optstring=We,e.exports.luaL_prepbuffer=function(e){return et(e,a)},e.exports.luaL_prepbuffsize=et,e.exports.luaL_pushresult=rt,e.exports.luaL_pushresultsize=function(e,t){it(e,t),rt(e)},e.exports.luaL_ref=function(e,t){let n;return P(e,-1)?(H(e,1),-1):(t=g(e,t),ne(e,t,0),n=de(e,-1),H(e,1),0!==n?(ne(e,t,n),re(e,t,0)):n=ae(e,t)+1,re(e,t,n),n)},e.exports.luaL_requiref=function(e,t,n,a){pt(e,l,xe),T(e,-1,t),ce(e,-1)||(H(e,1),z(e,n),W(e,t),w(e,1,1),Z(e,-1),le(e,-3,t)),ie(e,-2),a&&(Z(e,-1),se(e,t))},e.exports.luaL_setfuncs=gt,e.exports.luaL_setmetatable=function(e,t){Ke(e,t),oe(e,-2)},e.exports.luaL_testudata=ze,e.exports.luaL_tolstring=function(e,t){if(ht(e,t,Pe))O(e,-1)||He(e,Te("'__tostring' must return a string"));else{switch(ve(e,t)){case h:U(e,t)?X(e,ft,de(e,t)):X(e,_t,me(e,t));break;case f:Z(e,t);break;case o:Y(e,ce(e,t)?"true":"false");break;case c:Y(e,"nil");break;default:{let n=dt(e,t,Ue),a=n===f?be(e,-1):Je(e,t);X(e,Te("%s: %p"),a,ge(e,t)),n!==c&&ie(e,-2);break}}}return _e(e,-1)},e.exports.luaL_traceback=function(e,t,n,a){let r=new p,i=I(e),l=function(e){let t=new p,n=1,a=1;for(;x(e,a,t);)n=a,a*=2;for(;n<a;){let r=Math.floor((n+a)/2);x(e,r,t)?n=r+1:a=r}return a-1}(t),s=l-a>21?10:-1;for(n&&X(e,Te("%s\n"),n),bt(e,10,null),Y(e,"stack traceback:");x(t,a++,r);)0==s--?(Y(e,"\n\t..."),a=l-11+1):(E(t,Te("Slnt",!0),r),X(e,Te("\n\t%s:"),r.short_src),r.currentline>0&&Y(e,`${r.currentline}:`),Y(e," in "),Fe(e,r),r.istailcall&&Y(e,"\n\t(...tail calls..)"),A(e,I(e)-i));A(e,I(e)-i)},e.exports.luaL_typename=Je,e.exports.luaL_unref=function(e,t,n){n>=0&&(t=g(e,t),ne(e,t,0),re(e,t,n),J(e,n),re(e,t,0))},e.exports.luaL_where=Ve,e.exports.lua_writestringerror=function(){for(let e=0;e<arguments.length;e++){let t=arguments[e];do{let e=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(e[1]),t=e[2]}while(""!==t)}}},4807:(e,t,n)=>{"use strict";const{LUA_MULTRET:a,LUA_OPADD:r,LUA_OPBAND:i,LUA_OPBNOT:l,LUA_OPBOR:s,LUA_OPBXOR:o,LUA_OPDIV:u,LUA_OPIDIV:c,LUA_OPMOD:d,LUA_OPSHL:h,LUA_OPSHR:f,LUA_OPUNM:_,constant_types:{LUA_TBOOLEAN:m,LUA_TLIGHTUSERDATA:p,LUA_TLNGSTR:g,LUA_TNIL:b,LUA_TNUMFLT:w,LUA_TNUMINT:v,LUA_TTABLE:A},to_luastring:y}=n(9775),{lua_assert:L}=n(3568),S=n(7278),T=n(6435),E=n(6159),k=n(1391),x=n(3718),I=n(427),M=E.OpCodesI,U=T.TValue,P=-1,R={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},O={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},C=function(e){return e.t!==e.f},B=function(e,t){let n=k.expkind;if(C(e))return!1;switch(e.k){case n.VKINT:return!t||new U(v,e.u.ival);case n.VKFLT:return!t||new U(w,e.u.nval);default:return!1}},F=function(e,t,n){let a,r=t+n-1;if(e.pc>e.lasttarget&&(a=e.f.code[e.pc-1],a.opcode===M.OP_LOADNIL)){let e=a.A,n=e+a.B;if(e<=t&&t<=n+1||t<=e&&e<=r+1)return e<t&&(t=e),n>r&&(r=n),E.SETARG_A(a,t),void E.SETARG_B(a,r-t)}Q(e,M.OP_LOADNIL,t,n-1,0)},D=function(e,t){return e.f.code[t.u.info]},G=function(e,t){let n=e.f.code[t].sBx;return n===P?P:t+1+n},N=function(e,t,n){let a=e.f.code[t],r=n-(t+1);L(n!==P),Math.abs(r)>E.MAXARG_sBx&&S.luaX_syntaxerror(e.ls,y("control structure too long",!0)),E.SETARG_sBx(a,r)},V=function(e,t,n){if(n===P)return t;if(t===P)t=n;else{let a=t,r=G(e,a);for(;r!==P;)a=r,r=G(e,a);N(e,a,n)}return t},H=function(e){let t=e.jpc;e.jpc=P;let n=te(e,M.OP_JMP,0,P);return n=V(e,n,t),n},j=function(e,t,n,a,r){return Q(e,t,n,a,r),H(e)},K=function(e){return e.lasttarget=e.pc,e.pc},z=function(e,t){return t>=1&&E.testTMode(e.f.code[t-1].opcode)?t-1:t},X=function(e,t){return e.f.code[z(e,t)]},J=function(e,t,n){let a=z(e,t),r=e.f.code[a];return r.opcode===M.OP_TESTSET&&(n!==E.NO_REG&&n!==r.B?E.SETARG_A(r,n):e.f.code[a]=E.CREATE_ABC(M.OP_TEST,r.B,0,r.C),!0)},Y=function(e,t){for(;t!==P;t=G(e,t))J(e,t,E.NO_REG)},$=function(e,t,n,a,r){for(;t!==P;){let i=G(e,t);J(e,t,a)?N(e,t,n):N(e,t,r),t=i}},q=function(e,t){K(e),e.jpc=V(e,e.jpc,t)},W=function(e,t,n){n===e.pc?q(e,t):(L(n<e.pc),$(e,t,n,E.NO_REG,n))},Z=function(e,t){let n=e.f;return function(e){$(e,e.jpc,e.pc,E.NO_REG,e.pc),e.jpc=P}(e),n.code[e.pc]=t,n.lineinfo[e.pc]=e.ls.lastline,e.pc++},Q=function(e,t,n,a,r){return L(E.getOpMode(t)===E.iABC),L(E.getBMode(t)!==E.OpArgN||0===a),L(E.getCMode(t)!==E.OpArgN||0===r),L(n<=E.MAXARG_A&&a<=E.MAXARG_B&&r<=E.MAXARG_C),Z(e,E.CREATE_ABC(t,n,a,r))},ee=function(e,t,n,a){return L(E.getOpMode(t)===E.iABx||E.getOpMode(t)===E.iAsBx),L(E.getCMode(t)===E.OpArgN),L(n<=E.MAXARG_A&&a<=E.MAXARG_Bx),Z(e,E.CREATE_ABx(t,n,a))},te=function(e,t,n,a){return ee(e,t,n,a+E.MAXARG_sBx)},ne=function(e,t){return L(t<=E.MAXARG_Ax),Z(e,E.CREATE_Ax(M.OP_EXTRAARG,t))},ae=function(e,t,n){if(n<=E.MAXARG_Bx)return ee(e,M.OP_LOADK,t,n);{let a=ee(e,M.OP_LOADKX,t,0);return ne(e,n),a}},re=function(e,t){let n=e.freereg+t;n>e.f.maxstacksize&&(n>=255&&S.luaX_syntaxerror(e.ls,y("function or expression needs too many registers",!0)),e.f.maxstacksize=n)},ie=function(e,t){re(e,t),e.freereg+=t},le=function(e,t){!E.ISK(t)&&t>=e.nactvar&&(e.freereg--,L(t===e.freereg))},se=function(e,t){t.k===k.expkind.VNONRELOC&&le(e,t.u.info)},oe=function(e,t,n){let a=t.k===k.expkind.VNONRELOC?t.u.info:-1,r=n.k===k.expkind.VNONRELOC?n.u.info:-1;a>r?(le(e,a),le(e,r)):(le(e,r),le(e,a))},ue=function(e,t,n){let a=e.f,r=x.luaH_get(e.L,e.ls.h,t);if(r.ttisinteger()){let t=r.value;if(t<e.nk&&a.k[t].ttype()===n.ttype()&&a.k[t].value===n.value)return t}let i=e.nk;return x.luaH_setfrom(e.L,e.ls.h,t,new T.TValue(v,i)),a.k[i]=n,e.nk++,i},ce=function(e,t){let n=new U(p,t),a=new U(v,t);return ue(e,n,a)},de=function(e,t){let n=new U(w,t);return ue(e,n,n)},he=function(e,t){let n=new U(m,t);return ue(e,n,n)},fe=function(e,t,n){let r=k.expkind;if(t.k===r.VCALL)E.SETARG_C(D(e,t),n+1);else if(t.k===r.VVARARG){let a=D(e,t);E.SETARG_B(a,n+1),E.SETARG_A(a,e.freereg),ie(e,1)}else L(n===a)},_e=function(e,t){let n=k.expkind;t.k===n.VCALL?(L(2===D(e,t).C),t.k=n.VNONRELOC,t.u.info=D(e,t).A):t.k===n.VVARARG&&(E.SETARG_B(D(e,t),2),t.k=n.VRELOCABLE)},me=function(e,t){let n=k.expkind;switch(t.k){case n.VLOCAL:t.k=n.VNONRELOC;break;case n.VUPVAL:t.u.info=Q(e,M.OP_GETUPVAL,0,t.u.info,0),t.k=n.VRELOCABLE;break;case n.VINDEXED:{let a;le(e,t.u.ind.idx),t.u.ind.vt===n.VLOCAL?(le(e,t.u.ind.t),a=M.OP_GETTABLE):(L(t.u.ind.vt===n.VUPVAL),a=M.OP_GETTABUP),t.u.info=Q(e,a,0,t.u.ind.t,t.u.ind.idx),t.k=n.VRELOCABLE;break}case n.VVARARG:case n.VCALL:_e(e,t)}},pe=function(e,t,n,a){return K(e),Q(e,M.OP_LOADBOOL,t,n,a)},ge=function(e,t,n){let a=k.expkind;switch(me(e,t),t.k){case a.VNIL:F(e,n,1);break;case a.VFALSE:case a.VTRUE:Q(e,M.OP_LOADBOOL,n,t.k===a.VTRUE,0);break;case a.VK:ae(e,n,t.u.info);break;case a.VKFLT:ae(e,n,de(e,t.u.nval));break;case a.VKINT:ae(e,n,ce(e,t.u.ival));break;case a.VRELOCABLE:{let a=D(e,t);E.SETARG_A(a,n);break}case a.VNONRELOC:n!==t.u.info&&Q(e,M.OP_MOVE,n,t.u.info,0);break;default:return void L(t.k===a.VJMP)}t.u.info=n,t.k=a.VNONRELOC},be=function(e,t){t.k!==k.expkind.VNONRELOC&&(ie(e,1),ge(e,t,e.freereg-1))},we=function(e,t){for(;t!==P;t=G(e,t)){if(X(e,t).opcode!==M.OP_TESTSET)return!0}return!1},ve=function(e,t,n){let a=k.expkind;if(ge(e,t,n),t.k===a.VJMP&&(t.t=V(e,t.t,t.u.info)),C(t)){let r,i=P,l=P;if(we(e,t.t)||we(e,t.f)){let r=t.k===a.VJMP?P:H(e);i=pe(e,n,0,1),l=pe(e,n,1,0),q(e,r)}r=K(e),$(e,t.f,r,n,i),$(e,t.t,r,n,l)}t.f=t.t=P,t.u.info=n,t.k=a.VNONRELOC},Ae=function(e,t){me(e,t),se(e,t),ie(e,1),ve(e,t,e.freereg-1)},ye=function(e,t){if(me(e,t),t.k===k.expkind.VNONRELOC){if(!C(t))return t.u.info;if(t.u.info>=e.nactvar)return ve(e,t,t.u.info),t.u.info}return Ae(e,t),t.u.info},Le=function(e,t){C(t)?ye(e,t):me(e,t)},Se=function(e,t){let n=k.expkind,a=!1;switch(Le(e,t),t.k){case n.VTRUE:t.u.info=he(e,!0),a=!0;break;case n.VFALSE:t.u.info=he(e,!1),a=!0;break;case n.VNIL:t.u.info=function(e){let t=new U(b,null),n=new U(A,e.ls.h);return ue(e,n,t)}(e),a=!0;break;case n.VKINT:t.u.info=ce(e,t.u.ival),a=!0;break;case n.VKFLT:t.u.info=de(e,t.u.nval),a=!0;break;case n.VK:a=!0}return a&&(t.k=n.VK,t.u.info<=E.MAXINDEXRK)?E.RKASK(t.u.info):ye(e,t)},Te=function(e,t){let n=X(e,t.u.info);L(E.testTMode(n.opcode)&&n.opcode!==M.OP_TESTSET&&n.opcode!==M.OP_TEST),E.SETARG_A(n,!n.A)},Ee=function(e,t,n){if(t.k===k.expkind.VRELOCABLE){let a=D(e,t);if(a.opcode===M.OP_NOT)return e.pc--,j(e,M.OP_TEST,a.B,0,!n)}return be(e,t),se(e,t),j(e,M.OP_TESTSET,E.NO_REG,t.u.info,n)},ke=function(e,t){let n,a=k.expkind;switch(me(e,t),t.k){case a.VJMP:Te(e,t),n=t.u.info;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:n=P;break;default:n=Ee(e,t,0)}t.f=V(e,t.f,n),q(e,t.t),t.t=P},xe=function(e,t){let n,a=k.expkind;switch(me(e,t),t.k){case a.VJMP:n=t.u.info;break;case a.VNIL:case a.VFALSE:n=P;break;default:n=Ee(e,t,1)}t.t=V(e,t.t,n),q(e,t.f),t.f=P},Ie=function(e,t,n){let a,r,_=k.expkind;if(!(a=B(t,!0))||!(r=B(n,!0))||!function(e,t,n){switch(e){case i:case s:case o:case h:case f:case l:return!1!==I.tointeger(t)&&!1!==I.tointeger(n);case u:case c:case d:return 0!==n.value;default:return 1}}(e,a,r))return 0;let m=new U;if(T.luaO_arith(null,e,a,r,m),m.ttisinteger())t.k=_.VKINT,t.u.ival=m.value;else{let e=m.value;if(isNaN(e)||0===e)return!1;t.k=_.VKFLT,t.u.nval=e}return!0},Me=function(e,t,n,a,r){let i=Se(e,a),l=Se(e,n);oe(e,n,a),n.u.info=Q(e,t,0,l,i),n.k=k.expkind.VRELOCABLE,Ue(e,r)},Ue=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=R,e.exports.NO_JUMP=P,e.exports.UnOpr=O,e.exports.getinstruction=D,e.exports.luaK_checkstack=re,e.exports.luaK_code=Z,e.exports.luaK_codeABC=Q,e.exports.luaK_codeABx=ee,e.exports.luaK_codeAsBx=te,e.exports.luaK_codek=ae,e.exports.luaK_concat=V,e.exports.luaK_dischargevars=me,e.exports.luaK_exp2RK=Se,e.exports.luaK_exp2anyreg=ye,e.exports.luaK_exp2anyregup=function(e,t){(t.k!==k.expkind.VUPVAL||C(t))&&ye(e,t)},e.exports.luaK_exp2nextreg=Ae,e.exports.luaK_exp2val=Le,e.exports.luaK_fixline=Ue,e.exports.luaK_getlabel=K,e.exports.luaK_goiffalse=xe,e.exports.luaK_goiftrue=ke,e.exports.luaK_indexed=function(e,t,n){let a=k.expkind;L(!C(t)&&(k.vkisinreg(t.k)||t.k===a.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=Se(e,n),t.u.ind.vt=t.k===a.VUPVAL?a.VUPVAL:a.VLOCAL,t.k=a.VINDEXED},e.exports.luaK_infix=function(e,t,n){switch(t){case R.OPR_AND:ke(e,n);break;case R.OPR_OR:xe(e,n);break;case R.OPR_CONCAT:Ae(e,n);break;case R.OPR_ADD:case R.OPR_SUB:case R.OPR_MUL:case R.OPR_DIV:case R.OPR_IDIV:case R.OPR_MOD:case R.OPR_POW:case R.OPR_BAND:case R.OPR_BOR:case R.OPR_BXOR:case R.OPR_SHL:case R.OPR_SHR:B(n,!1)||Se(e,n);break;default:Se(e,n)}},e.exports.luaK_intK=ce,e.exports.luaK_jump=H,e.exports.luaK_jumpto=function(e,t){return W(e,H(e),t)},e.exports.luaK_nil=F,e.exports.luaK_numberK=de,e.exports.luaK_patchclose=function(e,t,n){for(n++;t!==P;t=G(e,t)){let a=e.f.code[t];L(a.opcode===M.OP_JMP&&(0===a.A||a.A>=n)),E.SETARG_A(a,n)}},e.exports.luaK_patchlist=W,e.exports.luaK_patchtohere=q,e.exports.luaK_posfix=function(e,t,n,a,i){let l=k.expkind;switch(t){case R.OPR_AND:L(n.t===P),me(e,a),a.f=V(e,a.f,n.f),n.to(a);break;case R.OPR_OR:L(n.f===P),me(e,a),a.t=V(e,a.t,n.t),n.to(a);break;case R.OPR_CONCAT:{Le(e,a);let t=D(e,a);a.k===l.VRELOCABLE&&t.opcode===M.OP_CONCAT?(L(n.u.info===t.B-1),se(e,n),E.SETARG_B(t,n.u.info),n.k=l.VRELOCABLE,n.u.info=a.u.info):(Ae(e,a),Me(e,M.OP_CONCAT,n,a,i));break}case R.OPR_ADD:case R.OPR_SUB:case R.OPR_MUL:case R.OPR_DIV:case R.OPR_IDIV:case R.OPR_MOD:case R.OPR_POW:case R.OPR_BAND:case R.OPR_BOR:case R.OPR_BXOR:case R.OPR_SHL:case R.OPR_SHR:Ie(t+r,n,a)||Me(e,t+M.OP_ADD,n,a,i);break;case R.OPR_EQ:case R.OPR_LT:case R.OPR_LE:case R.OPR_NE:case R.OPR_GT:case R.OPR_GE:!function(e,t,n,a){let r,i=k.expkind;n.k===i.VK?r=E.RKASK(n.u.info):(L(n.k===i.VNONRELOC),r=n.u.info);let l=Se(e,a);switch(oe(e,n,a),t){case R.OPR_NE:n.u.info=j(e,M.OP_EQ,0,r,l);break;case R.OPR_GT:case R.OPR_GE:{let a=t-R.OPR_NE+M.OP_EQ;n.u.info=j(e,a,1,l,r);break}default:{let a=t-R.OPR_EQ+M.OP_EQ;n.u.info=j(e,a,1,r,l);break}}n.k=i.VJMP}(e,t,n,a)}return n},e.exports.luaK_prefix=function(e,t,n,a){let r=new k.expdesc;switch(r.k=k.expkind.VKINT,r.u.ival=r.u.nval=r.u.info=0,r.t=P,r.f=P,t){case O.OPR_MINUS:case O.OPR_BNOT:if(Ie(t+_,n,r))break;case O.OPR_LEN:!function(e,t,n,a){let r=ye(e,n);se(e,n),n.u.info=Q(e,t,0,r,0),n.k=k.expkind.VRELOCABLE,Ue(e,a)}(e,t+M.OP_UNM,n,a);break;case O.OPR_NOT:!function(e,t){let n=k.expkind;switch(me(e,t),t.k){case n.VNIL:case n.VFALSE:t.k=n.VTRUE;break;case n.VK:case n.VKFLT:case n.VKINT:case n.VTRUE:t.k=n.VFALSE;break;case n.VJMP:Te(e,t);break;case n.VRELOCABLE:case n.VNONRELOC:be(e,t),se(e,t),t.u.info=Q(e,M.OP_NOT,0,t.u.info,0),t.k=n.VRELOCABLE}{let e=t.f;t.f=t.t,t.t=e}Y(e,t.f),Y(e,t.t)}(e,n)}},e.exports.luaK_reserveregs=ie,e.exports.luaK_ret=function(e,t,n){Q(e,M.OP_RETURN,t,n+1,0)},e.exports.luaK_self=function(e,t,n){ye(e,t);let a=t.u.info;se(e,t),t.u.info=e.freereg,t.k=k.expkind.VNONRELOC,ie(e,2),Q(e,M.OP_SELF,t.u.info,a,Se(e,n)),se(e,n)},e.exports.luaK_setlist=function(e,t,n,r){let i=(n-1)/E.LFIELDS_PER_FLUSH+1,l=r===a?0:r;L(0!==r&&r<=E.LFIELDS_PER_FLUSH),i<=E.MAXARG_C?Q(e,M.OP_SETLIST,t,l,i):i<=E.MAXARG_Ax?(Q(e,M.OP_SETLIST,t,l,0),ne(e,i)):S.luaX_syntaxerror(e.ls,y("constructor too long",!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(e,t){fe(e,t,a)},e.exports.luaK_setoneret=_e,e.exports.luaK_setreturns=fe,e.exports.luaK_storevar=function(e,t,n){let a=k.expkind;switch(t.k){case a.VLOCAL:return se(e,n),void ve(e,n,t.u.info);case a.VUPVAL:{let a=ye(e,n);Q(e,M.OP_SETUPVAL,a,t.u.info,0);break}case a.VINDEXED:{let r=t.u.ind.vt===a.VLOCAL?M.OP_SETTABLE:M.OP_SETTABUP,i=Se(e,n);Q(e,r,t.u.ind.t,t.u.ind.idx,i);break}}se(e,n)},e.exports.luaK_stringK=function(e,t){let n=new U(g,t);return ue(e,n,n)}},8821:(e,t,n)=>{"use strict";const{LUA_HOOKCOUNT:a,LUA_HOOKLINE:r,LUA_MASKCOUNT:i,LUA_MASKLINE:l,constant_types:{LUA_TBOOLEAN:s,LUA_TNIL:o,LUA_TTABLE:u},thread_status:{LUA_ERRRUN:c,LUA_YIELD:d},from_userstring:h,luastring_eq:f,luastring_indexOf:_,to_luastring:m}=n(9775),{api_check:p,lua_assert:g}=n(3568),{LUA_IDSIZE:b}=n(947),w=n(8973),v=n(983),A=n(8897),y=n(7278),L=n(6435),S=n(6159),T=n(6137),E=n(3718),k=n(7670),x=n(427),I=function(e){return g(e.callstatus&T.CIST_LUA),e.l_savedpc-1},M=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[I(e)]:-1},U=function(e){if(e.status===d){let t=e.ci,n=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=n}},P=function(e,t){g(t<e.upvalues.length);let n=e.upvalues[t].name;return null===n?m("?",!0):n.getstr()},R=function(e,t,n){let a,r=null;if(t.callstatus&T.CIST_LUA){if(n<0)return function(e,t){let n=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-n?null:{pos:e.funcOff+n+t,name:m("(*vararg)",!0)}}(t,-n);a=t.l_base,r=A.luaF_getlocalname(t.func.value.p,n,I(t))}else a=t.funcOff+1;if(null===r){if(!((t===e.ci?e.top:t.next.funcOff)-a>=n&&n>0))return null;r=m("(*temporary)",!0)}return{pos:a+(n-1),name:r}},O=function(e,t){if(null===t||t instanceof L.CClosure)e.source=m("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=m("J",!0);else{let n=t.p;e.source=n.source?n.source.getstr():m("=?",!0),e.linedefined=n.linedefined,e.lastlinedefined=n.lastlinedefined,e.what=0===e.linedefined?m("main",!0):m("Lua",!0)}e.short_src=L.luaO_chunkid(e.source,b)},C=function(e,t){let n={name:null,funcname:null};return null===t?null:t.callstatus&T.CIST_FIN?(n.name=m("__gc",!0),n.funcname=m("metamethod",!0),n):!(t.callstatus&T.CIST_TAIL)&&t.previous.callstatus&T.CIST_LUA?G(e,t.previous):null},B=function(e,t,n){let a={name:null,funcname:null};if(S.ISK(n)){let t=e.k[S.INDEXK(n)];if(t.ttisstring())return a.name=t.svalue(),a}else{let a=D(e,t,n);if(a&&99===a.funcname[0])return a}return a.name=m("?",!0),a},F=function(e,t){return e<t?-1:e},D=function(e,t,n){let a={name:A.luaF_getlocalname(e,n+1,t),funcname:null};if(a.name)return a.funcname=m("local",!0),a;let r=function(e,t,n){let a=-1,r=0,i=S.OpCodesI;for(let l=0;l<t;l++){let s=e.code[l],o=s.A;switch(s.opcode){case i.OP_LOADNIL:{let e=s.B;o<=n&&n<=o+e&&(a=F(l,r));break}case i.OP_TFORCALL:n>=o+2&&(a=F(l,r));break;case i.OP_CALL:case i.OP_TAILCALL:n>=o&&(a=F(l,r));break;case i.OP_JMP:{let e=l+1+s.sBx;l<e&&e<=t&&e>r&&(r=e);break}default:S.testAMode(s.opcode)&&n===o&&(a=F(l,r))}}return a}(e,t,n),i=S.OpCodesI;if(-1!==r){let t=e.code[r];switch(t.opcode){case i.OP_MOVE:{let n=t.B;if(n<t.A)return D(e,r,n);break}case i.OP_GETTABUP:case i.OP_GETTABLE:{let n=t.C,l=t.B,s=t.opcode===i.OP_GETTABLE?A.luaF_getlocalname(e,l+1,r):P(e,l);return a.name=B(e,r,n).name,a.funcname=s&&f(s,y.LUA_ENV)?m("global",!0):m("field",!0),a}case i.OP_GETUPVAL:return a.name=P(e,t.B),a.funcname=m("upvalue",!0),a;case i.OP_LOADK:case i.OP_LOADKX:{let n=t.opcode===i.OP_LOADK?t.Bx:e.code[r+1].Ax;if(e.k[n].ttisstring())return a.name=e.k[n].svalue(),a.funcname=m("constant",!0),a;break}case i.OP_SELF:{let n=t.C;return a.name=B(e,r,n).name,a.funcname=m("method",!0),a}}}return null},G=function(e,t){let n={name:null,funcname:null},a=0,r=t.func.value.p,i=I(t),l=r.code[i],s=S.OpCodesI;if(t.callstatus&T.CIST_HOOKED)return n.name=m("?",!0),n.funcname=m("hook",!0),n;switch(l.opcode){case s.OP_CALL:case s.OP_TAILCALL:return D(r,i,l.A);case s.OP_TFORCALL:return n.name=m("for iterator",!0),n.funcname=m("for iterator",!0),n;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:a=k.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:a=k.TMS.TM_NEWINDEX;break;case s.OP_ADD:a=k.TMS.TM_ADD;break;case s.OP_SUB:a=k.TMS.TM_SUB;break;case s.OP_MUL:a=k.TMS.TM_MUL;break;case s.OP_MOD:a=k.TMS.TM_MOD;break;case s.OP_POW:a=k.TMS.TM_POW;break;case s.OP_DIV:a=k.TMS.TM_DIV;break;case s.OP_IDIV:a=k.TMS.TM_IDIV;break;case s.OP_BAND:a=k.TMS.TM_BAND;break;case s.OP_BOR:a=k.TMS.TM_BOR;break;case s.OP_BXOR:a=k.TMS.TM_BXOR;break;case s.OP_SHL:a=k.TMS.TM_SHL;break;case s.OP_SHR:a=k.TMS.TM_SHR;break;case s.OP_UNM:a=k.TMS.TM_UNM;break;case s.OP_BNOT:a=k.TMS.TM_BNOT;break;case s.OP_LEN:a=k.TMS.TM_LEN;break;case s.OP_CONCAT:a=k.TMS.TM_CONCAT;break;case s.OP_EQ:a=k.TMS.TM_EQ;break;case s.OP_LT:a=k.TMS.TM_LT;break;case s.OP_LE:a=k.TMS.TM_LE;break;default:return null}return n.name=e.l_G.tmname[a].getstr(),n.funcname=m("metamethod",!0),n},N=function(e,t){let n=e.ci,a=null;if(n.callstatus&T.CIST_LUA){a=function(e,t,n){let a=t.func.value;for(let e=0;e<a.nupvalues;e++)if(a.upvals[e]===n)return{name:P(a.p,e),funcname:m("upvalue",!0)};return null}(0,n,t);let r=function(e,t,n){for(let a=t.l_base;a<t.top;a++)if(e.stack[a]===n)return a;return!1}(e,n,t);!a&&r&&(a=D(n.func.value.p,I(n),r-n.l_base))}return a?L.luaO_pushfstring(e,m(" (%s '%s')",!0),a.funcname,a.name):m("",!0)},V=function(e,t,n){let a=k.luaT_objtypename(e,t);j(e,m("attempt to %s a %s value%s",!0),n,a,N(e,t))},H=function(e,t,n,a){let r;return r=n?L.luaO_chunkid(n.getstr(),b):m("?",!0),L.luaO_pushfstring(e,m("%s:%d: %s",!0),r,a,t)},j=function(e,t,...n){let a=e.ci,r=L.luaO_pushvfstring(e,t,n);a.callstatus&T.CIST_LUA&&H(e,r,a.func.value.p.source,M(a)),K(e)},K=function(e){if(0!==e.errfunc){let t=e.errfunc;L.pushobj2s(e,e.stack[e.top-1]),L.setobjs2s(e,e.top-2,t),v.luaD_callnoyield(e,e.top-2,1)}v.luaD_throw(e,c)};e.exports.luaG_addinfo=H,e.exports.luaG_concaterror=function(e,t,n){(t.ttisstring()||x.cvt2str(t))&&(t=n),V(e,t,m("concatenate",!0))},e.exports.luaG_errormsg=K,e.exports.luaG_opinterror=function(e,t,n,a){!1===x.tonumber(t)&&(n=t),V(e,n,a)},e.exports.luaG_ordererror=function(e,t,n){let a=k.luaT_objtypename(e,t),r=k.luaT_objtypename(e,n);f(a,r)?j(e,m("attempt to compare two %s values",!0),a):j(e,m("attempt to compare %s with %s",!0),a,r)},e.exports.luaG_runerror=j,e.exports.luaG_tointerror=function(e,t,n){!1===x.tointeger(t)&&(n=t),j(e,m("number%s has no integer representation",!0),N(e,n))},e.exports.luaG_traceexec=function(e){let t=e.ci,n=e.hookmask,s=0==--e.hookcount&&n&i;if(s)e.hookcount=e.basehookcount;else if(!(n&l))return;if(t.callstatus&T.CIST_HOOKYIELD)t.callstatus&=~T.CIST_HOOKYIELD;else{if(s&&v.luaD_hook(e,a,-1),n&l){let n=t.func.value.p,a=t.l_savedpc-1,i=0!==n.lineinfo.length?n.lineinfo[a]:-1;(0===a||t.l_savedpc<=e.oldpc||i!==(0!==n.lineinfo.length?n.lineinfo[e.oldpc-1]:-1))&&v.luaD_hook(e,r,i)}e.oldpc=t.l_savedpc,e.status===d&&(s&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=T.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],v.luaD_throw(e,d))}},e.exports.luaG_typeerror=V,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,n){let a,r,i,l;return t=h(t),U(e),62===t[0]?(i=null,l=e.stack[e.top-1],p(e,l.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(i=n.i_ci,l=i.func,g(i.func.ttisfunction())),r=l.ttisclosure()?l.value:null,a=function(e,t,n,a,r){let i=1;for(;t.length>0;t=t.subarray(1))switch(t[0]){case 83:O(n,a);break;case 108:n.currentline=r&&r.callstatus&T.CIST_LUA?M(r):-1;break;case 117:n.nups=null===a?0:a.nupvalues,null===a||a instanceof L.CClosure?(n.isvararg=!0,n.nparams=0):(n.isvararg=a.p.is_vararg,n.nparams=a.p.numparams);break;case 116:n.istailcall=r?r.callstatus&T.CIST_TAIL:0;break;case 110:{let t=C(e,r);null===t?(n.namewhat=m("",!0),n.name=null):(n.namewhat=t.funcname,n.name=t.name);break}case 76:case 102:break;default:i=0}return i}(e,t,n,r,i),_(t,102)>=0&&(L.pushobj2s(e,l),p(e,e.top<=e.ci.top,"stack overflow")),U(e),_(t,76)>=0&&function(e,t){if(null===t||t instanceof L.CClosure)e.stack[e.top]=new L.TValue(o,null),w.api_incr_top(e);else{let n=t.p.lineinfo,a=E.luaH_new(e);e.stack[e.top]=new L.TValue(u,a),w.api_incr_top(e);let r=new L.TValue(s,!0);for(let e=0;e<n.length;e++)E.luaH_setint(a,n[e],r)}}(e,r),a},e.exports.lua_getlocal=function(e,t,n){let a;if(U(e),null===t)a=e.stack[e.top-1].ttisLclosure()?A.luaF_getlocalname(e.stack[e.top-1].value.p,n,0):null;else{let r=R(e,t.i_ci,n);r?(a=r.name,L.pushobj2s(e,e.stack[r.pos]),p(e,e.top<=e.ci.top,"stack overflow")):a=null}return U(e),a},e.exports.lua_getstack=function(e,t,n){let a,r;if(t<0)return 0;for(a=e.ci;t>0&&a!==e.base_ci;a=a.previous)t--;return 0===t&&a!==e.base_ci?(r=1,n.i_ci=a):r=0,r},e.exports.lua_sethook=function(e,t,n,a){null!==t&&0!==n||(n=0,t=null),e.ci.callstatus&T.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=a,e.hookcount=e.basehookcount,e.hookmask=n},e.exports.lua_setlocal=function(e,t,n){let a;U(e);let r=R(e,t.i_ci,n);return r?(a=r.name,L.setobjs2s(e,r.pos,e.top-1),delete e.stack[--e.top]):a=null,U(e),a}},983:(e,t,n)=>{"use strict";const{LUA_HOOKCALL:a,LUA_HOOKRET:r,LUA_HOOKTAILCALL:i,LUA_MASKCALL:l,LUA_MASKLINE:s,LUA_MASKRET:o,LUA_MINSTACK:u,LUA_MULTRET:c,LUA_SIGNATURE:d,constant_types:{LUA_TCCL:h,LUA_TLCF:f,LUA_TLCL:_,LUA_TNIL:m},thread_status:{LUA_ERRMEM:p,LUA_ERRERR:g,LUA_ERRRUN:b,LUA_ERRSYNTAX:w,LUA_OK:v,LUA_YIELD:A},lua_Debug:y,luastring_indexOf:L,to_luastring:S}=n(9775),T=n(8973),E=n(8821),k=n(8897),{api_check:x,lua_assert:I,LUAI_MAXCCALLS:M}=n(3568),U=n(6435),P=n(6159),R=n(1391),O=n(6137),{luaS_newliteral:C}=n(8878),B=n(7670),{LUAI_MAXSTACK:F}=n(947),D=n(7866),G=n(427),{MBuffer:N}=n(4161),V=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new U.TValue(m,null);else for(;e.top>t;)delete e.stack[--e.top]},H=function(e,t,n){let a=e.top;for(;e.top<n+1;)e.stack[e.top++]=new U.TValue(m,null);switch(t){case p:U.setsvalue2s(e,n,C(e,"not enough memory"));break;case g:U.setsvalue2s(e,n,C(e,"error in error handling"));break;default:U.setobjs2s(e,n,a-1)}for(;e.top>n+1;)delete e.stack[--e.top]},j=F+200,K=function(e,t){I(t<=F||t==j),I(e.stack_last==e.stack.length-O.EXTRA_STACK),e.stack.length=t,e.stack_last=t-O.EXTRA_STACK},z=function(e,t){let n=e.stack.length;if(n>F)ne(e,g);else{let a=e.top+t+O.EXTRA_STACK,r=2*n;r>F&&(r=F),r<a&&(r=a),r>F?(K(e,j),E.luaG_runerror(e,S("stack overflow",!0))):K(e,r)}},X=function(e,t){e.stack_last-e.top<=t&&z(e,t)},J=function(e){let t=function(e){let t=e.top;for(let n=e.ci;null!==n;n=n.previous)t<n.top&&(t=n.top);return I(t<=e.stack_last),t+1}(e),n=t+Math.floor(t/8)+2*O.EXTRA_STACK;n>F&&(n=F),e.stack.length>F&&O.luaE_freeCI(e),t<=F-O.EXTRA_STACK&&n<e.stack.length&&K(e,n)},Y=function(e,t,n){let r=e.stack[t];switch(r.type){case h:case f:{let i=r.type===h?r.value.f:r.value;X(e,u);let s=O.luaE_extendCI(e);s.funcOff=t,s.nresults=n,s.func=r,s.top=e.top+u,I(s.top<=e.stack_last),s.callstatus=0,e.hookmask&l&&W(e,a,-1);let o=i(e);if("number"!=typeof o||o<0||(0|o)!==o)throw Error("invalid return value from JS function (expected integer)");return T.api_checknelems(e,o),$(e,s,e.top-o,o),!0}case _:{let a,i=r.value.p,s=e.top-t-1,o=i.maxstacksize;if(X(e,o),i.is_vararg)a=Q(e,i,s);else{for(;s<i.numparams;s++)e.stack[e.top++]=new U.TValue(m,null);a=t+1}let u=O.luaE_extendCI(e);return u.funcOff=t,u.nresults=n,u.func=r,u.l_base=a,u.top=a+o,V(e,u.top),u.l_code=i.code,u.l_savedpc=0,u.callstatus=O.CIST_LUA,e.hookmask&l&&Z(e,u),!1}default:return X(e,1),ee(e,t,r),Y(e,t,n)}},$=function(e,t,n,a){let i=t.nresults;e.hookmask&(o|s)&&(e.hookmask&o&&W(e,r,-1),e.oldpc=t.previous.l_savedpc);let l=t.funcOff;return e.ci=t.previous,e.ci.next=null,q(e,n,l,a,i)},q=function(e,t,n,a,r){switch(r){case 0:break;case 1:0===a?e.stack[n].setnilvalue():U.setobjs2s(e,n,t);break;case c:for(let r=0;r<a;r++)U.setobjs2s(e,n+r,t+r);for(let t=e.top;t>=n+a;t--)delete e.stack[t];return e.top=n+a,!1;default:{let i;if(r<=a)for(i=0;i<r;i++)U.setobjs2s(e,n+i,t+i);else{for(i=0;i<a;i++)U.setobjs2s(e,n+i,t+i);for(;i<r;i++)n+i>=e.top?e.stack[n+i]=new U.TValue(m,null):e.stack[n+i].setnilvalue()}break}}let i=n+r;for(let t=e.top;t>=i;t--)delete e.stack[t];return e.top=i,!0},W=function(e,t,n){let a=e.hook;if(a&&e.allowhook){let r=e.ci,i=e.top,l=r.top,s=new y;s.event=t,s.currentline=n,s.i_ci=r,X(e,u),r.top=e.top+u,I(r.top<=e.stack_last),e.allowhook=0,r.callstatus|=O.CIST_HOOKED,a(e,s),I(!e.allowhook),e.allowhook=1,r.top=l,V(e,i),r.callstatus&=~O.CIST_HOOKED}},Z=function(e,t){let n=a;t.l_savedpc++,t.previous.callstatus&O.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==P.OpCodesI.OP_TAILCALL&&(t.callstatus|=O.CIST_TAIL,n=i),W(e,n,-1),t.l_savedpc--},Q=function(e,t,n){let a,r=t.numparams,i=e.top-n,l=e.top;for(a=0;a<r&&a<n;a++)U.pushobj2s(e,e.stack[i+a]),e.stack[i+a].setnilvalue();for(;a<r;a++)e.stack[e.top++]=new U.TValue(m,null);return l},ee=function(e,t,n){let a=B.luaT_gettmbyobj(e,n,B.TMS.TM_CALL);a.ttisfunction(a)||E.luaG_typeerror(e,n,S("call",!0)),U.pushobj2s(e,e.stack[e.top-1]);for(let n=e.top-2;n>t;n--)U.setobjs2s(e,n,n-1);U.setobj2s(e,t,a)},te=function(e,t,n){++e.nCcalls>=M&&function(e){e.nCcalls===M?E.luaG_runerror(e,S("JS stack overflow",!0)):e.nCcalls>=M+(M>>3)&&ne(e,g)}(e),Y(e,t,n)||G.luaV_execute(e),e.nCcalls--},ne=function(e,t){if(e.errorJmp)throw e.errorJmp.status=t,e.errorJmp;{let n=e.l_G;if(e.status=t,!n.mainthread.errorJmp){let a=n.panic;throw a&&(H(e,t,e.top),e.ci.top<e.top&&(e.ci.top=e.top),a(e)),new Error(`Aborted ${t}`)}n.mainthread.stack[n.mainthread.top++]=e.stack[e.top-1],ne(n.mainthread,t)}},ae=function(e,t,n){let a=e.nCcalls,r={status:v,previous:e.errorJmp};e.errorJmp=r;try{t(e,n)}catch(t){if(r.status===v){let n=e.l_G.atnativeerror;if(n)try{if(r.status=v,T.lua_pushcfunction(e,n),T.lua_pushlightuserdata(e,t),de(e,e.top-2,1),0!==e.errfunc){let t=e.errfunc;U.pushobj2s(e,e.stack[e.top-1]),U.setobjs2s(e,e.top-2,t),de(e,e.top-2,1)}r.status=b}catch(e){r.status===v&&(r.status=-1)}else r.status=-1}}return e.errorJmp=r.previous,e.nCcalls=a,r.status},re=function(e,t){let n=e.ci;I(null!==n.c_k&&0===e.nny),I(n.callstatus&O.CIST_YPCALL||t===A),n.callstatus&O.CIST_YPCALL&&(n.callstatus&=~O.CIST_YPCALL,e.errfunc=n.c_old_errfunc),n.nresults===c&&e.ci.top<e.top&&(e.ci.top=e.top);let a=(0,n.c_k)(e,t,n.c_ctx);T.api_checknelems(e,a),$(e,n,e.top-a,a)},ie=function(e,t){for(null!==t&&re(e,t);e.ci!==e.base_ci;)e.ci.callstatus&O.CIST_LUA?(G.luaV_finishOp(e),G.luaV_execute(e)):re(e,A)},le=function(e,t){let n=function(e){for(let t=e.ci;null!==t;t=t.previous)if(t.callstatus&O.CIST_YPCALL)return t;return null}(e);if(null===n)return 0;let a=n.extra;return k.luaF_close(e,a),H(e,t,a),e.ci=n,e.allowhook=n.callstatus&O.CIST_OAH,e.nny=0,J(e),e.errfunc=n.c_old_errfunc,1},se=function(e,t,n){let a=C(e,t);if(0===n)U.pushsvalue2s(e,a),x(e,e.top<=e.ci.top,"stack overflow");else{for(let t=1;t<n;t++)delete e.stack[--e.top];U.setsvalue2s(e,e.top-1,a)}return b},oe=function(e,t){let n=e.top-t,a=e.ci;e.status===v?Y(e,n-1,c)||G.luaV_execute(e):(I(e.status===A),e.status=v,a.funcOff=a.extra,a.func=e.stack[a.funcOff],a.callstatus&O.CIST_LUA?G.luaV_execute(e):(null!==a.c_k&&(t=a.c_k(e,A,a.c_ctx),T.api_checknelems(e,t),n=e.top-t),$(e,a,n,t)),ie(e,null))},ue=function(e,t,n,a){let r=e.ci;return T.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?E.luaG_runerror(e,S("attempt to yield across a JS-call boundary",!0)):E.luaG_runerror(e,S("attempt to yield from outside a coroutine",!0))),e.status=A,r.extra=r.funcOff,r.callstatus&O.CIST_LUA?x(e,null===a,"hooks cannot continue after yielding"):(r.c_k=a,null!==a&&(r.c_ctx=n),r.funcOff=e.top-t-1,r.func=e.stack[r.funcOff],ne(e,A)),I(r.callstatus&O.CIST_HOOKED),0},ce=function(e,t,n,a,r){let i=e.ci,l=e.allowhook,s=e.nny,o=e.errfunc;e.errfunc=r;let u=ae(e,t,n);return u!==v&&(k.luaF_close(e,a),H(e,u,a),e.ci=i,e.allowhook=l,e.nny=s,J(e)),e.errfunc=o,u},de=function(e,t,n){e.nny++,te(e,t,n),e.nny--};class he{constructor(e,t,n){this.z=e,this.buff=new N,this.dyd=new R.Dyndata,this.mode=n,this.name=t}}const fe=function(e,t,n){t&&-1===L(t,n[0])&&(U.luaO_pushfstring(e,S("attempt to load a %s chunk (mode is '%s')"),n,t),ne(e,w))},_e=function(e,t){let n,a=t.z.zgetc();a===d[0]?(fe(e,t.mode,S("binary",!0)),n=D.luaU_undump(e,t.z,t.name)):(fe(e,t.mode,S("text",!0)),n=R.luaY_parser(e,t.z,t.buff,t.dyd,t.name,a)),I(n.nupvalues===n.p.upvalues.length),k.luaF_initupvals(e,n)};e.exports.adjust_top=V,e.exports.luaD_call=te,e.exports.luaD_callnoyield=de,e.exports.luaD_checkstack=X,e.exports.luaD_growstack=z,e.exports.luaD_hook=W,e.exports.luaD_inctop=function(e){X(e,1),e.stack[e.top++]=new U.TValue(m,null)},e.exports.luaD_pcall=ce,e.exports.luaD_poscall=$,e.exports.luaD_precall=Y,e.exports.luaD_protectedparser=function(e,t,n,a){let r=new he(t,n,a);e.nny++;let i=ce(e,_e,r,e.top,e.errfunc);return e.nny--,i},e.exports.luaD_rawrunprotected=ae,e.exports.luaD_reallocstack=K,e.exports.luaD_throw=ne,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,n){let a=e.nny;if(e.status===v){if(e.ci!==e.base_ci)return se(e,"cannot resume non-suspended coroutine",n)}else if(e.status!==A)return se(e,"cannot resume dead coroutine",n);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=M)return se(e,"JS stack overflow",n);e.nny=0,T.api_checknelems(e,e.status===v?n+1:n);let r=ae(e,oe,n);if(-1===r)r=b;else{for(;r>A&&le(e,r);)r=ae(e,ie,r);r>A?(e.status=r,H(e,r,e.top),e.ci.top=e.top):I(r===e.status)}return e.nny=a,e.nCcalls--,I(e.nCcalls===(t?t.nCcalls:0)),r},e.exports.lua_yield=function(e,t){ue(e,t,0,null)},e.exports.lua_yieldk=ue},1957:(e,t,n)=>{"use strict";const{LUA_SIGNATURE:a,LUA_VERSION_MAJOR:r,LUA_VERSION_MINOR:i,constant_types:{LUA_TBOOLEAN:l,LUA_TLNGSTR:s,LUA_TNIL:o,LUA_TNUMFLT:u,LUA_TNUMINT:c,LUA_TSHRSTR:d},luastring_of:h}=n(9775),f=h(25,147,13,10,26,10),_=16*Number(r)+Number(i);class m{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const p=function(e,t,n){0===n.status&&t>0&&(n.status=n.writer(n.L,e,t,n.data))},g=function(e,t){p(h(e),1,t)},b=function(e,t){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);let a=new Uint8Array(n);p(a,4,t)},w=function(e,t){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);let a=new Uint8Array(n);p(a,4,t)},v=function(e,t){let n=new ArrayBuffer(8);new DataView(n).setFloat64(0,e,!0);let a=new Uint8Array(n);p(a,8,t)},A=function(e,t){if(null===e)g(0,t);else{let n=e.tsslen()+1,a=e.getstr();n<255?g(n,t):(g(255,t),w(n,t)),p(a,n-1,t)}},y=function(e,t,n){n.strip||e.source===t?A(null,n):A(e.source,n),b(e.linedefined,n),b(e.lastlinedefined,n),g(e.numparams,n),g(e.is_vararg?1:0,n),g(e.maxstacksize,n),function(e,t){let n=e.code.map((e=>e.code));b(n.length,t);for(let e=0;e<n.length;e++)b(n[e],t)}(e,n),function(e,t){let n=e.k.length;b(n,t);for(let a=0;a<n;a++){let n=e.k[a];switch(g(n.ttype(),t),n.ttype()){case o:break;case l:g(n.value?1:0,t);break;case u:v(n.value,t);break;case c:w(n.value,t);break;case d:case s:A(n.tsvalue(),t)}}}(e,n),function(e,t){let n=e.upvalues.length;b(n,t);for(let a=0;a<n;a++)g(e.upvalues[a].instack?1:0,t),g(e.upvalues[a].idx,t)}(e,n),function(e,t){let n=e.p.length;b(n,t);for(let a=0;a<n;a++)y(e.p[a],e.source,t)}(e,n),function(e,t){let n=t.strip?0:e.lineinfo.length;b(n,t);for(let a=0;a<n;a++)b(e.lineinfo[a],t);n=t.strip?0:e.locvars.length,b(n,t);for(let a=0;a<n;a++)A(e.locvars[a].varname,t),b(e.locvars[a].startpc,t),b(e.locvars[a].endpc,t);n=t.strip?0:e.upvalues.length,b(n,t);for(let a=0;a<n;a++)A(e.upvalues[a].name,t)}(e,n)};e.exports.luaU_dump=function(e,t,n,r,i){let l=new m;return l.L=e,l.writer=n,l.data=r,l.strip=i,l.status=0,function(e){p(a,a.length,e),g(_,e),g(0,e),p(f,f.length,e),g(4,e),g(4,e),g(4,e),g(4,e),g(8,e),w(22136,e),v(370.5,e)}(l),g(t.upvalues.length,l),y(t,null,l),l.status}},8897:(e,t,n)=>{"use strict";const{constant_types:{LUA_TNIL:a}}=n(9775),r=n(6435);e.exports.MAXUPVAL=255,e.exports.Proto=class{constructor(e){this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},e.exports.luaF_findupval=function(e,t){return e.stack[t]},e.exports.luaF_close=function(e,t){for(let n=t;n<e.top;n++){let t=e.stack[n];e.stack[n]=new r.TValue(t.type,t.value)}},e.exports.luaF_getlocalname=function(e,t,n){for(let a=0;a<e.locvars.length&&e.locvars[a].startpc<=n;a++)if(n<e.locvars[a].endpc&&0===--t)return e.locvars[a].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(let e=0;e<t.nupvalues;e++)t.upvals[e]=new r.TValue(a,null)},e.exports.luaF_newLclosure=function(e,t){return new r.LClosure(e,t)}},5568:(e,t,n)=>{"use strict";const{luastring_of:a}=n(9775),r=a(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return 0!=(2&r[e+1])},e.exports.lislalnum=function(e){return 0!=(3&r[e+1])},e.exports.lislalpha=function(e){return 0!=(1&r[e+1])},e.exports.lisprint=function(e){return 0!=(4&r[e+1])},e.exports.lisspace=function(e){return 0!=(8&r[e+1])},e.exports.lisxdigit=function(e){return 0!=(16&r[e+1])}},7278:(e,t,n)=>{"use strict";const{constant_types:{LUA_TBOOLEAN:a,LUA_TLNGSTR:r},thread_status:{LUA_ERRSYNTAX:i},to_luastring:l}=n(9775),{LUA_MINBUFFER:s,MAX_INT:o,lua_assert:u}=n(3568),c=n(8821),d=n(983),{lisdigit:h,lislalnum:f,lislalpha:_,lisspace:m,lisxdigit:p}=n(5568),g=n(6435),{luaS_bless:b,luaS_hash:w,luaS_hashlongstr:v,luaS_new:A}=n(8878),y=n(3718),{EOZ:L,luaZ_buffer:S,luaZ_buffremove:T,luaZ_resetbuffer:E,luaZ_resizebuffer:k}=n(4161),x=257,I=l("_ENV",!0),M=289,U=290,P=293,R={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:M,TK_FLT:U,TK_INT:291,TK_NAME:292,TK_STRING:P},O=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map(((e,t)=>l(e)));class C{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class B{constructor(){this.token=NaN,this.seminfo=new C}}const F=function(e,t){let n=e.buff;if(n.n+1>n.buffer.length){n.buffer.length>=o/2&&Y(e,l("lexical element too long",!0),0);let t=2*n.buffer.length;k(e.L,n,t)}n.buffer[n.n++]=t<0?255+t+1:t},D=function(e,t){if(t<x)return g.luaO_pushfstring(e.L,l("'%c'",!0),t);{let n=O[t-x];return t<M?g.luaO_pushfstring(e.L,l("'%s'",!0),n):n}},G=function(e){return 10===e.current||13===e.current},N=function(e){e.current=e.z.zgetc()},V=function(e){F(e,e.current),N(e)},H=new g.TValue(a,!0),j=function(e,t){let n=e.L,a=A(n,t),i=e.h.strong.get(v(a));if(i)a=i.key.tsvalue();else{let t=new g.TValue(r,a);y.luaH_setfrom(n,e.h,t,H)}return a},K=function(e){let t=e.current;u(G(e)),N(e),G(e)&&e.current!==t&&N(e),++e.linenumber>=o&&Y(e,l("chunk has too many lines",!0),0)},z=function(e,t){return e.current===t&&(N(e),!0)},X=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(V(e),!0)},J=function(e,t){let n="Ee",a=e.current;for(u(h(e.current)),V(e),48===a&&X(e,"xX")&&(n="Pp");;)if(X(e,n)&&X(e,"-+"),p(e.current))V(e);else{if(46!==e.current)break;V(e)}let r=new g.TValue;return 0===g.luaO_str2num(S(e.buff),r)&&Y(e,l("malformed number",!0),U),r.ttisinteger()?(t.i=r.value,291):(u(r.ttisfloat()),t.r=r.value,U)},Y=function(e,t,n){t=c.luaG_addinfo(e.L,t,e.source,e.linenumber),n&&g.luaO_pushfstring(e.L,l("%s near %s"),t,function(e,t){switch(t){case 292:case P:case U:case 291:return g.luaO_pushfstring(e.L,l("'%s'",!0),S(e.buff));default:return D(e,t)}}(e,n)),d.luaD_throw(e.L,i)},$=function(e){let t=0,n=e.current;for(u(91===n||93===n),V(e);61===e.current;)V(e),t++;return e.current===n?t:-t-1},q=function(e,t,n){let a=e.linenumber;V(e),G(e)&&K(e);let r=!1;for(;!r;)switch(e.current){case L:Y(e,l(`unfinished long ${t?"string":"comment"} (starting at line ${a})`),M);break;case 93:$(e)===n&&(V(e),r=!0);break;case 10:case 13:F(e,10),K(e),t||E(e.buff);break;default:t?V(e):N(e)}t&&(t.ts=j(e,e.buff.buffer.subarray(2+n,e.buff.n-(2+n))))},W=function(e,t,n){t||(e.current!==L&&V(e),Y(e,n,P))},Z=function(e){return V(e),W(e,p(e.current),l("hexadecimal digit expected",!0)),g.luaO_hexavalue(e.current)},Q=function(e){let t=Z(e);return t=(t<<4)+Z(e),T(e.buff,2),t},ee=function(e){let t=new Uint8Array(g.UTF8BUFFSZ),n=g.luaO_utf8esc(t,function(e){let t=4;V(e),W(e,123===e.current,l("missing '{'",!0));let n=Z(e);for(V(e);p(e.current);)t++,n=(n<<4)+g.luaO_hexavalue(e.current),W(e,n<=1114111,l("UTF-8 value too large",!0)),V(e);return W(e,125===e.current,l("missing '}'",!0)),N(e),T(e.buff,t),n}(e));for(;n>0;n--)F(e,t[g.UTF8BUFFSZ-n])},te=function(e){let t,n=0;for(t=0;t<3&&h(e.current);t++)n=10*n+e.current-48,V(e);return W(e,n<=255,l("decimal escape too large",!0)),T(e.buff,t),n},ne=function(e,t,n){for(V(e);e.current!==t;)switch(e.current){case L:Y(e,l("unfinished string",!0),M);break;case 10:case 13:Y(e,l("unfinished string",!0),P);break;case 92:{let t,n;switch(V(e),e.current){case 97:n=7,t="read_save";break;case 98:n=8,t="read_save";break;case 102:n=12,t="read_save";break;case 110:n=10,t="read_save";break;case 114:n=13,t="read_save";break;case 116:n=9,t="read_save";break;case 118:n=11,t="read_save";break;case 120:n=Q(e),t="read_save";break;case 117:ee(e),t="no_save";break;case 10:case 13:K(e),n=10,t="only_save";break;case 92:case 34:case 39:n=e.current,t="read_save";break;case L:t="no_save";break;case 122:for(T(e.buff,1),N(e);m(e.current);)G(e)?K(e):N(e);t="no_save";break;default:W(e,h(e.current),l("invalid escape sequence",!0)),n=te(e),t="only_save"}"read_save"===t&&N(e),"read_save"!==t&&"only_save"!==t||(T(e.buff,1),F(e,n));break}default:V(e)}V(e),n.ts=j(e,e.buff.buffer.subarray(1,e.buff.n-1))},ae=Object.create(null);O.forEach(((e,t)=>ae[w(e)]=t));const re=function(e,t){for(E(e.buff);;)switch(u("number"==typeof e.current),e.current){case 10:case 13:K(e);break;case 32:case 12:case 9:case 11:N(e);break;case 45:if(N(e),45!==e.current)return 45;if(N(e),91===e.current){let t=$(e);if(E(e.buff),t>=0){q(e,null,t),E(e.buff);break}}for(;!G(e)&&e.current!==L;)N(e);break;case 91:{let n=$(e);return n>=0?(q(e,t,n),P):(-1!==n&&Y(e,l("invalid long string delimiter",!0),P),91)}case 61:return N(e),z(e,61)?282:61;case 60:return N(e),z(e,61)?284:z(e,60)?286:60;case 62:return N(e),z(e,61)?283:z(e,62)?287:62;case 47:return N(e),z(e,47)?279:47;case 126:return N(e),z(e,61)?285:126;case 58:return N(e),z(e,58)?288:58;case 34:case 39:return ne(e,e.current,t),P;case 46:return V(e),z(e,46)?z(e,46)?281:280:h(e.current)?J(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return J(e,t);case L:return M;default:if(_(e.current)){do{V(e)}while(f(e.current));let n=j(e,S(e.buff));t.ts=n;let a=ae[v(n)];return void 0!==a&&a<=22?a+x:292}{let t=e.current;return N(e),t}}};e.exports.FIRST_RESERVED=x,e.exports.LUA_ENV=I,e.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new B,this.lookahead=new B,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},e.exports.RESERVED=R,e.exports.isreserved=function(e){let t=ae[v(e)];return void 0!==t&&t<=22},e.exports.luaX_lookahead=function(e){return u(e.lookahead.token===M),e.lookahead.token=re(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=j,e.exports.luaX_next=function(e){e.lastline=e.linenumber,e.lookahead.token!==M?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=M):e.t.token=re(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,t,n,a,r){t.t={token:0,seminfo:new C},t.L=e,t.current=r,t.lookahead={token:M,seminfo:new C},t.z=n,t.fs=null,t.linenumber=1,t.lastline=1,t.source=a,t.envn=b(e,I),k(e,t.buff,s)},e.exports.luaX_syntaxerror=function(e,t){Y(e,t,e.t.token)},e.exports.luaX_token2str=D,e.exports.luaX_tokens=O},3568:(e,t,n)=>{"use strict";const{luai_apicheck:a}=n(947),r=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=r,e.exports.luai_apicheck=a||function(e,t){return r(t)};e.exports.api_check=function(e,t,n){return a(e,t&&n)};e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MINBUFFER=32;e.exports.luai_nummod=function(e,t,n){let a=t%n;return a*n<0&&(a+=n),a};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},6435:(e,t,n)=>{"use strict";const{LUA_OPADD:a,LUA_OPBAND:r,LUA_OPBNOT:i,LUA_OPBOR:l,LUA_OPBXOR:s,LUA_OPDIV:o,LUA_OPIDIV:u,LUA_OPMOD:c,LUA_OPMUL:d,LUA_OPPOW:h,LUA_OPSHL:f,LUA_OPSHR:_,LUA_OPSUB:m,LUA_OPUNM:p,constant_types:{LUA_NUMTAGS:g,LUA_TBOOLEAN:b,LUA_TCCL:w,LUA_TFUNCTION:v,LUA_TLCF:A,LUA_TLCL:y,LUA_TLIGHTUSERDATA:L,LUA_TLNGSTR:S,LUA_TNIL:T,LUA_TNUMBER:E,LUA_TNUMFLT:k,LUA_TNUMINT:x,LUA_TSHRSTR:I,LUA_TSTRING:M,LUA_TTABLE:U,LUA_TTHREAD:P,LUA_TUSERDATA:R},from_userstring:O,luastring_indexOf:C,luastring_of:B,to_jsstring:F,to_luastring:D}=n(9775),{lisdigit:G,lisprint:N,lisspace:V,lisxdigit:H}=n(5568),j=n(8821),K=n(983),z=n(6137),{luaS_bless:X,luaS_new:J}=n(8878),Y=n(3718),{LUA_COMPAT_FLOATSTRING:$,ldexp:q,lua_integer2str:W,lua_number2str:Z}=n(947),Q=n(427),{MAX_INT:ee,luai_nummod:te,lua_assert:ne}=n(3568),ae=n(7670),re=g,ie=g+1;class le{constructor(e,t){this.type=e,this.value=t}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(e){return this.type===e}checktype(e){return this.ttnov()===e}ttisnumber(){return this.checktype(E)}ttisfloat(){return this.checktag(k)}ttisinteger(){return this.checktag(x)}ttisnil(){return this.checktag(T)}ttisboolean(){return this.checktag(b)}ttislightuserdata(){return this.checktag(L)}ttisstring(){return this.checktype(M)}ttisshrstring(){return this.checktag(I)}ttislngstring(){return this.checktag(S)}ttistable(){return this.checktag(U)}ttisfunction(){return this.checktype(v)}ttisclosure(){return(31&this.type)===v}ttisCclosure(){return this.checktag(w)}ttisLclosure(){return this.checktag(y)}ttislcf(){return this.checktag(A)}ttisfulluserdata(){return this.checktag(R)}ttisthread(){return this.checktag(P)}ttisdeadkey(){return this.checktag(ie)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(e){this.type=k,this.value=e}chgfltvalue(e){ne(this.type==k),this.value=e}setivalue(e){this.type=x,this.value=e}chgivalue(e){ne(this.type==x),this.value=e}setnilvalue(){this.type=T,this.value=null}setfvalue(e){this.type=A,this.value=e}setpvalue(e){this.type=L,this.value=e}setbvalue(e){this.type=b,this.value=e}setsvalue(e){this.type=S,this.value=e}setuvalue(e){this.type=R,this.value=e}setthvalue(e){this.type=P,this.value=e}setclLvalue(e){this.type=y,this.value=e}setclCvalue(e){this.type=w,this.value=e}sethvalue(e){this.type=U,this.value=e}setdeadvalue(){this.type=ie,this.value=null}setfrom(e){this.type=e.type,this.value=e.value}tsvalue(){return ne(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(e,t){return F(this.svalue(),e,t,!0)}}const se=function(e,t,n){e.stack[t].setsvalue(n)},oe=new le(T,null);Object.freeze(oe),e.exports.luaO_nilobject=oe;class ue{constructor(e,t){this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=t,this.upvals=new Array(t)}}class ce{constructor(e,t,n){for(this.id=e.l_G.id_counter++,this.f=t,this.nupvalues=n,this.upvalue=new Array(n);n--;)this.upvalue[n]=new le(T,null)}}class de{constructor(e,t){this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new le(T,null),this.len=t,this.data=Object.create(null)}}const he=D("..."),fe=D('[string "'),_e=D('"]'),me=function(e){return G(e)?e-48:(223&e)-55},pe=function(e,t){let n=1;if(ne(t<=1114111),t<128)e[7]=t;else{let a=63;do{e[8-n++]=128|63&t,t>>=6,a>>=1}while(t>a);e[8-n]=~a<<1|t}return n},ge=function(e,t){let n="x"===t?function(e){let t,n=0,a=0,r=0,i=0,l=0,s=!1;for(;V(e[n]);)n++;if(((t=45===e[n])||43===e[n])&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])return null;for(n+=2;;n++)if(46===e[n]){if(s)break;s=!0}else{if(!H(e[n]))break;0===r&&48===e[n]?i++:++r<=30?a=16*a+me(e[n]):l++,s&&l--}if(i+r===0)return null;if(l*=4,112===e[n]||80===e[n]){let t,a=0;if(n++,((t=45===e[n])||43===e[n])&&n++,!G(e[n]))return null;for(;G(e[n]);)a=10*a+e[n++]-48;t&&(a=-a),l+=a}return t&&(a=-a),{n:q(a,l),i:n}}(e):function(e){try{e=F(e)}catch(e){return null}let t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;let n=parseFloat(t[0]);return isNaN(n)?null:{n,i:t[0].length}}(e);if(null===n)return null;for(;V(e[n.i]);)n.i++;return n.i===e.length||0===e[n.i]?n:null},be=[46,120,88,110,78],we={46:".",120:"x",88:"x",110:"n",78:"n"},ve=Math.floor(ee/10),Ae=ee%10,ye=function(e,t){let n;if(t.ttisinteger())n=D(W(t.value));else{let e=Z(t.value);!$&&/^[-0123456789]+$/.test(e)&&(e+=".0"),n=D(e)}t.setsvalue(X(e,n))},Le=function(e,t){K.luaD_inctop(e),se(e,e.top-1,J(e,t))},Se=function(e,t,n){let a,r=0,i=0,l=0;for(;a=C(t,37,i),-1!=a;){switch(Le(e,t.subarray(i,a)),t[a+1]){case 115:{let t=n[l++];if(null===t)t=D("(null)",!0);else{t=O(t);let e=C(t,0);-1!==e&&(t=t.subarray(0,e))}Le(e,t);break}case 99:{let t=n[l++];N(t)?Le(e,B(t)):Te(e,D("<\\%d>",!0),t);break}case 100:case 73:K.luaD_inctop(e),e.stack[e.top-1].setivalue(n[l++]),ye(e,e.stack[e.top-1]);break;case 102:K.luaD_inctop(e),e.stack[e.top-1].setfltvalue(n[l++]),ye(e,e.stack[e.top-1]);break;case 112:{let t=n[l++];if(t instanceof z.lua_State||t instanceof Y.Table||t instanceof de||t instanceof ue||t instanceof ce)Le(e,D("0x"+t.id.toString(16)));else switch(typeof t){case"undefined":Le(e,D("undefined"));break;case"number":Le(e,D("Number("+t+")"));break;case"string":Le(e,D("String("+JSON.stringify(t)+")"));break;case"boolean":Le(e,D(t?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===t){Le(e,D("null"));break}case"function":{let n=e.l_G.ids.get(t);n||(n=e.l_G.id_counter++,e.l_G.ids.set(t,n)),Le(e,D("0x"+n.toString(16)));break}default:Le(e,D("<id NYI>"))}break}case 85:{let t=new Uint8Array(8),a=pe(t,n[l++]);Le(e,t.subarray(8-a));break}case 37:Le(e,D("%",!0));break;default:j.luaG_runerror(e,D("invalid option '%%%c' to 'lua_pushfstring'"),t[a+1])}r+=2,i=a+2}return K.luaD_checkstack(e,1),Le(e,t.subarray(i)),r>0&&Q.luaV_concat(e,r+1),e.stack[e.top-1].svalue()},Te=function(e,t,...n){return Se(e,t,n)},Ee=function(e,t,n,o){switch(t){case a:return n+o|0;case m:return n-o|0;case d:return Q.luaV_imul(n,o);case c:return Q.luaV_mod(e,n,o);case u:return Q.luaV_div(e,n,o);case r:return n&o;case l:return n|o;case s:return n^o;case f:return Q.luaV_shiftl(n,o);case _:return Q.luaV_shiftl(n,-o);case p:return 0-n|0;case i:return-1^n;default:ne(0)}},ke=function(e,t,n,r){switch(t){case a:return n+r;case m:return n-r;case d:return n*r;case o:return n/r;case h:return Math.pow(n,r);case u:return Math.floor(n/r);case p:return-n;case c:return te(e,n,r);default:ne(0)}};e.exports.CClosure=ce,e.exports.LClosure=ue,e.exports.LUA_TDEADKEY=ie,e.exports.LUA_TPROTO=re,e.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},e.exports.TValue=le,e.exports.Udata=de,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,t,n,u,c){let d="number"==typeof c?e.stack[c]:c;switch(t){case r:case l:case s:case f:case _:case i:{let a,r;if(!1!==(a=Q.tointeger(n))&&!1!==(r=Q.tointeger(u)))return void d.setivalue(Ee(e,t,a,r));break}case o:case h:{let a,r;if(!1!==(a=Q.tonumber(n))&&!1!==(r=Q.tonumber(u)))return void d.setfltvalue(ke(e,t,a,r));break}default:{let a,r;if(n.ttisinteger()&&u.ttisinteger())return void d.setivalue(Ee(e,t,n.value,u.value));if(!1!==(a=Q.tonumber(n))&&!1!==(r=Q.tonumber(u)))return void d.setfltvalue(ke(e,t,a,r));break}}ne(null!==e),ae.luaT_trybinTM(e,n,u,c,t-a+ae.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){let n,a=e.length;if(61===e[0])a<t?(n=new Uint8Array(a-1),n.set(e.subarray(1))):(n=new Uint8Array(t),n.set(e.subarray(1,t+1)));else if(64===e[0])a<=t?(n=new Uint8Array(a-1),n.set(e.subarray(1))):(n=new Uint8Array(t),n.set(he),t-=he.length,n.set(e.subarray(a-t),he.length));else{n=new Uint8Array(t);let r=C(e,10);n.set(fe);let i=fe.length;a<(t-=fe.length+he.length+_e.length)&&-1===r?(n.set(e,i),i+=e.length):(-1!==r&&(a=r),a>t&&(a=t),n.set(e.subarray(0,a),i),i+=a,n.set(he,i),i+=he.length),n.set(_e,i),i+=_e.length,n=n.subarray(0,i)}return n},e.exports.luaO_hexavalue=me,e.exports.luaO_int2fb=function(e){let t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},e.exports.luaO_pushfstring=Te,e.exports.luaO_pushvfstring=Se,e.exports.luaO_str2num=function(e,t){let n=function(e){let t,n=0,a=0,r=!0;for(;V(e[n]);)n++;if(((t=45===e[n])||43===e[n])&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])for(;n<e.length&&G(e[n]);n++){let i=e[n]-48;if(a>=ve&&(a>ve||i>Ae+t))return null;a=10*a+i|0,r=!1}else for(n+=2;n<e.length&&H(e[n]);n++)a=16*a+me(e[n])|0,r=!1;for(;n<e.length&&V(e[n]);)n++;return r||n!==e.length&&0!==e[n]?null:{n:0|(t?-a:a),i:n}}(e);return null!==n?(t.setivalue(n.n),n.i+1):(n=function(e){let t=e.length,n=0;for(let a=0;a<t;a++){let t=e[a];if(-1!==be.indexOf(t)){n=t;break}}let a=we[n];return"n"===a?null:ge(e,a)}(e),null!==n?(t.setfltvalue(n.n),n.i+1):0)},e.exports.luaO_tostring=ye,e.exports.luaO_utf8esc=pe,e.exports.numarith=ke,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new le(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new le(S,t)},e.exports.setobjs2s=function(e,t,n){e.stack[t].setfrom(e.stack[n])},e.exports.setobj2s=function(e,t,n){e.stack[t].setfrom(n)},e.exports.setsvalue2s=se},6159:e=>{"use strict";const t=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],n=18,a=14,r=a,i=262143,l=131071,s=256,o=function(e,t){return~(-1<<e)<<t},u=function(e,t){return~o(e,t)},c=function(e,t,n,a){return e.code=e.code&u(a,n)|t<<n&o(a,n),h(e)},d=function(e,t){return c(e,t,r,n)},h=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&o(6,0),A:e>>6&o(8,0),B:e>>23&o(9,0),C:e>>a&o(9,0),Bx:e>>r&o(n,0),Ax:e>>6&o(26,0),sBx:(e>>r&o(n,0))-l};{let t=e.code;return e.opcode=t>>0&o(6,0),e.A=t>>6&o(8,0),e.B=t>>23&o(9,0),e.C=t>>a&o(9,0),e.Bx=t>>r&o(n,0),e.Ax=t>>6&o(26,0),e.sBx=(t>>r&o(n,0))-l,e}};e.exports.BITRK=s,e.exports.CREATE_ABC=function(e,t,n,r){return h(e<<0|t<<6|n<<23|r<<a)},e.exports.CREATE_ABx=function(e,t,n){return h(e<<0|t<<6|n<<r)},e.exports.CREATE_Ax=function(e,t){return h(e<<0|t<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return-257&e},e.exports.ISK=function(e){return e&s},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=i,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=l,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=r,e.exports.POS_C=a,e.exports.POS_OP=0,e.exports.RKASK=function(e){return e|s},e.exports.SETARG_A=function(e,t){return c(e,t,6,8)},e.exports.SETARG_Ax=function(e,t){return c(e,t,6,26)},e.exports.SETARG_B=function(e,t){return c(e,t,23,9)},e.exports.SETARG_Bx=d,e.exports.SETARG_C=function(e,t){return c(e,t,a,9)},e.exports.SETARG_sBx=function(e,t){return d(e,t+l)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&u(6,0)|t<<0&o(6,0),h(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=n,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=h,e.exports.getBMode=function(e){return t[e]>>4&3},e.exports.getCMode=function(e){return t[e]>>2&3},e.exports.getOpMode=function(e){return 3&t[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&t[e]},e.exports.testTMode=function(e){return 128&t[e]}},1391:(e,t,n)=>{"use strict";const{LUA_MULTRET:a,to_luastring:r}=n(9775),{BinOpr:{OPR_ADD:i,OPR_AND:l,OPR_BAND:s,OPR_BOR:o,OPR_BXOR:u,OPR_CONCAT:c,OPR_DIV:d,OPR_EQ:h,OPR_GE:f,OPR_GT:_,OPR_IDIV:m,OPR_LE:p,OPR_LT:g,OPR_MOD:b,OPR_MUL:w,OPR_NE:v,OPR_NOBINOPR:A,OPR_OR:y,OPR_POW:L,OPR_SHL:S,OPR_SHR:T,OPR_SUB:E},UnOpr:{OPR_BNOT:k,OPR_LEN:x,OPR_MINUS:I,OPR_NOT:M,OPR_NOUNOPR:U},NO_JUMP:P,getinstruction:R,luaK_checkstack:O,luaK_codeABC:C,luaK_codeABx:B,luaK_codeAsBx:F,luaK_codek:D,luaK_concat:G,luaK_dischargevars:N,luaK_exp2RK:V,luaK_exp2anyreg:H,luaK_exp2anyregup:j,luaK_exp2nextreg:K,luaK_exp2val:z,luaK_fixline:X,luaK_getlabel:J,luaK_goiffalse:Y,luaK_goiftrue:$,luaK_indexed:q,luaK_infix:W,luaK_intK:Z,luaK_jump:Q,luaK_jumpto:ee,luaK_nil:te,luaK_patchclose:ne,luaK_patchlist:ae,luaK_patchtohere:re,luaK_posfix:ie,luaK_prefix:le,luaK_reserveregs:se,luaK_ret:oe,luaK_self:ue,luaK_setlist:ce,luaK_setmultret:de,luaK_setoneret:he,luaK_setreturns:fe,luaK_storevar:_e,luaK_stringK:me}=n(4807),pe=n(983),ge=n(8897),be=n(7278),{LUAI_MAXCCALLS:we,MAX_INT:ve,lua_assert:Ae}=n(3568),ye=n(6435),{OpCodesI:{OP_CALL:Le,OP_CLOSURE:Se,OP_FORLOOP:Te,OP_FORPREP:Ee,OP_GETUPVAL:ke,OP_MOVE:xe,OP_NEWTABLE:Ie,OP_SETTABLE:Me,OP_TAILCALL:Ue,OP_TFORCALL:Pe,OP_TFORLOOP:Re,OP_VARARG:Oe},LFIELDS_PER_FLUSH:Ce,SETARG_B:Be,SETARG_C:Fe,SET_OPCODE:De}=n(6159),{luaS_eqlngstr:Ge,luaS_new:Ne,luaS_newliteral:Ve}=n(8878),He=n(3718),je=ge.Proto,Ke=be.RESERVED,ze=function(e){return e===Ye.VCALL||e===Ye.VVARARG},Xe=function(e,t){return Ge(e,t)};class Je{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const Ye={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};class $e{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}class qe{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class We{constructor(){this.idx=NaN}}class Ze{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class Qe{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const et=function(e,t){e.t.token=0,be.luaX_syntaxerror(e,t)},tt=function(e,t){be.luaX_syntaxerror(e,ye.luaO_pushfstring(e.L,r("%s expected",!0),be.luaX_token2str(e,t)))},nt=function(e,t,n,a){t>n&&function(e,t,n){let a=e.ls.L,i=e.f.linedefined,l=0===i?r("main function",!0):ye.luaO_pushfstring(a,r("function at line %d",!0),i),s=ye.luaO_pushfstring(a,r("too many %s (limit is %d) in %s",!0),n,t,l);be.luaX_syntaxerror(e.ls,s)}(e,n,a)},at=function(e,t){return e.t.token===t&&(be.luaX_next(e),!0)},rt=function(e,t){e.t.token!==t&&tt(e,t)},it=function(e,t){rt(e,t),be.luaX_next(e)},lt=function(e,t,n){t||be.luaX_syntaxerror(e,n)},st=function(e,t,n,a){at(e,t)||(a===e.linenumber?tt(e,t):be.luaX_syntaxerror(e,ye.luaO_pushfstring(e.L,r("%s expected (to close %s at line %d)"),be.luaX_token2str(e,t),be.luaX_token2str(e,n),a)))},ot=function(e){rt(e,Ke.TK_NAME);let t=e.t.seminfo.ts;return be.luaX_next(e),t},ut=function(e,t,n){e.f=e.t=P,e.k=t,e.u.info=n},ct=function(e,t,n){ut(t,Ye.VK,me(e.fs,n))},dt=function(e,t){ct(e,t,ot(e))},ht=function(e,t){let n=e.fs,a=e.dyd,i=function(e,t){let n=e.fs,a=n.f;return a.locvars[n.nlocvars]=new ye.LocVar,a.locvars[n.nlocvars].varname=t,n.nlocvars++}(e,t);nt(n,a.actvar.n+1-n.firstlocal,200,r("local variables",!0)),a.actvar.arr[a.actvar.n]=new We,a.actvar.arr[a.actvar.n].idx=i,a.actvar.n++},ft=function(e,t){ht(e,be.luaX_newstring(e,r(t,!0)))},_t=function(e,t){let n=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Ae(n<e.nlocvars),e.f.locvars[n]},mt=function(e,t){let n=e.fs;for(n.nactvar=n.nactvar+t;t;t--)_t(n,n.nactvar-t).startpc=n.pc},pt=function(e,t,n){let a=e.f;return nt(e,e.nups+1,ge.MAXUPVAL,r("upvalues",!0)),a.upvalues[e.nups]={instack:n.k===Ye.VLOCAL,idx:n.u.info,name:t},e.nups++},gt=function(e,t,n,a){if(null===e)ut(n,Ye.VVOID,0);else{let r=function(e,t){for(let n=e.nactvar-1;n>=0;n--)if(Xe(t,_t(e,n).varname))return n;return-1}(e,t);if(r>=0)ut(n,Ye.VLOCAL,r),a||function(e,t){let n=e.bl;for(;n.nactvar>t;)n=n.previous;n.upval=1}(e,r);else{let a=function(e,t){let n=e.f.upvalues;for(let a=0;a<e.nups;a++)if(Xe(n[a].name,t))return a;return-1}(e,t);if(a<0){if(gt(e.prev,t,n,0),n.k===Ye.VVOID)return;a=pt(e,t,n)}ut(n,Ye.VUPVAL,a)}}},bt=function(e,t){let n=ot(e),a=e.fs;if(gt(a,n,t,1),t.k===Ye.VVOID){let r=new $e;gt(a,e.envn,t,1),Ae(t.k!==Ye.VVOID),ct(e,r,n),q(a,t,r)}},wt=function(e,t,n,a){let r=e.fs,i=t-n;if(ze(a.k))i++,i<0&&(i=0),fe(r,a,i),i>1&&se(r,i-1);else if(a.k!==Ye.VVOID&&K(r,a),i>0){let e=r.freereg;se(r,i),te(r,e,i)}n>t&&(e.fs.freereg-=n-t)},vt=function(e){let t=e.L;++t.nCcalls,nt(e.fs,t.nCcalls,we,r("JS levels",!0))},At=function(e){return e.L.nCcalls--},yt=function(e,t,n){let a=e.fs,i=e.dyd.gt,l=i.arr[t];if(Ae(Xe(l.name,n.name)),l.nactvar<n.nactvar){let t=_t(a,l.nactvar).varname,n=ye.luaO_pushfstring(e.L,r("<goto %s> at line %d jumps into the scope of local '%s'"),l.name.getstr(),l.line,t.getstr());et(e,n)}ae(a,l.pc,n.pc);for(let e=t;e<i.n-1;e++)i.arr[e]=i.arr[e+1];i.n--},Lt=function(e,t){let n=e.fs.bl,a=e.dyd,r=a.gt.arr[t];for(let i=n.firstlabel;i<a.label.n;i++){let l=a.label.arr[i];if(Xe(l.name,r.name))return r.nactvar>l.nactvar&&(n.upval||a.label.n>n.firstlabel)&&ne(e.fs,r.pc,l.nactvar),yt(e,t,l),!0}return!1},St=function(e,t,n,a,r){let i=t.n;return t.arr[i]=new Ze,t.arr[i].name=n,t.arr[i].line=a,t.arr[i].nactvar=e.fs.nactvar,t.arr[i].pc=r,t.n=i+1,i},Tt=function(e,t){let n=e.dyd.gt,a=e.fs.bl.firstgoto;for(;a<n.n;)Xe(n.arr[a].name,t.name)?yt(e,a,t):a++},Et=function(e,t,n){t.isloop=n,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Ae(e.freereg===e.nactvar)},kt=function(e,t,n){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=P,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;let a=t.f;a.source=e.source,a.maxstacksize=2,Et(t,n,!1)},xt=function(e){let t=e.bl,n=e.ls;if(t.previous&&t.upval){let n=Q(e);ne(e,n,t.nactvar),re(e,n)}t.isloop&&function(e){let t=Ve(e.L,"break"),n=St(e,e.dyd.label,t,0,e.fs.pc);Tt(e,e.dyd.label.arr[n])}(n),e.bl=t.previous,function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)_t(e,--e.nactvar).endpc=e.pc}(e,t.nactvar),Ae(t.nactvar===e.nactvar),e.freereg=e.nactvar,n.dyd.label.n=t.firstlabel,t.previous?function(e,t){let n=t.firstgoto,a=e.ls.dyd.gt;for(;n<a.n;){let r=a.arr[n];r.nactvar>t.nactvar&&(t.upval&&ne(e,r.pc,t.nactvar),r.nactvar=t.nactvar),Lt(e.ls,n)||n++}}(e,t):t.firstgoto<n.dyd.gt.n&&function(e,t){let n=be.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";n=ye.luaO_pushfstring(e.L,r(n),t.name.getstr(),t.line),et(e,n)}(n,n.dyd.gt.arr[t.firstgoto])},It=function(e){let t=e.fs;oe(t,0,0),xt(t),Ae(null===t.bl),e.fs=t.prev},Mt=function(e,t){switch(e.t.token){case Ke.TK_ELSE:case Ke.TK_ELSEIF:case Ke.TK_END:case Ke.TK_EOS:return!0;case Ke.TK_UNTIL:return t;default:return!1}},Ut=function(e){for(;!Mt(e,1);){if(e.t.token===Ke.TK_RETURN)return void rn(e);rn(e)}},Pt=function(e,t){let n=e.fs,a=new $e;j(n,t),be.luaX_next(e),dt(e,a),q(n,t,a)},Rt=function(e,t){be.luaX_next(e),Xt(e,t),z(e.fs,t),it(e,93)};class Ot{constructor(){this.v=new $e,this.t=new $e,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const Ct=function(e,t){let n=e.fs,a=e.fs.freereg,i=new $e,l=new $e;e.t.token===Ke.TK_NAME?(nt(n,t.nh,ve,r("items in a constructor",!0)),dt(e,i)):Rt(e,i),t.nh++,it(e,61);let s=V(n,i);Xt(e,l),C(n,Me,t.t.u.info,s,V(n,l)),n.freereg=a},Bt=function(e,t){t.v.k!==Ye.VVOID&&(K(e,t.v),t.v.k=Ye.VVOID,t.tostore===Ce&&(ce(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Ft=function(e,t){Xt(e,t.v),nt(e.fs,t.na,ve,r("items in a constructor",!0)),t.na++,t.tostore++},Dt=function(e,t){switch(e.t.token){case Ke.TK_NAME:61!==be.luaX_lookahead(e)?Ft(e,t):Ct(e,t);break;case 91:Ct(e,t);break;default:Ft(e,t)}},Gt=function(e,t){let n=e.fs,r=e.linenumber,i=C(n,Ie,0,0,0),l=new Ot;l.na=l.nh=l.tostore=0,l.t=t,ut(t,Ye.VRELOCABLE,i),ut(l.v,Ye.VVOID,0),K(e.fs,t),it(e,123);do{if(Ae(l.v.k===Ye.VVOID||l.tostore>0),125===e.t.token)break;Bt(n,l),Dt(e,l)}while(at(e,44)||at(e,59));st(e,125,123,r),function(e,t){0!==t.tostore&&(ze(t.v.k)?(de(e,t.v),ce(e,t.t.u.info,t.na,a),t.na--):(t.v.k!==Ye.VVOID&&K(e,t.v),ce(e,t.t.u.info,t.na,t.tostore)))}(n,l),Be(n.f.code[i],ye.luaO_int2fb(l.na)),Fe(n.f.code[i],ye.luaO_int2fb(l.nh))},Nt=function(e,t,n,a){let i=new qe,l=new Je;i.f=function(e){let t=e.L,n=new je(t),a=e.fs;return a.f.p[a.np++]=n,n}(e),i.f.linedefined=a,kt(e,i,l),it(e,40),n&&(ft(e,"self"),mt(e,1)),function(e){let t=e.fs,n=t.f,a=0;if(n.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case Ke.TK_NAME:ht(e,ot(e)),a++;break;case Ke.TK_DOTS:be.luaX_next(e),n.is_vararg=!0;break;default:be.luaX_syntaxerror(e,r("<name> or '...' expected",!0))}}while(!n.is_vararg&&at(e,44));mt(e,a),n.numparams=t.nactvar,se(t,t.nactvar)}(e),it(e,41),Ut(e),i.f.lastlinedefined=e.linenumber,st(e,Ke.TK_END,Ke.TK_FUNCTION,a),function(e,t){let n=e.fs.prev;ut(t,Ye.VRELOCABLE,B(n,Se,0,n.np-1)),K(n,t)}(e,t),It(e)},Vt=function(e,t){let n=1;for(Xt(e,t);at(e,44);)K(e.fs,t),Xt(e,t),n++;return n},Ht=function(e,t,n){let i,l=e.fs,s=new $e;switch(e.t.token){case 40:be.luaX_next(e),41===e.t.token?s.k=Ye.VVOID:(Vt(e,s),de(l,s)),st(e,41,40,n);break;case 123:Gt(e,s);break;case Ke.TK_STRING:ct(e,s,e.t.seminfo.ts),be.luaX_next(e);break;default:be.luaX_syntaxerror(e,r("function arguments expected",!0))}Ae(t.k===Ye.VNONRELOC);let o=t.u.info;ze(s.k)?i=a:(s.k!==Ye.VVOID&&K(l,s),i=l.freereg-(o+1)),ut(t,Ye.VCALL,C(l,Le,o,i+1,2)),X(l,n),l.freereg=o+1},jt=function(e,t){let n=e.fs,a=e.linenumber;for(!function(e,t){switch(e.t.token){case 40:{let n=e.linenumber;return be.luaX_next(e),Xt(e,t),st(e,41,40,n),void N(e.fs,t)}case Ke.TK_NAME:return void bt(e,t);default:be.luaX_syntaxerror(e,r("unexpected symbol",!0))}}(e,t);;)switch(e.t.token){case 46:Pt(e,t);break;case 91:{let a=new $e;j(n,t),Rt(e,a),q(n,t,a);break}case 58:{let r=new $e;be.luaX_next(e),dt(e,r),ue(n,t,r),Ht(e,t,a);break}case 40:case Ke.TK_STRING:case 123:K(n,t),Ht(e,t,a);break;default:return}},Kt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],zt=function(e,t,n){vt(e);let a=function(e){switch(e){case Ke.TK_NOT:return M;case 45:return I;case 126:return k;case 35:return x;default:return U}}(e.t.token);if(a!==U){let n=e.linenumber;be.luaX_next(e),zt(e,t,12),le(e.fs,a,t,n)}else!function(e,t){switch(e.t.token){case Ke.TK_FLT:ut(t,Ye.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case Ke.TK_INT:ut(t,Ye.VKINT,0),t.u.ival=e.t.seminfo.i;break;case Ke.TK_STRING:ct(e,t,e.t.seminfo.ts);break;case Ke.TK_NIL:ut(t,Ye.VNIL,0);break;case Ke.TK_TRUE:ut(t,Ye.VTRUE,0);break;case Ke.TK_FALSE:ut(t,Ye.VFALSE,0);break;case Ke.TK_DOTS:{let n=e.fs;lt(e,n.f.is_vararg,r("cannot use '...' outside a vararg function",!0)),ut(t,Ye.VVARARG,C(n,Oe,0,1,0));break}case 123:return void Gt(e,t);case Ke.TK_FUNCTION:return be.luaX_next(e),void Nt(e,t,0,e.linenumber);default:return void jt(e,t)}be.luaX_next(e)}(e,t);let P=function(e){switch(e){case 43:return i;case 45:return E;case 42:return w;case 37:return b;case 94:return L;case 47:return d;case Ke.TK_IDIV:return m;case 38:return s;case 124:return o;case 126:return u;case Ke.TK_SHL:return S;case Ke.TK_SHR:return T;case Ke.TK_CONCAT:return c;case Ke.TK_NE:return v;case Ke.TK_EQ:return h;case 60:return g;case Ke.TK_LE:return p;case 62:return _;case Ke.TK_GE:return f;case Ke.TK_AND:return l;case Ke.TK_OR:return y;default:return A}}(e.t.token);for(;P!==A&&Kt[P].left>n;){let n=new $e,a=e.linenumber;be.luaX_next(e),W(e.fs,P,t);let r=zt(e,n,Kt[P].right);ie(e.fs,P,t,n,a),P=r}return At(e),P},Xt=function(e,t){zt(e,t,0)},Jt=function(e){let t=e.fs,n=new Je;Et(t,n,0),Ut(e),xt(t)};class Yt{constructor(){this.prev=null,this.v=new $e}}const $t=function(e,t,n){let a=new $e;var i;if(lt(e,(i=t.v.k,Ye.VLOCAL<=i&&i<=Ye.VINDEXED),r("syntax error",!0)),at(e,44)){let a=new Yt;a.prev=t,jt(e,a.v),a.v.k!==Ye.VINDEXED&&function(e,t,n){let a=e.fs,r=a.freereg,i=!1;for(;t;t=t.prev)t.v.k===Ye.VINDEXED&&(t.v.u.ind.vt===n.k&&t.v.u.ind.t===n.u.info&&(i=!0,t.v.u.ind.vt=Ye.VLOCAL,t.v.u.ind.t=r),n.k===Ye.VLOCAL&&t.v.u.ind.idx===n.u.info&&(i=!0,t.v.u.ind.idx=r));if(i){let e=n.k===Ye.VLOCAL?xe:ke;C(a,e,r,n.u.info,0),se(a,1)}}(e,t,a.v),nt(e.fs,n+e.L.nCcalls,we,r("JS levels",!0)),$t(e,a,n+1)}else{it(e,61);let r=Vt(e,a);if(r===n)return he(e.fs,a),void _e(e.fs,t.v,a);wt(e,n,r,a)}ut(a,Ye.VNONRELOC,e.fs.freereg-1),_e(e.fs,t.v,a)},qt=function(e){let t=new $e;return Xt(e,t),t.k===Ye.VNIL&&(t.k=Ye.VFALSE),$(e.fs,t),t.f},Wt=function(e,t){let n,a=e.linenumber;at(e,Ke.TK_GOTO)?n=ot(e):(be.luaX_next(e),n=Ve(e.L,"break"));let r=St(e,e.dyd.gt,n,a,t);Lt(e,r)},Zt=function(e,t,n){let a,i=e.fs,l=e.dyd.label;!function(e,t,n){for(let a=e.bl.firstlabel;a<t.n;a++)if(Xe(n,t.arr[a].name)){let i=ye.luaO_pushfstring(e.ls.L,r("label '%s' already defined on line %d",!0),n.getstr(),t.arr[a].line);et(e.ls,i)}}(i,l,t),it(e,Ke.TK_DBCOLON),a=St(e,l,t,n,J(i)),function(e){for(;59===e.t.token||e.t.token===Ke.TK_DBCOLON;)rn(e)}(e),Mt(e,0)&&(l.arr[a].nactvar=i.bl.nactvar),Tt(e,l.arr[a])},Qt=function(e){let t=new $e;return Xt(e,t),K(e.fs,t),Ae(t.k===Ye.VNONRELOC),t.u.info},en=function(e,t,n,a,r){let i,l=new Je,s=e.fs;mt(e,3),it(e,Ke.TK_DO);let o=r?F(s,Ee,t,P):Q(s);Et(s,l,0),mt(e,a),se(s,a),Jt(e),xt(s),re(s,o),r?i=F(s,Te,t,P):(C(s,Pe,t,0,a),X(s,n),i=F(s,Re,t+2,P)),ae(s,i,o+1),X(s,n)},tn=function(e,t){let n=e.fs,a=new Je;Et(n,a,1),be.luaX_next(e);let i=ot(e);switch(e.t.token){case 61:!function(e,t,n){let a=e.fs,r=a.freereg;ft(e,"(for index)"),ft(e,"(for limit)"),ft(e,"(for step)"),ht(e,t),it(e,61),Qt(e),it(e,44),Qt(e),at(e,44)?Qt(e):(D(a,a.freereg,Z(a,1)),se(a,1)),en(e,r,n,1,1)}(e,i,t);break;case 44:case Ke.TK_IN:!function(e,t){let n=e.fs,a=new $e,r=4,i=n.freereg;for(ft(e,"(for generator)"),ft(e,"(for state)"),ft(e,"(for control)"),ht(e,t);at(e,44);)ht(e,ot(e)),r++;it(e,Ke.TK_IN);let l=e.linenumber;wt(e,3,Vt(e,a),a),O(n,3),en(e,i,l,r-3,0)}(e,i);break;default:be.luaX_syntaxerror(e,r("'=' or 'in' expected",!0))}st(e,Ke.TK_END,Ke.TK_FOR,t),xt(n)},nn=function(e,t){let n,a=new Je,r=e.fs,i=new $e;if(be.luaX_next(e),Xt(e,i),it(e,Ke.TK_THEN),e.t.token===Ke.TK_GOTO||e.t.token===Ke.TK_BREAK){for(Y(e.fs,i),Et(r,a,!1),Wt(e,i.t);at(e,59););if(Mt(e,0))return xt(r),t;n=Q(r)}else $(e.fs,i),Et(r,a,!1),n=i.f;return Ut(e),xt(r),e.t.token!==Ke.TK_ELSE&&e.t.token!==Ke.TK_ELSEIF||(t=G(r,t,Q(r))),re(r,n),t},an=function(e,t){let n=new $e,a=new $e;be.luaX_next(e);let r=function(e,t){let n=0;for(bt(e,t);46===e.t.token;)Pt(e,t);return 58===e.t.token&&(n=1,Pt(e,t)),n}(e,n);Nt(e,a,r,t),_e(e.fs,n,a),X(e.fs,t)},rn=function(e){let t=e.linenumber;switch(vt(e),e.t.token){case 59:be.luaX_next(e);break;case Ke.TK_IF:!function(e,t){let n=e.fs,a=P;for(a=nn(e,a);e.t.token===Ke.TK_ELSEIF;)a=nn(e,a);at(e,Ke.TK_ELSE)&&Jt(e),st(e,Ke.TK_END,Ke.TK_IF,t),re(n,a)}(e,t);break;case Ke.TK_WHILE:!function(e,t){let n=e.fs,a=new Je;be.luaX_next(e);let r=J(n),i=qt(e);Et(n,a,1),it(e,Ke.TK_DO),Jt(e),ee(n,r),st(e,Ke.TK_END,Ke.TK_WHILE,t),xt(n),re(n,i)}(e,t);break;case Ke.TK_DO:be.luaX_next(e),Jt(e),st(e,Ke.TK_END,Ke.TK_DO,t);break;case Ke.TK_FOR:tn(e,t);break;case Ke.TK_REPEAT:!function(e,t){let n=e.fs,a=J(n),r=new Je,i=new Je;Et(n,r,1),Et(n,i,0),be.luaX_next(e),Ut(e),st(e,Ke.TK_UNTIL,Ke.TK_REPEAT,t);let l=qt(e);i.upval&&ne(n,l,i.nactvar),xt(n),ae(n,l,a),xt(n)}(e,t);break;case Ke.TK_FUNCTION:an(e,t);break;case Ke.TK_LOCAL:be.luaX_next(e),at(e,Ke.TK_FUNCTION)?function(e){let t=new $e,n=e.fs;ht(e,ot(e)),mt(e,1),Nt(e,t,0,e.linenumber),_t(n,t.u.info).startpc=n.pc}(e):function(e){let t,n=0,a=new $e;do{ht(e,ot(e)),n++}while(at(e,44));at(e,61)?t=Vt(e,a):(a.k=Ye.VVOID,t=0),wt(e,n,t,a),mt(e,n)}(e);break;case Ke.TK_DBCOLON:be.luaX_next(e),Zt(e,ot(e),t);break;case Ke.TK_RETURN:be.luaX_next(e),function(e){let t,n,r=e.fs,i=new $e;Mt(e,1)||59===e.t.token?t=n=0:(n=Vt(e,i),ze(i.k)?(de(r,i),i.k===Ye.VCALL&&1===n&&(De(R(r,i),Ue),Ae(R(r,i).A===r.nactvar)),t=r.nactvar,n=a):1===n?t=H(r,i):(K(r,i),t=r.nactvar,Ae(n===r.freereg-t))),oe(r,t,n),at(e,59)}(e);break;case Ke.TK_BREAK:case Ke.TK_GOTO:Wt(e,Q(e.fs));break;default:!function(e){let t=e.fs,n=new Yt;jt(e,n.v),61===e.t.token||44===e.t.token?(n.prev=null,$t(e,n,1)):(lt(e,n.v.k===Ye.VCALL,r("syntax error",!0)),Fe(R(t,n.v),1))}(e)}Ae(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,At(e)};e.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Qe,this.label=new Qe}},e.exports.expkind=Ye,e.exports.expdesc=$e,e.exports.luaY_parser=function(e,t,n,a,r,i){let l=new be.LexState,s=new qe,o=ge.luaF_newLclosure(e,1);return pe.luaD_inctop(e),e.stack[e.top-1].setclLvalue(o),l.h=He.luaH_new(e),pe.luaD_inctop(e),e.stack[e.top-1].sethvalue(l.h),s.f=o.p=new je(e),s.f.source=Ne(e,r),l.buff=n,l.dyd=a,a.actvar.n=a.gt.n=a.label.n=0,be.luaX_setinput(e,l,t,s.f.source,i),function(e,t){let n=new Je,a=new $e;kt(e,t,n),t.f.is_vararg=!0,ut(a,Ye.VLOCAL,0),pt(t,e.envn,a),be.luaX_next(e),Ut(e),rt(e,Ke.TK_EOS),It(e)}(l,s),Ae(!s.prev&&1===s.nups&&!l.fs),Ae(0===a.actvar.n&&0===a.gt.n&&0===a.label.n),delete e.stack[--e.top],o},e.exports.vkisinreg=function(e){return e===Ye.VNONRELOC||e===Ye.VLOCAL}},6137:(e,t,n)=>{"use strict";const{LUA_MINSTACK:a,LUA_RIDX_GLOBALS:r,LUA_RIDX_MAINTHREAD:i,constant_types:{LUA_NUMTAGS:l,LUA_TNIL:s,LUA_TTABLE:o,LUA_TTHREAD:u},thread_status:{LUA_OK:c}}=n(9775),d=n(6435),h=n(983),f=n(8973),_=n(3718),m=n(7670),p=2*a;class g{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class b{constructor(e){this.id=e.id_counter++,this.base_ci=new g,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=c,this.errfunc=0}}class w{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new d.TValue(s,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(m.TMS.TM_N),this.mt=new Array(l)}}const v=function(e){e.ci.next=null},A=function(e,t){e.stack=new Array(p),e.top=0,e.stack_last=p-5;let n=e.base_ci;n.next=n.previous=null,n.callstatus=0,n.funcOff=e.top,n.func=e.stack[e.top],e.stack[e.top++]=new d.TValue(s,null),n.top=e.top+a,e.ci=n},y=function(e){e.ci=e.base_ci,v(e),e.stack=null},L=function(e){let t=e.l_G;A(e),function(e,t){let n=_.luaH_new(e);t.l_registry.sethvalue(n),_.luaH_setint(n,i,new d.TValue(u,e)),_.luaH_setint(n,r,new d.TValue(o,_.luaH_new(e)))}(e,t),m.luaT_init(e),t.version=f.lua_version(null)};e.exports.lua_State=b,e.exports.CallInfo=g,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){!function(e){y(e)}(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){let e=new w,t=new b(e);return e.mainthread=t,h.luaD_rawrunprotected(t,L,null)!==c&&(t=null),t},e.exports.lua_newthread=function(e){let t=e.l_G,n=new b(t);return e.stack[e.top]=new d.TValue(u,n),f.api_incr_top(e),n.hookmask=e.hookmask,n.basehookcount=e.basehookcount,n.hook=e.hook,n.hookcount=n.basehookcount,A(n),n},e.exports.luaE_extendCI=function(e){let t=new g;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=v,e.exports.luaE_freethread=function(e,t){y(t)}},8878:(e,t,n)=>{"use strict";const{is_luastring:a,luastring_eq:r,luastring_from:i,to_luastring:l}=n(9775),{lua_assert:s}=n(3568);class o{constructor(e,t){this.hash=null,this.realstring=t}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const u=function(e){s(a(e));let t=e.length,n="|";for(let a=0;a<t;a++)n+=e[a].toString(16);return n},c=function(e,t){return s(t instanceof Uint8Array),new o(e,t)};e.exports.luaS_eqlngstr=function(e,t){return s(e instanceof o),s(t instanceof o),e==t||r(e.realstring,t.realstring)},e.exports.luaS_hash=u,e.exports.luaS_hashlongstr=function(e){return s(e instanceof o),null===e.hash&&(e.hash=u(e.getstr())),e.hash},e.exports.luaS_bless=c,e.exports.luaS_new=function(e,t){return c(e,i(t))},e.exports.luaS_newliteral=function(e,t){return c(e,l(t))},e.exports.TString=o},3718:(e,t,n)=>{"use strict";const{constant_types:{LUA_TBOOLEAN:a,LUA_TCCL:r,LUA_TLCF:i,LUA_TLCL:l,LUA_TLIGHTUSERDATA:s,LUA_TLNGSTR:o,LUA_TNIL:u,LUA_TNUMFLT:c,LUA_TNUMINT:d,LUA_TSHRSTR:h,LUA_TTABLE:f,LUA_TTHREAD:_,LUA_TUSERDATA:m},to_luastring:p}=n(9775),{lua_assert:g}=n(3568),b=n(8821),w=n(6435),{luaS_hashlongstr:v,TString:A}=n(8878),y=n(6137);let L=new WeakMap;const S=function(e){let t=L.get(e);return t||(t={},L.set(e,t)),t},T=function(e,t){switch(t.type){case u:return b.luaG_runerror(e,p("table index is nil",!0));case c:if(isNaN(t.value))return b.luaG_runerror(e,p("table index is NaN",!0));case d:case a:case f:case l:case i:case r:case m:case _:return t.value;case h:case o:return v(t.tsvalue());case s:{let n=t.value;switch(typeof n){case"string":return"*"+n;case"number":return"#"+n;case"boolean":return n?"?true":"?false";case"function":return S(n);case"object":if(n instanceof y.lua_State&&n.l_G===e.l_G||n instanceof E||n instanceof w.Udata||n instanceof w.LClosure||n instanceof w.CClosure)return S(n);default:return n}}default:throw new Error("unknown key type: "+t.type)}};class E{constructor(e){this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const k=function(e,t,n,a){e.dead_strong.clear(),e.dead_weak=void 0;let r=null,i={key:n,value:a,p:r=e.l,n:void 0};e.f||(e.f=i),r&&(r.n=i),e.strong.set(t,i),e.l=i},x=function(e,t){let n=e.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;let r=n.n,i=n.p;n.p=void 0,i&&(i.n=r),r&&(r.p=i),e.f===n&&(e.f=r),e.l===n&&(e.l=i),e.strong.delete(t),("object"==typeof(a=t)?null!==a:"function"==typeof a)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,n)):e.dead_strong.set(t,n)}var a},I=function(e,t){let n=e.strong.get(t);return n?n.value:w.luaO_nilobject},M=function(e,t){return g("number"==typeof t&&(0|t)===t),I(e,t)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_get=function(e,t,n){return g(n instanceof w.TValue),n.ttisnil()||n.ttisfloat()&&isNaN(n.value)?w.luaO_nilobject:I(t,T(e,n))},e.exports.luaH_getint=M,e.exports.luaH_getn=function(e){let t=0,n=e.strong.size+1;for(;n-t>1;){let a=Math.floor((t+n)/2);M(e,a).ttisnil()?n=a:t=a}return t},e.exports.luaH_getstr=function(e,t){return g(t instanceof A),I(e,v(t))},e.exports.luaH_setfrom=function(e,t,n,a){g(n instanceof w.TValue);let r=T(e,n);if(a.ttisnil())return void x(t,r);let i=t.strong.get(r);if(i)i.value.setfrom(a);else{let e,i=n.value;e=n.ttisfloat()&&(0|i)===i?new w.TValue(d,i):new w.TValue(n.type,i);let l=new w.TValue(a.type,a.value);k(t,r,e,l)}},e.exports.luaH_setint=function(e,t,n){g("number"==typeof t&&(0|t)===t&&n instanceof w.TValue);let a=t;if(n.ttisnil())return void x(e,a);let r=e.strong.get(a);if(r){r.value.setfrom(n)}else{let r=new w.TValue(d,t),i=new w.TValue(n.type,n.value);k(e,a,r,i)}},e.exports.luaH_new=function(e){return new E(e)},e.exports.luaH_next=function(e,t,n){let a,r=e.stack[n];if(r.type===u){if(a=t.f,!a)return!1}else{let n=T(e,r);if(a=t.strong.get(n),a){if(a=a.n,!a)return!1}else{if(a=t.dead_weak&&t.dead_weak.get(n)||t.dead_strong.get(n),!a)return b.luaG_runerror(e,p("invalid key to 'next'"));do{if(a=a.n,!a)return!1}while(a.key.ttisdeadkey())}}return w.setobj2s(e,n,a.key),w.setobj2s(e,n+1,a.value),!0},e.exports.Table=E},7670:(e,t,n)=>{"use strict";const{constant_types:{LUA_TTABLE:a,LUA_TUSERDATA:r},to_luastring:i}=n(9775),{lua_assert:l}=n(3568),s=n(6435),o=n(983),u=n(6137),{luaS_bless:c,luaS_new:d}=n(8878),h=n(3718),f=n(8821),_=n(427),m=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map((e=>i(e))),p=function(e){return m[e+1]},g={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},b=i("__name",!0),w=function(e,t,n,a,r,i){let l=e.top;if(s.pushobj2s(e,t),s.pushobj2s(e,n),s.pushobj2s(e,a),i||s.pushobj2s(e,r),e.ci.callstatus&u.CIST_LUA?o.luaD_call(e,l,i):o.luaD_callnoyield(e,l,i),i){let t=e.stack[e.top-1];delete e.stack[--e.top],r.setfrom(t)}},v=function(e,t,n,a,r){let i=y(e,t,r);return i.ttisnil()&&(i=y(e,n,r)),!i.ttisnil()&&(w(e,i,t,n,a,1),!0)},A=function(e,t,n){const a=h.luaH_getstr(e,n);return l(t<=g.TM_EQ),a.ttisnil()?(e.flags|=1<<t,null):a},y=function(e,t,n){let i;switch(t.ttnov()){case a:case r:i=t.value.metatable;break;default:i=e.l_G.mt[t.ttnov()]}return i?h.luaH_getstr(i,e.l_G.tmname[n]):s.luaO_nilobject};e.exports.fasttm=function(e,t,n){return null===t||t.flags&1<<n?null:A(t,n,e.l_G.tmname[n])},e.exports.TMS=g,e.exports.luaT_callTM=w,e.exports.luaT_callbinTM=v,e.exports.luaT_trybinTM=function(e,t,n,a,r){if(!v(e,t,n,a,r))switch(r){case g.TM_CONCAT:return f.luaG_concaterror(e,t,n);case g.TM_BAND:case g.TM_BOR:case g.TM_BXOR:case g.TM_SHL:case g.TM_SHR:case g.TM_BNOT:{let a=_.tonumber(t),r=_.tonumber(n);return!1!==a&&!1!==r?f.luaG_tointerror(e,t,n):f.luaG_opinterror(e,t,n,i("perform bitwise operation on",!0))}default:return f.luaG_opinterror(e,t,n,i("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,t,n,a){let r=new s.TValue;return v(e,t,n,r,a)?!r.l_isfalse():null},e.exports.luaT_gettm=A,e.exports.luaT_gettmbyobj=y,e.exports.luaT_init=function(e){e.l_G.tmname[g.TM_INDEX]=new d(e,i("__index",!0)),e.l_G.tmname[g.TM_NEWINDEX]=new d(e,i("__newindex",!0)),e.l_G.tmname[g.TM_GC]=new d(e,i("__gc",!0)),e.l_G.tmname[g.TM_MODE]=new d(e,i("__mode",!0)),e.l_G.tmname[g.TM_LEN]=new d(e,i("__len",!0)),e.l_G.tmname[g.TM_EQ]=new d(e,i("__eq",!0)),e.l_G.tmname[g.TM_ADD]=new d(e,i("__add",!0)),e.l_G.tmname[g.TM_SUB]=new d(e,i("__sub",!0)),e.l_G.tmname[g.TM_MUL]=new d(e,i("__mul",!0)),e.l_G.tmname[g.TM_MOD]=new d(e,i("__mod",!0)),e.l_G.tmname[g.TM_POW]=new d(e,i("__pow",!0)),e.l_G.tmname[g.TM_DIV]=new d(e,i("__div",!0)),e.l_G.tmname[g.TM_IDIV]=new d(e,i("__idiv",!0)),e.l_G.tmname[g.TM_BAND]=new d(e,i("__band",!0)),e.l_G.tmname[g.TM_BOR]=new d(e,i("__bor",!0)),e.l_G.tmname[g.TM_BXOR]=new d(e,i("__bxor",!0)),e.l_G.tmname[g.TM_SHL]=new d(e,i("__shl",!0)),e.l_G.tmname[g.TM_SHR]=new d(e,i("__shr",!0)),e.l_G.tmname[g.TM_UNM]=new d(e,i("__unm",!0)),e.l_G.tmname[g.TM_BNOT]=new d(e,i("__bnot",!0)),e.l_G.tmname[g.TM_LT]=new d(e,i("__lt",!0)),e.l_G.tmname[g.TM_LE]=new d(e,i("__le",!0)),e.l_G.tmname[g.TM_CONCAT]=new d(e,i("__concat",!0)),e.l_G.tmname[g.TM_CALL]=new d(e,i("__call",!0))},e.exports.luaT_objtypename=function(e,t){let n;if(t.ttistable()&&null!==(n=t.value.metatable)||t.ttisfulluserdata()&&null!==(n=t.value.metatable)){let t=h.luaH_getstr(n,c(e,b));if(t.ttisstring())return t.svalue()}return p(t.ttnov())},e.exports.ttypename=p},7870:(e,t,n)=>{"use strict";const a=n(9775),r=n(8973),i=n(8821),l=n(983),s=n(6137);e.exports.LUA_AUTHORS=a.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=a.LUA_COPYRIGHT,e.exports.LUA_ERRERR=a.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=a.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=a.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=a.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=a.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=a.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=a.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=a.LUA_HOOKLINE,e.exports.LUA_HOOKRET=a.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=a.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=a.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=a.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=a.LUA_MASKLINE,e.exports.LUA_MASKRET=a.LUA_MASKRET,e.exports.LUA_MINSTACK=a.LUA_MINSTACK,e.exports.LUA_MULTRET=a.LUA_MULTRET,e.exports.LUA_NUMTAGS=a.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=a.thread_status.LUA_OK,e.exports.LUA_OPADD=a.LUA_OPADD,e.exports.LUA_OPBAND=a.LUA_OPBAND,e.exports.LUA_OPBNOT=a.LUA_OPBNOT,e.exports.LUA_OPBOR=a.LUA_OPBOR,e.exports.LUA_OPBXOR=a.LUA_OPBXOR,e.exports.LUA_OPDIV=a.LUA_OPDIV,e.exports.LUA_OPEQ=a.LUA_OPEQ,e.exports.LUA_OPIDIV=a.LUA_OPIDIV,e.exports.LUA_OPLE=a.LUA_OPLE,e.exports.LUA_OPLT=a.LUA_OPLT,e.exports.LUA_OPMOD=a.LUA_OPMOD,e.exports.LUA_OPMUL=a.LUA_OPMUL,e.exports.LUA_OPPOW=a.LUA_OPPOW,e.exports.LUA_OPSHL=a.LUA_OPSHL,e.exports.LUA_OPSHR=a.LUA_OPSHR,e.exports.LUA_OPSUB=a.LUA_OPSUB,e.exports.LUA_OPUNM=a.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=a.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=a.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=a.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=a.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=a.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=a.LUA_SIGNATURE,e.exports.LUA_TNONE=a.constant_types.LUA_TNONE,e.exports.LUA_TNIL=a.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=a.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=a.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=a.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=a.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=a.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=a.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=a.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=a.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=a.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=a.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=a.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=a.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=a.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=a.thread_status.LUA_YIELD,e.exports.lua_Debug=a.lua_Debug,e.exports.lua_upvalueindex=a.lua_upvalueindex,e.exports.lua_absindex=r.lua_absindex,e.exports.lua_arith=r.lua_arith,e.exports.lua_atpanic=r.lua_atpanic,e.exports.lua_atnativeerror=r.lua_atnativeerror,e.exports.lua_call=r.lua_call,e.exports.lua_callk=r.lua_callk,e.exports.lua_checkstack=r.lua_checkstack,e.exports.lua_close=s.lua_close,e.exports.lua_compare=r.lua_compare,e.exports.lua_concat=r.lua_concat,e.exports.lua_copy=r.lua_copy,e.exports.lua_createtable=r.lua_createtable,e.exports.lua_dump=r.lua_dump,e.exports.lua_error=r.lua_error,e.exports.lua_gc=r.lua_gc,e.exports.lua_getallocf=r.lua_getallocf,e.exports.lua_getextraspace=r.lua_getextraspace,e.exports.lua_getfield=r.lua_getfield,e.exports.lua_getglobal=r.lua_getglobal,e.exports.lua_gethook=i.lua_gethook,e.exports.lua_gethookcount=i.lua_gethookcount,e.exports.lua_gethookmask=i.lua_gethookmask,e.exports.lua_geti=r.lua_geti,e.exports.lua_getinfo=i.lua_getinfo,e.exports.lua_getlocal=i.lua_getlocal,e.exports.lua_getmetatable=r.lua_getmetatable,e.exports.lua_getstack=i.lua_getstack,e.exports.lua_gettable=r.lua_gettable,e.exports.lua_gettop=r.lua_gettop,e.exports.lua_getupvalue=r.lua_getupvalue,e.exports.lua_getuservalue=r.lua_getuservalue,e.exports.lua_insert=r.lua_insert,e.exports.lua_isboolean=r.lua_isboolean,e.exports.lua_iscfunction=r.lua_iscfunction,e.exports.lua_isfunction=r.lua_isfunction,e.exports.lua_isinteger=r.lua_isinteger,e.exports.lua_islightuserdata=r.lua_islightuserdata,e.exports.lua_isnil=r.lua_isnil,e.exports.lua_isnone=r.lua_isnone,e.exports.lua_isnoneornil=r.lua_isnoneornil,e.exports.lua_isnumber=r.lua_isnumber,e.exports.lua_isproxy=r.lua_isproxy,e.exports.lua_isstring=r.lua_isstring,e.exports.lua_istable=r.lua_istable,e.exports.lua_isthread=r.lua_isthread,e.exports.lua_isuserdata=r.lua_isuserdata,e.exports.lua_isyieldable=l.lua_isyieldable,e.exports.lua_len=r.lua_len,e.exports.lua_load=r.lua_load,e.exports.lua_newstate=s.lua_newstate,e.exports.lua_newtable=r.lua_newtable,e.exports.lua_newthread=s.lua_newthread,e.exports.lua_newuserdata=r.lua_newuserdata,e.exports.lua_next=r.lua_next,e.exports.lua_pcall=r.lua_pcall,e.exports.lua_pcallk=r.lua_pcallk,e.exports.lua_pop=r.lua_pop,e.exports.lua_pushboolean=r.lua_pushboolean,e.exports.lua_pushcclosure=r.lua_pushcclosure,e.exports.lua_pushcfunction=r.lua_pushcfunction,e.exports.lua_pushfstring=r.lua_pushfstring,e.exports.lua_pushglobaltable=r.lua_pushglobaltable,e.exports.lua_pushinteger=r.lua_pushinteger,e.exports.lua_pushjsclosure=r.lua_pushjsclosure,e.exports.lua_pushjsfunction=r.lua_pushjsfunction,e.exports.lua_pushlightuserdata=r.lua_pushlightuserdata,e.exports.lua_pushliteral=r.lua_pushliteral,e.exports.lua_pushlstring=r.lua_pushlstring,e.exports.lua_pushnil=r.lua_pushnil,e.exports.lua_pushnumber=r.lua_pushnumber,e.exports.lua_pushstring=r.lua_pushstring,e.exports.lua_pushthread=r.lua_pushthread,e.exports.lua_pushvalue=r.lua_pushvalue,e.exports.lua_pushvfstring=r.lua_pushvfstring,e.exports.lua_rawequal=r.lua_rawequal,e.exports.lua_rawget=r.lua_rawget,e.exports.lua_rawgeti=r.lua_rawgeti,e.exports.lua_rawgetp=r.lua_rawgetp,e.exports.lua_rawlen=r.lua_rawlen,e.exports.lua_rawset=r.lua_rawset,e.exports.lua_rawseti=r.lua_rawseti,e.exports.lua_rawsetp=r.lua_rawsetp,e.exports.lua_register=r.lua_register,e.exports.lua_remove=r.lua_remove,e.exports.lua_replace=r.lua_replace,e.exports.lua_resume=l.lua_resume,e.exports.lua_rotate=r.lua_rotate,e.exports.lua_setallof=l.lua_setallof,e.exports.lua_setfield=r.lua_setfield,e.exports.lua_setglobal=r.lua_setglobal,e.exports.lua_sethook=i.lua_sethook,e.exports.lua_seti=r.lua_seti,e.exports.lua_setlocal=i.lua_setlocal,e.exports.lua_setmetatable=r.lua_setmetatable,e.exports.lua_settable=r.lua_settable,e.exports.lua_settop=r.lua_settop,e.exports.lua_setupvalue=r.lua_setupvalue,e.exports.lua_setuservalue=r.lua_setuservalue,e.exports.lua_status=r.lua_status,e.exports.lua_stringtonumber=r.lua_stringtonumber,e.exports.lua_toboolean=r.lua_toboolean,e.exports.lua_todataview=r.lua_todataview,e.exports.lua_tointeger=r.lua_tointeger,e.exports.lua_tointegerx=r.lua_tointegerx,e.exports.lua_tojsstring=r.lua_tojsstring,e.exports.lua_tolstring=r.lua_tolstring,e.exports.lua_tonumber=r.lua_tonumber,e.exports.lua_tonumberx=r.lua_tonumberx,e.exports.lua_topointer=r.lua_topointer,e.exports.lua_toproxy=r.lua_toproxy,e.exports.lua_tostring=r.lua_tostring,e.exports.lua_tothread=r.lua_tothread,e.exports.lua_touserdata=r.lua_touserdata,e.exports.lua_type=r.lua_type,e.exports.lua_typename=r.lua_typename,e.exports.lua_upvalueid=r.lua_upvalueid,e.exports.lua_upvaluejoin=r.lua_upvaluejoin,e.exports.lua_version=r.lua_version,e.exports.lua_xmove=r.lua_xmove,e.exports.lua_yield=l.lua_yield,e.exports.lua_yieldk=l.lua_yieldk,e.exports.lua_tocfunction=r.lua_tocfunction},947:(e,t,n)=>{"use strict";const a={},{LUA_VERSION_MAJOR:r,LUA_VERSION_MINOR:i,to_luastring:l}=n(9775);e.exports.LUA_PATH_SEP=";";e.exports.LUA_PATH_MARK="?";e.exports.LUA_EXEC_DIR="!";const s=r+"."+i;e.exports.LUA_VDIR=s;{const t="/";e.exports.LUA_DIRSEP=t;const n="./lua/"+s+"/";e.exports.LUA_LDIR=n;const a=n;e.exports.LUA_JSDIR=a;const r=l(n+"?.lua;"+n+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=r;const i=l(a+"?.js;"+a+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=i}const o=a.LUA_COMPAT_FLOATSTRING||!1,u=-2147483648,c=a.LUAI_MAXSTACK||1e6,d=a.LUA_IDSIZE||59,h=a.LUAL_BUFFERSIZE||8192,f=function(e,t){for(var n=Math.min(3,Math.ceil(Math.abs(t)/1023)),a=e,r=0;r<n;r++)a*=Math.pow(2,Math.floor((t+r)/n));return a};e.exports.LUAI_MAXSTACK=c,e.exports.LUA_COMPAT_FLOATSTRING=o,e.exports.LUA_IDSIZE=d,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=u,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=h,e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var n=t.getUint32(0)>>>20&2047;0===n&&(t.setFloat64(0,e*Math.pow(2,64)),n=(t.getUint32(0)>>>20&2047)-64);var a=n-1022;return[f(e,-a),a]},e.exports.ldexp=f,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=u&&e<2147483648&&e},e.exports.luai_apicheck=function(e,t){if(!t)throw Error(t)}},7866:(e,t,n)=>{"use strict";const{LUA_SIGNATURE:a,constant_types:{LUA_TBOOLEAN:r,LUA_TLNGSTR:i,LUA_TNIL:l,LUA_TNUMFLT:s,LUA_TNUMINT:o,LUA_TSHRSTR:u},thread_status:{LUA_ERRSYNTAX:c},is_luastring:d,luastring_eq:h,to_luastring:f}=n(9775),_=n(983),m=n(8897),p=n(6435),{MAXARG_sBx:g,POS_A:b,POS_Ax:w,POS_B:v,POS_Bx:A,POS_C:y,POS_OP:L,SIZE_A:S,SIZE_Ax:T,SIZE_B:E,SIZE_Bx:k,SIZE_C:x,SIZE_OP:I}=n(6159),{lua_assert:M}=n(3568),{luaS_bless:U}=n(8878),{luaZ_read:P,ZIO:R}=n(4161);let O=[25,147,13,10,26,10];class C{constructor(e,t,n){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,M(t instanceof R,"BytecodeParser only operates on a ZIO"),M(d(n)),64===n[0]||61===n[0]?this.name=n.subarray(1):n[0]==a[0]?this.name=f("binary string",!0):this.name=n,this.L=e,this.Z=t,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(e){let t=new Uint8Array(e);return 0!==P(this.Z,t,0,e)&&this.error("truncated"),t}LoadByte(){return 0!==P(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==P(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==P(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==P(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let e=this.LoadByte();return 255===e&&(e=this.LoadSize_t()),0===e?null:U(this.L,this.read(e-1))}static MASK1(e,t){return~(-1<<e)<<t}LoadCode(e){let t=this.LoadInt(),n=C;for(let a=0;a<t;a++){0!==P(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let t=this.dv.getUint32(0,!0);e.code[a]={code:t,opcode:t>>L&n.MASK1(I,0),A:t>>b&n.MASK1(S,0),B:t>>v&n.MASK1(E,0),C:t>>y&n.MASK1(x,0),Bx:t>>A&n.MASK1(k,0),Ax:t>>w&n.MASK1(T,0),sBx:(t>>A&n.MASK1(k,0))-g}}}LoadConstants(e){let t=this.LoadInt();for(let n=0;n<t;n++){let t=this.LoadByte();switch(t){case l:e.k.push(new p.TValue(l,null));break;case r:e.k.push(new p.TValue(r,0!==this.LoadByte()));break;case s:e.k.push(new p.TValue(s,this.LoadNumber()));break;case o:e.k.push(new p.TValue(o,this.LoadInteger()));break;case u:case i:e.k.push(new p.TValue(i,this.LoadString()));break;default:this.error(`unrecognized constant '${t}'`)}}}LoadProtos(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.p[n]=new m.Proto(this.L),this.LoadFunction(e.p[n],e.source)}LoadUpvalues(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.upvalues[n]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.lineinfo[n]=this.LoadInt();t=this.LoadInt();for(let n=0;n<t;n++)e.locvars[n]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};t=this.LoadInt();for(let n=0;n<t;n++)e.upvalues[n].name=this.LoadString()}LoadFunction(e,t){e.source=this.LoadString(),null===e.source&&(e.source=t),e.linedefined=this.LoadInt(),e.lastlinedefined=this.LoadInt(),e.numparams=this.LoadByte(),e.is_vararg=0!==this.LoadByte(),e.maxstacksize=this.LoadByte(),this.LoadCode(e),this.LoadConstants(e),this.LoadUpvalues(e),this.LoadProtos(e),this.LoadDebug(e)}checkliteral(e,t){let n=this.read(e.length);h(n,e)||this.error(t)}checkHeader(){this.checkliteral(a.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(O,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(e){p.luaO_pushfstring(this.L,f("%s: %s precompiled chunk"),this.name,f(e)),_.luaD_throw(this.L,c)}checksize(e,t,n){e!==t&&this.error(`${n} size mismatch in`)}}e.exports.luaU_undump=function(e,t,n){let a=new C(e,t,n);a.checkHeader();let r=m.luaF_newLclosure(e,a.LoadByte());return _.luaD_inctop(e),e.stack[e.top-1].setclLvalue(r),r.p=new m.Proto(e),a.LoadFunction(r.p,null),M(r.nupvalues===r.p.upvalues.length),r}},427:(e,t,n)=>{"use strict";const{LUA_MASKLINE:a,LUA_MASKCOUNT:r,LUA_MULTRET:i,constant_types:{LUA_TBOOLEAN:l,LUA_TLCF:s,LUA_TLIGHTUSERDATA:o,LUA_TLNGSTR:u,LUA_TNIL:c,LUA_TNUMBER:d,LUA_TNUMFLT:h,LUA_TNUMINT:f,LUA_TSHRSTR:_,LUA_TTABLE:m,LUA_TUSERDATA:p},to_luastring:g}=n(9775),{INDEXK:b,ISK:w,LFIELDS_PER_FLUSH:v,OpCodesI:{OP_ADD:A,OP_BAND:y,OP_BNOT:L,OP_BOR:S,OP_BXOR:T,OP_CALL:E,OP_CLOSURE:k,OP_CONCAT:x,OP_DIV:I,OP_EQ:M,OP_EXTRAARG:U,OP_FORLOOP:P,OP_FORPREP:R,OP_GETTABLE:O,OP_GETTABUP:C,OP_GETUPVAL:B,OP_IDIV:F,OP_JMP:D,OP_LE:G,OP_LEN:N,OP_LOADBOOL:V,OP_LOADK:H,OP_LOADKX:j,OP_LOADNIL:K,OP_LT:z,OP_MOD:X,OP_MOVE:J,OP_MUL:Y,OP_NEWTABLE:$,OP_NOT:q,OP_POW:W,OP_RETURN:Z,OP_SELF:Q,OP_SETLIST:ee,OP_SETTABLE:te,OP_SETTABUP:ne,OP_SETUPVAL:ae,OP_SHL:re,OP_SHR:ie,OP_SUB:le,OP_TAILCALL:se,OP_TEST:oe,OP_TESTSET:ue,OP_TFORCALL:ce,OP_TFORLOOP:de,OP_UNM:he,OP_VARARG:fe}}=n(6159),{LUA_MAXINTEGER:_e,LUA_MININTEGER:me,lua_numbertointeger:pe}=n(947),{lua_assert:ge,luai_nummod:be}=n(3568),we=n(6435),ve=n(8897),Ae=n(6137),{luaS_bless:ye,luaS_eqlngstr:Le,luaS_hashlongstr:Se}=n(8878),Te=n(983),Ee=n(7670),ke=n(3718),xe=n(8821),Ie=function(e,t,n){return t+n.A},Me=function(e,t,n){return t+n.B},Ue=function(e,t,n,a){return w(a.B)?n[b(a.B)]:e.stack[t+a.B]},Pe=function(e,t,n,a){return w(a.C)?n[b(a.C)]:e.stack[t+a.C]},Re=function(e,t,n,a){let r=n.A;0!==r&&ve.luaF_close(e,t.l_base+r-1),t.l_savedpc+=n.sBx+a},Oe=function(e,t){Re(e,t,t.l_code[t.l_savedpc],1)},Ce=function(e,t,n){if(t.ttisnumber()&&n.ttisnumber())return He(t,n)?1:0;if(t.ttisstring()&&n.ttisstring())return Ke(t.tsvalue(),n.tsvalue())<0?1:0;{let a=Ee.luaT_callorderTM(e,t,n,Ee.TMS.TM_LT);return null===a&&xe.luaG_ordererror(e,t,n),a?1:0}},Be=function(e,t,n){let a;return t.ttisnumber()&&n.ttisnumber()?je(t,n)?1:0:t.ttisstring()&&n.ttisstring()?Ke(t.tsvalue(),n.tsvalue())<=0?1:0:(a=Ee.luaT_callorderTM(e,t,n,Ee.TMS.TM_LE),null!==a?a?1:0:(e.ci.callstatus|=Ae.CIST_LEQ,a=Ee.luaT_callorderTM(e,n,t,Ee.TMS.TM_LT),e.ci.callstatus^=Ae.CIST_LEQ,null===a&&xe.luaG_ordererror(e,t,n),a?0:1))},Fe=function(e,t,n){if(t.ttype()!==n.ttype())return t.ttnov()!==n.ttnov()||t.ttnov()!==d?0:t.value===n.value?1:0;let a;switch(t.ttype()){case c:return 1;case l:return t.value==n.value?1:0;case o:case f:case h:case s:return t.value===n.value?1:0;case _:case u:return Le(t.tsvalue(),n.tsvalue())?1:0;case p:case m:if(t.value===n.value)return 1;if(null===e)return 0;a=Ee.fasttm(e,t.value.metatable,Ee.TMS.TM_EQ),null===a&&(a=Ee.fasttm(e,n.value.metatable,Ee.TMS.TM_EQ));break;default:return t.value===n.value?1:0}if(null===a)return 0;let r=new we.TValue;return Ee.luaT_callTM(e,a,t,n,r,1),r.l_isfalse()?0:1},De=function(e,t){let n=!1,a=Ge(e,t<0?2:1);if(!1===a){let r=Ve(e);if(!1===r)return!1;0<r?(a=_e,t<0&&(n=!0)):(a=me,t>=0&&(n=!0))}return{stopnow:n,ilimit:a}},Ge=function(e,t){if(e.ttisfloat()){let n=e.value,a=Math.floor(n);if(n!==a){if(0===t)return!1;t>1&&(a+=1)}return pe(a)}if(e.ttisinteger())return e.value;if(Qe(e)){let n=new we.TValue;if(we.luaO_str2num(e.svalue(),n)===e.vslen()+1)return Ge(n,t)}return!1},Ne=function(e){return e.ttisinteger()?e.value:Ge(e,0)},Ve=function(e){if(e.ttnov()===d)return e.value;if(Qe(e)){let t=new we.TValue;if(we.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},He=function(e,t){return e.value<t.value},je=function(e,t){return e.value<=t.value},Ke=function(e,t){let n=Se(e),a=Se(t);return n===a?0:n<a?-1:1},ze=function(e,t,n){let a;switch(n.ttype()){case m:{let r=n.value;if(a=Ee.fasttm(e,r.metatable,Ee.TMS.TM_LEN),null!==a)break;return void t.setivalue(ke.luaH_getn(r))}case _:case u:return void t.setivalue(n.vslen());default:a=Ee.luaT_gettmbyobj(e,n,Ee.TMS.TM_LEN),a.ttisnil()&&xe.luaG_typeerror(e,n,g("get length of",!0))}Ee.luaT_callTM(e,a,n,n,t,1)},Xe=Math.imul||function(e,t){let n=65535&e,a=65535&t;return n*a+((e>>>16&65535)*a+n*(t>>>16&65535)<<16>>>0)|0},Je=function(e,t,n){return 0===n&&xe.luaG_runerror(e,g("attempt to divide by zero")),0|Math.floor(t/n)},Ye=function(e,t,n){return 0===n&&xe.luaG_runerror(e,g("attempt to perform 'n%%0'")),t-Math.floor(t/n)*n|0},$e=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},qe=function(e,t,n,a){let r=e.cache;if(null!==r){let i=e.upvalues,l=i.length;for(let e=0;e<l;e++){let l=i[e].instack?n[a+i[e].idx]:t[i[e].idx];if(r.upvals[e]!==l)return null}}return r},We=function(e,t,n,a,r){let i=t.upvalues.length,l=t.upvalues,s=new we.LClosure(e,i);s.p=t,e.stack[r].setclLvalue(s);for(let t=0;t<i;t++)l[t].instack?s.upvals[t]=ve.luaF_findupval(e,a+l[t].idx):s.upvals[t]=n[l[t].idx];t.cache=s},Ze=function(e){return e.ttisnumber()},Qe=function(e){return e.ttisstring()},et=function(e,t){let n=e.stack[t];return!!n.ttisstring()||!!Ze(n)&&(we.luaO_tostring(e,n),!0)},tt=function(e){return e.ttisstring()&&0===e.vslen()},nt=function(e,t,n,a){let r=0;do{let i=e.stack[t-n],l=i.vslen(),s=i.svalue();a.set(s,r),r+=l}while(--n>0)},at=function(e,t){ge(t>=2);do{let n=e.top,a=2;if((e.stack[n-2].ttisstring()||Ze(e.stack[n-2]))&&et(e,n-1))if(tt(e.stack[n-1]))et(e,n-2);else if(tt(e.stack[n-2]))we.setobjs2s(e,n-2,n-1);else{let r=e.stack[n-1].vslen();for(a=1;a<t&&et(e,n-a-1);a++){r+=e.stack[n-a-1].vslen()}let i=new Uint8Array(r);nt(e,n,a,i);let l=ye(e,i);we.setsvalue2s(e,n-a,l)}else Ee.luaT_trybinTM(e,e.stack[n-2],e.stack[n-1],e.stack[n-2],Ee.TMS.TM_CONCAT);for(t-=a-1;e.top>n-(a-1);)delete e.stack[--e.top]}while(t>1)},rt=function(e,t,n,a){for(let r=0;r<2e3;r++){let r;if(t.ttistable()){let i=ke.luaH_get(e,t.value,n);if(!i.ttisnil())return void we.setobj2s(e,a,i);if(r=Ee.fasttm(e,t.value.metatable,Ee.TMS.TM_INDEX),null===r)return void e.stack[a].setnilvalue()}else r=Ee.luaT_gettmbyobj(e,t,Ee.TMS.TM_INDEX),r.ttisnil()&&xe.luaG_typeerror(e,t,g("index",!0));if(r.ttisfunction())return void Ee.luaT_callTM(e,r,t,n,e.stack[a],1);t=r}xe.luaG_runerror(e,g("'__index' chain too long; possible loop",!0))},it=function(e,t,n,a){for(let r=0;r<2e3;r++){let r;if(t.ttistable()){let i=t.value;if(!ke.luaH_get(e,i,n).ttisnil()||null===(r=Ee.fasttm(e,i.metatable,Ee.TMS.TM_NEWINDEX)))return ke.luaH_setfrom(e,i,n,a),void ke.invalidateTMcache(i)}else(r=Ee.luaT_gettmbyobj(e,t,Ee.TMS.TM_NEWINDEX)).ttisnil()&&xe.luaG_typeerror(e,t,g("index",!0));if(r.ttisfunction())return void Ee.luaT_callTM(e,r,t,n,a,0);t=r}xe.luaG_runerror(e,g("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=Ze,e.exports.cvt2num=Qe,e.exports.luaV_gettable=rt,e.exports.luaV_concat=at,e.exports.luaV_div=Je,e.exports.luaV_equalobj=Fe,e.exports.luaV_execute=function(e){let t=e.ci;t.callstatus|=Ae.CIST_FRESH;e:for(;;){ge(t===e.ci);let n=t.func.value,l=n.p.k,s=t.l_base,o=t.l_code[t.l_savedpc++];e.hookmask&(a|r)&&xe.luaG_traceexec(e);let u=Ie(0,s,o);switch(o.opcode){case J:we.setobjs2s(e,u,Me(0,s,o));break;case H:{let t=l[o.Bx];we.setobj2s(e,u,t);break}case j:{ge(t.l_code[t.l_savedpc].opcode===U);let n=l[t.l_code[t.l_savedpc++].Ax];we.setobj2s(e,u,n);break}case V:e.stack[u].setbvalue(0!==o.B),0!==o.C&&t.l_savedpc++;break;case K:for(let t=0;t<=o.B;t++)e.stack[u+t].setnilvalue();break;case B:{let t=o.B;we.setobj2s(e,u,n.upvals[t]);break}case C:{let t=n.upvals[o.B],a=Pe(e,s,l,o);rt(e,t,a,u);break}case O:{let t=e.stack[Me(0,s,o)],n=Pe(e,s,l,o);rt(e,t,n,u);break}case ne:{let t=n.upvals[o.A],a=Ue(e,s,l,o),r=Pe(e,s,l,o);it(e,t,a,r);break}case ae:n.upvals[o.B].setfrom(e.stack[u]);break;case te:{let t=e.stack[u],n=Ue(e,s,l,o),a=Pe(e,s,l,o);it(e,t,n,a);break}case $:e.stack[u].sethvalue(ke.luaH_new(e));break;case Q:{let t=Me(0,s,o),n=Pe(e,s,l,o);we.setobjs2s(e,u+1,t),rt(e,e.stack[t],n,u);break}case A:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(a.value+r.value|0):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t+n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_ADD);break}case le:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(a.value-r.value|0):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t-n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SUB);break}case Y:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(Xe(a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t*n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_MUL);break}case X:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(Ye(e,a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(be(e,t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_MOD);break}case W:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(Math.pow(t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_POW);break}case I:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t/n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_DIV);break}case F:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(Je(e,a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(Math.floor(t/n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_IDIV);break}case y:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t&n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BAND);break}case S:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t|n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BOR);break}case T:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t^n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BXOR);break}case re:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue($e(t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SHL);break}case ie:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue($e(t,-n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SHR);break}case he:{let t,n=e.stack[Me(0,s,o)];n.ttisinteger()?e.stack[u].setivalue(0|-n.value):!1!==(t=Ve(n))?e.stack[u].setfltvalue(-t):Ee.luaT_trybinTM(e,n,n,e.stack[u],Ee.TMS.TM_UNM);break}case L:{let t=e.stack[Me(0,s,o)];t.ttisinteger()?e.stack[u].setivalue(~t.value):Ee.luaT_trybinTM(e,t,t,e.stack[u],Ee.TMS.TM_BNOT);break}case q:{let t=e.stack[Me(0,s,o)];e.stack[u].setbvalue(t.l_isfalse());break}case N:ze(e,e.stack[u],e.stack[Me(0,s,o)]);break;case x:{let n=o.B,a=o.C;e.top=s+a+1,at(e,a-n+1);let r=s+n;we.setobjs2s(e,u,r),Te.adjust_top(e,t.top);break}case D:Re(e,t,o,0);break;case M:Fe(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case z:Ce(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case G:Be(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case oe:(o.C?e.stack[u].l_isfalse():!e.stack[u].l_isfalse())?t.l_savedpc++:Oe(e,t);break;case ue:{let n=Me(0,s,o),a=e.stack[n];(o.C?a.l_isfalse():!a.l_isfalse())?t.l_savedpc++:(we.setobjs2s(e,u,n),Oe(e,t));break}case E:{let n=o.B,a=o.C-1;if(0!==n&&Te.adjust_top(e,u+n),!Te.luaD_precall(e,u,a)){t=e.ci;continue e}a>=0&&Te.adjust_top(e,t.top);break}case se:{let a=o.B;if(0!==a&&Te.adjust_top(e,u+a),!Te.luaD_precall(e,u,i)){let a=e.ci,r=a.previous,i=a.func,l=a.funcOff,s=r.funcOff,o=a.l_base+i.value.p.numparams;n.p.p.length>0&&ve.luaF_close(e,r.l_base);for(let t=0;l+t<o;t++)we.setobjs2s(e,s+t,l+t);r.l_base=s+(a.l_base-l),r.top=s+(e.top-l),Te.adjust_top(e,r.top),r.l_code=a.l_code,r.l_savedpc=a.l_savedpc,r.callstatus|=Ae.CIST_TAIL,r.next=null,t=e.ci=r,ge(e.top===r.l_base+e.stack[s].value.p.maxstacksize);continue e}break}case Z:{n.p.p.length>0&&ve.luaF_close(e,s);let a=Te.luaD_poscall(e,t,u,0!==o.B?o.B-1:e.top-u);if(t.callstatus&Ae.CIST_FRESH)return;t=e.ci,a&&Te.adjust_top(e,t.top),ge(t.callstatus&Ae.CIST_LUA),ge(t.l_code[t.l_savedpc-1].opcode===E);continue e}case P:if(e.stack[u].ttisinteger()){let n=e.stack[u+2].value,a=e.stack[u].value+n|0,r=e.stack[u+1].value;(0<n?a<=r:r<=a)&&(t.l_savedpc+=o.sBx,e.stack[u].chgivalue(a),e.stack[u+3].setivalue(a))}else{let n=e.stack[u+2].value,a=e.stack[u].value+n,r=e.stack[u+1].value;(0<n?a<=r:r<=a)&&(t.l_savedpc+=o.sBx,e.stack[u].chgfltvalue(a),e.stack[u+3].setfltvalue(a))}break;case R:{let n,a=e.stack[u],r=e.stack[u+1],i=e.stack[u+2];if(a.ttisinteger()&&i.ttisinteger()&&(n=De(r,i.value))){let e=n.stopnow?0:a.value;r.value=n.ilimit,a.value=e-i.value|0}else{let t,n,l;!1===(t=Ve(r))&&xe.luaG_runerror(e,g("'for' limit must be a number",!0)),e.stack[u+1].setfltvalue(t),!1===(n=Ve(i))&&xe.luaG_runerror(e,g("'for' step must be a number",!0)),e.stack[u+2].setfltvalue(n),!1===(l=Ve(a))&&xe.luaG_runerror(e,g("'for' initial value must be a number",!0)),e.stack[u].setfltvalue(l-n)}t.l_savedpc+=o.sBx;break}case ce:{let n=u+3;we.setobjs2s(e,n+2,u+2),we.setobjs2s(e,n+1,u+1),we.setobjs2s(e,n,u),Te.adjust_top(e,n+3),Te.luaD_call(e,n,o.C),Te.adjust_top(e,t.top),o=t.l_code[t.l_savedpc++],u=Ie(0,s,o),ge(o.opcode===de)}case de:e.stack[u+1].ttisnil()||(we.setobjs2s(e,u,u+1),t.l_savedpc+=o.sBx);break;case ee:{let n=o.B,a=o.C;0===n&&(n=e.top-u-1),0===a&&(ge(t.l_code[t.l_savedpc].opcode===U),a=t.l_code[t.l_savedpc++].Ax);let r=e.stack[u].value,i=(a-1)*v+n;for(;n>0;n--)ke.luaH_setint(r,i--,e.stack[u+n]);Te.adjust_top(e,t.top);break}case k:{let t=n.p.p[o.Bx],a=qe(t,n.upvals,e.stack,s);null===a?We(e,t,n.upvals,s,u):e.stack[u].setclLvalue(a);break}case fe:{let a,r=o.B-1,i=s-t.funcOff-n.p.numparams-1;for(i<0&&(i=0),r<0&&(r=i,Te.luaD_checkstack(e,i),Te.adjust_top(e,u+i)),a=0;a<r&&a<i;a++)we.setobjs2s(e,u+a,s-i+a);for(;a<r;a++)e.stack[u+a].setnilvalue();break}case U:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){let t=e.ci,n=t.l_base,a=t.l_code[t.l_savedpc-1],r=a.opcode;switch(r){case A:case le:case Y:case I:case F:case y:case S:case T:case re:case ie:case X:case W:case he:case L:case N:case C:case O:case Q:we.setobjs2s(e,n+a.A,e.top-1),delete e.stack[--e.top];break;case G:case z:case M:{let n=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Ae.CIST_LEQ&&(ge(r===G),t.callstatus^=Ae.CIST_LEQ,n=!n),ge(t.l_code[t.l_savedpc].opcode===D),n!==!!a.A&&t.l_savedpc++;break}case x:{let r=e.top-1,i=r-1-(n+a.B);we.setobjs2s(e,r-2,r),i>1&&(e.top=r-1,at(e,i)),we.setobjs2s(e,t.l_base+a.A,e.top-1),Te.adjust_top(e,t.top);break}case ce:ge(t.l_code[t.l_savedpc].opcode===de),Te.adjust_top(e,t.top);break;case E:a.C-1>=0&&Te.adjust_top(e,t.top)}},e.exports.luaV_imul=Xe,e.exports.luaV_lessequal=Be,e.exports.luaV_lessthan=Ce,e.exports.luaV_mod=Ye,e.exports.luaV_objlen=ze,e.exports.luaV_rawequalobj=function(e,t){return Fe(null,e,t)},e.exports.luaV_shiftl=$e,e.exports.luaV_tointeger=Ge,e.exports.settable=it,e.exports.tointeger=Ne,e.exports.tonumber=Ve},4161:(e,t,n)=>{"use strict";const{lua_assert:a}=n(3568);const r=function(e){let t=e.reader(e.L,e.data);if(null===t)return-1;a(t instanceof Uint8Array,"Should only load binary of array of bytes");let n=t.length;return 0===n?-1:(e.buffer=t,e.off=0,e.n=n-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=r,e.exports.luaZ_read=function(e,t,n,a){for(;a;){if(0===e.n){if(-1===r(e))return a;e.n++,e.off--}let i=a<=e.n?a:e.n;for(let a=0;a<i;a++)t[n++]=e.buffer[e.off++];e.n-=i,0===e.n&&(e.buffer=null),a-=i}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,t,n){let a=new Uint8Array(n);t.buffer&&a.set(t.buffer),t.buffer=a},e.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},e.exports.ZIO=class{constructor(e,t,n){this.L=e,a("function"==typeof t,"ZIO requires a reader"),this.reader=t,this.data=n,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:r(this)}}},9685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EPSILON:()=>a,ARRAY_TYPE:()=>r,RANDOM:()=>i,setMatrixArrayType:()=>l,toRadian:()=>o,equals:()=>u});var a=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random;function l(e){r=e}var s=Math.PI/180;function o(e){return e*s}function u(e,t){return Math.abs(e-t)<=a*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},9234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{glMatrix:()=>o,mat2:()=>a,mat2d:()=>r,mat3:()=>le,mat4:()=>i,quat:()=>et,quat2:()=>l,vec2:()=>s,vec3:()=>Rn,vec4:()=>On});var a={};n.r(a),n.d(a,{LDU:()=>E,add:()=>k,adjoint:()=>g,clone:()=>c,copy:()=>d,create:()=>u,determinant:()=>b,equals:()=>M,exactEquals:()=>I,frob:()=>T,fromRotation:()=>y,fromScaling:()=>L,fromValues:()=>f,identity:()=>h,invert:()=>p,mul:()=>R,multiply:()=>w,multiplyScalar:()=>U,multiplyScalarAndAdd:()=>P,rotate:()=>v,scale:()=>A,set:()=>_,str:()=>S,sub:()=>O,subtract:()=>x,transpose:()=>m});var r={};n.r(r),n.d(r,{add:()=>Z,clone:()=>B,copy:()=>F,create:()=>C,determinant:()=>H,equals:()=>ae,exactEquals:()=>ne,frob:()=>W,fromRotation:()=>J,fromScaling:()=>Y,fromTranslation:()=>$,fromValues:()=>G,identity:()=>D,invert:()=>V,mul:()=>re,multiply:()=>j,multiplyScalar:()=>ee,multiplyScalarAndAdd:()=>te,rotate:()=>K,scale:()=>z,set:()=>N,str:()=>q,sub:()=>ie,subtract:()=>Q,translate:()=>X});var i={};n.r(i),n.d(i,{add:()=>Xe,adjoint:()=>me,clone:()=>oe,copy:()=>ue,create:()=>se,determinant:()=>pe,equals:()=>We,exactEquals:()=>qe,frob:()=>ze,fromQuat:()=>Fe,fromQuat2:()=>Ue,fromRotation:()=>Ee,fromRotationTranslation:()=>Me,fromRotationTranslationScale:()=>Ce,fromRotationTranslationScaleOrigin:()=>Be,fromScaling:()=>Te,fromTranslation:()=>Se,fromValues:()=>ce,fromXRotation:()=>ke,fromYRotation:()=>xe,fromZRotation:()=>Ie,frustum:()=>De,getRotation:()=>Oe,getScaling:()=>Re,getTranslation:()=>Pe,identity:()=>he,invert:()=>_e,lookAt:()=>He,mul:()=>Ze,multiply:()=>ge,multiplyScalar:()=>Ye,multiplyScalarAndAdd:()=>$e,ortho:()=>Ve,perspective:()=>Ge,perspectiveFromFieldOfView:()=>Ne,rotate:()=>ve,rotateX:()=>Ae,rotateY:()=>ye,rotateZ:()=>Le,scale:()=>we,set:()=>de,str:()=>Ke,sub:()=>Qe,subtract:()=>Je,targetTo:()=>je,translate:()=>be,transpose:()=>fe});var l={};n.r(l),n.d(l,{add:()=>St,clone:()=>nt,conjugate:()=>Ut,copy:()=>ut,create:()=>tt,dot:()=>xt,equals:()=>Gt,exactEquals:()=>Dt,fromMat4:()=>ot,fromRotation:()=>st,fromRotationTranslation:()=>it,fromRotationTranslationValues:()=>rt,fromTranslation:()=>lt,fromValues:()=>at,getDual:()=>ft,getReal:()=>ht,getTranslation:()=>pt,identity:()=>ct,invert:()=>Mt,len:()=>Rt,length:()=>Pt,lerp:()=>It,mul:()=>Et,multiply:()=>Tt,normalize:()=>Bt,rotateAroundAxis:()=>Lt,rotateByQuatAppend:()=>At,rotateByQuatPrepend:()=>yt,rotateX:()=>bt,rotateY:()=>wt,rotateZ:()=>vt,scale:()=>kt,set:()=>dt,setDual:()=>mt,setReal:()=>_t,sqrLen:()=>Ct,squaredLength:()=>Ot,str:()=>Ft,translate:()=>gt});var s={};n.r(s),n.d(s,{add:()=>zt,angle:()=>wn,ceil:()=>$t,clone:()=>Vt,copy:()=>jt,create:()=>Nt,cross:()=>dn,dist:()=>In,distance:()=>nn,div:()=>xn,divide:()=>Yt,dot:()=>cn,equals:()=>Ln,exactEquals:()=>yn,floor:()=>qt,forEach:()=>Pn,fromValues:()=>Ht,inverse:()=>on,len:()=>Tn,length:()=>rn,lerp:()=>hn,max:()=>Zt,min:()=>Wt,mul:()=>kn,multiply:()=>Jt,negate:()=>sn,normalize:()=>un,random:()=>fn,rotate:()=>bn,round:()=>Qt,scale:()=>en,scaleAndAdd:()=>tn,set:()=>Kt,sqrDist:()=>Mn,sqrLen:()=>Un,squaredDistance:()=>an,squaredLength:()=>ln,str:()=>An,sub:()=>En,subtract:()=>Xt,transformMat2:()=>_n,transformMat2d:()=>mn,transformMat3:()=>pn,transformMat4:()=>gn,zero:()=>vn});var o=n(9685);function u(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function c(e){var t=new o.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function h(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function f(e,t,n,a){var r=new o.ARRAY_TYPE(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function _(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}function m(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function p(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*i-r*a;return l?(l=1/l,e[0]=i*l,e[1]=-a*l,e[2]=-r*l,e[3]=n*l,e):null}function g(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function b(e){return e[0]*e[3]-e[2]*e[1]}function w(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*s+i*o,e[1]=r*s+l*o,e[2]=a*u+i*c,e[3]=r*u+l*c,e}function v(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+i*s,e[1]=r*o+l*s,e[2]=a*-s+i*o,e[3]=r*-s+l*o,e}function A(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1];return e[0]=a*s,e[1]=r*s,e[2]=i*o,e[3]=l*o,e}function y(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e}function L(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function S(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function T(e){return Math.hypot(e[0],e[1],e[2],e[3])}function E(e,t,n,a){return e[2]=a[2]/a[0],n[0]=a[0],n[1]=a[1],n[3]=a[3]-e[2]*n[1],[e,t,n]}function k(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function x(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function M(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-l)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))}function U(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function P(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e}var R=w,O=x;function C(){var e=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function B(e){var t=new o.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function D(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function G(e,t,n,a,r,i){var l=new o.ARRAY_TYPE(6);return l[0]=e,l[1]=t,l[2]=n,l[3]=a,l[4]=r,l[5]=i,l}function N(e,t,n,a,r,i,l){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e}function V(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=n*i-a*r;return o?(o=1/o,e[0]=i*o,e[1]=-a*o,e[2]=-r*o,e[3]=n*o,e[4]=(r*s-i*l)*o,e[5]=(a*l-n*s)*o,e):null}function H(e){return e[0]*e[3]-e[1]*e[2]}function j(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1],d=n[2],h=n[3],f=n[4],_=n[5];return e[0]=a*u+i*c,e[1]=r*u+l*c,e[2]=a*d+i*h,e[3]=r*d+l*h,e[4]=a*f+i*_+s,e[5]=r*f+l*_+o,e}function K(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=a*c+i*u,e[1]=r*c+l*u,e[2]=a*-u+i*c,e[3]=r*-u+l*c,e[4]=s,e[5]=o,e}function z(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1];return e[0]=a*u,e[1]=r*u,e[2]=i*c,e[3]=l*c,e[4]=s,e[5]=o,e}function X(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=a*u+i*c+s,e[5]=r*u+l*c+o,e}function J(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e[4]=0,e[5]=0,e}function Y(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function $(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function q(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function W(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function Z(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function Q(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function ee(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function te(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e}function ne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function ae(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],u=t[0],c=t[1],d=t[2],h=t[3],f=t[4],_=t[5];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(l-f)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(s-_)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))}var re=j,ie=Q,le=n(5600);function se(){var e=new o.ARRAY_TYPE(16);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function oe(e){var t=new o.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ce(e,t,n,a,r,i,l,s,u,c,d,h,f,_,m,p){var g=new o.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=r,g[5]=i,g[6]=l,g[7]=s,g[8]=u,g[9]=c,g[10]=d,g[11]=h,g[12]=f,g[13]=_,g[14]=m,g[15]=p,g}function de(e,t,n,a,r,i,l,s,o,u,c,d,h,f,_,m,p){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e[8]=u,e[9]=c,e[10]=d,e[11]=h,e[12]=f,e[13]=_,e[14]=m,e[15]=p,e}function he(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fe(e,t){if(e===t){var n=t[1],a=t[2],r=t[3],i=t[6],l=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=i,e[11]=t[14],e[12]=r,e[13]=l,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function _e(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15],b=n*s-a*l,w=n*o-r*l,v=n*u-i*l,A=a*o-r*s,y=a*u-i*s,L=r*u-i*o,S=c*m-d*_,T=c*p-h*_,E=c*g-f*_,k=d*p-h*m,x=d*g-f*m,I=h*g-f*p,M=b*I-w*x+v*k+A*E-y*T+L*S;return M?(M=1/M,e[0]=(s*I-o*x+u*k)*M,e[1]=(r*x-a*I-i*k)*M,e[2]=(m*L-p*y+g*A)*M,e[3]=(h*y-d*L-f*A)*M,e[4]=(o*E-l*I-u*T)*M,e[5]=(n*I-r*E+i*T)*M,e[6]=(p*v-_*L-g*w)*M,e[7]=(c*L-h*v+f*w)*M,e[8]=(l*x-s*E+u*S)*M,e[9]=(a*E-n*x-i*S)*M,e[10]=(_*y-m*v+g*b)*M,e[11]=(d*v-c*y-f*b)*M,e[12]=(s*T-l*k-o*S)*M,e[13]=(n*k-a*T+r*S)*M,e[14]=(m*w-_*A-p*b)*M,e[15]=(c*A-d*w+h*b)*M,e):null}function me(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15];return e[0]=s*(h*g-f*p)-d*(o*g-u*p)+m*(o*f-u*h),e[1]=-(a*(h*g-f*p)-d*(r*g-i*p)+m*(r*f-i*h)),e[2]=a*(o*g-u*p)-s*(r*g-i*p)+m*(r*u-i*o),e[3]=-(a*(o*f-u*h)-s*(r*f-i*h)+d*(r*u-i*o)),e[4]=-(l*(h*g-f*p)-c*(o*g-u*p)+_*(o*f-u*h)),e[5]=n*(h*g-f*p)-c*(r*g-i*p)+_*(r*f-i*h),e[6]=-(n*(o*g-u*p)-l*(r*g-i*p)+_*(r*u-i*o)),e[7]=n*(o*f-u*h)-l*(r*f-i*h)+c*(r*u-i*o),e[8]=l*(d*g-f*m)-c*(s*g-u*m)+_*(s*f-u*d),e[9]=-(n*(d*g-f*m)-c*(a*g-i*m)+_*(a*f-i*d)),e[10]=n*(s*g-u*m)-l*(a*g-i*m)+_*(a*u-i*s),e[11]=-(n*(s*f-u*d)-l*(a*f-i*d)+c*(a*u-i*s)),e[12]=-(l*(d*p-h*m)-c*(s*p-o*m)+_*(s*h-o*d)),e[13]=n*(d*p-h*m)-c*(a*p-r*m)+_*(a*h-r*d),e[14]=-(n*(s*p-o*m)-l*(a*p-r*m)+_*(a*o-r*s)),e[15]=n*(s*h-o*d)-l*(a*h-r*d)+c*(a*o-r*s),e}function pe(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],l=e[5],s=e[6],o=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],_=e[13],m=e[14],p=e[15];return(t*l-n*i)*(d*p-h*m)-(t*s-a*i)*(c*p-h*_)+(t*o-r*i)*(c*m-d*_)+(n*s-a*l)*(u*p-h*f)-(n*o-r*l)*(u*m-d*f)+(a*o-r*s)*(u*_-c*f)}function ge(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],_=t[11],m=t[12],p=t[13],g=t[14],b=t[15],w=n[0],v=n[1],A=n[2],y=n[3];return e[0]=w*a+v*s+A*d+y*m,e[1]=w*r+v*o+A*h+y*p,e[2]=w*i+v*u+A*f+y*g,e[3]=w*l+v*c+A*_+y*b,w=n[4],v=n[5],A=n[6],y=n[7],e[4]=w*a+v*s+A*d+y*m,e[5]=w*r+v*o+A*h+y*p,e[6]=w*i+v*u+A*f+y*g,e[7]=w*l+v*c+A*_+y*b,w=n[8],v=n[9],A=n[10],y=n[11],e[8]=w*a+v*s+A*d+y*m,e[9]=w*r+v*o+A*h+y*p,e[10]=w*i+v*u+A*f+y*g,e[11]=w*l+v*c+A*_+y*b,w=n[12],v=n[13],A=n[14],y=n[15],e[12]=w*a+v*s+A*d+y*m,e[13]=w*r+v*o+A*h+y*p,e[14]=w*i+v*u+A*f+y*g,e[15]=w*l+v*c+A*_+y*b,e}function be(e,t,n){var a,r,i,l,s,o,u,c,d,h,f,_,m=n[0],p=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*p+t[8]*g+t[12],e[13]=t[1]*m+t[5]*p+t[9]*g+t[13],e[14]=t[2]*m+t[6]*p+t[10]*g+t[14],e[15]=t[3]*m+t[7]*p+t[11]*g+t[15]):(a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],_=t[11],e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=s,e[5]=o,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=_,e[12]=a*m+s*p+d*g+t[12],e[13]=r*m+o*p+h*g+t[13],e[14]=i*m+u*p+f*g+t[14],e[15]=l*m+c*p+_*g+t[15]),e}function we(e,t,n){var a=n[0],r=n[1],i=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ve(e,t,n,a){var r,i,l,s,u,c,d,h,f,_,m,p,g,b,w,v,A,y,L,S,T,E,k,x,I=a[0],M=a[1],U=a[2],P=Math.hypot(I,M,U);return P<o.EPSILON?null:(I*=P=1/P,M*=P,U*=P,r=Math.sin(n),l=1-(i=Math.cos(n)),s=t[0],u=t[1],c=t[2],d=t[3],h=t[4],f=t[5],_=t[6],m=t[7],p=t[8],g=t[9],b=t[10],w=t[11],v=I*I*l+i,A=M*I*l+U*r,y=U*I*l-M*r,L=I*M*l-U*r,S=M*M*l+i,T=U*M*l+I*r,E=I*U*l+M*r,k=M*U*l-I*r,x=U*U*l+i,e[0]=s*v+h*A+p*y,e[1]=u*v+f*A+g*y,e[2]=c*v+_*A+b*y,e[3]=d*v+m*A+w*y,e[4]=s*L+h*S+p*T,e[5]=u*L+f*S+g*T,e[6]=c*L+_*S+b*T,e[7]=d*L+m*S+w*T,e[8]=s*E+h*k+p*x,e[9]=u*E+f*k+g*x,e[10]=c*E+_*k+b*x,e[11]=d*E+m*k+w*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Ae(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[4],l=t[5],s=t[6],o=t[7],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*r+u*a,e[5]=l*r+c*a,e[6]=s*r+d*a,e[7]=o*r+h*a,e[8]=u*r-i*a,e[9]=c*r-l*a,e[10]=d*r-s*a,e[11]=h*r-o*a,e}function ye(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],l=t[1],s=t[2],o=t[3],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r-u*a,e[1]=l*r-c*a,e[2]=s*r-d*a,e[3]=o*r-h*a,e[8]=i*a+u*r,e[9]=l*a+c*r,e[10]=s*a+d*r,e[11]=o*a+h*r,e}function Le(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],l=t[1],s=t[2],o=t[3],u=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+u*a,e[1]=l*r+c*a,e[2]=s*r+d*a,e[3]=o*r+h*a,e[4]=u*r-i*a,e[5]=c*r-l*a,e[6]=d*r-s*a,e[7]=h*r-o*a,e}function Se(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Te(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ee(e,t,n){var a,r,i,l=n[0],s=n[1],u=n[2],c=Math.hypot(l,s,u);return c<o.EPSILON?null:(l*=c=1/c,s*=c,u*=c,a=Math.sin(t),i=1-(r=Math.cos(t)),e[0]=l*l*i+r,e[1]=s*l*i+u*a,e[2]=u*l*i-s*a,e[3]=0,e[4]=l*s*i-u*a,e[5]=s*s*i+r,e[6]=u*s*i+l*a,e[7]=0,e[8]=l*u*i+s*a,e[9]=s*u*i-l*a,e[10]=u*u*i+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ke(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xe(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ie(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Me(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=a+a,o=r+r,u=i+i,c=a*s,d=a*o,h=a*u,f=r*o,_=r*u,m=i*u,p=l*s,g=l*o,b=l*u;return e[0]=1-(f+m),e[1]=d+b,e[2]=h-g,e[3]=0,e[4]=d-b,e[5]=1-(c+m),e[6]=_+p,e[7]=0,e[8]=h+g,e[9]=_-p,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ue(e,t){var n=new o.ARRAY_TYPE(3),a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],u=t[5],c=t[6],d=t[7],h=a*a+r*r+i*i+l*l;return h>0?(n[0]=2*(s*l+d*a+u*i-c*r)/h,n[1]=2*(u*l+d*r+c*a-s*i)/h,n[2]=2*(c*l+d*i+s*r-u*a)/h):(n[0]=2*(s*l+d*a+u*i-c*r),n[1]=2*(u*l+d*r+c*a-s*i),n[2]=2*(c*l+d*i+s*r-u*a)),Me(e,t,n),e}function Pe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Re(e,t){var n=t[0],a=t[1],r=t[2],i=t[4],l=t[5],s=t[6],o=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,a,r),e[1]=Math.hypot(i,l,s),e[2]=Math.hypot(o,u,c),e}function Oe(e,t){var n=new o.ARRAY_TYPE(3);Re(n,t);var a=1/n[0],r=1/n[1],i=1/n[2],l=t[0]*a,s=t[1]*r,u=t[2]*i,c=t[4]*a,d=t[5]*r,h=t[6]*i,f=t[8]*a,_=t[9]*r,m=t[10]*i,p=l+d+m,g=0;return p>0?(g=2*Math.sqrt(p+1),e[3]=.25*g,e[0]=(h-_)/g,e[1]=(f-u)/g,e[2]=(s-c)/g):l>d&&l>m?(g=2*Math.sqrt(1+l-d-m),e[3]=(h-_)/g,e[0]=.25*g,e[1]=(s+c)/g,e[2]=(f+u)/g):d>m?(g=2*Math.sqrt(1+d-l-m),e[3]=(f-u)/g,e[0]=(s+c)/g,e[1]=.25*g,e[2]=(h+_)/g):(g=2*Math.sqrt(1+m-l-d),e[3]=(s-c)/g,e[0]=(f+u)/g,e[1]=(h+_)/g,e[2]=.25*g),e}function Ce(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=t[3],o=r+r,u=i+i,c=l+l,d=r*o,h=r*u,f=r*c,_=i*u,m=i*c,p=l*c,g=s*o,b=s*u,w=s*c,v=a[0],A=a[1],y=a[2];return e[0]=(1-(_+p))*v,e[1]=(h+w)*v,e[2]=(f-b)*v,e[3]=0,e[4]=(h-w)*A,e[5]=(1-(d+p))*A,e[6]=(m+g)*A,e[7]=0,e[8]=(f+b)*y,e[9]=(m-g)*y,e[10]=(1-(d+_))*y,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Be(e,t,n,a,r){var i=t[0],l=t[1],s=t[2],o=t[3],u=i+i,c=l+l,d=s+s,h=i*u,f=i*c,_=i*d,m=l*c,p=l*d,g=s*d,b=o*u,w=o*c,v=o*d,A=a[0],y=a[1],L=a[2],S=r[0],T=r[1],E=r[2],k=(1-(m+g))*A,x=(f+v)*A,I=(_-w)*A,M=(f-v)*y,U=(1-(h+g))*y,P=(p+b)*y,R=(_+w)*L,O=(p-b)*L,C=(1-(h+m))*L;return e[0]=k,e[1]=x,e[2]=I,e[3]=0,e[4]=M,e[5]=U,e[6]=P,e[7]=0,e[8]=R,e[9]=O,e[10]=C,e[11]=0,e[12]=n[0]+S-(k*S+M*T+R*E),e[13]=n[1]+T-(x*S+U*T+O*E),e[14]=n[2]+E-(I*S+P*T+C*E),e[15]=1,e}function Fe(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n+n,s=a+a,o=r+r,u=n*l,c=a*l,d=a*s,h=r*l,f=r*s,_=r*o,m=i*l,p=i*s,g=i*o;return e[0]=1-d-_,e[1]=c+g,e[2]=h-p,e[3]=0,e[4]=c-g,e[5]=1-u-_,e[6]=f+m,e[7]=0,e[8]=h+p,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function De(e,t,n,a,r,i,l){var s=1/(n-t),o=1/(r-a),u=1/(i-l);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*o,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+a)*o,e[10]=(l+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*i*2*u,e[15]=0,e}function Ge(e,t,n,a,r){var i,l=1/Math.tan(t/2);return e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(i=1/(a-r),e[10]=(r+a)*i,e[14]=2*r*a*i):(e[10]=-1,e[14]=-2*a),e}function Ne(e,t,n,a){var r=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),o=2/(l+s),u=2/(r+i);return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(l-s)*o*.5,e[9]=(r-i)*u*.5,e[10]=a/(n-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n/(n-a),e[15]=0,e}function Ve(e,t,n,a,r,i,l){var s=1/(t-n),o=1/(a-r),u=1/(i-l);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+a)*o,e[14]=(l+i)*u,e[15]=1,e}function He(e,t,n,a){var r,i,l,s,u,c,d,h,f,_,m=t[0],p=t[1],g=t[2],b=a[0],w=a[1],v=a[2],A=n[0],y=n[1],L=n[2];return Math.abs(m-A)<o.EPSILON&&Math.abs(p-y)<o.EPSILON&&Math.abs(g-L)<o.EPSILON?he(e):(d=m-A,h=p-y,f=g-L,r=w*(f*=_=1/Math.hypot(d,h,f))-v*(h*=_),i=v*(d*=_)-b*f,l=b*h-w*d,(_=Math.hypot(r,i,l))?(r*=_=1/_,i*=_,l*=_):(r=0,i=0,l=0),s=h*l-f*i,u=f*r-d*l,c=d*i-h*r,(_=Math.hypot(s,u,c))?(s*=_=1/_,u*=_,c*=_):(s=0,u=0,c=0),e[0]=r,e[1]=s,e[2]=d,e[3]=0,e[4]=i,e[5]=u,e[6]=h,e[7]=0,e[8]=l,e[9]=c,e[10]=f,e[11]=0,e[12]=-(r*m+i*p+l*g),e[13]=-(s*m+u*p+c*g),e[14]=-(d*m+h*p+f*g),e[15]=1,e)}function je(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=a[0],o=a[1],u=a[2],c=r-n[0],d=i-n[1],h=l-n[2],f=c*c+d*d+h*h;f>0&&(c*=f=1/Math.sqrt(f),d*=f,h*=f);var _=o*h-u*d,m=u*c-s*h,p=s*d-o*c;return(f=_*_+m*m+p*p)>0&&(_*=f=1/Math.sqrt(f),m*=f,p*=f),e[0]=_,e[1]=m,e[2]=p,e[3]=0,e[4]=d*p-h*m,e[5]=h*_-c*p,e[6]=c*m-d*_,e[7]=0,e[8]=c,e[9]=d,e[10]=h,e[11]=0,e[12]=r,e[13]=i,e[14]=l,e[15]=1,e}function Ke(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ze(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Xe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Je(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Ye(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function $e(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e[9]=t[9]+n[9]*a,e[10]=t[10]+n[10]*a,e[11]=t[11]+n[11]*a,e[12]=t[12]+n[12]*a,e[13]=t[13]+n[13]*a,e[14]=t[14]+n[14]*a,e[15]=t[15]+n[15]*a,e}function qe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function We(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],_=e[11],m=e[12],p=e[13],g=e[14],b=e[15],w=t[0],v=t[1],A=t[2],y=t[3],L=t[4],S=t[5],T=t[6],E=t[7],k=t[8],x=t[9],I=t[10],M=t[11],U=t[12],P=t[13],R=t[14],O=t[15];return Math.abs(n-w)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(r-A)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(i-y)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(l-L)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(s-S)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-T)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(d-k)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-x)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(f-I)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(_-M)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(M))&&Math.abs(m-U)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(p-P)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(g-R)<=o.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(b-O)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))}var Ze=ge,Qe=Je,et=n(2945);function tt(){var e=new o.ARRAY_TYPE(8);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function nt(e){var t=new o.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function at(e,t,n,a,r,i,l,s){var u=new o.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r,u[5]=i,u[6]=l,u[7]=s,u}function rt(e,t,n,a,r,i,l){var s=new o.ARRAY_TYPE(8);s[0]=e,s[1]=t,s[2]=n,s[3]=a;var u=.5*r,c=.5*i,d=.5*l;return s[4]=u*a+c*n-d*t,s[5]=c*a+d*e-u*n,s[6]=d*a+u*t-c*e,s[7]=-u*e-c*t-d*n,s}function it(e,t,n){var a=.5*n[0],r=.5*n[1],i=.5*n[2],l=t[0],s=t[1],o=t[2],u=t[3];return e[0]=l,e[1]=s,e[2]=o,e[3]=u,e[4]=a*u+r*o-i*s,e[5]=r*u+i*l-a*o,e[6]=i*u+a*s-r*l,e[7]=-a*l-r*s-i*o,e}function lt(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function st(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function ot(e,t){var n=et.create();Oe(n,t);var a=new o.ARRAY_TYPE(3);return Pe(a,t),it(e,n,a),e}function ut(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ct(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function dt(e,t,n,a,r,i,l,s,o){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e}var ht=et.copy;function ft(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var _t=et.copy;function mt(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function pt(e,t){var n=t[4],a=t[5],r=t[6],i=t[7],l=-t[0],s=-t[1],o=-t[2],u=t[3];return e[0]=2*(n*u+i*l+a*o-r*s),e[1]=2*(a*u+i*s+r*l-n*o),e[2]=2*(r*u+i*o+n*s-a*l),e}function gt(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=.5*n[0],o=.5*n[1],u=.5*n[2],c=t[4],d=t[5],h=t[6],f=t[7];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=l*s+r*u-i*o+c,e[5]=l*o+i*s-a*u+d,e[6]=l*u+a*o-r*s+h,e[7]=-a*s-r*o-i*u+f,e}function bt(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return et.rotateX(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function wt(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return et.rotateY(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function vt(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return et.rotateZ(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function At(e,t,n){var a=n[0],r=n[1],i=n[2],l=n[3],s=t[0],o=t[1],u=t[2],c=t[3];return e[0]=s*l+c*a+o*i-u*r,e[1]=o*l+c*r+u*a-s*i,e[2]=u*l+c*i+s*r-o*a,e[3]=c*l-s*a-o*r-u*i,s=t[4],o=t[5],u=t[6],c=t[7],e[4]=s*l+c*a+o*i-u*r,e[5]=o*l+c*r+u*a-s*i,e[6]=u*l+c*i+s*r-o*a,e[7]=c*l-s*a-o*r-u*i,e}function yt(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*c+l*s+r*u-i*o,e[1]=r*c+l*o+i*s-a*u,e[2]=i*c+l*u+a*o-r*s,e[3]=l*c-a*s-r*o-i*u,s=n[4],o=n[5],u=n[6],c=n[7],e[4]=a*c+l*s+r*u-i*o,e[5]=r*c+l*o+i*s-a*u,e[6]=i*c+l*u+a*o-r*s,e[7]=l*c-a*s-r*o-i*u,e}function Lt(e,t,n,a){if(Math.abs(a)<o.EPSILON)return ut(e,t);var r=Math.hypot(n[0],n[1],n[2]);a*=.5;var i=Math.sin(a),l=i*n[0]/r,s=i*n[1]/r,u=i*n[2]/r,c=Math.cos(a),d=t[0],h=t[1],f=t[2],_=t[3];e[0]=d*c+_*l+h*u-f*s,e[1]=h*c+_*s+f*l-d*u,e[2]=f*c+_*u+d*s-h*l,e[3]=_*c-d*l-h*s-f*u;var m=t[4],p=t[5],g=t[6],b=t[7];return e[4]=m*c+b*l+p*u-g*s,e[5]=p*c+b*s+g*l-m*u,e[6]=g*c+b*u+m*s-p*l,e[7]=b*c-m*l-p*s-g*u,e}function St(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Tt(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[4],o=n[5],u=n[6],c=n[7],d=t[4],h=t[5],f=t[6],_=t[7],m=n[0],p=n[1],g=n[2],b=n[3];return e[0]=a*b+l*m+r*g-i*p,e[1]=r*b+l*p+i*m-a*g,e[2]=i*b+l*g+a*p-r*m,e[3]=l*b-a*m-r*p-i*g,e[4]=a*c+l*s+r*u-i*o+d*b+_*m+h*g-f*p,e[5]=r*c+l*o+i*s-a*u+h*b+_*p+f*m-d*g,e[6]=i*c+l*u+a*o-r*s+f*b+_*g+d*p-h*m,e[7]=l*c-a*s-r*o-i*u+_*b-d*m-h*p-f*g,e}var Et=Tt;function kt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var xt=et.dot;function It(e,t,n,a){var r=1-a;return xt(t,n)<0&&(a=-a),e[0]=t[0]*r+n[0]*a,e[1]=t[1]*r+n[1]*a,e[2]=t[2]*r+n[2]*a,e[3]=t[3]*r+n[3]*a,e[4]=t[4]*r+n[4]*a,e[5]=t[5]*r+n[5]*a,e[6]=t[6]*r+n[6]*a,e[7]=t[7]*r+n[7]*a,e}function Mt(e,t){var n=Ot(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function Ut(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Pt=et.length,Rt=Pt,Ot=et.squaredLength,Ct=Ot;function Bt(e,t){var n=Ot(t);if(n>0){n=Math.sqrt(n);var a=t[0]/n,r=t[1]/n,i=t[2]/n,l=t[3]/n,s=t[4],o=t[5],u=t[6],c=t[7],d=a*s+r*o+i*u+l*c;e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=(s-a*d)/n,e[5]=(o-r*d)/n,e[6]=(u-i*d)/n,e[7]=(c-l*d)/n}return e}function Ft(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Dt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function Gt(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],u=e[6],c=e[7],d=t[0],h=t[1],f=t[2],_=t[3],m=t[4],p=t[5],g=t[6],b=t[7];return Math.abs(n-d)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-_)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(l-m)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-g)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-b)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))}function Nt(){var e=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function Vt(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function Ht(e,t){var n=new o.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function jt(e,t){return e[0]=t[0],e[1]=t[1],e}function Kt(e,t,n){return e[0]=t,e[1]=n,e}function zt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Xt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Jt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Yt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function $t(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function qt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Wt(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Zt(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Qt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function en(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function tn(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e}function nn(e,t){var n=t[0]-e[0],a=t[1]-e[1];return Math.hypot(n,a)}function an(e,t){var n=t[0]-e[0],a=t[1]-e[1];return n*n+a*a}function rn(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function ln(e){var t=e[0],n=e[1];return t*t+n*n}function sn(e,t){return e[0]=-t[0],e[1]=-t[1],e}function on(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function un(e,t){var n=t[0],a=t[1],r=n*n+a*a;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e}function cn(e,t){return e[0]*t[0]+e[1]*t[1]}function dn(e,t,n){var a=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=a,e}function hn(e,t,n,a){var r=t[0],i=t[1];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e}function fn(e,t){t=t||1;var n=2*o.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function _n(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r,e[1]=n[1]*a+n[3]*r,e}function mn(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r+n[4],e[1]=n[1]*a+n[3]*r+n[5],e}function pn(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[3]*r+n[6],e[1]=n[1]*a+n[4]*r+n[7],e}function gn(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[4]*r+n[12],e[1]=n[1]*a+n[5]*r+n[13],e}function bn(e,t,n,a){var r=t[0]-n[0],i=t[1]-n[1],l=Math.sin(a),s=Math.cos(a);return e[0]=r*s-i*l+n[0],e[1]=r*l+i*s+n[1],e}function wn(e,t){var n=e[0],a=e[1],r=t[0],i=t[1],l=Math.sqrt(n*n+a*a)*Math.sqrt(r*r+i*i),s=l&&(n*r+a*i)/l;return Math.acos(Math.min(Math.max(s,-1),1))}function vn(e){return e[0]=0,e[1]=0,e}function An(e){return"vec2("+e[0]+", "+e[1]+")"}function yn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ln(e,t){var n=e[0],a=e[1],r=t[0],i=t[1];return Math.abs(n-r)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(a-i)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var Sn,Tn=rn,En=Xt,kn=Jt,xn=Yt,In=nn,Mn=an,Un=ln,Pn=(Sn=Nt(),function(e,t,n,a,r,i){var l,s;for(t||(t=2),n||(n=0),s=a?Math.min(a*t+n,e.length):e.length,l=n;l<s;l+=t)Sn[0]=e[l],Sn[1]=e[l+1],r(Sn,Sn,i),e[l]=Sn[0],e[l+1]=Sn[1];return e}),Rn=n(7160),On=n(8333)},5600:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>r,fromMat4:()=>i,clone:()=>l,copy:()=>s,fromValues:()=>o,set:()=>u,identity:()=>c,transpose:()=>d,invert:()=>h,adjoint:()=>f,determinant:()=>_,multiply:()=>m,translate:()=>p,rotate:()=>g,scale:()=>b,fromTranslation:()=>w,fromRotation:()=>v,fromScaling:()=>A,fromMat2d:()=>y,fromQuat:()=>L,normalFromMat4:()=>S,projection:()=>T,str:()=>E,frob:()=>k,add:()=>x,subtract:()=>I,multiplyScalar:()=>M,multiplyScalarAndAdd:()=>U,exactEquals:()=>P,equals:()=>R,mul:()=>O,sub:()=>C});var a=n(9685);function r(){var e=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function l(e){var t=new a.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(e,t,n,r,i,l,s,o,u){var c=new a.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=l,c[6]=s,c[7]=o,c[8]=u,c}function u(e,t,n,a,r,i,l,s,o,u){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e[8]=u,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function d(e,t){if(e===t){var n=t[1],a=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=a,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function h(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=c*l-s*u,h=-c*i+s*o,f=u*i-l*o,_=n*d+a*h+r*f;return _?(_=1/_,e[0]=d*_,e[1]=(-c*a+r*u)*_,e[2]=(s*a-r*l)*_,e[3]=h*_,e[4]=(c*n-r*o)*_,e[5]=(-s*n+r*i)*_,e[6]=f*_,e[7]=(-u*n+a*o)*_,e[8]=(l*n-a*i)*_,e):null}function f(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e[0]=l*c-s*u,e[1]=r*u-a*c,e[2]=a*s-r*l,e[3]=s*o-i*c,e[4]=n*c-r*o,e[5]=r*i-n*s,e[6]=i*u-l*o,e[7]=a*o-n*u,e[8]=n*l-a*i,e}function _(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],l=e[5],s=e[6],o=e[7],u=e[8];return t*(u*i-l*o)+n*(-u*r+l*s)+a*(o*r-i*s)}function m(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1],_=n[2],m=n[3],p=n[4],g=n[5],b=n[6],w=n[7],v=n[8];return e[0]=h*a+f*l+_*u,e[1]=h*r+f*s+_*c,e[2]=h*i+f*o+_*d,e[3]=m*a+p*l+g*u,e[4]=m*r+p*s+g*c,e[5]=m*i+p*o+g*d,e[6]=b*a+w*l+v*u,e[7]=b*r+w*s+v*c,e[8]=b*i+w*o+v*d,e}function p(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=s,e[5]=o,e[6]=h*a+f*l+u,e[7]=h*r+f*s+c,e[8]=h*i+f*o+d,e}function g(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*a+h*l,e[1]=f*r+h*s,e[2]=f*i+h*o,e[3]=f*l-h*a,e[4]=f*s-h*r,e[5]=f*o-h*i,e[6]=u,e[7]=c,e[8]=d,e}function b(e,t,n){var a=n[0],r=n[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function w(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function v(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=-n,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function A(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function L(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n+n,s=a+a,o=r+r,u=n*l,c=a*l,d=a*s,h=r*l,f=r*s,_=r*o,m=i*l,p=i*s,g=i*o;return e[0]=1-d-_,e[3]=c-g,e[6]=h+p,e[1]=c+g,e[4]=1-u-_,e[7]=f-m,e[2]=h-p,e[5]=f+m,e[8]=1-u-d,e}function S(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15],b=n*s-a*l,w=n*o-r*l,v=n*u-i*l,A=a*o-r*s,y=a*u-i*s,L=r*u-i*o,S=c*m-d*_,T=c*p-h*_,E=c*g-f*_,k=d*p-h*m,x=d*g-f*m,I=h*g-f*p,M=b*I-w*x+v*k+A*E-y*T+L*S;return M?(M=1/M,e[0]=(s*I-o*x+u*k)*M,e[1]=(o*E-l*I-u*T)*M,e[2]=(l*x-s*E+u*S)*M,e[3]=(r*x-a*I-i*k)*M,e[4]=(n*I-r*E+i*T)*M,e[5]=(a*E-n*x-i*S)*M,e[6]=(m*L-p*y+g*A)*M,e[7]=(p*v-_*L-g*w)*M,e[8]=(_*y-m*v+g*b)*M,e):null}function T(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function E(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function k(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function x(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function I(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function M(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function U(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e}function P(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function R(e,t){var n=e[0],r=e[1],i=e[2],l=e[3],s=e[4],o=e[5],u=e[6],c=e[7],d=e[8],h=t[0],f=t[1],_=t[2],m=t[3],p=t[4],g=t[5],b=t[6],w=t[7],v=t[8];return Math.abs(n-h)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-_)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(l-m)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(s-p)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-g)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-b)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-w)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(d-v)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(v))}var O=m,C=I},2945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>s,identity:()=>o,setAxisAngle:()=>u,getAxisAngle:()=>c,getAngle:()=>d,multiply:()=>h,rotateX:()=>f,rotateY:()=>_,rotateZ:()=>m,calculateW:()=>p,exp:()=>g,ln:()=>b,pow:()=>w,slerp:()=>v,random:()=>A,invert:()=>y,conjugate:()=>L,fromMat3:()=>S,fromEuler:()=>T,str:()=>E,clone:()=>R,fromValues:()=>O,copy:()=>C,set:()=>B,add:()=>F,mul:()=>D,scale:()=>G,dot:()=>N,lerp:()=>V,length:()=>H,len:()=>j,squaredLength:()=>K,sqrLen:()=>z,normalize:()=>X,exactEquals:()=>J,equals:()=>Y,rotationTo:()=>$,sqlerp:()=>q,setAxes:()=>W});var a=n(9685),r=n(5600),i=n(7160),l=n(8333);function s(){var e=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function o(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,n){n*=.5;var a=Math.sin(n);return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=Math.cos(n),e}function c(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>a.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function d(e,t){var n=N(e,t);return Math.acos(2*n*n-1)}function h(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*c+l*s+r*u-i*o,e[1]=r*c+l*o+i*s-a*u,e[2]=i*c+l*u+a*o-r*s,e[3]=l*c-a*s-r*o-i*u,e}function f(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+l*s,e[1]=r*o+i*s,e[2]=i*o-r*s,e[3]=l*o-a*s,e}function _(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o-i*s,e[1]=r*o+l*s,e[2]=i*o+a*s,e[3]=l*o-r*s,e}function m(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+r*s,e[1]=r*o-a*s,e[2]=i*o+l*s,e[3]=l*o-i*s,e}function p(e,t){var n=t[0],a=t[1],r=t[2];return e[0]=n,e[1]=a,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-a*a-r*r)),e}function g(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=Math.sqrt(n*n+a*a+r*r),s=Math.exp(i),o=l>0?s*Math.sin(l)/l:0;return e[0]=n*o,e[1]=a*o,e[2]=r*o,e[3]=s*Math.cos(l),e}function b(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=Math.sqrt(n*n+a*a+r*r),s=l>0?Math.atan2(l,i)/l:0;return e[0]=n*s,e[1]=a*s,e[2]=r*s,e[3]=.5*Math.log(n*n+a*a+r*r+i*i),e}function w(e,t,n){return b(e,t),G(e,e,n),g(e,e),e}function v(e,t,n,r){var i,l,s,o,u,c=t[0],d=t[1],h=t[2],f=t[3],_=n[0],m=n[1],p=n[2],g=n[3];return(l=c*_+d*m+h*p+f*g)<0&&(l=-l,_=-_,m=-m,p=-p,g=-g),1-l>a.EPSILON?(i=Math.acos(l),s=Math.sin(i),o=Math.sin((1-r)*i)/s,u=Math.sin(r*i)/s):(o=1-r,u=r),e[0]=o*c+u*_,e[1]=o*d+u*m,e[2]=o*h+u*p,e[3]=o*f+u*g,e}function A(e){var t=a.RANDOM(),n=a.RANDOM(),r=a.RANDOM(),i=Math.sqrt(1-t),l=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=l*Math.sin(2*Math.PI*r),e[3]=l*Math.cos(2*Math.PI*r),e}function y(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*n+a*a+r*r+i*i,s=l?1/l:0;return e[0]=-n*s,e[1]=-a*s,e[2]=-r*s,e[3]=i*s,e}function L(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function S(e,t){var n,a=t[0]+t[4]+t[8];if(a>0)n=Math.sqrt(a+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var i=(r+1)%3,l=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*l+l]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+l]-t[3*l+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[l]=(t[3*l+r]+t[3*r+l])*n}return e}function T(e,t,n,a){var r=.5*Math.PI/180;t*=r,n*=r,a*=r;var i=Math.sin(t),l=Math.cos(t),s=Math.sin(n),o=Math.cos(n),u=Math.sin(a),c=Math.cos(a);return e[0]=i*o*c-l*s*u,e[1]=l*s*c+i*o*u,e[2]=l*o*u-i*s*c,e[3]=l*o*c+i*s*u,e}function E(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var k,x,I,M,U,P,R=l.clone,O=l.fromValues,C=l.copy,B=l.set,F=l.add,D=h,G=l.scale,N=l.dot,V=l.lerp,H=l.length,j=H,K=l.squaredLength,z=K,X=l.normalize,J=l.exactEquals,Y=l.equals,$=(k=i.create(),x=i.fromValues(1,0,0),I=i.fromValues(0,1,0),function(e,t,n){var a=i.dot(t,n);return a<-.999999?(i.cross(k,x,t),i.len(k)<1e-6&&i.cross(k,I,t),i.normalize(k,k),u(e,k,Math.PI),e):a>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i.cross(k,t,n),e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=1+a,X(e,e))}),q=(M=s(),U=s(),function(e,t,n,a,r,i){return v(M,t,r,i),v(U,n,a,i),v(e,M,U,2*i*(1-i)),e}),W=(P=r.create(),function(e,t,n,a){return P[0]=n[0],P[3]=n[1],P[6]=n[2],P[1]=a[0],P[4]=a[1],P[7]=a[2],P[2]=-t[0],P[5]=-t[1],P[8]=-t[2],X(e,S(e,P))})},7160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>r,clone:()=>i,length:()=>l,fromValues:()=>s,copy:()=>o,set:()=>u,add:()=>c,subtract:()=>d,multiply:()=>h,divide:()=>f,ceil:()=>_,floor:()=>m,min:()=>p,max:()=>g,round:()=>b,scale:()=>w,scaleAndAdd:()=>v,distance:()=>A,squaredDistance:()=>y,squaredLength:()=>L,negate:()=>S,inverse:()=>T,normalize:()=>E,dot:()=>k,cross:()=>x,lerp:()=>I,hermite:()=>M,bezier:()=>U,random:()=>P,transformMat4:()=>R,transformMat3:()=>O,transformQuat:()=>C,rotateX:()=>B,rotateY:()=>F,rotateZ:()=>D,angle:()=>G,zero:()=>N,str:()=>V,exactEquals:()=>H,equals:()=>j,sub:()=>z,mul:()=>X,div:()=>J,dist:()=>Y,sqrDist:()=>$,len:()=>q,sqrLen:()=>W,forEach:()=>Z});var a=n(9685);function r(){var e=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function i(e){var t=new a.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function l(e){var t=e[0],n=e[1],a=e[2];return Math.hypot(t,n,a)}function s(e,t,n){var r=new a.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e,t,n,a){return e[0]=t,e[1]=n,e[2]=a,e}function c(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function d(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function h(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function f(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function _(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function p(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function g(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function b(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function w(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function v(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e}function A(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2];return Math.hypot(n,a,r)}function y(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2];return n*n+a*a+r*r}function L(e){var t=e[0],n=e[1],a=e[2];return t*t+n*n+a*a}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function T(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function E(e,t){var n=t[0],a=t[1],r=t[2],i=n*n+a*a+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function k(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function x(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[0],s=n[1],o=n[2];return e[0]=r*o-i*s,e[1]=i*l-a*o,e[2]=a*s-r*l,e}function I(e,t,n,a){var r=t[0],i=t[1],l=t[2];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e[2]=l+a*(n[2]-l),e}function M(e,t,n,a,r,i){var l=i*i,s=l*(2*i-3)+1,o=l*(i-2)+i,u=l*(i-1),c=l*(3-2*i);return e[0]=t[0]*s+n[0]*o+a[0]*u+r[0]*c,e[1]=t[1]*s+n[1]*o+a[1]*u+r[1]*c,e[2]=t[2]*s+n[2]*o+a[2]*u+r[2]*c,e}function U(e,t,n,a,r,i){var l=1-i,s=l*l,o=i*i,u=s*l,c=3*i*s,d=3*o*l,h=o*i;return e[0]=t[0]*u+n[0]*c+a[0]*d+r[0]*h,e[1]=t[1]*u+n[1]*c+a[1]*d+r[1]*h,e[2]=t[2]*u+n[2]*c+a[2]*d+r[2]*h,e}function P(e,t){t=t||1;var n=2*a.RANDOM()*Math.PI,r=2*a.RANDOM()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function R(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[3]*a+n[7]*r+n[11]*i+n[15];return l=l||1,e[0]=(n[0]*a+n[4]*r+n[8]*i+n[12])/l,e[1]=(n[1]*a+n[5]*r+n[9]*i+n[13])/l,e[2]=(n[2]*a+n[6]*r+n[10]*i+n[14])/l,e}function O(e,t,n){var a=t[0],r=t[1],i=t[2];return e[0]=a*n[0]+r*n[3]+i*n[6],e[1]=a*n[1]+r*n[4]+i*n[7],e[2]=a*n[2]+r*n[5]+i*n[8],e}function C(e,t,n){var a=n[0],r=n[1],i=n[2],l=n[3],s=t[0],o=t[1],u=t[2],c=r*u-i*o,d=i*s-a*u,h=a*o-r*s,f=r*h-i*d,_=i*c-a*h,m=a*d-r*c,p=2*l;return c*=p,d*=p,h*=p,f*=2,_*=2,m*=2,e[0]=s+c+f,e[1]=o+d+_,e[2]=u+h+m,e}function B(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0],i[1]=r[1]*Math.cos(a)-r[2]*Math.sin(a),i[2]=r[1]*Math.sin(a)+r[2]*Math.cos(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function F(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[2]*Math.sin(a)+r[0]*Math.cos(a),i[1]=r[1],i[2]=r[2]*Math.cos(a)-r[0]*Math.sin(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function D(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0]*Math.cos(a)-r[1]*Math.sin(a),i[1]=r[0]*Math.sin(a)+r[1]*Math.cos(a),i[2]=r[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function G(e,t){var n=e[0],a=e[1],r=e[2],i=t[0],l=t[1],s=t[2],o=Math.sqrt(n*n+a*a+r*r)*Math.sqrt(i*i+l*l+s*s),u=o&&k(e,t)/o;return Math.acos(Math.min(Math.max(u,-1),1))}function N(e){return e[0]=0,e[1]=0,e[2]=0,e}function V(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function j(e,t){var n=e[0],r=e[1],i=e[2],l=t[0],s=t[1],o=t[2];return Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-s)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))}var K,z=d,X=h,J=f,Y=A,$=y,q=l,W=L,Z=(K=r(),function(e,t,n,a,r,i){var l,s;for(t||(t=3),n||(n=0),s=a?Math.min(a*t+n,e.length):e.length,l=n;l<s;l+=t)K[0]=e[l],K[1]=e[l+1],K[2]=e[l+2],r(K,K,i),e[l]=K[0],e[l+1]=K[1],e[l+2]=K[2];return e})},8333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>r,clone:()=>i,fromValues:()=>l,copy:()=>s,set:()=>o,add:()=>u,subtract:()=>c,multiply:()=>d,divide:()=>h,ceil:()=>f,floor:()=>_,min:()=>m,max:()=>p,round:()=>g,scale:()=>b,scaleAndAdd:()=>w,distance:()=>v,squaredDistance:()=>A,length:()=>y,squaredLength:()=>L,negate:()=>S,inverse:()=>T,normalize:()=>E,dot:()=>k,cross:()=>x,lerp:()=>I,random:()=>M,transformMat4:()=>U,transformQuat:()=>P,zero:()=>R,str:()=>O,exactEquals:()=>C,equals:()=>B,sub:()=>D,mul:()=>G,div:()=>N,dist:()=>V,sqrDist:()=>H,len:()=>j,sqrLen:()=>K,forEach:()=>z});var a=n(9685);function r(){var e=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function i(e){var t=new a.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function l(e,t,n,r){var i=new a.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}function u(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function c(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function d(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function h(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function _(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function m(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function p(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function g(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function b(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function w(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e}function v(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return Math.hypot(n,a,r,i)}function A(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return n*n+a*a+r*r+i*i}function y(e){var t=e[0],n=e[1],a=e[2],r=e[3];return Math.hypot(t,n,a,r)}function L(e){var t=e[0],n=e[1],a=e[2],r=e[3];return t*t+n*n+a*a+r*r}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function T(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function E(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*n+a*a+r*r+i*i;return l>0&&(l=1/Math.sqrt(l)),e[0]=n*l,e[1]=a*l,e[2]=r*l,e[3]=i*l,e}function k(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function x(e,t,n,a){var r=n[0]*a[1]-n[1]*a[0],i=n[0]*a[2]-n[2]*a[0],l=n[0]*a[3]-n[3]*a[0],s=n[1]*a[2]-n[2]*a[1],o=n[1]*a[3]-n[3]*a[1],u=n[2]*a[3]-n[3]*a[2],c=t[0],d=t[1],h=t[2],f=t[3];return e[0]=d*u-h*o+f*s,e[1]=-c*u+h*l-f*i,e[2]=c*o-d*l+f*r,e[3]=-c*s+d*i-h*r,e}function I(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=t[3];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e[2]=l+a*(n[2]-l),e[3]=s+a*(n[3]-s),e}function M(e,t){var n,r,i,l,s,o;t=t||1;do{s=(n=2*a.RANDOM()-1)*n+(r=2*a.RANDOM()-1)*r}while(s>=1);do{o=(i=2*a.RANDOM()-1)*i+(l=2*a.RANDOM()-1)*l}while(o>=1);var u=Math.sqrt((1-s)/o);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*l*u,e}function U(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3];return e[0]=n[0]*a+n[4]*r+n[8]*i+n[12]*l,e[1]=n[1]*a+n[5]*r+n[9]*i+n[13]*l,e[2]=n[2]*a+n[6]*r+n[10]*i+n[14]*l,e[3]=n[3]*a+n[7]*r+n[11]*i+n[15]*l,e}function P(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[0],s=n[1],o=n[2],u=n[3],c=u*a+s*i-o*r,d=u*r+o*a-l*i,h=u*i+l*r-s*a,f=-l*a-s*r-o*i;return e[0]=c*u+f*-l+d*-o-h*-s,e[1]=d*u+f*-s+h*-l-c*-o,e[2]=h*u+f*-o+c*-s-d*-l,e[3]=t[3],e}function R(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function O(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function B(e,t){var n=e[0],r=e[1],i=e[2],l=e[3],s=t[0],o=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(l-c)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(c))}var F,D=c,G=d,N=h,V=v,H=A,j=y,K=L,z=(F=r(),function(e,t,n,a,r,i){var l,s;for(t||(t=4),n||(n=0),s=a?Math.min(a*t+n,e.length):e.length,l=n;l<s;l+=t)F[0]=e[l],F[1]=e[l+1],F[2]=e[l+2],F[3]=e[l+3],r(F,F,i),e[l]=F[0],e[l+1]=F[1],e[l+2]=F[2],e[l+3]=F[3];return e})},9591:(e,t,n)=>{"use strict";const{Deflate:a,deflate:r,deflateRaw:i,gzip:l}=n(4555),{Inflate:s,inflate:o,inflateRaw:u,ungzip:c}=n(8843),d=n(1619);e.exports.Deflate=a,e.exports.deflate=r,e.exports.deflateRaw=i,e.exports.gzip=l,e.exports.Inflate=s,e.exports.inflate=o,e.exports.inflateRaw=u,e.exports.ungzip=c,e.exports.constants=d},4555:(e,t,n)=>{"use strict";const a=n(405),r=n(4236),i=n(9373),l=n(8898),s=n(2292),o=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:c,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:_,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:p,Z_DEFLATED:g}=n(1619);function b(e){this.options=r.assign({level:m,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==f)throw new Error(l[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===o.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=a.deflateSetDictionary(this.strm,e),n!==f)throw new Error(l[n]);this._dict_set=!0}}function w(e,t){const n=new b(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}b.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let l,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?h:u,"string"==typeof e?n.input=i.string2buf(e):"[object ArrayBuffer]"===o.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===c||s===d)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(l=a.deflate(n,s),l===_)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),l=a.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===f;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===f&&(this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=b,e.exports.deflate=w,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,w(e,t)},e.exports.constants=n(1619)},8843:(e,t,n)=>{"use strict";const a=n(7948),r=n(4236),i=n(9373),l=n(8898),s=n(2292),o=n(2401),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:_,Z_STREAM_ERROR:m,Z_DATA_ERROR:p,Z_MEM_ERROR:g}=n(1619);function b(e){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let n=a.inflateInit2(this.strm,t.windowBits);if(n!==h)throw new Error(l[n]);if(this.header=new o,a.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=a.inflateSetDictionary(this.strm,t.dictionary),n!==h)))throw new Error(l[n])}function w(e,t){const n=new b(t);if(n.push(e),n.err)throw n.msg||l[n.err];return n.result}b.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,l=this.options.dictionary;let s,o,b;if(this.ended)return!1;for(o=t===~~t?t:!0===t?d:c,"[object ArrayBuffer]"===u.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=a.inflate(n,o),s===_&&l&&(s=a.inflateSetDictionary(n,l),s===h?s=a.inflate(n,o):s===p&&(s=_));n.avail_in>0&&s===f&&n.state.wrap>0&&0!==e[n.next_in];)a.inflateReset(n),s=a.inflate(n,o);switch(s){case m:case p:case _:case g:return this.onEnd(s),this.ended=!0,!1}if(b=n.avail_out,n.next_out&&(0===n.avail_out||s===f))if("string"===this.options.to){let e=i.utf8border(n.output,n.next_out),t=n.next_out-e,a=i.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==h||0!==b){if(s===f)return s=a.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=b,e.exports.inflate=w,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.ungzip=w,e.exports.constants=n(1619)},4236:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const n in a)t(a,n)&&(e[n]=a[n])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,a=0,r=e.length;t<r;t++){let r=e[t];n.set(r,a),a+=r.length}return n}},9373:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const n=new Uint8Array(256);for(let e=0;e<256;e++)n[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;n[254]=n[254]=1,e.exports.string2buf=e=>{let t,n,a,r,i,l=e.length,s=0;for(r=0;r<l;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<l&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,r=0;i<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<l&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t};e.exports.buf2string=(e,a)=>{let r,i;const l=a||e.length,s=new Array(2*l);for(i=0,r=0;r<l;){let t=e[r++];if(t<128){s[i++]=t;continue}let a=n[t];if(a>4)s[i++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<l;)t=t<<6|63&e[r++],a--;a>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,n)=>{if(n<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let a="";for(let t=0;t<n;t++)a+=String.fromCharCode(e[t]);return a})(s,i)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let a=t-1;for(;a>=0&&128==(192&e[a]);)a--;return a<0||0===a?t:a+n[e[a]]>t?a:t}},6069:e=>{"use strict";e.exports=(e,t,n,a)=>{let r=65535&e|0,i=e>>>16&65535|0,l=0;for(;0!==n;){l=n>2e3?2e3:n,n-=l;do{r=r+t[a++]|0,i=i+r|0}while(--l);r%=65521,i%=65521}return r|i<<16|0}},1619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());e.exports=(e,n,a,r)=>{const i=t,l=r+a;e^=-1;for(let t=r;t<l;t++)e=e>>>8^i[255&(e^n[t])];return-1^e}},405:(e,t,n)=>{"use strict";const{_tr_init:a,_tr_stored_block:r,_tr_flush_block:i,_tr_tally:l,_tr_align:s}=n(342),o=n(6069),u=n(2869),c=n(8898),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:_,Z_BLOCK:m,Z_OK:p,Z_STREAM_END:g,Z_STREAM_ERROR:b,Z_DATA_ERROR:w,Z_BUF_ERROR:v,Z_DEFAULT_COMPRESSION:A,Z_FILTERED:y,Z_HUFFMAN_ONLY:L,Z_RLE:S,Z_FIXED:T,Z_DEFAULT_STRATEGY:E,Z_UNKNOWN:k,Z_DEFLATED:x}=n(1619),I=258,M=262,U=103,P=113,R=666,O=(e,t)=>(e.msg=c[t],t),C=e=>(e<<1)-(e>4?9:0),B=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let F=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const D=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},G=(e,t)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)},N=(e,t)=>{e.pending_buf[e.pending++]=t},V=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},H=(e,t,n,a)=>{let r=e.avail_in;return r>a&&(r=a),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=o(e.adler,t,r,n):2===e.state.wrap&&(e.adler=u(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},j=(e,t)=>{let n,a,r=e.max_chain_length,i=e.strstart,l=e.prev_length,s=e.nice_match;const o=e.strstart>e.w_size-M?e.strstart-(e.w_size-M):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+I;let f=u[i+l-1],_=u[i+l];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+l]===_&&u[n+l-1]===f&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<h);if(a=I-(h-i),i=h-I,a>l){if(e.match_start=t,l=a,a>=s)break;f=u[i+l-1],_=u[i+l]}}}while((t=d[t&c])>o&&0!=--r);return l<=e.lookahead?l:e.lookahead},K=e=>{const t=e.w_size;let n,a,r,i,l;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-M)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,a=e.hash_size,n=a;do{r=e.head[--n],e.head[n]=r>=t?r-t:0}while(--a);a=t,n=a;do{r=e.prev[--n],e.prev[n]=r>=t?r-t:0}while(--a);i+=t}if(0===e.strm.avail_in)break;if(a=H(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=a,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=F(e,e.ins_h,e.window[l+1]);e.insert&&(e.ins_h=F(e,e.ins_h,e.window[l+3-1]),e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<M&&0!==e.strm.avail_in)},z=(e,t)=>{let n,a;for(;;){if(e.lookahead<M){if(K(e),e.lookahead<M&&t===d)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-M&&(e.match_length=j(e,n)),e.match_length>=3)if(a=l(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=F(e,e.ins_h,e.window[e.strstart+1]);else a=l(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(G(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===_?(G(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(G(e,!1),0===e.strm.avail_out)?1:2},X=(e,t)=>{let n,a,r;for(;;){if(e.lookahead<M){if(K(e),e.lookahead<M&&t===d)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-M&&(e.match_length=j(e,n),e.match_length<=5&&(e.strategy===y||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,a=l(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(G(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=l(e,0,e.window[e.strstart-1]),a&&G(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=l(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===_?(G(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(G(e,!1),0===e.strm.avail_out)?1:2};function J(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}const Y=[new J(0,0,0,0,((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(K(e),0===e.lookahead&&t===d)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const a=e.block_start+n;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,G(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-M&&(G(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===_?(G(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(G(e,!1),e.strm.avail_out),1)})),new J(4,4,8,4,z),new J(4,5,16,8,z),new J(4,6,32,32,z),new J(4,4,16,16,X),new J(8,16,32,32,X),new J(8,16,128,128,X),new J(8,32,128,256,X),new J(32,128,258,1024,X),new J(32,258,258,4096,X)];function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const q=e=>{if(!e||!e.state)return O(e,b);e.total_in=e.total_out=0,e.data_type=k;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:P,e.adler=2===t.wrap?0:1,t.last_flush=d,a(t),p},W=e=>{const t=q(e);var n;return t===p&&((n=e.state).window_size=2*n.w_size,B(n.head),n.max_lazy_match=Y[n.level].max_lazy,n.good_match=Y[n.level].good_length,n.nice_match=Y[n.level].nice_length,n.max_chain_length=Y[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Z=(e,t,n,a,r,i)=>{if(!e)return b;let l=1;if(t===A&&(t=6),a<0?(l=0,a=-a):a>15&&(l=2,a-=16),r<1||r>9||n!==x||a<8||a>15||t<0||t>9||i<0||i>T)return O(e,b);8===a&&(a=9);const s=new $;return e.state=s,s.strm=e,s.wrap=l,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=i,s.method=n,W(e)};e.exports.deflateInit=(e,t)=>Z(e,t,x,15,8,E),e.exports.deflateInit2=Z,e.exports.deflateReset=W,e.exports.deflateResetKeep=q,e.exports.deflateSetHeader=(e,t)=>e&&e.state?2!==e.state.wrap?b:(e.state.gzhead=t,p):b,e.exports.deflate=(e,t)=>{let n,a;if(!e||!e.state||t>m||t<0)return e?O(e,b):b;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===R&&t!==_)return O(e,0===e.avail_out?v:b);i.strm=e;const o=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,N(i,31),N(i,139),N(i,8),i.gzhead?(N(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),N(i,255&i.gzhead.time),N(i,i.gzhead.time>>8&255),N(i,i.gzhead.time>>16&255),N(i,i.gzhead.time>>24&255),N(i,9===i.level?2:i.strategy>=L||i.level<2?4:0),N(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(N(i,255&i.gzhead.extra.length),N(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=u(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(N(i,0),N(i,0),N(i,0),N(i,0),N(i,0),N(i,9===i.level?2:i.strategy>=L||i.level<2?4:0),N(i,3),i.status=P);else{let t=x+(i.w_bits-8<<4)<<8,n=-1;n=i.strategy>=L||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=n<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=P,V(i,t),0!==i.strstart&&(V(i,e.adler>>>16),V(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),D(e),n=i.pending,i.pending!==i.pending_buf_size));)N(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),D(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,N(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),0===a&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),D(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,N(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>n&&(e.adler=u(e.adler,i.pending_buf,i.pending-n,n)),0===a&&(i.status=U)}else i.status=U;if(i.status===U&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&D(e),i.pending+2<=i.pending_buf_size&&(N(i,255&e.adler),N(i,e.adler>>8&255),e.adler=0,i.status=P)):i.status=P),0!==i.pending){if(D(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&C(t)<=C(o)&&t!==_)return O(e,v);if(i.status===R&&0!==e.avail_in)return O(e,v);if(0!==e.avail_in||0!==i.lookahead||t!==d&&i.status!==R){let n=i.strategy===L?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(K(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,n=l(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(G(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===_?(G(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(G(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===S?((e,t)=>{let n,a,r,i;const s=e.window;for(;;){if(e.lookahead<=I){if(K(e),e.lookahead<=I&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,a=s[r],a===s[++r]&&a===s[++r]&&a===s[++r])){i=e.strstart+I;do{}while(a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&r<i);e.match_length=I-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=l(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=l(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(G(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===_?(G(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(G(e,!1),0===e.strm.avail_out)?1:2})(i,t):Y[i.level].func(i,t);if(3!==n&&4!==n||(i.status=R),1===n||3===n)return 0===e.avail_out&&(i.last_flush=-1),p;if(2===n&&(t===h?s(i):t!==m&&(r(i,0,0,!1),t===f&&(B(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),D(e),0===e.avail_out))return i.last_flush=-1,p}return t!==_?p:i.wrap<=0?g:(2===i.wrap?(N(i,255&e.adler),N(i,e.adler>>8&255),N(i,e.adler>>16&255),N(i,e.adler>>24&255),N(i,255&e.total_in),N(i,e.total_in>>8&255),N(i,e.total_in>>16&255),N(i,e.total_in>>24&255)):(V(i,e.adler>>>16),V(i,65535&e.adler)),D(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:g)},e.exports.deflateEnd=e=>{if(!e||!e.state)return b;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==U&&t!==P&&t!==R?O(e,b):(e.state=null,t===P?O(e,w):p)},e.exports.deflateSetDictionary=(e,t)=>{let n=t.length;if(!e||!e.state)return b;const a=e.state,r=a.wrap;if(2===r||1===r&&42!==a.status||a.lookahead)return b;if(1===r&&(e.adler=o(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){0===r&&(B(a.head),a.strstart=0,a.block_start=0,a.insert=0);let e=new Uint8Array(a.w_size);e.set(t.subarray(n-a.w_size,n),0),t=e,n=a.w_size}const i=e.avail_in,l=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,K(a);a.lookahead>=3;){let e=a.strstart,t=a.lookahead-2;do{a.ins_h=F(a,a.ins_h,a.window[e+3-1]),a.prev[e&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=e,e++}while(--t);a.strstart=e,a.lookahead=2,K(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=l,e.input=s,e.avail_in=i,a.wrap=r,p},e.exports.deflateInfo="pako deflate (from Nodeca project)"},2401:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:e=>{"use strict";e.exports=function(e,t){let n,a,r,i,l,s,o,u,c,d,h,f,_,m,p,g,b,w,v,A,y,L,S,T;const E=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),r=e.next_out,T=e.output,i=r-(t-e.avail_out),l=r+(e.avail_out-257),s=E.dmax,o=E.wsize,u=E.whave,c=E.wnext,d=E.window,h=E.hold,f=E.bits,_=E.lencode,m=E.distcode,p=(1<<E.lenbits)-1,g=(1<<E.distbits)-1;e:do{f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),b=_[h&p];t:for(;;){if(w=b>>>24,h>>>=w,f-=w,w=b>>>16&255,0===w)T[r++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=_[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){E.mode=12;break e}e.msg="invalid literal/length code",E.mode=30;break e}v=65535&b,w&=15,w&&(f<w&&(h+=S[n++]<<f,f+=8),v+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),b=m[h&g];n:for(;;){if(w=b>>>24,h>>>=w,f-=w,w=b>>>16&255,!(16&w)){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",E.mode=30;break e}if(A=65535&b,w&=15,f<w&&(h+=S[n++]<<f,f+=8,f<w&&(h+=S[n++]<<f,f+=8)),A+=h&(1<<w)-1,A>s){e.msg="invalid distance too far back",E.mode=30;break e}if(h>>>=w,f-=w,w=r-i,A>w){if(w=A-w,w>u&&E.sane){e.msg="invalid distance too far back",E.mode=30;break e}if(y=0,L=d,0===c){if(y+=o-w,w<v){v-=w;do{T[r++]=d[y++]}while(--w);y=r-A,L=T}}else if(c<w){if(y+=o+c-w,w-=c,w<v){v-=w;do{T[r++]=d[y++]}while(--w);if(y=0,c<v){w=c,v-=w;do{T[r++]=d[y++]}while(--w);y=r-A,L=T}}}else if(y+=c-w,w<v){v-=w;do{T[r++]=d[y++]}while(--w);y=r-A,L=T}for(;v>2;)T[r++]=L[y++],T[r++]=L[y++],T[r++]=L[y++],v-=3;v&&(T[r++]=L[y++],v>1&&(T[r++]=L[y++]))}else{y=r-A;do{T[r++]=T[y++],T[r++]=T[y++],T[r++]=T[y++],v-=3}while(v>2);v&&(T[r++]=T[y++],v>1&&(T[r++]=T[y++]))}break}}break}}while(n<a&&r<l);v=f>>3,n-=v,f-=v<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<l?l-r+257:257-(r-l),E.hold=h,E.bits=f}},7948:(e,t,n)=>{"use strict";const a=n(6069),r=n(2869),i=n(4264),l=n(9241),{Z_FINISH:s,Z_BLOCK:o,Z_TREES:u,Z_OK:c,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:_,Z_MEM_ERROR:m,Z_BUF_ERROR:p,Z_DEFLATED:g}=n(1619),b=12,w=30,v=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const y=e=>{if(!e||!e.state)return f;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,c},L=e=>{if(!e||!e.state)return f;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,y(e)},S=(e,t)=>{let n;if(!e||!e.state)return f;const a=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,L(e))},T=(e,t)=>{if(!e)return f;const n=new A;e.state=n,n.window=null;const a=S(e,t);return a!==c&&(e.state=null),a};let E,k,x=!0;const I=e=>{if(x){E=new Int32Array(512),k=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(1,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(2,e.lens,0,32,k,0,e.work,{bits:5}),x=!1}e.lencode=E,e.lenbits=9,e.distcode=k,e.distbits=5},M=(e,t,n,a)=>{let r;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>a&&(r=a),i.window.set(t.subarray(n-a,n-a+r),i.wnext),(a-=r)?(i.window.set(t.subarray(n-a,n),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0};e.exports.inflateReset=L,e.exports.inflateReset2=S,e.exports.inflateResetKeep=y,e.exports.inflateInit=e=>T(e,15),e.exports.inflateInit2=T,e.exports.inflate=(e,t)=>{let n,A,y,L,S,T,E,k,x,U,P,R,O,C,B,F,D,G,N,V,H,j,K=0;const z=new Uint8Array(4);let X,J;const Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return f;n=e.state,n.mode===b&&(n.mode=13),S=e.next_out,y=e.output,E=e.avail_out,L=e.next_in,A=e.input,T=e.avail_in,k=n.hold,x=n.bits,U=T,P=E,j=c;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(2&n.wrap&&35615===k){n.check=0,z[0]=255&k,z[1]=k>>>8&255,n.check=r(n.check,z,2,0),k=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&k)<<8)+(k>>8))%31){e.msg="incorrect header check",n.mode=w;break}if((15&k)!==g){e.msg="unknown compression method",n.mode=w;break}if(k>>>=4,x-=4,H=8+(15&k),0===n.wbits)n.wbits=H;else if(H>n.wbits){e.msg="invalid window size",n.mode=w;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&k?10:b,k=0,x=0;break;case 2:for(;x<16;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(n.flags=k,(255&n.flags)!==g){e.msg="unknown compression method",n.mode=w;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=w;break}n.head&&(n.head.text=k>>8&1),512&n.flags&&(z[0]=255&k,z[1]=k>>>8&255,n.check=r(n.check,z,2,0)),k=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.head&&(n.head.time=k),512&n.flags&&(z[0]=255&k,z[1]=k>>>8&255,z[2]=k>>>16&255,z[3]=k>>>24&255,n.check=r(n.check,z,4,0)),k=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.head&&(n.head.xflags=255&k,n.head.os=k>>8),512&n.flags&&(z[0]=255&k,z[1]=k>>>8&255,n.check=r(n.check,z,2,0)),k=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.length=k,n.head&&(n.head.extra_len=k),512&n.flags&&(z[0]=255&k,z[1]=k>>>8&255,n.check=r(n.check,z,2,0)),k=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(R=n.length,R>T&&(R=T),R&&(n.head&&(H=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(A.subarray(L,L+R),H)),512&n.flags&&(n.check=r(n.check,A,R,L)),T-=R,L+=R,n.length-=R),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===T)break e;R=0;do{H=A[L+R++],n.head&&H&&n.length<65536&&(n.head.name+=String.fromCharCode(H))}while(H&&R<T);if(512&n.flags&&(n.check=r(n.check,A,R,L)),T-=R,L+=R,H)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===T)break e;R=0;do{H=A[L+R++],n.head&&H&&n.length<65536&&(n.head.comment+=String.fromCharCode(H))}while(H&&R<T);if(512&n.flags&&(n.check=r(n.check,A,R,L)),T-=R,L+=R,H)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(k!==(65535&n.check)){e.msg="header crc mismatch",n.mode=w;break}k=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=b;break;case 10:for(;x<32;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}e.adler=n.check=v(k),k=0,x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=S,e.avail_out=E,e.next_in=L,e.avail_in=T,n.hold=k,n.bits=x,h;e.adler=n.check=1,n.mode=b;case b:if(t===o||t===u)break e;case 13:if(n.last){k>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}switch(n.last=1&k,k>>>=1,x-=1,3&k){case 0:n.mode=14;break;case 1:if(I(n),n.mode=20,t===u){k>>>=2,x-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=w}k>>>=2,x-=2;break;case 14:for(k>>>=7&x,x-=7&x;x<32;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if((65535&k)!=(k>>>16^65535)){e.msg="invalid stored block lengths",n.mode=w;break}if(n.length=65535&k,k=0,x=0,n.mode=15,t===u)break e;case 15:n.mode=16;case 16:if(R=n.length,R){if(R>T&&(R=T),R>E&&(R=E),0===R)break e;y.set(A.subarray(L,L+R),S),T-=R,L+=R,E-=R,S+=R,n.length-=R;break}n.mode=b;break;case 17:for(;x<14;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(n.nlen=257+(31&k),k>>>=5,x-=5,n.ndist=1+(31&k),k>>>=5,x-=5,n.ncode=4+(15&k),k>>>=4,x-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=w;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.lens[Y[n.have++]]=7&k,k>>>=3,x-=3}for(;n.have<19;)n.lens[Y[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,X={bits:n.lenbits},j=l(0,n.lens,0,19,n.lencode,0,n.work,X),n.lenbits=X.bits,j){e.msg="invalid code lengths set",n.mode=w;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;K=n.lencode[k&(1<<n.lenbits)-1],B=K>>>24,F=K>>>16&255,D=65535&K,!(B<=x);){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(D<16)k>>>=B,x-=B,n.lens[n.have++]=D;else{if(16===D){for(J=B+2;x<J;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(k>>>=B,x-=B,0===n.have){e.msg="invalid bit length repeat",n.mode=w;break}H=n.lens[n.have-1],R=3+(3&k),k>>>=2,x-=2}else if(17===D){for(J=B+3;x<J;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}k>>>=B,x-=B,H=0,R=3+(7&k),k>>>=3,x-=3}else{for(J=B+7;x<J;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}k>>>=B,x-=B,H=0,R=11+(127&k),k>>>=7,x-=7}if(n.have+R>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=w;break}for(;R--;)n.lens[n.have++]=H}}if(n.mode===w)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=w;break}if(n.lenbits=9,X={bits:n.lenbits},j=l(1,n.lens,0,n.nlen,n.lencode,0,n.work,X),n.lenbits=X.bits,j){e.msg="invalid literal/lengths set",n.mode=w;break}if(n.distbits=6,n.distcode=n.distdyn,X={bits:n.distbits},j=l(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,X),n.distbits=X.bits,j){e.msg="invalid distances set",n.mode=w;break}if(n.mode=20,t===u)break e;case 20:n.mode=21;case 21:if(T>=6&&E>=258){e.next_out=S,e.avail_out=E,e.next_in=L,e.avail_in=T,n.hold=k,n.bits=x,i(e,P),S=e.next_out,y=e.output,E=e.avail_out,L=e.next_in,A=e.input,T=e.avail_in,k=n.hold,x=n.bits,n.mode===b&&(n.back=-1);break}for(n.back=0;K=n.lencode[k&(1<<n.lenbits)-1],B=K>>>24,F=K>>>16&255,D=65535&K,!(B<=x);){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(F&&0==(240&F)){for(G=B,N=F,V=D;K=n.lencode[V+((k&(1<<G+N)-1)>>G)],B=K>>>24,F=K>>>16&255,D=65535&K,!(G+B<=x);){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}k>>>=G,x-=G,n.back+=G}if(k>>>=B,x-=B,n.back+=B,n.length=D,0===F){n.mode=26;break}if(32&F){n.back=-1,n.mode=b;break}if(64&F){e.msg="invalid literal/length code",n.mode=w;break}n.extra=15&F,n.mode=22;case 22:if(n.extra){for(J=n.extra;x<J;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.length+=k&(1<<n.extra)-1,k>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;K=n.distcode[k&(1<<n.distbits)-1],B=K>>>24,F=K>>>16&255,D=65535&K,!(B<=x);){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(0==(240&F)){for(G=B,N=F,V=D;K=n.distcode[V+((k&(1<<G+N)-1)>>G)],B=K>>>24,F=K>>>16&255,D=65535&K,!(G+B<=x);){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}k>>>=G,x-=G,n.back+=G}if(k>>>=B,x-=B,n.back+=B,64&F){e.msg="invalid distance code",n.mode=w;break}n.offset=D,n.extra=15&F,n.mode=24;case 24:if(n.extra){for(J=n.extra;x<J;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}n.offset+=k&(1<<n.extra)-1,k>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=w;break}n.mode=25;case 25:if(0===E)break e;if(R=P-E,n.offset>R){if(R=n.offset-R,R>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=w;break}R>n.wnext?(R-=n.wnext,O=n.wsize-R):O=n.wnext-R,R>n.length&&(R=n.length),C=n.window}else C=y,O=S-n.offset,R=n.length;R>E&&(R=E),E-=R,n.length-=R;do{y[S++]=C[O++]}while(--R);0===n.length&&(n.mode=21);break;case 26:if(0===E)break e;y[S++]=n.length,E--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===T)break e;T--,k|=A[L++]<<x,x+=8}if(P-=E,e.total_out+=P,n.total+=P,P&&(e.adler=n.check=n.flags?r(n.check,y,P,S-P):a(n.check,y,P,S-P)),P=E,(n.flags?k:v(k))!==n.check){e.msg="incorrect data check",n.mode=w;break}k=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===T)break e;T--,k+=A[L++]<<x,x+=8}if(k!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=w;break}k=0,x=0}n.mode=29;case 29:j=d;break e;case w:j=_;break e;case 31:return m;case 32:default:return f}return e.next_out=S,e.avail_out=E,e.next_in=L,e.avail_in=T,n.hold=k,n.bits=x,(n.wsize||P!==e.avail_out&&n.mode<w&&(n.mode<27||t!==s))&&M(e,e.output,e.next_out,P-e.avail_out)?(n.mode=31,m):(U-=e.avail_in,P-=e.avail_out,e.total_in+=U,e.total_out+=P,n.total+=P,n.wrap&&P&&(e.adler=n.check=n.flags?r(n.check,y,P,e.next_out-P):a(n.check,y,P,e.next_out-P)),e.data_type=n.bits+(n.last?64:0)+(n.mode===b?128:0)+(20===n.mode||15===n.mode?256:0),(0===U&&0===P||t===s)&&j===c&&(j=p),j)},e.exports.inflateEnd=e=>{if(!e||!e.state)return f;let t=e.state;return t.window&&(t.window=null),e.state=null,c},e.exports.inflateGetHeader=(e,t)=>{if(!e||!e.state)return f;const n=e.state;return 0==(2&n.wrap)?f:(n.head=t,t.done=!1,c)},e.exports.inflateSetDictionary=(e,t)=>{const n=t.length;let r,i,l;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?f:11===r.mode&&(i=1,i=a(i,t,n,0),i!==r.check)?_:(l=M(e,t,n,n),l?(r.mode=31,m):(r.havedict=1,c))):f},e.exports.inflateInfo="pako inflate (from Nodeca project)"},9241:e=>{"use strict";const t=15,n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,l,s,o,u,c,d,h)=>{const f=h.bits;let _,m,p,g,b,w,v=0,A=0,y=0,L=0,S=0,T=0,E=0,k=0,x=0,I=0,M=null,U=0;const P=new Uint16Array(16),R=new Uint16Array(16);let O,C,B,F=null,D=0;for(v=0;v<=t;v++)P[v]=0;for(A=0;A<o;A++)P[l[s+A]]++;for(S=f,L=t;L>=1&&0===P[L];L--);if(S>L&&(S=L),0===L)return u[c++]=20971520,u[c++]=20971520,h.bits=1,0;for(y=1;y<L&&0===P[y];y++);for(S<y&&(S=y),k=1,v=1;v<=t;v++)if(k<<=1,k-=P[v],k<0)return-1;if(k>0&&(0===e||1!==L))return-1;for(R[1]=0,v=1;v<t;v++)R[v+1]=R[v]+P[v];for(A=0;A<o;A++)0!==l[s+A]&&(d[R[l[s+A]]++]=A);if(0===e?(M=F=d,w=19):1===e?(M=n,U-=257,F=a,D-=257,w=256):(M=r,F=i,w=-1),I=0,A=0,v=y,b=c,T=S,E=0,p=-1,x=1<<S,g=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){O=v-E,d[A]<w?(C=0,B=d[A]):d[A]>w?(C=F[D+d[A]],B=M[U+d[A]]):(C=96,B=0),_=1<<v-E,m=1<<T,y=m;do{m-=_,u[b+(I>>E)+m]=O<<24|C<<16|B|0}while(0!==m);for(_=1<<v-1;I&_;)_>>=1;if(0!==_?(I&=_-1,I+=_):I=0,A++,0==--P[v]){if(v===L)break;v=l[s+d[A]]}if(v>S&&(I&g)!==p){for(0===E&&(E=S),b+=y,T=v-E,k=1<<T;T+E<L&&(k-=P[T+E],!(k<=0));)T++,k<<=1;if(x+=1<<T,1===e&&x>852||2===e&&x>592)return 1;p=I&g,u[p]=S<<24|T<<16|b-c|0}}return 0!==I&&(u[b+I]=v-E<<24|64<<16|0),h.bits=S,0}},8898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const n=256,a=286,r=30,i=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),u=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);const d=new Array(60);t(d);const h=new Array(512);t(h);const f=new Array(256);t(f);const _=new Array(29);t(_);const m=new Array(r);function p(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}let g,b,w;function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(m);const A=e=>e<256?h[e]:h[256+(e>>>7)],y=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},L=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,y(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},S=(e,t,n)=>{L(e,n[2*t],n[2*t+1])},T=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},E=(e,t,n)=>{const a=new Array(16);let r,l,s=0;for(r=1;r<=i;r++)a[r]=s=s+n[r-1]<<1;for(l=0;l<=t;l++){let t=e[2*l+1];0!==t&&(e[2*l]=T(a[t]++,t))}},k=e=>{let t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<r;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},x=e=>{e.bi_valid>8?y(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,n,a)=>{const r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&a[t]<=a[n]},M=(e,t,n)=>{const a=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&I(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!I(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a},U=(e,t,a)=>{let r,i,o,u,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?S(e,i,t):(o=f[i],S(e,o+n+1,t),u=l[o],0!==u&&(i-=_[o],L(e,i,u)),r--,o=A(r),S(e,o,a),u=s[o],0!==u&&(r-=m[o],L(e,r,u)))}while(c<e.last_lit);S(e,256,t)},P=(e,t)=>{const n=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.has_stree,l=t.stat_desc.elems;let s,o,u,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<l;s++)0!==n[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,n[2*u]=1,e.depth[u]=0,e.opt_len--,r&&(e.static_len-=a[2*u+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)M(e,n,s);u=l;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],M(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,n[2*u]=n[2*s]+n[2*o],e.depth[u]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,n[2*s+1]=n[2*o+1]=u,e.heap[1]=u++,M(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,a=t.max_code,r=t.stat_desc.static_tree,l=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,d,h,f,_,m,p=0;for(f=0;f<=i;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],f=n[2*n[2*d+1]+1]+1,f>u&&(f=u,p++),n[2*d+1]=f,d>a||(e.bl_count[f]++,_=0,d>=o&&(_=s[d-o]),m=n[2*d],e.opt_len+=m*(f+_),l&&(e.static_len+=m*(r[2*d+1]+_)));if(0!==p){do{for(f=u-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[u]--,p-=2}while(p>0);for(f=u;0!==f;f--)for(d=e.bl_count[f];0!==d;)h=e.heap[--c],h>a||(n[2*h+1]!==f&&(e.opt_len+=(f-n[2*h+1])*n[2*h],n[2*h+1]=f),d--)}})(e,t),E(n,c,e.bl_count)},R=(e,t,n)=>{let a,r,i=-1,l=t[1],s=0,o=7,u=4;for(0===l&&(o=138,u=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)r=l,l=t[2*(a+1)+1],++s<o&&r===l||(s<u?e.bl_tree[2*r]+=s:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=r,0===l?(o=138,u=3):r===l?(o=6,u=3):(o=7,u=4))},O=(e,t,n)=>{let a,r,i=-1,l=t[1],s=0,o=7,u=4;for(0===l&&(o=138,u=3),a=0;a<=n;a++)if(r=l,l=t[2*(a+1)+1],!(++s<o&&r===l)){if(s<u)do{S(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==i&&(S(e,r,e.bl_tree),s--),S(e,16,e.bl_tree),L(e,s-3,2)):s<=10?(S(e,17,e.bl_tree),L(e,s-3,3)):(S(e,18,e.bl_tree),L(e,s-11,7));s=0,i=r,0===l?(o=138,u=3):r===l?(o=6,u=3):(o=7,u=4)}};let C=!1;const B=(e,t,n,a)=>{L(e,0+(a?1:0),3),((e,t,n,a)=>{x(e),a&&(y(e,n),y(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n,!0)};e.exports._tr_init=e=>{C||((()=>{let e,t,n,u,v;const A=new Array(16);for(n=0,u=0;u<28;u++)for(_[u]=n,e=0;e<1<<l[u];e++)f[n++]=u;for(f[n-1]=u,v=0,u=0;u<16;u++)for(m[u]=v,e=0;e<1<<s[u];e++)h[v++]=u;for(v>>=7;u<r;u++)for(m[u]=v<<7,e=0;e<1<<s[u]-7;e++)h[256+v++]=u;for(t=0;t<=i;t++)A[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,A[8]++;for(;e<=255;)c[2*e+1]=9,e++,A[9]++;for(;e<=279;)c[2*e+1]=7,e++,A[7]++;for(;e<=287;)c[2*e+1]=8,e++,A[8]++;for(E(c,287,A),e=0;e<r;e++)d[2*e+1]=5,d[2*e]=T(e,5);g=new p(c,l,257,a,i),b=new p(d,s,0,r,i),w=new p(new Array(0),o,0,19,7)})(),C=!0),e.l_desc=new v(e.dyn_ltree,g),e.d_desc=new v(e.dyn_dtree,b),e.bl_desc=new v(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,k(e)},e.exports._tr_stored_block=B,e.exports._tr_flush_block=(e,t,a,r)=>{let i,l,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,a=4093624447;for(t=0;t<=31;t++,a>>>=1)if(1&a&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),P(e,e.l_desc),P(e,e.d_desc),s=(e=>{let t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),P(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,l=e.static_len+3+7>>>3,l<=i&&(i=l)):i=l=a+5,a+4<=i&&-1!==t?B(e,t,a,r):4===e.strategy||l===i?(L(e,2+(r?1:0),3),U(e,c,d)):(L(e,4+(r?1:0),3),((e,t,n,a)=>{let r;for(L(e,t-257,5),L(e,n-1,5),L(e,a-4,4),r=0;r<a;r++)L(e,e.bl_tree[2*u[r]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),U(e,e.dyn_ltree,e.dyn_dtree)),k(e),r&&x(e)},e.exports._tr_tally=(e,t,a)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*(f[a]+n+1)]++,e.dyn_dtree[2*A(t)]++),e.last_lit===e.lit_bufsize-1),e.exports._tr_align=e=>{L(e,2,3),S(e,256,c),(e=>{16===e.bi_valid?(y(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},2292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},9508:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});
/**
 * @license tga-js 1.1.1
 * Copyright (c) 2013-2020 Vincent Thibault, Inc.
 * License: MIT
 */
const a=class{_checkHeader(){const e=this.header;if(0===e.imageType)throw Error("No data");if(e.hasColorMap){if(e.colorMapLength>256||24!==e.colorMapDepth||1!==e.colorMapType)throw Error("Invalid colormap for indexed type")}else if(e.colorMapType)throw Error("Why does the image contain a palette ?");if(!e.width||!e.height)throw Error("Invalid image size");if(8!==e.pixelDepth&&16!==e.pixelDepth&&24!==e.pixelDepth&&32!==e.pixelDepth)throw Error('Invalid pixel size "'+e.pixelDepth+'"')}_decodeRLE(e,t,n,a){const r=new Uint8Array(a),i=new Uint8Array(n);let l=0;for(;l<a;){const a=e[t++];let s=1+(127&a);if(128&a){for(let a=0;a<n;++a)i[a]=e[t+a];t+=n;for(let e=0;e<s;++e)r.set(i,l),l+=n}else{s*=n;for(let n=0;n<s;++n)r[l+n]=e[t+n];l+=s,t+=s}}return r}_getImageData8bits(e,t,n,a,r,i,l,s,o,u){for(let c=0,d=r;d!==l;d+=i)for(let r=s;r!==u;r+=o,c++){const i=t[c];e[4*(r+a*d)+3]=255,e[4*(r+a*d)+2]=n[3*i+0],e[4*(r+a*d)+1]=n[3*i+1],e[4*(r+a*d)+0]=n[3*i+2]}return e}_getImageData16bits(e,t,n,a,r,i,l,s,o,u){for(let n=0,c=r;c!==l;c+=i)for(let r=s;r!==u;r+=o,n+=2){const i=t[n+0]|t[n+1]<<8;e[4*(r+a*c)+0]=(31744&i)>>7,e[4*(r+a*c)+1]=(992&i)>>2,e[4*(r+a*c)+2]=(31&i)>>3,e[4*(r+a*c)+3]=32768&i?0:255}return e}_getImageData24bits(e,t,n,a,r,i,l,s,o,u){for(let n=0,c=r;c!==l;c+=i)for(let r=s;r!==u;r+=o,n+=3)e[4*(r+a*c)+3]=255,e[4*(r+a*c)+2]=t[n+0],e[4*(r+a*c)+1]=t[n+1],e[4*(r+a*c)+0]=t[n+2];return e}_getImageData32bits(e,t,n,a,r,i,l,s,o,u){for(let n=0,c=r;c!==l;c+=i)for(let r=s;r!==u;r+=o,n+=4)e[4*(r+a*c)+2]=t[n+0],e[4*(r+a*c)+1]=t[n+1],e[4*(r+a*c)+0]=t[n+2],e[4*(r+a*c)+3]=t[n+3];return e}_getImageDataGrey8bits(e,t,n,a,r,i,l,s,o,u){for(let n=0,c=r;c!==l;c+=i)for(let r=s;r!==u;r+=o,n++){const i=t[n];e[4*(r+a*c)+0]=i,e[4*(r+a*c)+1]=i,e[4*(r+a*c)+2]=i,e[4*(r+a*c)+3]=255}return e}_getImageDataGrey16bits(e,t,n,a,r,i,l,s,o,u){for(let n=0,c=r;c!==l;c+=i)for(let r=s;r!==u;r+=o,n+=2)e[4*(r+a*c)+0]=t[n+0],e[4*(r+a*c)+1]=t[n+0],e[4*(r+a*c)+2]=t[n+0],e[4*(r+a*c)+3]=t[n+1];return e}open(e,t){const n=new XMLHttpRequest;n.responseType="arraybuffer",n.open("GET",e,!0),n.onload=()=>{200===n.status&&(this.load(new Uint8Array(n.response)),t&&t())},n.send(null)}load(e){let t=0;if(e.length<18)throw Error("Not enough data to contain header");const n={idLength:e[t++],colorMapType:e[t++],imageType:e[t++],colorMapIndex:e[t++]|e[t++]<<8,colorMapLength:e[t++]|e[t++]<<8,colorMapDepth:e[t++],offsetX:e[t++]|e[t++]<<8,offsetY:e[t++]|e[t++]<<8,width:e[t++]|e[t++]<<8,height:e[t++]|e[t++]<<8,pixelDepth:e[t++],flags:e[t++]};if(n.hasEncoding=9===n.imageType||10===n.imageType||11===n.imageType,n.hasColorMap=9===n.imageType||1===n.imageType,n.isGreyColor=11===n.imageType||3===n.imageType,this.header=n,this._checkHeader(),(t+=n.idLength)>=e.length)throw Error("No data");if(n.hasColorMap){const a=n.colorMapLength*(n.colorMapDepth>>3);this.palette=e.subarray(t,t+a),t+=a}const a=n.pixelDepth>>3,r=n.width*n.height,i=r*a;n.hasEncoding?this.imageData=this._decodeRLE(e,t,a,i):this.imageData=e.subarray(t,t+(n.hasColorMap?r:i))}getImageData(e){const{width:t,height:n,flags:a,pixelDepth:r,isGreyColor:i}=this.header,l=(48&a)>>4;let s,o,u,c,d,h,f;switch(e||(e=document?document.createElement("canvas").getContext("2d").createImageData(t,n):{width:t,height:n,data:new Uint8ClampedArray(t*n*4)}),2===l||3===l?(c=0,d=1,h=n):(c=n-1,d=-1,h=-1),2===l||0===l?(s=0,o=1,u=t):(s=t-1,o=-1,u=-1),r){case 8:f=i?this._getImageDataGrey8bits:this._getImageData8bits;break;case 16:f=i?this._getImageDataGrey16bits:this._getImageData16bits;break;case 24:f=this._getImageData24bits;break;case 32:f=this._getImageData32bits}return f.call(this,e.data,this.imageData,this.palette,t,c,d,h,s,o,u),e}getCanvas(){const{width:e,height:t}=this.header,n=document.createElement("canvas"),a=n.getContext("2d"),r=a.createImageData(e,t);return n.width=e,n.height=t,a.putImageData(this.getImageData(r),0,0),n}getDataURL(e){return this.getCanvas().toDataURL(e||"image/png")}}},4234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reverse().filter(((e,t,n)=>-1===n.indexOf(e,t+1))).reverse()}},6187:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAudioData=void 0,"function"==typeof OfflineAudioContext&&(n=new OfflineAudioContext(1,1,48e3)),t.decodeAudioData=function(e){if(n)return n.decodeAudioData(e)}},7249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4293),r=n(2885),i=n(5860),l=n(9048),s=new Uint8Array(8);class o{constructor(e,t,n){this.index=0;let r=a.bytesOf(e);t=t||0,n=n||r.length,this.buffer=e,this.uint8array=r.subarray(t,t+n),this.byteLength=n,this.remaining=n}substream(e){if(this.remaining<e)throw new Error(`ByteStream: substream: want ${e} bytes but have ${this.remaining}`);let t=this.index;return this.index+=e,new o(this.uint8array.subarray(t,t+e))}skip(e){if(this.remaining<e)throw new Error(`ByteStream: skip: premature end - want ${e} bytes but have ${this.remaining}`);this.index+=e,this.remaining-=e}seek(e){this.index=e,this.remaining=this.byteLength-e}read(e){if(this.remaining<e)throw new Error(`ByteStream: read: premature end - want ${e} bytes but have ${this.remaining}`);let t=this.uint8array,n=this.index,a=r.boundIndexOf(t,0,n,e);return-1===a&&(a=n+e),this.index+=e,this.remaining-=e,l.decodeUtf8(t.subarray(n,a))}readNull(){if(this.remaining<1)throw new Error("ByteStream: readNull: premature end - want at least 1 byte but have 0");let e=this.uint8array,t=this.index,n=e.indexOf(0,t);-1===n&&(n=e.length-1);let a=n-t+1;return this.index+=a,this.remaining-=a,l.decodeUtf8(e.subarray(t,n))}readBinary(e){if(this.remaining<e)throw new Error(`ByteStream: readBinary: premature end - want ${e} bytes but have ${this.remaining}`);let t=this.uint8array,n=this.index,a="";for(let r=0;r<e;r++)a+=String.fromCharCode(t[n+r]);return this.index+=e,this.remaining-=e,a}readInt8(){if(this.remaining<1)throw new Error(`ByteStream: readInt8: premature end - want 1 byte but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToInt8(t[e]);return this.index+=1,this.remaining-=1,n}readInt16(){if(this.remaining<2)throw new Error(`ByteStream: readInt16: premature end - want 2 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToInt16(t[e],t[e+1]);return this.index+=2,this.remaining-=2,n}readInt32(){if(this.remaining<4)throw new Error(`ByteStream: readInt32: premature end - want 4 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToInt32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,this.remaining-=4,n}readUint8(){if(this.remaining<1)throw new Error(`ByteStream: readUint8: premature end - want 1 byte but have ${this.remaining}`);let e=this.uint8array[this.index];return this.index+=1,this.remaining-=1,e}readUint16(){if(this.remaining<2)throw new Error(`ByteStream: readUint16: premature end - want 2 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToUint16(t[e],t[e+1]);return this.index+=2,this.remaining-=2,n}readUint32(){if(this.remaining<4)throw new Error(`ByteStream: readUint32: premature end - want 4 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToUint32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,this.remaining-=4,n}readFloat32(){if(this.remaining<4)throw new Error(`ByteStream: readFloat32: premature end - want 4 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToFloat32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,this.remaining-=4,n}readFloat64(){if(this.remaining<8)throw new Error(`ByteStream: readFloat64: premature end - want 8 bytes but have ${this.remaining}`);let e=this.index,t=this.uint8array,n=i.uint8ToFloat64(t[e],t[e+1],t[e+2],t[e+3],t[e+4],t[e+5],t[e+6],t[e+7]);return this.index+=8,this.remaining-=8,n}readInt8Array(e){if(ArrayBuffer.isView(e)||(e=new Int8Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readInt8Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)e[a]=i.uint8ToInt8(n[t+a]);return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readInt16Array(e){if(ArrayBuffer.isView(e)||(e=new Int16Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readInt16Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+2*a;e[a]=i.uint8ToInt16(n[r],n[r+1])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readInt32Array(e){if(ArrayBuffer.isView(e)||(e=new Int32Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readInt32Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;e[a]=i.uint8ToInt32(n[r],n[r+1],n[r+2],n[r+3])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readUint8Array(e){if(ArrayBuffer.isView(e)||(e=new Uint8Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readUint8Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)e[a]=n[t+a];return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readUint16Array(e){if(ArrayBuffer.isView(e)||(e=new Uint16Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readUint16Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+2*a;e[a]=i.uint8ToUint16(n[r],n[r+1])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readUint32Array(e){if(ArrayBuffer.isView(e)||(e=new Uint32Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readUint32Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;e[a]=i.uint8ToUint32(n[r],n[r+1],n[r+2],n[r+3])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readFloat32Array(e){if(ArrayBuffer.isView(e)||(e=new Float32Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readFloat32Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;e[a]=i.uint8ToFloat32(n[r],n[r+1],n[r+2],n[r+3])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}readFloat64Array(e){if(ArrayBuffer.isView(e)||(e=new Float64Array(e)),this.remaining<e.byteLength)throw new Error(`ByteStream: readFloat64Array: premature end - want ${e.byteLength} bytes but have ${this.remaining}`);let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+8*a;e[a]=i.uint8ToFloat64(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5],n[r+6],n[r+7])}return this.index+=e.byteLength,this.remaining-=e.byteLength,e}write(e){let t=l.encodeUtf8(e);return this.writeUint8Array(t),t.length}writeNull(e){let t=this.write(e);return this.index++,this.remaining--,t+1}writeBinary(e){let t=this.index,n=this.uint8array,a=e.length;for(let r=0;r<a;r++)n[t+r]=e.charCodeAt(r);this.index+=a}writeInt8(e){this.uint8array[this.index]=i.int8ToUint8(e),this.index+=1}writeInt16(e){let t=this.index,n=this.uint8array;i.int16ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],this.index+=2}writeInt32(e){let t=this.index,n=this.uint8array;i.int32ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],n[t+2]=s[2],n[t+3]=s[3],this.index+=4}writeUint8(e){this.uint8array[this.index]=e,this.index+=1}writeUint16(e){let t=this.index,n=this.uint8array;i.uint16ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],this.index+=2}writeUint32(e){let t=this.index,n=this.uint8array;i.uint32ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],n[t+2]=s[2],n[t+3]=s[3],this.index+=4}writeFloat32(e){let t=this.index,n=this.uint8array;i.float32ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],n[t+2]=s[2],n[t+3]=s[3],this.index+=4}writeFloat64(e){let t=this.index,n=this.uint8array;i.float64ToUint8(s,e),n[t]=s[0],n[t+1]=s[1],n[t+2]=s[2],n[t+3]=s[3],n[t+4]=s[4],n[t+5]=s[5],n[t+6]=s[6],n[t+7]=s[7],this.index+=8}writeInt8Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)n[t+a]=i.int8ToUint8(e[a]);this.index+=e.byteLength}writeInt16Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+2*a;i.int16ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1]}this.index+=e.byteLength}writeInt32Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;i.int32ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3]}this.index+=e.byteLength}writeUint8Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)n[t+a]=e[a];this.index+=e.byteLength}writeUint16Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+2*a;i.uint16ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1]}this.index+=e.byteLength}writeUint32Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;i.uint32ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3]}this.index+=e.byteLength}writeFloat32Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+4*a;i.float32ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3]}this.index+=e.byteLength}writeFloat64Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++){let r=t+8*a;i.float64ToUint8(s,e[a]),n[r]=s[0],n[r+1]=s[1],n[r+2]=s[2],n[r+3]=s[3],n[r+4]=s[4],n[r+5]=s[5],n[r+6]=s[6],n[r+7]=s[7]}this.index+=e.byteLength}}t.default=o},1906:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4293);t.default=class{constructor(e,t,n){this.index=0,this.bitBuffer=0,this.bits=0;let r=a.bytesOf(e);t=t||0,n=n||r.length,this.buffer=e,this.uint8array=r.subarray(t,t+n),this.byteLength=e.byteLength}peekBits(e){return this.loadBits(e),this.bitBuffer&(1<<e)-1}readBits(e){let t=this.peekBits(e);return this.bitBuffer>>>=e,this.bits-=e,t}skipBits(e){this.loadBits(e),this.bitBuffer>>>=e,this.bits-=e}loadBits(e){for(;this.bits<e;)this.bitBuffer+=this.uint8array[this.index]<<this.bits,this.bits+=8,this.index+=1}}},4293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bytesOf=void 0;const a=n(9048);t.bytesOf=function(e){return e instanceof Uint8Array?e:"string"==typeof e?a.encodeUtf8(e):new Uint8Array(e)}},5226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeImageData=t.imageToImageData=t.imageDataToImage=t.imageDataToDataUrl=t.imageDataToBlob=t.blobToImageData=t.blobToImage=void 0;const n=document.createElement("canvas"),a=n.getContext("2d"),r=document.createElement("canvas"),i=r.getContext("2d");function l(e){return n.width=e.width,n.height=e.height,a.putImageData(e,0,0),n.toDataURL()}t.blobToImage=function(e){return new Promise((t=>{let n=URL.createObjectURL(e),a=new Image;a.onload=()=>{t(a)},a.onerror=()=>{t(a)},a.src=n}))},t.blobToImageData=function(e){return new Promise(((t,r)=>{let i=URL.createObjectURL(e),l=new Image;l.onload=()=>{URL.revokeObjectURL(i),n.width=l.width,n.height=l.height,a.drawImage(l,0,0),t(a.getImageData(0,0,l.width,l.height))},l.onerror=e=>{r(e)},l.src=i}))},t.imageDataToBlob=function(e){return new Promise((t=>{n.width=e.width,n.height=e.height,a.putImageData(e,0,0),n.toBlob((e=>{t(e)}))}))},t.imageDataToDataUrl=l,t.imageDataToImage=function(e){let t=new Image;return t.src=l(e),t},t.imageToImageData=function(e){let t=e.width,r=e.height;return n.width=t,n.height=r,a.drawImage(e,0,0),a.getImageData(0,0,t,r)},t.resizeImageData=function(e,t,l){return e instanceof ImageData?(n.width=e.width,n.height=e.height,a.putImageData(e,0,0),r.width=t,r.height=l,i.drawImage(n,0,0,t,l),i.getImageData(0,0,t,l)):(n.width=t,n.height=l,a.drawImage(e,0,0,t,l),a.getImageData(0,0,t,l))}},773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return((1<<t)-1)/((1<<e)-1)}},3866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRgtc=t.decodeDxt5=t.decodeDxt3=t.decodeDxt1=void 0;const a=n(773),r=a.default(4,8),i=a.default(5,8),l=a.default(6,8),s=new Uint16Array(4),o=new Uint8Array(12),u=new Uint8Array(8),c=new Uint8Array(8),d=new Uint8Array(8);function h(e,t,n){let a=31&t,r=2016&t,i=63488&t,l=31&n,s=2016&n,o=63488&n;e[0]=t,e[1]=n,e[2]=5*a+3*l>>3|5*r+3*s>>3&2016|5*i+3*o>>3&63488,e[3]=5*l+3*a>>3|5*s+3*r>>3&2016|5*o+3*i>>3&63488}function f(e,t,n){let a=(t>>11&31)*i,r=(t>>5&63)*l,s=(31&t)*i,o=(n>>11&31)*i,u=(n>>5&63)*l,c=(31&n)*i;e[0]=a,e[1]=r,e[2]=s,e[3]=o,e[4]=u,e[5]=c,e[6]=5*a+3*o>>3,e[7]=5*r+3*u>>3,e[8]=5*s+3*c>>3,e[9]=5*o+3*a>>3,e[10]=5*u+3*r>>3,e[11]=5*c+3*s>>3}function _(e,t,n){e[0]=t,e[1]=n,t>n?(e[2]=(6*t+1*n)/7,e[3]=(5*t+2*n)/7,e[4]=(4*t+3*n)/7,e[5]=(3*t+4*n)/7,e[6]=(2*t+5*n)/7,e[7]=(1*t+6*n)/7):(e[2]=(4*t+1*n)/5,e[3]=(3*t+2*n)/5,e[4]=(2*t+3*n)/5,e[5]=(1*t+4*n)/5,e[6]=0,e[7]=1)}t.decodeDxt1=function(e,t,n){let a=new Uint16Array(t*n);for(let r=0,i=n/4;r<i;r++)for(let n=0,i=t/4;n<i;n++){let l=8*(r*i+n);h(s,e[l]+256*e[l+1],e[l+2]+256*e[l+3]);let o=4*r*t+4*n,u=e[l+4]|e[l+5]<<8|e[l+6]<<16|e[l+7]<<24;for(let e=0;e<4;e++){let n=8*e,r=o+e*t;for(let e=0;e<4;e++)a[r+e]=s[u>>n+2*e&3]}}return a},t.decodeDxt3=function(e,t,n){let a=new Uint8Array(t*n*4),i=4*t;for(let l=0,s=t/4;l<s;l++)for(let s=0,u=n/4;s<u;s++){let n=16*(l*u+s);f(o,e[n+8]+256*e[n+9],e[n+10]+256*e[n+11]);let c=16*l*t+16*s;for(let t=0;t<4;t++){let l=e[n+2*t]+256*e[n+1+2*t],s=e[n+12+t];for(let e=0;e<4;e++){let t=c+4*e,n=3*(s>>2*e&3);a[t+0]=o[n+0],a[t+1]=o[n+1],a[t+2]=o[n+2],a[t+3]=(l>>4*e&15)*r}c+=i}}return a},t.decodeDxt5=function(e,t,n){let a=new Uint8Array(t*n*4),r=4*t;for(let c=0,d=n/4;c<d;c++)for(let n=0,d=t/4;n<d;n++){let h=16*(c*d+n);i=u,l=e[h],s=e[h+1],i[0]=l,i[1]=s,l>s?(i[2]=54*l+9*s>>6,i[3]=45*l+18*s>>6,i[4]=36*l+27*s>>6,i[5]=27*l+36*s>>6,i[6]=18*l+45*s>>6,i[7]=9*l+54*s>>6):(i[2]=12*l+3*s>>4,i[3]=9*l+6*s>>4,i[4]=6*l+9*s>>4,i[5]=3*l+12*s>>4,i[6]=0,i[7]=255),f(o,e[h+8]+256*e[h+9],e[h+10]+256*e[h+11]);let _=16*c*t+16*n;for(let t=0;t<2;t++){let n=h+2+3*t,i=h+12+2*t,l=e[n]+256*(e[n+1]+256*e[n+2]);for(let t=0;t<2;t++){let n=e[i+t];for(let e=0;e<4;e++){let r=_+4*e,i=3*(n>>2*e&3),s=l>>12*t+3*e&7;a[r+0]=o[i+0],a[r+1]=o[i+1],a[r+2]=o[i+2],a[r+3]=u[s]}_+=r}}}var i,l,s;return a},t.decodeRgtc=function(e,t,n){let a=new Uint8Array(t*n*2),r=2*t;for(let i=0,l=n/4;i<l;i++)for(let n=0,l=t/4;n<l;n++){let s=16*(i*l+n);_(c,e[s],e[s+1]),_(d,e[s+8],e[s+9]);let o=8*i*t+8*n;for(let t=0;t<2;t++){let n=s+3*t,i=e[n+2]+256*(e[n+3]+256*e[n+4]),l=e[n+10]+256*(e[n+11]+256*e[n+12]);for(let e=0;e<2;e++){let t=4*e;for(let e=0;e<4;e++){let n=o+2*e,r=3*(t+e);a[n+1]=c[i>>r&7],a[n+2]=d[l>>r&7]}o+=r}}}return a}},5291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDataType=void 0,t.fetchDataType=async function(e,t){if("image"===t)return new Promise((t=>{let n=new Image;n.onload=()=>{t({ok:!0,data:n})},n.onerror=e=>{t({ok:!1,error:"Image Error",data:e})},n.src=e}));{let n;try{n=await fetch(e)}catch(e){return{ok:!1,error:"Network Error",data:e}}if(!n.ok)return{ok:!1,error:"Http Error",data:n};try{let e=null;return"text"===t?e=await n.text():"arrayBuffer"===t||"bytes"===t?e=await n.arrayBuffer():"blob"===t&&(e=await n.blob()),"bytes"===t&&(e=new Uint8Array(e)),{ok:!0,data:e}}catch(e){return{ok:!1,error:"Data Error",data:e}}}}},8533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quatLookAt=t.unpackPlanes=t.normalizePlane=t.planeLength=t.testCell=t.testSphere=t.distanceToPlane3=t.distanceToPlane2=t.distanceToPlane=t.unproject=t.QUAT_DEFAULT=t.QUAT_ZERO=t.VEC3_ONE=t.VEC3_ZERO=t.VEC3_UNIT_Z=t.VEC3_UNIT_Y=t.VEC3_UNIT_X=void 0;const a=n(9234);t.VEC3_UNIT_X=a.vec3.fromValues(1,0,0),t.VEC3_UNIT_Y=a.vec3.fromValues(0,1,0),t.VEC3_UNIT_Z=a.vec3.fromValues(0,0,1),t.VEC3_ZERO=a.vec3.create(),t.VEC3_ONE=a.vec3.fromValues(1,1,1),t.QUAT_ZERO=a.quat.fromValues(0,0,0,0),t.QUAT_DEFAULT=a.quat.create();const r=a.vec4.create();function i(e,t,n){return e[0]*t+e[1]*n+e[3]}function l(e,t,n,a){return e[0]*t+e[1]*n+e[2]*a+e[3]}function s(e){return Math.hypot(e[0],e[1],e[2])}function o(e,t){let n=s(t);e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n,e[3]=t[3]/n}t.unproject=function(e,t,n,i){let l=2*(t[0]-i[0])/i[2]-1,s=1-2*(t[1]-i[1])/i[3],o=2*t[2]-1;return a.vec4.set(r,l,s,o,1),a.vec4.transformMat4(r,r,n),a.vec3.set(e,r[0]/r[3],r[1]/r[3],r[2]/r[3]),e},t.distanceToPlane=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},t.distanceToPlane2=i,t.distanceToPlane3=l,t.testSphere=function(e,t,n,a,r,i){-1===i&&(i=0);for(let s=0;s<6;s++){let o=(i+s)%6;if(l(e[o],t,n,a)<=-r)return o}return-1},t.testCell=function(e,t,n,a,r,l){-1===l&&(l=0);for(let s=0;s<6;s++){let o=(l+s)%6,u=e[o];if(i(u,t,a)<0&&i(u,t,r)<0&&i(u,n,r)<0&&i(u,n,a)<0)return o}return-1},t.planeLength=s,t.normalizePlane=o,t.unpackPlanes=function(e,t){let n,a=t[0],r=t[4],i=t[8],l=t[12],s=t[1],u=t[5],c=t[9],d=t[13],h=t[2],f=t[6],_=t[10],m=t[14],p=t[3],g=t[7],b=t[11],w=t[15];n=e[0],n[0]=p+a,n[1]=g+r,n[2]=b+i,n[3]=w+l,n=e[1],n[0]=p-a,n[1]=g-r,n[2]=b-i,n[3]=w-l,n=e[2],n[0]=p-s,n[1]=g-u,n[2]=b-c,n[3]=w-d,n=e[3],n[0]=p+s,n[1]=g+u,n[2]=b+c,n[3]=w+d,n=e[4],n[0]=p+h,n[1]=g+f,n[2]=b+_,n[3]=w+m,n=e[5],n[0]=p-h,n[1]=g-f,n[2]=b-_,n[3]=w-m,o(e[0],e[0]),o(e[1],e[1]),o(e[2],e[2]),o(e[3],e[3]),o(e[4],e[4]),o(e[5],e[5])};const u=a.vec3.create(),c=a.vec3.create(),d=a.vec3.create();t.quatLookAt=function(e,t,n,r){a.vec3.normalize(u,a.vec3.sub(u,n,t)),a.vec3.normalize(c,a.vec3.cross(c,r,u)),a.vec3.cross(d,c,u);let i=c[0]+d[2]+u[1];if(i>0){let t=.5/Math.sqrt(i+1);e[3]=.25/t,e[0]=(d[1]-u[2])*t,e[2]=(u[0]-c[1])*t,e[1]=(c[2]-d[0])*t}else if(c[0]>d[2]&&c[0]>u[1]){let t=2*Math.sqrt(1+c[0]-d[2]-u[1]);e[3]=(d[1]-u[2])/t,e[0]=.25*t,e[2]=(d[0]+c[2])/t,e[1]=(u[0]+c[1])/t}else if(d[2]>u[1]){let t=2*Math.sqrt(1+d[2]-c[0]-u[1]);e[3]=(u[0]-c[1])/t,e[0]=(d[0]+c[2])/t,e[2]=.25*t,e[1]=(u[2]+d[1])/t}else{let t=2*Math.sqrt(1+u[1]-c[0]-d[2]);e[3]=(c[2]-d[0])/t,e[0]=(u[0]+c[1])/t,e[2]=(u[2]+d[1])/t,e[1]=.25*t}return e}},20:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(6269),l=n(5226),s=n(7249),o=n(1906),u=n(1713),c=n(7901),d=n(4614);t.default={glMatrix:a,glMatrixAddon:r,math:i,canvas:l,BinaryStream:s.default,BitStream:o.default,urlWithParams:u.default,path:c,isPng:d.isPng,isJpeg:d.isJpeg,isGif:d.isGif,isWebP:d.isWebP}},4614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebP=t.isGif=t.isJpeg=t.isPng=void 0,t.isPng=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]},t.isJpeg=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&255===e[0]&&216===e[1]&&255===e[e.length-2]&&217===e[e.length-1]},t.isGif=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&71===e[0]&&73===e[1]&&70===e[2]&&56===e[3]&&(55===e[4]||57===e[4])&&97===e[5]},t.isWebP=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]}},6269:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPowerOfTwo=t.powerOfTwo=t.copysign=t.bezier=t.hermite=t.lerp=t.clamp=t.randomInRange=t.radToDeg=t.degToRad=void 0,t.degToRad=function(e){return e*(Math.PI/180)},t.radToDeg=function(e){return e*(180/Math.PI)},t.randomInRange=function(e,t){return e+Math.random()*(t-e)},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.lerp=function(e,t,n){return e+n*(t-e)},t.hermite=function(e,t,n,a,r){let i=r*r;return e*(i*(2*r-3)+1)+t*(i*(r-2)+r)+n*(i*(r-1))+a*(i*(3-2*r))},t.bezier=function(e,t,n,a,r){let i=1-r,l=r*r,s=i*i;return e*(s*i)+t*(3*r*s)+n*(3*l*i)+a*(l*r)},t.copysign=function(e,t){let n=Math.sign(t);return 0===n?0:Math.sign(e)!==n?-e:e},t.powerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},t.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)}},7901:(e,t)=>{"use strict";function n(e){if(e&&e.length){let t=e.lastIndexOf("/");return-1!==t&&(e=e.slice(t+1)),t=e.lastIndexOf("\\"),-1!==t&&(e=e.slice(t+1)),e}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.name=t.extname=t.basename=void 0,t.basename=n,t.extname=function(e){if(e&&e.length){let t=e.lastIndexOf(".");return-1!==t&&(e=e.slice(t).toLowerCase()),e}return""},t.name=function(e){let t=(e=n(e)).lastIndexOf(".");return-1!==t&&(e=e.slice(0,t)),e}},2885:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boundIndexOf=t.isStringInString=t.isStringInBytes=void 0,t.isStringInBytes=function(e,t,n=0,a=1/0){let r=Math.max(n,0),i=Math.min(r+a,e.length),l=0,s=t.charCodeAt(0);for(let n=r;n<i;n++){if(e[n]===s){if(l+=1,l===t.length)return!0;s=t.charCodeAt(l)}else l>0&&(l=0,s=t.charCodeAt(0))}return!1},t.isStringInString=function(e,t,n=0,a=1/0){let r=Math.max(n,0),i=Math.min(r+a,e.length),l=0,s=t[0];for(let n=r;n<i;n++){if(e[n]===s){if(l+=1,l===t.length)return!0;s=t[l]}else l>0&&(l=0,s=t[0])}return!1},t.boundIndexOf=function(e,t,n=0,a=1/0){let r=Math.max(n,0),i=Math.min(r+a,e.length);for(let n=r;n<i;n++)if(e[n]===t)return n;return-1}},6796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return()=>(e=(9301*e+49297)%233280)/233280}},5761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[...e].reverse().join("")}},5860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base256ToString=t.stringToBase256=t.numberToUint32=t.float64ToUint8=t.float32ToUint8=t.uint32ToUint8=t.uint24ToUint8=t.uint16ToUint8=t.int32ToUint8=t.int24ToUint8=t.int16ToUint8=t.int8ToUint8=t.uint8ToFloat64=t.uint8ToFloat32=t.uint8ToUint32=t.uint8ToUint24=t.uint8ToUint16=t.uint8ToInt32=t.uint8ToInt24=t.uint8ToInt16=t.uint8ToInt8=void 0;const n=new ArrayBuffer(8),a=new Int8Array(n),r=new Int16Array(n),i=new Int32Array(n),l=new Uint8Array(n),s=new Uint16Array(n),o=new Uint32Array(n),u=new Float32Array(n),c=new Float64Array(n);t.uint8ToInt8=function(e){return l[0]=e,a[0]},t.uint8ToInt16=function(e,t){return l[0]=e,l[1]=t,r[0]},t.uint8ToInt24=function(e,t,n){return l[0]=e,l[1]=t,l[2]=n,l[3]=0,i[0]},t.uint8ToInt32=function(e,t,n,a){return l[0]=e,l[1]=t,l[2]=n,l[3]=a,i[0]},t.uint8ToUint16=function(e,t){return l[0]=e,l[1]=t,s[0]},t.uint8ToUint24=function(e,t,n){return l[0]=e,l[1]=t,l[2]=n,l[3]=0,o[0]},t.uint8ToUint32=function(e,t,n,a){return l[0]=e,l[1]=t,l[2]=n,l[3]=a,o[0]},t.uint8ToFloat32=function(e,t,n,a){return l[0]=e,l[1]=t,l[2]=n,l[3]=a,u[0]},t.uint8ToFloat64=function(e,t,n,a,r,i,s,o){return l[0]=e,l[1]=t,l[2]=n,l[3]=a,l[4]=r,l[5]=i,l[6]=s,l[7]=o,c[0]},t.int8ToUint8=function(e){return l[0]=e,a[0]},t.int16ToUint8=function(e,t){return r[0]=t,e[0]=l[0],e[1]=l[1],e},t.int24ToUint8=function(e,t){return i[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e},t.int32ToUint8=function(e,t){return i[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e},t.uint16ToUint8=function(e,t){return s[0]=t,e[0]=l[0],e[1]=l[1],e},t.uint24ToUint8=function(e,t){return o[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e},t.uint32ToUint8=function(e,t){return o[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e},t.float32ToUint8=function(e,t){return u[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e},t.float64ToUint8=function(e,t){return c[0]=t,e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=l[6],e[7]=l[7],e},t.numberToUint32=function(e){return o[0]=e,o[0]},t.stringToBase256=function(e){let t=0;for(let n of e)t=256*t+n.charCodeAt(0);return t},t.base256ToString=function(e){let t=[];for(;e>0;)t.push(String.fromCharCode(e%256)),e=Math.floor(e/256);return t.reverse().join("")}},1713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t){let n=Object.entries(t);if(n.length){let t=n.map((([e,t])=>`${e}=${t}`)).join("&"),a="&";return-1===e.indexOf("?")&&(a="?"),`${e}${a}${t}`}}return e}},9048:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitUtf8ByteLength=t.byteLengthUtf8=t.encodeUtf8=t.decodeUtf8=void 0;let n=new TextDecoder,a=new TextEncoder;t.decodeUtf8=function(e){return n.decode(e)},t.encodeUtf8=function(e){return a.encode(e)},t.byteLengthUtf8=function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var a=e.charCodeAt(n);a>127&&a<=2047?t++:a>2047&&a<=65535&&(t+=2),a>=56320&&a<=57343&&n--}return t},t.splitUtf8ByteLength=function(e,t){let n=[],a=0,r=0;for(let i=0,l=e.length;i<l;i++){let l=e.charCodeAt(i);l<128?r+=1:l<2048?r+=2:l<55296||l>=57344?r+=3:(i++,r+=4),r>=t-3&&(n.push(e.substr(a,i)),a+=i,r=0)}return r>0&&n.push(e.substr(a)),n}},2514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlpImage=t.BLP1_MAGIC=void 0;const a=n(8127),r=n(1906),i=n(4293),l=n(773);t.BLP1_MAGIC=827345986;t.BlpImage=class{constructor(){this.content=0,this.alphaBits=0,this.width=0,this.height=0,this.type=0,this.hasMipmaps=!1,this.mipmapOffsets=new Uint32Array(16),this.mipmapSizes=new Uint32Array(16),this.uint8array=null,this.jpgHeader=null,this.pallete=null}load(e){let n=i.bytesOf(e),a=new Int32Array(n.buffer,0,40);if(a[0]!==t.BLP1_MAGIC)throw new Error("WrongMagicNumber");this.content=a[1],this.alphaBits=a[2],this.width=a[3],this.height=a[4],this.type=a[5],this.hasMipmaps=0!==a[6];for(let e=0;e<16;e++)this.mipmapOffsets[e]=a[7+e],this.mipmapSizes[e]=a[23+e];this.uint8array=n,0===this.content?this.jpgHeader=n.subarray(160,160+a[39]):this.pallete=n.subarray(156,1180)}getMipmap(e){let t,n=this.uint8array,i=this.mipmapOffsets[e],s=this.mipmapSizes[e];if(0===this.content){let e=this.jpgHeader,r=new Uint8Array(e.length+s),l=new a.JpegImage;r.set(e),r.set(n.subarray(i,i+s),e.length),l.parse(r),t=new ImageData(l.width,l.height),l.getData(t)}else{let a,s=this.pallete,o=Math.max(this.width/(1<<e),1),u=Math.max(this.height/(1<<e),1),c=o*u,d=this.alphaBits,h=0;t=new ImageData(o,u),d>0&&(a=new r.default(n.buffer,i+c,Math.ceil(c*d/8)),h=l.default(d,8));let f=t.data;for(let e=0;e<c;e++){let t=4*e,r=4*n[i+e];f[t]=s[r+2],f[t+1]=s[r+1],f[t+2]=s[r],f[t+3]=d>0?a.readBits(d)*h:255}}return t}mipmaps(){let e=0;for(let t of this.mipmapSizes)t>0&&(e+=1);return e}hasFakeMipmaps(){let e=this.mipmapOffsets;for(let t=0;t<16;t++){let n=e[t];if(n>0)for(let a=t+1;a<16;a++)if(n===e[a])return!0}return!1}}},1362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2514);t.default={Image:a.BlpImage}},9169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&66===e[0]&&76===e[1]&&80===e[2]&&49===e[3]}},2730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DdsImage=t.FOURCC_ATI2=t.FOURCC_DXT5=t.FOURCC_DXT3=t.FOURCC_DXT1=t.DDS_MAGIC=void 0;const a=n(5860),r=n(3866),i=n(4293);t.DDS_MAGIC=542327876;t.FOURCC_DXT1=827611204,t.FOURCC_DXT3=861165636,t.FOURCC_DXT5=894720068,t.FOURCC_ATI2=843666497;t.DdsImage=class{constructor(){this.width=0,this.height=0,this.format=0,this.mipmapWidths=[],this.mipmapHeights=[],this.mipmapDatas=[]}load(e){let n=i.bytesOf(e),r=new Int32Array(n.buffer,0,31);if(r[0]!==t.DDS_MAGIC)throw new Error("Wrong magic number");if(!(4&r[20]))throw new Error("Not FourCC");let l=r[21];if(l!==t.FOURCC_DXT1&&l!==t.FOURCC_DXT3&&l!==t.FOURCC_DXT5&&l!==t.FOURCC_ATI2)throw new Error(`Unsupported FourCC: ${a.base256ToString(l)}`);this.format=l;let s=1;131072&r[2]&&(s=Math.max(1,r[7]));let o=r[4],u=r[3],c=16;l===t.FOURCC_DXT1&&(c=8),this.width=o,this.height=u;let d=r[1]+4;for(let e=0;e<s;e++){let t=Math.max(4,o)/4*Math.max(4,u)/4*c;this.mipmapWidths[e]=o,this.mipmapHeights[e]=u,this.mipmapDatas[e]=n.subarray(d,d+t),d+=t,o=Math.max(o/2,1),u=Math.max(u/2,1)}}mipmaps(){return this.mipmapDatas.length}getMipmap(e,n=!1){let a,i=this.mipmapWidths[e],l=this.mipmapHeights[e],s=this.mipmapDatas[e];return a=n?s:this.format===t.FOURCC_DXT1?r.decodeDxt1(s,i,l):this.format===t.FOURCC_DXT3?r.decodeDxt3(s,i,l):this.format===t.FOURCC_DXT5?r.decodeDxt5(s,i,l):r.decodeRgtc(s,i,l),{width:i,height:l,data:a}}}},4590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2730),r=n(5498);t.default={Image:a.DdsImage,FOURCC_DXT1:a.FOURCC_DXT1,FOURCC_DXT3:a.FOURCC_DXT3,FOURCC_DXT5:a.FOURCC_DXT5,FOURCC_ATI2:a.FOURCC_ATI2,isDds:r.default}},5498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&68===e[0]&&68===e[1]&&83===e[2]&&32===e[3]}},6372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8005),r=n(5788),i=n(3967),l=n(7096),s=n(4288),o=n(2088),u=n(1362),c=n(4590),d=n(3596);t.default={ini:a.default,slk:r.default,m3:i.default,mdlx:l.default,mpq:s.default,w3x:o.default,blp:u.default,dds:c.default,tga:d.default}},9134:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IniFile=void 0;t.IniFile=class{constructor(){this.properties=new Map,this.sections=new Map}load(e){let t=this.properties,n=this.sections;for(let a of e.split("\r\n"))if(a.length&&!a.startsWith("//")&&!a.startsWith(";")){let e=a.match(/^\[(.+?)\]/);if(e){let a=e[1].trim().toLowerCase();t=n.get(a),t||(t=new Map,n.set(a,t))}else e=a.match(/^(.+?)=(.*?)$/),e&&t.set(e[1],e[2])}}save(){let e=[];for(let[t,n]of this.properties)e.push(`${t}=${n}`);for(let[t,n]of this.sections){e.push(`[${t}]`);for(let[t,a]of n)e.push(`${t}=${a}`)}return e.join("\r\n")}getSection(e){return this.sections.get(e.toLowerCase())}}},8005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9134);t.default={File:a.IniFile}},4540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector4AnimationReference=t.Vector3AnimationReference=t.Vector2AnimationReference=t.Float32AnimationReference=t.Uint32AnimationReference=t.Uint16AnimationReference=t.PixelAnimationReference=t.AnimationReference=void 0;class n{constructor(){this.interpolationType=0,this.animFlags=0,this.animId=-1,this.initValue=null,this.nullValue=null}load(e){this.interpolationType=e.readUint16(),this.animFlags=e.readUint16(),this.animId=e.readUint32(),this.readInitNullValues(e),e.skip(4)}}t.AnimationReference=n;t.PixelAnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readUint8Array(4),this.nullValue=e.readUint8Array(4)}};t.Uint16AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readUint16(),this.nullValue=e.readUint16()}};t.Uint32AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readUint32(),this.nullValue=e.readUint32()}};t.Float32AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readFloat32(),this.nullValue=e.readFloat32()}};t.Vector2AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readFloat32Array(2),this.nullValue=e.readFloat32Array(2)}};t.Vector3AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readFloat32Array(3),this.nullValue=e.readFloat32Array(3)}};t.Vector4AnimationReference=class extends n{readInitNullValues(e){this.initValue=e.readFloat32Array(4),this.nullValue=e.readFloat32Array(4)}}},9398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.unknown=0,this.name=new a.default,this.bone=-1}load(e,t,n){this.version=t,this.unknown=e.readInt32(),this.name.load(e,n),this.bone=e.readUint32()}}},6205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.version=-1,this.unknown0=0,this.regionIndex=-1,this.unknown1=0,this.materialReferenceIndex=-1,this.unknown2=0}load(e,t,n){this.version=t,this.unknown0=e.readUint32(),this.regionIndex=e.readUint16(),this.unknown1=e.readUint32(),this.materialReferenceIndex=e.readUint16(),this.unknown2=e.readUint16()}}},4029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4540);t.default=class{constructor(){this.version=-1,this.unknown0=0,this.name=new a.default,this.flags=0,this.parent=-1,this.unknown1=0,this.location=new r.Vector3AnimationReference,this.rotation=new r.Vector4AnimationReference,this.scale=new r.Vector3AnimationReference,this.visibility=new r.Uint32AnimationReference}load(e,t,n){this.version=t,this.unknown0=e.readInt32(),this.name.load(e,n),this.flags=e.readUint32(),this.parent=e.readInt16(),this.unknown1=e.readUint16(),this.location.load(e),this.rotation.load(e),this.scale.load(e),this.visibility.load(e)}}},2220:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.shape=-1,this.bone=-1,this.unknown0=0,this.matrix=new Float32Array(16),this.unknown1=0,this.unknown2=0,this.unknown3=0,this.unknown4=0,this.unknown5=0,this.unknown6=0,this.size=new Float32Array(3)}load(e){this.shape=e.readUint32(),this.bone=e.readInt16(),this.unknown0=e.readUint16(),e.readFloat32Array(this.matrix),this.unknown1=e.readUint32(),this.unknown2=e.readUint32(),this.unknown3=e.readUint32(),this.unknown4=e.readUint32(),this.unknown5=e.readUint32(),this.unknown6=e.readUint32(),e.readFloat32Array(this.size)}}},4109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.min=new Float32Array(3),this.max=new Float32Array(3),this.radius=0}load(e){e.readFloat32Array(this.min),e.readFloat32Array(this.max),this.radius=e.readFloat32()}}},7303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4540);t.default=class{constructor(){this.version=-1,this.bone=-1,this.name=new a.default,this.fieldOfView=new r.Float32AnimationReference,this.unknown0=0,this.farClip=new r.Float32AnimationReference,this.nearClip=new r.Float32AnimationReference,this.clip2=new r.Float32AnimationReference,this.focalDepth=new r.Float32AnimationReference,this.falloffStart=new r.Float32AnimationReference,this.falloffEnd=new r.Float32AnimationReference,this.depthOfField=new r.Float32AnimationReference}load(e,t,n){this.version=t,this.bone=e.readUint32(),this.name.load(e,n),this.fieldOfView.load(e),this.unknown0=e.readUint32(),this.farClip.load(e),this.nearClip.load(e),this.clip2.load(e),this.focalDepth.load(e),this.falloffStart.load(e),this.falloffEnd.load(e),this.depthOfField.load(e)}}},4223:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.triangles=new a.default,this.regions=new a.default,this.batches=new a.default,this.MSEC=new a.default,this.unknown0=0}load(e,t,n){this.version=t,this.triangles.load(e,n),this.regions.load(e,n),this.batches.load(e,n),this.MSEC.load(e,n),this.unknown0=e.readUint32()}}},6992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.name=new a.default,this.unknown0=0,this.unknown1=0,this.unknown2=0,this.matrix=new Float32Array(16),this.unknown3=0,this.unknown4=0,this.unknown5=0,this.unknown6=0,this.unknown7=0,this.unknown8=0}load(e,t,n){this.version=t,this.name.load(e,n),this.unknown0=e.readInt32(),this.unknown1=e.readInt16(),this.unknown2=e.readUint16(),e.readFloat32Array(this.matrix),this.unknown3=e.readInt32(),this.unknown4=e.readInt32(),this.unknown5=e.readInt32(),t>0&&(this.unknown6=e.readInt32(),this.unknown7=e.readInt32()),t>1&&(this.unknown8=e.readInt32())}}},3967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2312),r=n(3349);t.default={Model:a.default,isM3:r.default}},4617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5761),r=n(7718),i=n(5943),l=n(2749),s=n(1125),o=n(5158),u=n(9081),c=n(4029),d=n(4223),h=n(8894),f=n(6205),_=n(4338),m=n(9701),p=n(445),g=n(6992),b=n(4109),w=n(9398),v=n(7303),A=n(9604),y=n(385);let L={MD34:[r.default,{11:24}],MODL:[i.default,{23:784,25:808,26:820,28:844,29:856}],SEQS:[l.default,{1:96,2:92}],STC_:[s.default,{4:204}],STG_:[o.default,{0:24}],STS_:[u.default,{0:28}],BONE:[c.default,{1:160}],DIV_:[d.default,{2:52}],REGN:[h.default,{3:36,4:40,5:48}],BAT_:[f.default,{1:14}],MATM:[_.default,{0:8}],MAT_:[m.default,{15:268,16:280,17:280,18:280,19:340}],LAYR:[p.default,{22:356,24:436,25:468,26:464}],EVNT:[g.default,{0:96,1:104,2:108}],BNDS:[b.default,{0:28}],ATT_:[w.default,{1:20}],CAM_:[v.default,{3:180,5:264}],SDEV:[A.default,{0:32}],SDU6:[A.default,{0:32}],SDFG:[A.default,{0:32}],SDS6:[A.default,{0:32}],SDR3:[A.default,{0:32}],SD2V:[A.default,{0:32}],SD3V:[A.default,{0:32}],SD4Q:[A.default,{0:32}],SDCC:[A.default,{0:32}],SDMB:[A.default,{0:32}],FLAG:[A.default,{0:32}],MSEC:[y.default,{1:72}],LITE:[y.default,{7:212}],ATVL:[y.default,{0:116}],PATU:[y.default,{4:152}],TRGD:[y.default,{0:24}],DIS_:[y.default,{4:68}],CMS_:[y.default,{0:24}],CMP_:[y.default,{2:28}],TER_:[y.default,{0:24,1:28}],VOL_:[y.default,{0:84}],VON_:[y.default,{0:268}],CREP:[y.default,{0:24,1:28}],STBM:[y.default,{0:48}],LFSB:[y.default,{2:56}],LFLR:[y.default,{2:80,3:152}],PAR_:[y.default,{12:1316,17:1460,18:1464,19:1464,21:1464,22:1484,23:1492,24:1496}],PARC:[y.default,{0:40}],PROJ:[y.default,{4:388,5:382}],PHYJ:[y.default,{0:180}],PHCC:[y.default,{0:76}],PHAC:[y.default,{0:32}],PHCL:[y.default,{2:128}],FOR_:[y.default,{1:104,2:104}],DMSE:[y.default,{0:4}],PHSH:[y.default,{1:132,3:300}],PHRB:[y.default,{2:104,4:80}],SSGS:[y.default,{1:108}],BBSC:[y.default,{0:48}],SRIB:[y.default,{0:272}],RIB_:[y.default,{6:748,8:756,9:760}],IKJT:[y.default,{0:32}],SHBX:[y.default,{0:64}],WRP_:[y.default,{1:132}]};t.default=class{constructor(e,t){let n=a.default(e.readBinary(4)),r=e.readUint32(),i=e.readUint32(),l=e.readUint32();this.index=t,this.tag=n,this.offset=r,this.version=l;let s=L[n],o=e.index;if(e.seek(r),s){let a=s[0],r=s[1][l];if(!r)throw new Error(": Unsupported object version - tag "+n+" and version "+l);this.entries=[];for(let n=0,s=i;n<s;n++)if(a===y.default)this.entries[n]=new y.default(e.substream(r),l,t);else{let i=new a;i.load(e.substream(r),l,t),this.entries[n]=i}}else if("CHAR"===n||"SCHR"===n)this.entries=e.read(i);else if("U8__"===n)this.entries=e.readUint8Array(i);else if("U16_"===n)this.entries=e.readUint16Array(i);else if("U32_"===n)this.entries=e.readUint32Array(i);else if("I16_"===n)this.entries=e.readInt16Array(i);else if("I32_"===n)this.entries=e.readInt32Array(i);else if("REAL"===n)this.entries=e.readFloat32Array(i);else if("VEC2"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(2)}else if("VEC3"===n||"SVC3"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(3)}else if("VEC4"===n||"QUAT"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(4)}else{if("IREF"!==n)throw this.entries=[],new Error(": Unsupported object tag - tag "+n+" and version "+l);this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(16)}e.seek(o)}}},3349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&52===e[0]&&51===e[1]&&68===e[2]&&77===e[3]}},445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4540);t.default=class{constructor(){this.version=-1,this.unknown0=0,this.imagePath=new a.default,this.color=new r.PixelAnimationReference,this.flags=0,this.uvSource=-1,this.colorChannelSetting=0,this.brightMult=new r.Float32AnimationReference,this.midtoneOffset=new r.Float32AnimationReference,this.unknown1=0,this.noiseAmp=0,this.noiseFreq=0,this.rttChannel=0,this.videoFrameRate=0,this.videoStartFrame=0,this.videoEndFrame=0,this.videoMode=0,this.videoSyncTiming=0,this.videoPlay=new r.Uint32AnimationReference,this.videoRestart=new r.Uint32AnimationReference,this.flipBookRows=0,this.flipBookColumns=0,this.flipBookFrame=new r.Uint16AnimationReference,this.uvOffset=new r.Vector2AnimationReference,this.uvAngle=new r.Vector3AnimationReference,this.uvTiling=new r.Vector2AnimationReference,this.unknown2=new r.Uint32AnimationReference,this.unknown3=new r.Float32AnimationReference,this.brightness=new r.Float32AnimationReference,this.triPlanarOffset=new r.Vector3AnimationReference,this.triPlanarScale=new r.Vector3AnimationReference,this.unknown4=0,this.fresnelType=0,this.fresnelExponent=0,this.fresnelMin=0,this.fresnelMaxOffset=0,this.unknown5=0,this.unknown6=new Uint8Array(8),this.fresnelInvertedMaskX=0,this.fresnelInvertedMaskY=0,this.fresnelInvertedMaskZ=0,this.fresnelRotationYaw=0,this.fresnelRotationPitch=0,this.unknown7=0}load(e,t,n){this.version=t,this.unknown0=e.readUint32(),this.imagePath.load(e,n),this.color.load(e),this.flags=e.readUint32(),this.uvSource=e.readUint32(),this.colorChannelSetting=e.readUint32(),this.brightMult.load(e),this.midtoneOffset.load(e),this.unknown1=e.readUint32(),t>23&&(this.noiseAmp=e.readFloat32(),this.noiseFreq=e.readFloat32()),this.rttChannel=e.readInt32(),this.videoFrameRate=e.readUint32(),this.videoStartFrame=e.readUint32(),this.videoEndFrame=e.readInt32(),this.videoMode=e.readUint32(),this.videoSyncTiming=e.readUint32(),this.videoPlay.load(e),this.videoRestart.load(e),this.flipBookRows=e.readUint32(),this.flipBookColumns=e.readUint32(),this.flipBookFrame.load(e),this.uvOffset.load(e),this.uvAngle.load(e),this.uvTiling.load(e),this.unknown2.load(e),this.unknown3.load(e),this.brightness.load(e),t>23&&(this.triPlanarOffset.load(e),this.triPlanarScale.load(e)),this.unknown4=e.readInt32(),this.fresnelType=e.readUint32(),this.fresnelExponent=e.readFloat32(),this.fresnelMin=e.readFloat32(),this.fresnelMaxOffset=e.readFloat32(),this.unknown5=e.readFloat32(),t>24&&(this.unknown6=e.readUint8Array(8),this.fresnelInvertedMaskX=e.readFloat32(),this.fresnelInvertedMaskY=e.readFloat32(),this.fresnelInvertedMaskZ=e.readFloat32(),this.fresnelRotationYaw=e.readFloat32(),this.fresnelRotationPitch=e.readFloat32(),this.unknown7=e.readUint32())}}},4338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.version=-1,this.materialType=0,this.materialIndex=-1}load(e,t,n){this.version=t,this.materialType=e.readUint32(),this.materialIndex=e.readUint32()}}},7718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5761),r=n(3780);t.default=class{constructor(){this.version=-1,this.tag="",this.offset=0,this.entries=0,this.model=new r.default}load(e,t,n){this.version=t,this.tag=a.default(e.readBinary(4)),this.offset=e.readUint32(),this.entries=e.readUint32(),this.model.load(e,n)}}},2312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(4617),i=n(7718);t.default=class{constructor(){this.index=[],this.model=null}load(e){let t=new a.default(e),n=new i.default;if(n.load(t,11,this.index),"MD34"!==n.tag)throw new Error("WrongMagicNumber");t.seek(n.offset);for(let e=0,a=n.entries;e<a;e++)this.index[e]=new r.default(t,this.index);let l=this.index[n.model.id].entries;l&&(this.model=l[0])}}},5943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4109),i=n(2220);t.default=class{constructor(){this.version=-1,this.modelName=new a.default,this.flags=0,this.sequences=new a.default,this.stc=new a.default,this.stg=new a.default,this.unknown0=0,this.unknown1=0,this.unknown2=0,this.unknown3=0,this.sts=new a.default,this.bones=new a.default,this.numberOfBonesToCheckForSkin=0,this.vertexFlags=0,this.vertices=new a.default,this.divisions=new a.default,this.boneLookup=new a.default,this.boundings=new r.default,this.unknown4To20=new Uint32Array(16),this.attachmentPoints=new a.default,this.attachmentPointAddons=new a.default,this.ligts=new a.default,this.shbxData=new a.default,this.cameras=new a.default,this.unknown21=new a.default,this.materialReferences=new a.default,this.materials=[],this.particleEmitters=new a.default,this.particleEmitterCopies=new a.default,this.ribbonEmitters=new a.default,this.projections=new a.default,this.forces=new a.default,this.warps=new a.default,this.unknown22=new a.default,this.rigidBodies=new a.default,this.unknown23=new a.default,this.physicsJoints=new a.default,this.clothBehavior=new a.default,this.unknown24=new a.default,this.ikjtData=new a.default,this.unknown25=new a.default,this.unknown26=new a.default,this.partsOfTurrentBehaviors=new a.default,this.turrentBehaviors=new a.default,this.absoluteInverseBoneRestPositions=new a.default,this.tightHitTest=new i.default,this.fuzzyHitTestObjects=new a.default,this.attachmentVolumes=new a.default,this.attachmentVolumesAddon0=new a.default,this.attachmentVolumesAddon1=new a.default,this.billboardBehaviors=new a.default,this.tmdData=new a.default,this.unknown27=0,this.unknown28=new a.default;for(let e=0;e<11;e++)this.materials[e]=new a.default}load(e,t,n){this.version=t,this.modelName.load(e,n),this.flags=e.readUint32(),this.sequences.load(e,n),this.stc.load(e,n),this.stg.load(e,n),this.unknown0=e.readFloat32(),this.unknown1=e.readFloat32(),this.unknown2=e.readFloat32(),this.unknown3=e.readFloat32(),this.sts.load(e,n),this.bones.load(e,n),this.numberOfBonesToCheckForSkin=e.readUint32(),this.vertexFlags=e.readUint32(),this.vertices.load(e,n),this.divisions.load(e,n),this.boneLookup.load(e,n),this.boundings.load(e),e.readUint32Array(this.unknown4To20),this.attachmentPoints.load(e,n),this.attachmentPointAddons.load(e,n),this.ligts.load(e,n),this.shbxData.load(e,n),this.cameras.load(e,n),this.unknown21.load(e,n),this.materialReferences.load(e,n);for(let t=0;t<7;t++)this.materials[t].load(e,n);t>24&&this.materials[7].load(e,n),t>25&&this.materials[8].load(e,n),t>27&&this.materials[9].load(e,n),t>28&&this.materials[10].load(e,n),this.particleEmitters.load(e,n),this.particleEmitterCopies.load(e,n),this.ribbonEmitters.load(e,n),this.projections.load(e,n),this.forces.load(e,n),this.warps.load(e,n),this.unknown22.load(e,n),this.rigidBodies.load(e,n),this.unknown23.load(e,n),this.physicsJoints.load(e,n),t>27&&this.clothBehavior.load(e,n),this.unknown24.load(e,n),this.ikjtData.load(e,n),this.unknown25.load(e,n),t>24&&this.unknown26.load(e,n),this.partsOfTurrentBehaviors.load(e,n),this.turrentBehaviors.load(e,n),this.absoluteInverseBoneRestPositions.load(e,n),this.tightHitTest.load(e),this.fuzzyHitTestObjects.load(e,n),this.attachmentVolumes.load(e,n),this.attachmentVolumesAddon0.load(e,n),this.attachmentVolumesAddon1.load(e,n),this.billboardBehaviors.load(e,n),this.tmdData.load(e,n),this.unknown27=e.readUint32(),this.unknown28.load(e,n)}}},3780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.index=null,this.entries=0,this.id=0,this.flags=0}load(e,t){this.index=t,this.entries=e.readUint32(),this.id=e.readUint32(),this.flags=e.readUint32()}get(){if(this.index&&0!==this.id&&0!==this.entries)return this.index[this.id].entries}first(){let e=this.get();if(e)return e[0]}}},8894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.version=-1,this.unknown0=0,this.unknown1=0,this.firstVertexIndex=-1,this.verticesCount=0,this.firstTriangleIndex=-1,this.triangleIndicesCount=0,this.bonesCount=0,this.firstBoneLookupIndex=-1,this.boneLookupIndicesCount=0,this.unknown2=0,this.boneWeightPairsCount=0,this.unknown3=0,this.rootBoneIndex=-1,this.unknown4=0,this.unknown5=new Uint8Array(8)}load(e,t,n){this.version=t,this.unknown0=e.readUint32(),this.unknown1=e.readUint32(),this.firstVertexIndex=e.readUint32(),this.verticesCount=e.readUint32(),this.firstTriangleIndex=e.readUint32(),this.triangleIndicesCount=e.readUint32(),this.bonesCount=e.readUint16(),this.firstBoneLookupIndex=e.readUint16(),this.boneLookupIndicesCount=e.readUint16(),this.unknown2=e.readUint16(),this.boneWeightPairsCount=e.readUint8(),this.unknown3=e.readUint8(),this.rootBoneIndex=e.readUint16(),t>3&&(this.unknown4=e.readUint32()),t>4&&e.readUint8Array(this.unknown5)}}},9604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.keys=new a.default,this.flags=0,this.biggestKey=-1,this.values=new a.default}load(e,t,n){this.version=t,this.keys.load(e,n),this.flags=e.readUint32(),this.biggestKey=e.readUint32(),this.values.load(e,n)}}},2749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4109);t.default=class{constructor(){this.version=-1,this.name=new a.default,this.interval=new Uint32Array(2),this.movementSpeed=0,this.flags=0,this.frequency=0,this.boundingSphere=new r.default}load(e,t,n){this.version=t,e.skip(8),this.name.load(e,n),e.readUint32Array(this.interval),this.movementSpeed=e.readFloat32(),this.flags=e.readUint32(),this.frequency=e.readUint32(),e.skip(12),t<2&&e.skip(4),this.boundingSphere.load(e),e.skip(12)}}},9701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780),r=n(4540);t.default=class{constructor(){this.version=-1,this.name=new a.default,this.additionalFlags=0,this.flags=0,this.blendMode=0,this.priority=0,this.usedRTTChannels=0,this.specularity=0,this.depthBlendFalloff=0,this.cutoutThreshold=0,this.unknown1=0,this.unknown2=0,this.unknown3=0,this.specMult=0,this.emisMult=0,this.diffuseLayer=new a.default,this.decalLayer=new a.default,this.specularLayer=new a.default,this.glossLayer=new a.default,this.emissiveLayer=new a.default,this.emissive2Layer=new a.default,this.evioLayer=new a.default,this.evioMaskLayer=new a.default,this.alphaMaskLayer=new a.default,this.alphaMask2Layer=new a.default,this.normalLayer=new a.default,this.heightLayer=new a.default,this.lightMapLayer=new a.default,this.ambientOcclusionLayer=new a.default,this.unknown4=new a.default,this.unknown5=new a.default,this.unknown6=new a.default,this.unknown7=new a.default,this.unknown8=0,this.layerBlendType=0,this.emisBlendType=0,this.emisMode=0,this.specType=0,this.unknown9=new r.Float32AnimationReference,this.unknown10=new r.Uint32AnimationReference,this.unknown11=new Uint8Array(12)}load(e,t,n){this.version=t,this.name.load(e,n),this.additionalFlags=e.readUint32(),this.flags=e.readUint32(),this.blendMode=e.readUint32(),this.priority=e.readInt32(),this.usedRTTChannels=e.readUint32(),this.specularity=e.readFloat32(),this.depthBlendFalloff=e.readFloat32(),this.cutoutThreshold=e.readUint8(),this.unknown1=e.readUint8(),this.unknown2=e.readUint8(),this.unknown3=e.readUint8(),this.specMult=e.readFloat32(),this.emisMult=e.readFloat32(),this.diffuseLayer.load(e,n),this.decalLayer.load(e,n),this.specularLayer.load(e,n),t>15&&this.glossLayer.load(e,n),this.emissiveLayer.load(e,n),this.emissive2Layer.load(e,n),this.evioLayer.load(e,n),this.evioMaskLayer.load(e,n),this.alphaMaskLayer.load(e,n),this.alphaMask2Layer.load(e,n),this.normalLayer.load(e,n),this.heightLayer.load(e,n),this.lightMapLayer.load(e,n),this.ambientOcclusionLayer.load(e,n),t>18&&(this.unknown4.load(e,n),this.unknown5.load(e,n),this.unknown6.load(e,n),this.unknown7.load(e,n)),this.unknown8=e.readUint32(),this.layerBlendType=e.readUint32(),this.emisBlendType=e.readUint32(),this.emisMode=e.readUint32(),this.specType=e.readUint32(),this.unknown9.load(e),this.unknown10.load(e),t>18&&(this.unknown11=e.readUint8Array(this.unknown11))}}},1125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.name=new a.default,this.runsConcurrent=0,this.priority=0,this.stsIndex=-1,this.stsIndexCopy=-1,this.animIds=new a.default,this.animRefs=new a.default,this.sd=[];for(let e=0;e<13;e++)this.sd[e]=new a.default}load(e,t,n){this.version=t,this.name.load(e,n),this.runsConcurrent=e.readUint16(),this.priority=e.readUint16(),this.stsIndex=e.readUint16(),this.stsIndexCopy=e.readUint16(),this.animIds.load(e,n),this.animRefs.load(e,n),e.skip(4);for(let t=0;t<13;t++)this.sd[t].load(e,n)}}},5158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.name=new a.default,this.stcIndices=new a.default}load(e,t,n){this.version=t,this.name.load(e,n),this.stcIndices.load(e,n)}}},9081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3780);t.default=class{constructor(){this.version=-1,this.animIds=new a.default}load(e,t,n){this.version=t,this.animIds.load(e,n),e.skip(16)}}},385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.stream=e,this.version=t,this.index=n}}},343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7351);t.default=class{constructor(){this.animations=[]}readAnimations(e,t){let n=e.index+t;for(;e.index<n;){let t=e.readBinary(4),n=new a.default[t][1];n.readMdx(e,t),this.animations.push(n)}}writeAnimations(e){for(let t of this.animations)t.writeMdx(e)}*readAnimatedBlock(e){for(let t of e.readBlock())"static"===t?yield`static ${e.read()}`:yield t}readAnimation(e,t){let n=new a.default[t][1];n.readMdl(e,t),this.animations.push(n)}writeAnimation(e,t){for(let n of this.animations)if(n.name===t)return n.writeMdl(e,a.default[t][0]),!0;return!1}getByteLength(e){let t=0;for(let e of this.animations)t+=e.getByteLength();return t}}},7351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8272);t.default={KMTF:["TextureID",a.UintAnimation],KMTA:["Alpha",a.FloatAnimation],KMTE:["EmissiveGain",a.FloatAnimation],KFC3:["FresnelColor",a.Vector3Animation],KFCA:["FresnelOpacity",a.FloatAnimation],KFTC:["FresnelTeamColor",a.FloatAnimation],KTAT:["Translation",a.Vector3Animation],KTAR:["Rotation",a.Vector4Animation],KTAS:["Scaling",a.Vector3Animation],KGAO:["Alpha",a.FloatAnimation],KGAC:["Color",a.Vector3Animation],KGTR:["Translation",a.Vector3Animation],KGRT:["Rotation",a.Vector4Animation],KGSC:["Scaling",a.Vector3Animation],KLAS:["AttenuationStart",a.FloatAnimation],KLAE:["AttenuationEnd",a.FloatAnimation],KLAC:["Color",a.Vector3Animation],KLAI:["Intensity",a.FloatAnimation],KLBI:["AmbIntensity",a.FloatAnimation],KLBC:["AmbColor",a.Vector3Animation],KLAV:["Visibility",a.FloatAnimation],KATV:["Visibility",a.FloatAnimation],KPEE:["EmissionRate",a.FloatAnimation],KPEG:["Gravity",a.FloatAnimation],KPLN:["Longitude",a.FloatAnimation],KPLT:["Latitude",a.FloatAnimation],KPEL:["LifeSpan",a.FloatAnimation],KPES:["InitVelocity",a.FloatAnimation],KPEV:["Visibility",a.FloatAnimation],KP2S:["Speed",a.FloatAnimation],KP2R:["Variation",a.FloatAnimation],KP2L:["Latitude",a.FloatAnimation],KP2G:["Gravity",a.FloatAnimation],KP2E:["EmissionRate",a.FloatAnimation],KP2N:["Width",a.FloatAnimation],KP2W:["Length",a.FloatAnimation],KP2V:["Visibility",a.FloatAnimation],KPPA:["Alpha",a.FloatAnimation],KPPC:["Color",a.Vector3Animation],KPPE:["EmissionRate",a.FloatAnimation],KPPL:["LifeSpan",a.FloatAnimation],KPPS:["Speed",a.FloatAnimation],KPPV:["Visibility",a.FloatAnimation],KRHA:["HeightAbove",a.FloatAnimation],KRHB:["HeightBelow",a.FloatAnimation],KRAL:["Alpha",a.FloatAnimation],KRCO:["Color",a.Vector3Animation],KRTX:["TextureSlot",a.UintAnimation],KRVS:["Visibility",a.FloatAnimation],KCTR:["Translation",a.Vector3Animation],KTTR:["Translation",a.Vector3Animation],KCRL:["Rotation",a.FloatAnimation]}},8272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector4Animation=t.Vector3Animation=t.FloatAnimation=t.UintAnimation=t.Animation=void 0;class n{constructor(){this.name="",this.interpolationType=0,this.globalSequenceId=-1,this.frames=[],this.values=[],this.inTans=[],this.outTans=[]}readMdx(e,t){let n=this.frames,a=this.values,r=this.inTans,i=this.outTans,l=e.readUint32(),s=e.readUint32();this.name=t,this.interpolationType=s,this.globalSequenceId=e.readInt32();for(let t=0;t<l;t++)n.push(e.readInt32()),a.push(this.readMdxValue(e)),s>1&&(r.push(this.readMdxValue(e)),i.push(this.readMdxValue(e)))}writeMdx(e){let t=this.interpolationType,n=this.frames,a=this.values,r=this.inTans,i=this.outTans,l=n.length;e.writeBinary(this.name),e.writeUint32(l),e.writeUint32(t),e.writeInt32(this.globalSequenceId);for(let s=0;s<l;s++)e.writeInt32(n[s]),this.writeMdxValue(e,a[s]),t>1&&(this.writeMdxValue(e,r[s]),this.writeMdxValue(e,i[s]))}readMdl(e,t){let n=this.frames,a=this.values,r=this.inTans,i=this.outTans;this.name=t;let l=e.readInt();e.read();let s=0,o=e.read();"DontInterp"===o?s=0:"Linear"===o?s=1:"Hermite"===o?s=2:"Bezier"===o&&(s=3),this.interpolationType=s,"GlobalSeqId"===e.peek()&&(e.read(),this.globalSequenceId=e.readInt());for(let t=0;t<l;t++)n[t]=e.readInt(),a[t]=this.readMdlValue(e),s>1&&(e.read(),r[t]=this.readMdlValue(e),e.read(),i[t]=this.readMdlValue(e));e.read()}writeMdl(e,t){let n=this.interpolationType,a=this.frames,r=this.values,i=this.inTans,l=this.outTans,s=a.length;e.startBlock(t,this.frames.length);let o="";0===this.interpolationType?o="DontInterp":1===this.interpolationType?o="Linear":2===this.interpolationType?o="Hermite":3===this.interpolationType&&(o="Bezier"),e.writeFlag(o),-1!==this.globalSequenceId&&e.writeNumberAttrib("GlobalSeqId",this.globalSequenceId);for(let t=0;t<s;t++)this.writeMdlValue(e,`${a[t]}:`,r[t]),n>1&&(e.indent(),this.writeMdlValue(e,"InTan",i[t]),this.writeMdlValue(e,"OutTan",l[t]),e.unindent());e.endBlock()}getByteLength(){let e=this.frames.length,t=16;if(e){let n=this.values[0].byteLength,a=1;this.interpolationType>1&&(a=3),t+=(4+a*n)*e}return t}}t.Animation=n;t.UintAnimation=class extends n{readMdxValue(e){return e.readUint32Array(1)}writeMdxValue(e,t){e.writeUint32(t[0])}readMdlValue(e){return new Uint32Array([e.readInt()])}writeMdlValue(e,t,n){e.writeNumberAttrib(t,n[0])}};t.FloatAnimation=class extends n{readMdxValue(e){return e.readFloat32Array(1)}writeMdxValue(e,t){e.writeFloat32(t[0])}readMdlValue(e){return new Float32Array([e.readFloat()])}writeMdlValue(e,t,n){e.writeNumberAttrib(t,n[0])}};t.Vector3Animation=class extends n{readMdxValue(e){return e.readFloat32Array(3)}writeMdxValue(e,t){e.writeFloat32Array(t)}readMdlValue(e){return e.readVector(new Float32Array(3))}writeMdlValue(e,t,n){e.writeVectorAttrib(t,n)}};t.Vector4Animation=class extends n{readMdxValue(e){return e.readFloat32Array(4)}writeMdxValue(e,t){e.writeFloat32Array(t)}readMdlValue(e){return e.readVector(new Float32Array(4))}writeMdlValue(e,t,n){e.writeVectorAttrib(t,n)}}},3631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(2048),this.path="",this.attachmentId=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.path=e.read(260),this.attachmentId=e.readInt32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.skip(260-e.write(this.path)),e.writeInt32(this.attachmentId),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("AttachmentID"===t)this.attachmentId=e.readInt();else if("Path"===t)this.path=e.read();else{if("Visibility"!==t)throw new Error(`Unknown token in Attachment ${this.name}: "${t}"`);this.readAnimation(e,"KATV")}}writeMdl(e){e.startObjectBlock("Attachment",this.name),this.writeGenericHeader(e),e.writeNumberAttrib("AttachmentID",this.attachmentId),this.path.length&&e.writeStringAttrib("Path",this.path),this.writeAnimation(e,"KATV"),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 268+super.getByteLength()}}t.default=r},5727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(256),this.geosetId=-1,this.geosetAnimationId=-1}readMdx(e){super.readMdx(e),this.geosetId=e.readInt32(),this.geosetAnimationId=e.readInt32()}writeMdx(e){super.writeMdx(e),e.writeInt32(this.geosetId),e.writeInt32(this.geosetAnimationId)}readMdl(e){for(let t of super.readGenericBlock(e))if("GeosetId"===t)t=e.read(),this.geosetId="Multiple"===t?-1:parseInt(t);else{if("GeosetAnimId"!==t)throw new Error(`Unknown token in Bone ${this.name}: "${t}"`);t=e.read(),this.geosetAnimationId="None"===t?-1:parseInt(t)}}writeMdl(e){e.startObjectBlock("Bone",this.name),this.writeGenericHeader(e),-1===this.geosetId?e.writeFlagAttrib("GeosetId","Multiple"):e.writeNumberAttrib("GeosetId",this.geosetId),-1===this.geosetAnimationId?e.writeFlagAttrib("GeosetAnimId","None"):e.writeNumberAttrib("GeosetAnimId",this.geosetAnimationId),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 8+super.getByteLength()}}t.default=r},7709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(343);class r extends a.default{constructor(){super(...arguments),this.name="",this.position=new Float32Array(3),this.fieldOfView=0,this.farClippingPlane=0,this.nearClippingPlane=0,this.targetPosition=new Float32Array(3)}readMdx(e){let t=e.readUint32();this.name=e.read(80),e.readFloat32Array(this.position),this.fieldOfView=e.readFloat32(),this.farClippingPlane=e.readFloat32(),this.nearClippingPlane=e.readFloat32(),e.readFloat32Array(this.targetPosition),this.readAnimations(e,t-120)}writeMdx(e){e.writeUint32(this.getByteLength()),e.skip(80-e.write(this.name)),e.writeFloat32Array(this.position),e.writeFloat32(this.fieldOfView),e.writeFloat32(this.farClippingPlane),e.writeFloat32(this.nearClippingPlane),e.writeFloat32Array(this.targetPosition),this.writeAnimations(e)}readMdl(e){this.name=e.read();for(let t of e.readBlock())if("Position"===t)e.readVector(this.position);else if("Translation"===t)this.readAnimation(e,"KCTR");else if("Rotation"===t)this.readAnimation(e,"KCRL");else if("FieldOfView"===t)this.fieldOfView=e.readFloat();else if("FarClip"===t)this.farClippingPlane=e.readFloat();else if("NearClip"===t)this.nearClippingPlane=e.readFloat();else{if("Target"!==t)throw new Error(`Unknown token in Camera ${this.name}: "${t}"`);for(t of e.readBlock())if("Position"===t)e.readVector(this.targetPosition);else{if("Translation"!==t)throw new Error(`Unknown token in Camera ${this.name}'s Target: "${t}"`);this.readAnimation(e,"KTTR")}}}writeMdl(e){e.startObjectBlock("Camera",this.name),e.writeVectorAttrib("Position",this.position),this.writeAnimation(e,"KCTR"),this.writeAnimation(e,"KCRL"),e.writeNumberAttrib("FieldOfView",this.fieldOfView),e.writeNumberAttrib("FarClip",this.farClippingPlane),e.writeNumberAttrib("NearClip",this.nearClippingPlane),e.startBlock("Target"),e.writeVectorAttrib("Position",this.targetPosition),this.writeAnimation(e,"KTTR"),e.endBlock(),e.endBlock()}getByteLength(){return 120+super.getByteLength()}}t.default=r},9388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(8192),this.type=-1,this.vertices=[new Float32Array(3),new Float32Array(3)],this.boundsRadius=0}readMdx(e){super.readMdx(e),this.type=e.readUint32(),e.readFloat32Array(this.vertices[0]),2!==this.type&&e.readFloat32Array(this.vertices[1]),2!==this.type&&3!==this.type||(this.boundsRadius=e.readFloat32())}writeMdx(e){super.writeMdx(e),e.writeUint32(this.type),e.writeFloat32Array(this.vertices[0]),2!==this.type&&e.writeFloat32Array(this.vertices[1]),2!==this.type&&3!==this.type||e.writeFloat32(this.boundsRadius)}readMdl(e){for(let t of super.readGenericBlock(e))if("Box"===t)this.type=0;else if("Plane"===t)this.type=1;else if("Sphere"===t)this.type=2;else if("Cylinder"===t)this.type=3;else if("Vertices"===t){let t=e.readInt();e.read(),e.readVector(this.vertices[0]),2===t&&e.readVector(this.vertices[1]),e.read()}else{if("BoundsRadius"!==t)throw new Error(`Unknown token in CollisionShape: "${t}"`);this.boundsRadius=e.readFloat()}}writeMdl(e){e.startObjectBlock("CollisionShape",this.name),this.writeGenericHeader(e);let t="",n=2,a=!1;0===this.type?t="Box":1===this.type?t="Plane":2===this.type?(t="Sphere",n=1,a=!0):3===this.type&&(t="Cylinder",a=!0),e.writeFlag(t),e.startBlock("Vertices",n),e.writeVector(this.vertices[0]),2===n&&e.writeVector(this.vertices[1]),e.endBlock(),a&&e.writeNumberAttrib("BoundsRadius",this.boundsRadius),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){let e=16+super.getByteLength();return 2!==this.type&&(e+=12),2!==this.type&&3!==this.type||(e+=4),e}}t.default=r},4182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(1024),this.globalSequenceId=-1,this.tracks=new Uint32Array(0)}readMdx(e){super.readMdx(e),e.skip(4);let t=e.readUint32();this.globalSequenceId=e.readInt32(),this.tracks=e.readUint32Array(t)}writeMdx(e){super.writeMdx(e),e.writeBinary("KEVT"),e.writeUint32(this.tracks.length),e.writeInt32(this.globalSequenceId),e.writeUint32Array(this.tracks)}readMdl(e){for(let t of super.readGenericBlock(e)){if("EventTrack"!==t)throw new Error(`Unknown token in EventObject: "${t}"`);{let t=e.readInt();this.tracks=new Uint32Array(t),e.read(),"GlobalSeqId"===e.peek()&&(e.read(),this.globalSequenceId=e.readInt());for(let n=0;n<t;n++)this.tracks[n]=e.readInt();e.read()}}}writeMdl(e){e.startObjectBlock("EventObject",this.name),this.writeGenericHeader(e),e.startBlock("EventTrack",this.tracks.length),-1!==this.globalSequenceId&&e.writeNumberAttrib("GlobalSeqId",this.globalSequenceId);for(let t of this.tracks)e.writeFlag(`${t}`);e.endBlock(),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 12+this.tracks.byteLength+super.getByteLength()}}t.default=r},9350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.boundsRadius=0,this.min=new Float32Array(3),this.max=new Float32Array(3)}readMdx(e){this.boundsRadius=e.readFloat32(),e.readFloat32Array(this.min),e.readFloat32Array(this.max)}writeMdx(e){e.writeFloat32(this.boundsRadius),e.writeFloat32Array(this.min),e.writeFloat32Array(this.max)}writeMdl(e){0===this.min[0]&&0===this.min[1]&&0===this.min[2]||e.writeVectorAttrib("MinimumExtent",this.min),0===this.max[0]&&0===this.max[1]&&0===this.max[2]||e.writeVectorAttrib("MaximumExtent",this.max),0!==this.boundsRadius&&e.writeNumberAttrib("BoundsRadius",this.boundsRadius)}}},3788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.type="",this.path=""}readMdx(e){this.type=e.read(80),this.path=e.read(260)}writeMdx(e){e.skip(80-e.write(this.type)),e.skip(260-e.write(this.path))}readMdl(e){this.type=e.read();for(let t of e.readBlock()){if("Path"!==t)throw new Error(`Unknown token in FaceEffect: "${t}"`);this.path=e.read()}}writeMdl(e){e.startObjectBlock("FaceFX",this.type),e.writeStringAttrib("Path",this.path),e.endBlock()}}},7863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(343);class r extends a.default{constructor(e=0){super(),this.name="",this.objectId=-1,this.parentId=-1,this.flags=e}readMdx(e){let t=e.readUint32();this.name=e.read(80),this.objectId=e.readInt32(),this.parentId=e.readInt32(),this.flags=e.readUint32(),this.readAnimations(e,t-96)}writeMdx(e){e.writeUint32(this.getGenericByteLength()),e.skip(80-e.write(this.name)),e.writeInt32(this.objectId),e.writeInt32(this.parentId),e.writeUint32(this.flags);for(let t of this.eachAnimation(!0))t.writeMdx(e)}writeNonGenericAnimationChunks(e){for(let t of this.eachAnimation(!1))t.writeMdx(e)}*readGenericBlock(e){this.name=e.read();for(let t of this.readAnimatedBlock(e))if("ObjectId"===t)this.objectId=e.readInt();else if("Parent"===t)this.parentId=e.readInt();else if("BillboardedLockZ"===t)this.flags|=64;else if("BillboardedLockY"===t)this.flags|=32;else if("BillboardedLockX"===t)this.flags|=16;else if("Billboarded"===t)this.flags|=8;else if("CameraAnchored"===t)this.flags|=128;else if("DontInherit"===t)for(t of e.readBlock())"Rotation"===t?this.flags|=2:"Translation"===t?this.flags|=1:"Scaling"===t&&(this.flags|=4);else"Translation"===t?this.readAnimation(e,"KGTR"):"Rotation"===t?this.readAnimation(e,"KGRT"):"Scaling"===t?this.readAnimation(e,"KGSC"):yield t}writeGenericHeader(e){e.writeNumberAttrib("ObjectId",this.objectId),-1!==this.parentId&&e.writeNumberAttrib("Parent",this.parentId),64&this.flags&&e.writeFlag("BillboardedLockZ"),32&this.flags&&e.writeFlag("BillboardedLockY"),16&this.flags&&e.writeFlag("BillboardedLockX"),8&this.flags&&e.writeFlag("Billboarded"),128&this.flags&&e.writeFlag("CameraAnchored"),2&this.flags&&e.writeFlag("DontInherit { Rotation }"),1&this.flags&&e.writeFlag("DontInherit { Translation }"),4&this.flags&&e.writeFlag("DontInherit { Scaling }")}writeGenericAnimations(e){this.writeAnimation(e,"KGTR"),this.writeAnimation(e,"KGRT"),this.writeAnimation(e,"KGSC")}*eachAnimation(e){for(let t of this.animations){let n=t.name,a="KGTR"===n||"KGRT"===n||"KGSC"===n;(e&&a||!e&&!a)&&(yield t)}}getGenericByteLength(){let e=96;for(let t of this.eachAnimation(!0))e+=t.getByteLength();return e}getByteLength(){return 96+super.getByteLength()}}t.default=r},9939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9350);t.default=class{constructor(){this.vertices=new Float32Array(0),this.normals=new Float32Array(0),this.faceTypeGroups=new Uint32Array(0),this.faceGroups=new Uint32Array(0),this.faces=new Uint16Array(0),this.vertexGroups=new Uint8Array(0),this.matrixGroups=new Uint32Array(0),this.matrixIndices=new Uint32Array(0),this.materialId=0,this.selectionGroup=0,this.selectionFlags=0,this.lod=-1,this.lodName="",this.extent=new a.default,this.sequenceExtents=[],this.tangents=new Float32Array(0),this.skin=new Uint8Array(0),this.uvSets=[]}readMdx(e,t){e.readUint32(),e.skip(4),this.vertices=e.readFloat32Array(3*e.readUint32()),e.skip(4),this.normals=e.readFloat32Array(3*e.readUint32()),e.skip(4),this.faceTypeGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.faceGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.faces=e.readUint16Array(e.readUint32()),e.skip(4),this.vertexGroups=e.readUint8Array(e.readUint32()),e.skip(4),this.matrixGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.matrixIndices=e.readUint32Array(e.readUint32()),this.materialId=e.readUint32(),this.selectionGroup=e.readUint32(),this.selectionFlags=e.readUint32(),t>800&&(this.lod=e.readInt32(),this.lodName=e.read(80)),this.extent.readMdx(e);for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.readMdx(e),this.sequenceExtents.push(t)}t>800&&("TANG"===e.readBinary(4)?this.tangents=e.readFloat32Array(4*e.readUint32()):e.skip(-4),"SKIN"===e.readBinary(4)?this.skin=e.readUint8Array(e.readUint32()):e.skip(-4)),e.skip(4);for(let t=0,n=e.readUint32();t<n;t++)e.skip(4),this.uvSets.push(e.readFloat32Array(2*e.readUint32()))}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.writeBinary("VRTX"),e.writeUint32(this.vertices.length/3),e.writeFloat32Array(this.vertices),e.writeBinary("NRMS"),e.writeUint32(this.normals.length/3),e.writeFloat32Array(this.normals),e.writeBinary("PTYP"),e.writeUint32(this.faceTypeGroups.length),e.writeUint32Array(this.faceTypeGroups),e.writeBinary("PCNT"),e.writeUint32(this.faceGroups.length),e.writeUint32Array(this.faceGroups),e.writeBinary("PVTX"),e.writeUint32(this.faces.length),e.writeUint16Array(this.faces),e.writeBinary("GNDX"),e.writeUint32(this.vertexGroups.length),e.writeUint8Array(this.vertexGroups),e.writeBinary("MTGC"),e.writeUint32(this.matrixGroups.length),e.writeUint32Array(this.matrixGroups),e.writeBinary("MATS"),e.writeUint32(this.matrixIndices.length),e.writeUint32Array(this.matrixIndices),e.writeUint32(this.materialId),e.writeUint32(this.selectionGroup),e.writeUint32(this.selectionFlags),t>800&&(e.writeInt32(this.lod),e.skip(80-e.write(this.lodName))),this.extent.writeMdx(e),e.writeUint32(this.sequenceExtents.length);for(let t of this.sequenceExtents)t.writeMdx(e);t>800&&(this.tangents.length&&(e.writeBinary("TANG"),e.writeUint32(this.tangents.length/4),e.writeFloat32Array(this.tangents)),this.skin.length&&(e.writeBinary("SKIN"),e.writeUint32(this.skin.length),e.writeUint8Array(this.skin))),e.writeBinary("UVAS"),e.writeUint32(this.uvSets.length);for(let t of this.uvSets)e.writeBinary("UVBS"),e.writeUint32(t.length/2),e.writeFloat32Array(t)}readMdl(e){for(let t of e.readBlock())if("Vertices"===t)this.vertices=e.readVectorsBlock(new Float32Array(3*e.readInt()),3);else if("Normals"===t)this.normals=e.readVectorsBlock(new Float32Array(3*e.readInt()),3);else if("TVertices"===t)this.uvSets.push(e.readVectorsBlock(new Float32Array(2*e.readInt()),2));else if("VertexGroup"===t){let t=[];for(let n of e.readBlock())t.push(parseInt(n));this.vertexGroups=new Uint8Array(t)}else if("Tangents"===t)this.tangents=e.readVectorsBlock(new Float32Array(4*e.readInt()),4);else if("SkinWeights"===t)this.skin=e.readVector(new Uint8Array(8*e.readInt()));else if("Faces"===t){this.faceTypeGroups=new Uint32Array([4]);let t=e.readInt(),n=e.readInt();e.read(),e.read(),this.faces=e.readVectorsBlock(new Uint16Array(n),n/t),this.faceGroups=new Uint32Array([n]),e.read()}else if("Groups"===t){let t=[],n=[];e.readInt(),e.readInt();for(let a of e.readBlock()){let a=0;for(let n of e.readBlock())t.push(parseInt(n)),a+=1;n.push(a)}this.matrixIndices=new Uint32Array(t),this.matrixGroups=new Uint32Array(n)}else if("MinimumExtent"===t)e.readVector(this.extent.min);else if("MaximumExtent"===t)e.readVector(this.extent.max);else if("BoundsRadius"===t)this.extent.boundsRadius=e.readFloat();else if("Anim"===t){let n=new a.default;for(t of e.readBlock())"MinimumExtent"===t?e.readVector(n.min):"MaximumExtent"===t?e.readVector(n.max):"BoundsRadius"===t&&(n.boundsRadius=e.readFloat());this.sequenceExtents.push(n)}else if("MaterialID"===t)this.materialId=e.readInt();else if("SelectionGroup"===t)this.selectionGroup=e.readInt();else if("Unselectable"===t)this.selectionFlags=4;else if("LevelOfDetail"===t)this.lod=e.readInt();else{if("Name"!==t)throw new Error(`Unknown token in Geoset: "${t}"`);this.lodName=e.read()}}writeMdl(e,t){e.startBlock("Geoset"),e.writeVectorArrayBlock("Vertices",this.vertices,3),e.writeVectorArrayBlock("Normals",this.normals,3);for(let t of this.uvSets)e.writeVectorArrayBlock("TVertices",t,2);if(t>800&&this.tangents.length&&e.writeVectorArrayBlock("Tangents",this.tangents,4),this.vertexGroups.length){e.startBlock("VertexGroup");for(let t=0,n=this.vertexGroups.length;t<n;t++)e.writeLine(`${this.vertexGroups[t]},`);e.endBlock()}if(t>800&&this.skin.length){e.startBlock("SkinWeights",this.skin.length/8);for(let t=0,n=this.skin.length;t<n;t+=8)e.writeLine(`${this.skin.subarray(t,t+8).join(", ")},`);e.endBlock()}e.startBlock("Faces",1,this.faces.length),e.startBlock("Triangles"),e.writeVector(this.faces),e.endBlock(),e.endBlock(),e.startBlock("Groups",this.matrixGroups.length,this.matrixIndices.length);let n=0;for(let t of this.matrixGroups)e.writeVectorAttrib("Matrices",this.matrixIndices.subarray(n,n+t)),n+=t;e.endBlock(),this.extent.writeMdl(e);for(let t of this.sequenceExtents)e.startBlock("Anim"),t.writeMdl(e),e.endBlock();e.writeNumberAttrib("MaterialID",this.materialId),e.writeNumberAttrib("SelectionGroup",this.selectionGroup),4===this.selectionFlags&&e.writeFlag("Unselectable"),t>800&&(e.writeNumberAttrib("LevelOfDetail",this.lod),this.lodName.length&&e.writeStringAttrib("Name",this.lodName)),e.endBlock()}getByteLength(e){let t=120+this.vertices.byteLength+this.normals.byteLength+this.faceTypeGroups.byteLength+this.faceGroups.byteLength+this.faces.byteLength+this.vertexGroups.byteLength+this.matrixGroups.byteLength+this.matrixIndices.byteLength+28*this.sequenceExtents.length;e>800&&(t+=84,this.tangents.length&&(t+=8+this.tangents.byteLength),this.skin.length&&(t+=8+this.skin.byteLength));for(let e of this.uvSets)t+=8+e.byteLength;return t}}},8163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(343);class r extends a.default{constructor(){super(...arguments),this.alpha=1,this.flags=0,this.color=new Float32Array([1,1,1]),this.geosetId=-1}readMdx(e){let t=e.readUint32();this.alpha=e.readFloat32(),this.flags=e.readUint32(),e.readFloat32Array(this.color),this.geosetId=e.readInt32(),this.readAnimations(e,t-28)}writeMdx(e){e.writeUint32(this.getByteLength()),e.writeFloat32(this.alpha),e.writeUint32(this.flags),e.writeFloat32Array(this.color),e.writeInt32(this.geosetId),this.writeAnimations(e)}readMdl(e){for(let t of super.readAnimatedBlock(e))if("DropShadow"===t)this.flags|=1;else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KGAO");else if("static Color"===t)this.flags|=2,e.readColor(this.color);else if("Color"===t)this.flags|=2,this.readAnimation(e,"KGAC");else{if("GeosetId"!==t)throw new Error(`Unknown token in GeosetAnimation: "${t}"`);this.geosetId=e.readInt()}}writeMdl(e){e.startBlock("GeosetAnim"),1&this.flags&&e.writeFlag("DropShadow"),this.writeAnimation(e,"KGAO")||e.writeNumberAttrib("static Alpha",this.alpha),2&this.flags&&(this.writeAnimation(e,"KGAC")||1===this.color[0]&&1===this.color[1]&&1===this.color[2]||e.writeColor("static Color ",this.color)),e.writeNumberAttrib("GeosetId",this.geosetId),e.endBlock()}getByteLength(){return 28+super.getByteLength()}}t.default=r},8844:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{readMdl(e){for(let t of super.readGenericBlock(e))throw new Error(`Unknown token in Helper: "${t}"`)}writeMdl(e){e.startObjectBlock("Helper",this.name),this.writeGenericHeader(e),this.writeGenericAnimations(e),e.endBlock()}}t.default=r},7096:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2071),r=n(6659),i=n(1904),l=n(855),s=n(5944),o=n(6103),u=n(9939),c=n(8163),d=n(5727),h=n(8848),f=n(8844),_=n(3631),m=n(8872),p=n(1445),g=n(3094),b=n(4491),w=n(7709),v=n(4182),A=n(9388),y=n(9015),L=n(2390),S=n(4310);t.default={Model:a.default,Sequence:r.default,Material:i.default,Layer:l.default,Texture:s.default,TextureAnimation:o.default,Geoset:u.default,GeosetAnimation:c.default,Bone:d.default,Light:h.default,Helper:f.default,Attachment:_.default,ParticleEmitter:m.default,ParticleEmitter2:p.default,ParticleEmitterPopcorn:g.default,RibbonEmitter:b.default,Camera:w.default,EventObject:v.default,CollisionShape:A.default,UnknownChunk:y.default,TokenStream:L.default,isMdx:S.isMdx,isMdl:S.isMdl}},4310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMdl=t.isMdx=void 0;const a=n(2885);t.isMdx=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array&&77===e[0]&&68===e[1]&&76===e[2]&&88===e[3]},t.isMdl=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),!!(e instanceof Uint8Array&&a.isStringInBytes(e,"FormatVersion",0,4096))||!("string"!=typeof e||!a.isStringInString(e,"FormatVersion",0,4096))}},855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(343),r={None:0,Transparent:1,Blend:2,Additive:3,AddAlpha:4,Modulate:5,Modulate2x:6},i={0:"None",1:"Transparent",2:"Blend",3:"Additive",4:"AddAlpha",5:"Modulate",6:"Modulate2x"};class l extends a.default{constructor(){super(...arguments),this.filterMode=0,this.flags=0,this.textureId=-1,this.textureAnimationId=-1,this.coordId=0,this.alpha=1,this.emissiveGain=1,this.fresnelColor=new Float32Array([1,1,1]),this.fresnelOpacity=0,this.fresnelTeamColor=0}readMdx(e,t){const n=e.index,a=e.readUint32();this.filterMode=e.readUint32(),this.flags=e.readUint32(),this.textureId=e.readInt32(),this.textureAnimationId=e.readInt32(),this.coordId=e.readUint32(),this.alpha=e.readFloat32(),t>800&&(this.emissiveGain=e.readFloat32(),e.readFloat32Array(this.fresnelColor),this.fresnelOpacity=e.readFloat32(),this.fresnelTeamColor=e.readFloat32()),this.readAnimations(e,a-(e.index-n))}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.writeUint32(this.filterMode),e.writeUint32(this.flags),e.writeInt32(this.textureId),e.writeInt32(this.textureAnimationId),e.writeUint32(this.coordId),e.writeFloat32(this.alpha),t>800&&(e.writeFloat32(this.emissiveGain),e.writeFloat32Array(this.fresnelColor),e.writeFloat32(this.fresnelOpacity),e.writeFloat32(this.fresnelTeamColor)),this.writeAnimations(e)}readMdl(e){for(let t of super.readAnimatedBlock(e))if("FilterMode"===t)this.filterMode=r[e.read()];else if("Unshaded"===t)this.flags|=1;else if("SphereEnvMap"===t)this.flags|=2;else if("TwoSided"===t)this.flags|=16;else if("Unfogged"===t)this.flags|=32;else if("NoDepthTest"===t)this.flags|=64;else if("NoDepthSet"===t)this.flags|=128;else if("Unlit"===t)this.flags|=256;else if("static TextureID"===t)this.textureId=e.readInt();else if("TextureID"===t)this.readAnimation(e,"KMTF");else if("TVertexAnimId"===t)this.textureAnimationId=e.readInt();else if("CoordId"===t)this.coordId=e.readInt();else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KMTA");else if("static EmissiveGain"===t)this.emissiveGain=e.readFloat();else if("EmissiveGain"===t)this.readAnimation(e,"KMTE");else if("static FresnelColor"===t)e.readVector(this.fresnelColor);else if("FresnelColor"===t)this.readAnimation(e,"KFC3");else if("static FresnelOpacity"===t)this.fresnelOpacity=e.readFloat();else if("FresnelOpacity"===t)this.readAnimation(e,"KFCA");else if("static FresnelTeamColor"===t)this.fresnelTeamColor=e.readFloat();else{if("FresnelTeamColor"!==t)throw new Error(`Unknown token in Layer: "${t}"`);this.readAnimation(e,"KFTC")}}writeMdl(e,t){e.startBlock("Layer"),e.writeFlagAttrib("FilterMode",i[this.filterMode]),1&this.flags&&e.writeFlag("Unshaded"),2&this.flags&&e.writeFlag("SphereEnvMap"),16&this.flags&&e.writeFlag("TwoSided"),32&this.flags&&e.writeFlag("Unfogged"),64&this.flags&&e.writeFlag("NoDepthTest"),128&this.flags&&e.writeFlag("NoDepthSet"),t>800&&256&this.flags&&e.writeFlag("Unlit"),this.writeAnimation(e,"KMTF")||e.writeNumberAttrib("static TextureID",this.textureId),-1!==this.textureAnimationId&&e.writeNumberAttrib("TVertexAnimId",this.textureAnimationId),0!==this.coordId&&e.writeNumberAttrib("CoordId",this.coordId),this.writeAnimation(e,"KMTA")||1===this.alpha||e.writeNumberAttrib("static Alpha",this.alpha),t>800&&(this.writeAnimation(e,"KMTE")||1===this.emissiveGain||e.writeNumberAttrib("static EmissiveGain",this.emissiveGain),this.writeAnimation(e,"KFC3")||1===this.fresnelColor[0]&&1===this.fresnelColor[1]&&1===this.fresnelColor[2]||e.writeVectorAttrib("static FresnelColor",this.fresnelColor),this.writeAnimation(e,"KFCA")||0===this.fresnelOpacity||e.writeNumberAttrib("static FresnelOpacity",this.fresnelOpacity),this.writeAnimation(e,"KFTC")||0===this.fresnelTeamColor||e.writeNumberAttrib("static FresnelTeamColor",this.fresnelTeamColor)),e.endBlock()}getByteLength(e){let t=28+super.getByteLength();return e>800&&(t+=24),t}}t.default=l},8848:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(512),this.type=-1,this.attenuation=new Float32Array(2),this.color=new Float32Array(3),this.intensity=0,this.ambientColor=new Float32Array(3),this.ambientIntensity=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.type=e.readUint32(),e.readFloat32Array(this.attenuation),e.readFloat32Array(this.color),this.intensity=e.readFloat32(),e.readFloat32Array(this.ambientColor),this.ambientIntensity=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeUint32(this.type),e.writeFloat32Array(this.attenuation),e.writeFloat32Array(this.color),e.writeFloat32(this.intensity),e.writeFloat32Array(this.ambientColor),e.writeFloat32(this.ambientIntensity),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("Omnidirectional"===t)this.type=0;else if("Directional"===t)this.type=1;else if("Ambient"===t)this.type=2;else if("static AttenuationStart"===t)this.attenuation[0]=e.readFloat();else if("AttenuationStart"===t)this.readAnimation(e,"KLAS");else if("static AttenuationEnd"===t)this.attenuation[1]=e.readFloat();else if("AttenuationEnd"===t)this.readAnimation(e,"KLAE");else if("static Intensity"===t)this.intensity=e.readFloat();else if("Intensity"===t)this.readAnimation(e,"KLAI");else if("static Color"===t)e.readColor(this.color);else if("Color"===t)this.readAnimation(e,"KLAC");else if("static AmbIntensity"===t)this.ambientIntensity=e.readFloat();else if("AmbIntensity"===t)this.readAnimation(e,"KLBI");else if("static AmbColor"===t)e.readColor(this.ambientColor);else if("AmbColor"===t)this.readAnimation(e,"KLBC");else{if("Visibility"!==t)throw new Error(`Unknown token in Light: "${t}"`);this.readAnimation(e,"KLAV")}}writeMdl(e){e.startObjectBlock("Light",this.name),this.writeGenericHeader(e),0===this.type?e.writeFlag("Omnidirectional"):1===this.type?e.writeFlag("Directional"):2===this.type&&e.writeFlag("Ambient"),this.writeAnimation(e,"KLAS")||e.writeNumberAttrib("static AttenuationStart",this.attenuation[0]),this.writeAnimation(e,"KLAE")||e.writeNumberAttrib("static AttenuationEnd",this.attenuation[1]),this.writeAnimation(e,"KLAI")||e.writeNumberAttrib("static Intensity",this.intensity),this.writeAnimation(e,"KLAC")||e.writeColor("static Color",this.color),this.writeAnimation(e,"KLBI")||e.writeNumberAttrib("static AmbIntensity",this.ambientIntensity),this.writeAnimation(e,"KLBC")||e.writeColor("static AmbColor",this.ambientColor),this.writeAnimation(e,"KLAV"),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 48+super.getByteLength()}}t.default=r},1904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(855);t.default=class{constructor(){this.priorityPlane=0,this.flags=0,this.shader="",this.layers=[]}readMdx(e,t){e.readUint32(),this.priorityPlane=e.readInt32(),this.flags=e.readUint32(),t>800&&(this.shader=e.read(80)),e.skip(4);for(let n=0,r=e.readUint32();n<r;n++){let n=new a.default;n.readMdx(e,t),this.layers.push(n)}}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.writeInt32(this.priorityPlane),e.writeUint32(this.flags),t>800&&e.skip(80-e.write(this.shader)),e.writeBinary("LAYS"),e.writeUint32(this.layers.length);for(let n of this.layers)n.writeMdx(e,t)}readMdl(e){for(let t of e.readBlock())if("ConstantColor"===t)this.flags|=1;else if("TwoSided"===t)this.flags|=2;else if("SortPrimsNearZ"===t)this.flags|=8;else if("SortPrimsFarZ"===t)this.flags|=16;else if("FullResolution"===t)this.flags|=32;else if("PriorityPlane"===t)this.priorityPlane=e.readInt();else if("Shader"===t)this.shader=e.read();else{if("Layer"!==t)throw new Error(`Unknown token in Material: "${t}"`);{let t=new a.default;t.readMdl(e),this.layers.push(t)}}}writeMdl(e,t){e.startBlock("Material"),1&this.flags&&e.writeFlag("ConstantColor"),t>800&&2&this.flags&&e.writeFlag("TwoSided"),8&this.flags&&e.writeFlag("SortPrimsNearZ"),16&this.flags&&e.writeFlag("SortPrimsFarZ"),32&this.flags&&e.writeFlag("FullResolution"),0!==this.priorityPlane&&e.writeNumberAttrib("PriorityPlane",this.priorityPlane),t>800&&e.writeStringAttrib("Shader",this.shader);for(let n of this.layers)n.writeMdl(e,t);e.endBlock()}getByteLength(e){let t=20;e>800&&(t+=80);for(let n of this.layers)t+=n.getByteLength(e);return t}}},2071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(9048),i=n(2390),l=n(9350),s=n(6659),o=n(1904),u=n(5944),c=n(6103),d=n(9939),h=n(8163),f=n(5727),_=n(8848),m=n(8844),p=n(3631),g=n(8872),b=n(1445),w=n(3094),v=n(4491),A=n(7709),y=n(4182),L=n(9388),S=n(3788),T=n(9015),E=n(4310);t.default=class{constructor(){this.version=800,this.name="",this.animationFile="",this.extent=new l.default,this.blendTime=0,this.sequences=[],this.globalSequences=[],this.materials=[],this.textures=[],this.textureAnimations=[],this.geosets=[],this.geosetAnimations=[],this.bones=[],this.lights=[],this.helpers=[],this.attachments=[],this.pivotPoints=[],this.particleEmitters=[],this.particleEmitters2=[],this.particleEmittersPopcorn=[],this.ribbonEmitters=[],this.cameras=[],this.eventObjects=[],this.collisionShapes=[],this.faceEffects=[],this.bindPose=[],this.unknownChunks=[]}load(e){if(E.isMdx(e))this.loadMdx(e);else{if(!E.isMdl(e))throw new Error("Not a valid MDX/MDL buffer");"string"==typeof e?this.loadMdl(e):this.loadMdl(r.decodeUtf8(e))}}loadMdx(e){let t,n,r=new a.default(e);for(r.skip(4);r.remaining>0;)t=r.readBinary(4),n=r.readUint32(),"VERS"===t?this.loadVersionChunk(r):"MODL"===t?this.loadModelChunk(r):"SEQS"===t?this.loadStaticObjects(this.sequences,s.default,r,n/132):"GLBS"===t?this.loadGlobalSequenceChunk(r,n):"MTLS"===t?this.loadDynamicObjects(this.materials,o.default,r,n):"TEXS"===t?this.loadStaticObjects(this.textures,u.default,r,n/268):"TXAN"===t?this.loadDynamicObjects(this.textureAnimations,c.default,r,n):"GEOS"===t?this.loadDynamicObjects(this.geosets,d.default,r,n):"GEOA"===t?this.loadDynamicObjects(this.geosetAnimations,h.default,r,n):"BONE"===t?this.loadDynamicObjects(this.bones,f.default,r,n):"LITE"===t?this.loadDynamicObjects(this.lights,_.default,r,n):"HELP"===t?this.loadDynamicObjects(this.helpers,m.default,r,n):"ATCH"===t?this.loadDynamicObjects(this.attachments,p.default,r,n):"PIVT"===t?this.loadPivotPointChunk(r,n):"PREM"===t?this.loadDynamicObjects(this.particleEmitters,g.default,r,n):"PRE2"===t?this.loadDynamicObjects(this.particleEmitters2,b.default,r,n):"CORN"===t?this.loadDynamicObjects(this.particleEmittersPopcorn,w.default,r,n):"RIBB"===t?this.loadDynamicObjects(this.ribbonEmitters,v.default,r,n):"CAMS"===t?this.loadDynamicObjects(this.cameras,A.default,r,n):"EVTS"===t?this.loadDynamicObjects(this.eventObjects,y.default,r,n):"CLID"===t?this.loadDynamicObjects(this.collisionShapes,L.default,r,n):"FAFX"===t?this.loadStaticObjects(this.faceEffects,S.default,r,n/340):"BPOS"===t?this.loadBindPoseChunk(r,n):this.unknownChunks.push(new T.default(r,n,t))}loadVersionChunk(e){this.version=e.readUint32()}loadModelChunk(e){this.name=e.read(80),this.animationFile=e.read(260),this.extent.readMdx(e),this.blendTime=e.readUint32()}loadStaticObjects(e,t,n,a){for(let r=0;r<a;r++){let a=new t;a.readMdx(n),e.push(a)}}loadGlobalSequenceChunk(e,t){for(let n=0,a=t/4;n<a;n++)this.globalSequences.push(e.readUint32())}loadDynamicObjects(e,t,n,a){let r=n.index+a;for(;n.index<r;){let a=new t;a.readMdx(n,this.version),e.push(a)}}loadPivotPointChunk(e,t){for(let n=0,a=t/12;n<a;n++)this.pivotPoints.push(e.readFloat32Array(3))}loadBindPoseChunk(e,t){for(let t=0,n=e.readUint32();t<n;t++)this.bindPose[t]=e.readFloat32Array(12)}saveMdx(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeBinary("MDLX"),this.saveVersionChunk(e),this.saveModelChunk(e),this.saveStaticObjectChunk(e,"SEQS",this.sequences,132),this.saveGlobalSequenceChunk(e),this.saveDynamicObjectChunk(e,"MTLS",this.materials),this.saveStaticObjectChunk(e,"TEXS",this.textures,268),this.saveDynamicObjectChunk(e,"TXAN",this.textureAnimations),this.saveDynamicObjectChunk(e,"GEOS",this.geosets),this.saveDynamicObjectChunk(e,"GEOA",this.geosetAnimations),this.saveDynamicObjectChunk(e,"BONE",this.bones),this.saveDynamicObjectChunk(e,"LITE",this.lights),this.saveDynamicObjectChunk(e,"HELP",this.helpers),this.saveDynamicObjectChunk(e,"ATCH",this.attachments),this.savePivotPointChunk(e),this.saveDynamicObjectChunk(e,"PREM",this.particleEmitters),this.saveDynamicObjectChunk(e,"PRE2",this.particleEmitters2),this.version>800&&this.saveDynamicObjectChunk(e,"CORN",this.particleEmittersPopcorn),this.saveDynamicObjectChunk(e,"RIBB",this.ribbonEmitters),this.saveDynamicObjectChunk(e,"CAMS",this.cameras),this.saveDynamicObjectChunk(e,"EVTS",this.eventObjects),this.saveDynamicObjectChunk(e,"CLID",this.collisionShapes),this.version>800&&(this.saveStaticObjectChunk(e,"FAFX",this.faceEffects,340),this.saveBindPoseChunk(e));for(let t of this.unknownChunks)t.writeMdx(e);return e.uint8array}saveVersionChunk(e){e.writeBinary("VERS"),e.writeUint32(4),e.writeUint32(this.version)}saveModelChunk(e){e.writeBinary("MODL"),e.writeUint32(372),e.skip(80-e.write(this.name)),e.skip(260-e.write(this.animationFile)),this.extent.writeMdx(e),e.writeUint32(this.blendTime)}saveStaticObjectChunk(e,t,n,a){if(n.length){e.writeBinary(t),e.writeUint32(n.length*a);for(let t of n)t.writeMdx(e)}}saveGlobalSequenceChunk(e){if(this.globalSequences.length){e.writeBinary("GLBS"),e.writeUint32(4*this.globalSequences.length);for(let t of this.globalSequences)e.writeUint32(t)}}saveDynamicObjectChunk(e,t,n){if(n.length){e.writeBinary(t),e.writeUint32(this.getObjectsByteLength(n));for(let t of n)t.writeMdx(e,this.version)}}savePivotPointChunk(e){if(this.pivotPoints.length){e.writeBinary("PIVT"),e.writeUint32(12*this.pivotPoints.length);for(let t of this.pivotPoints)e.writeFloat32Array(t)}}saveBindPoseChunk(e){if(this.bindPose.length){e.writeBinary("BPOS"),e.writeUint32(4+48*this.bindPose.length),e.writeUint32(this.bindPose.length);for(let t of this.bindPose)e.writeFloat32Array(t)}}loadMdl(e){let t,n=new i.default(e);for(;t=n.readToken();)if("Version"===t)this.loadVersionBlock(n);else if("Model"===t)this.loadModelBlock(n);else if("Sequences"===t)this.loadNumberedObjectBlock(this.sequences,s.default,"Anim",n);else if("GlobalSequences"===t)this.loadGlobalSequenceBlock(n);else if("Textures"===t)this.loadNumberedObjectBlock(this.textures,u.default,"Bitmap",n);else if("Materials"===t)this.loadNumberedObjectBlock(this.materials,o.default,"Material",n);else if("TextureAnims"===t)this.loadNumberedObjectBlock(this.textureAnimations,c.default,"TVertexAnim",n);else if("Geoset"===t)this.loadObject(this.geosets,d.default,n);else if("GeosetAnim"===t)this.loadObject(this.geosetAnimations,h.default,n);else if("Bone"===t)this.loadObject(this.bones,f.default,n);else if("Light"===t)this.loadObject(this.lights,_.default,n);else if("Helper"===t)this.loadObject(this.helpers,m.default,n);else if("Attachment"===t)this.loadObject(this.attachments,p.default,n);else if("PivotPoints"===t)this.loadPivotPointBlock(n);else if("ParticleEmitter"===t)this.loadObject(this.particleEmitters,g.default,n);else if("ParticleEmitter2"===t)this.loadObject(this.particleEmitters2,b.default,n);else if("ParticleEmitterPopcorn"===t)this.loadObject(this.particleEmittersPopcorn,w.default,n);else if("RibbonEmitter"===t)this.loadObject(this.ribbonEmitters,v.default,n);else if("Camera"===t)this.loadObject(this.cameras,A.default,n);else if("EventObject"===t)this.loadObject(this.eventObjects,y.default,n);else if("CollisionShape"===t)this.loadObject(this.collisionShapes,L.default,n);else if("FaceFX"===t)this.loadObject(this.faceEffects,S.default,n);else{if("BindPose"!==t)throw new Error(`Unsupported block: ${t}`);this.loadBindPoseBlock(n)}}loadVersionBlock(e){for(let t of e.readBlock()){if("FormatVersion"!==t)throw new Error(`Unknown token in Version: "${t}"`);this.version=e.readInt()}}loadModelBlock(e){this.name=e.read();for(let t of e.readBlock())if(t.startsWith("Num"))e.read();else if("BlendTime"===t)this.blendTime=e.readInt();else if("MinimumExtent"===t)e.readVector(this.extent.min);else if("MaximumExtent"===t)e.readVector(this.extent.max);else if("BoundsRadius"===t)this.extent.boundsRadius=e.readFloat();else{if("AnimationFile"!==t)throw new Error(`Unknown token in Model: "${t}"`);this.animationFile=e.read()}}loadNumberedObjectBlock(e,t,n,a){a.read();for(let r of a.readBlock()){if(r!==n)throw new Error(`Unknown token in ${n}: "${r}"`);{let n=new t;n.readMdl(a),e.push(n)}}}loadGlobalSequenceBlock(e){e.read();for(let t of e.readBlock()){if("Duration"!==t)throw new Error(`Unknown token in GlobalSequences: "${t}"`);this.globalSequences.push(e.readInt())}}loadObject(e,t,n){let a=new t;a.readMdl(n),e.push(a)}loadPivotPointBlock(e){let t=e.readInt();e.read();for(let n=0;n<t;n++)this.pivotPoints.push(e.readVector(new Float32Array(3)));e.read()}loadBindPoseBlock(e){for(let t of e.readBlock()){if("Matrices"!==t)throw new Error(`Unknown token in BindPose: "${t}"`);{let t=e.readInt();e.read();for(let n=0;n<t;n++)this.bindPose[n]=e.readVector(new Float32Array(12));e.read()}}}saveMdl(){let e=new i.default;return this.saveVersionBlock(e),this.saveModelBlock(e),this.saveStaticObjectsBlock(e,"Sequences",this.sequences),this.saveGlobalSequenceBlock(e),this.saveStaticObjectsBlock(e,"Textures",this.textures),this.saveStaticObjectsBlock(e,"Materials",this.materials),this.saveStaticObjectsBlock(e,"TextureAnims",this.textureAnimations),this.saveObjects(e,this.geosets),this.saveObjects(e,this.geosetAnimations),this.saveObjects(e,this.bones),this.saveObjects(e,this.lights),this.saveObjects(e,this.helpers),this.saveObjects(e,this.attachments),this.savePivotPointBlock(e),this.saveObjects(e,this.particleEmitters),this.saveObjects(e,this.particleEmitters2),this.version>800&&this.saveObjects(e,this.particleEmittersPopcorn),this.saveObjects(e,this.ribbonEmitters),this.saveObjects(e,this.cameras),this.saveObjects(e,this.eventObjects),this.saveObjects(e,this.collisionShapes),this.version>800&&(this.saveObjects(e,this.faceEffects),this.saveBindPoseBlock(e)),e.buffer}saveVersionBlock(e){e.startBlock("Version"),e.writeNumberAttrib("FormatVersion",this.version),e.endBlock()}saveModelBlock(e){e.startObjectBlock("Model",this.name),e.writeNumberAttrib("BlendTime",this.blendTime),this.extent.writeMdl(e),this.animationFile.length&&e.writeStringAttrib("AnimationFile",this.animationFile),e.endBlock()}saveStaticObjectsBlock(e,t,n){if(n.length){e.startBlock(t,n.length);for(let t of n)t.writeMdl(e,this.version);e.endBlock()}}saveGlobalSequenceBlock(e){if(this.globalSequences.length){e.startBlock("GlobalSequences",this.globalSequences.length);for(let t of this.globalSequences)e.writeNumberAttrib("Duration",t);e.endBlock()}}saveObjects(e,t){for(let n of t)n.writeMdl(e,this.version)}savePivotPointBlock(e){if(this.pivotPoints.length){e.startBlock("PivotPoints",this.pivotPoints.length);for(let t of this.pivotPoints)e.writeVector(t);e.endBlock()}}saveBindPoseBlock(e){if(this.bindPose.length){e.startBlock("BindPose"),e.startBlock("Matrices",this.bindPose.length);for(let t of this.bindPose)e.writeVector(t);e.endBlock(),e.endBlock()}}getByteLength(){let e=396;return e+=this.getStaticObjectsChunkByteLength(this.sequences,132),e+=this.getStaticObjectsChunkByteLength(this.globalSequences,4),e+=this.getDynamicObjectsChunkByteLength(this.materials),e+=this.getStaticObjectsChunkByteLength(this.textures,268),e+=this.getDynamicObjectsChunkByteLength(this.textureAnimations),e+=this.getDynamicObjectsChunkByteLength(this.geosets),e+=this.getDynamicObjectsChunkByteLength(this.geosetAnimations),e+=this.getDynamicObjectsChunkByteLength(this.bones),e+=this.getDynamicObjectsChunkByteLength(this.lights),e+=this.getDynamicObjectsChunkByteLength(this.helpers),e+=this.getDynamicObjectsChunkByteLength(this.attachments),e+=this.getStaticObjectsChunkByteLength(this.pivotPoints,12),e+=this.getDynamicObjectsChunkByteLength(this.particleEmitters),e+=this.getDynamicObjectsChunkByteLength(this.particleEmitters2),this.version>800&&(e+=this.getDynamicObjectsChunkByteLength(this.particleEmittersPopcorn)),e+=this.getDynamicObjectsChunkByteLength(this.ribbonEmitters),e+=this.getDynamicObjectsChunkByteLength(this.cameras),e+=this.getDynamicObjectsChunkByteLength(this.eventObjects),e+=this.getDynamicObjectsChunkByteLength(this.collisionShapes),this.version>800&&(e+=this.getStaticObjectsChunkByteLength(this.faceEffects,340),e+=this.getBindPoseChunkByteLength()),e+=this.getObjectsByteLength(this.unknownChunks),e}getObjectsByteLength(e){let t=0;for(let n of e)t+=n.getByteLength(this.version);return t}getDynamicObjectsChunkByteLength(e){return e.length?8+this.getObjectsByteLength(e):0}getStaticObjectsChunkByteLength(e,t){return e.length?8+e.length*t:0}getBindPoseChunkByteLength(){return this.bindPose.length?12+48*this.bindPose.length:0}}},8872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(4096),this.emissionRate=0,this.gravity=0,this.longitude=0,this.latitude=0,this.path="",this.lifeSpan=0,this.speed=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.emissionRate=e.readFloat32(),this.gravity=e.readFloat32(),this.longitude=e.readFloat32(),this.latitude=e.readFloat32(),this.path=e.read(260),this.lifeSpan=e.readFloat32(),this.speed=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.emissionRate),e.writeFloat32(this.gravity),e.writeFloat32(this.longitude),e.writeFloat32(this.latitude),e.skip(260-e.write(this.path)),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.speed),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("EmitterUsesMDL"===t)this.flags|=32768;else if("EmitterUsesTGA"===t)this.flags|=65536;else if("static EmissionRate"===t)this.emissionRate=e.readFloat();else if("EmissionRate"===t)this.readAnimation(e,"KPEE");else if("static Gravity"===t)this.gravity=e.readFloat();else if("Gravity"===t)this.readAnimation(e,"KPEG");else if("static Longitude"===t)this.longitude=e.readFloat();else if("Longitude"===t)this.readAnimation(e,"KPLN");else if("static Latitude"===t)this.latitude=e.readFloat();else if("Latitude"===t)this.readAnimation(e,"KPLT");else if("Visibility"===t)this.readAnimation(e,"KPEV");else{if("Particle"!==t)throw new Error(`Unknown token in ParticleEmitter: "${t}"`);for(t of this.readAnimatedBlock(e))"static LifeSpan"===t?this.lifeSpan=e.readFloat():"LifeSpan"===t?this.readAnimation(e,"KPEL"):"static InitVelocity"===t?this.speed=e.readFloat():"InitVelocity"===t?this.readAnimation(e,"KPES"):"Path"===t&&(this.path=e.read())}}writeMdl(e){e.startObjectBlock("ParticleEmitter",this.name),this.writeGenericHeader(e),32768&this.flags&&e.writeFlag("EmitterUsesMDL"),65536&this.flags&&e.writeFlag("EmitterUsesTGA"),this.writeAnimation(e,"KPEE")||e.writeNumberAttrib("static EmissionRate",this.emissionRate),this.writeAnimation(e,"KPEG")||e.writeNumberAttrib("static Gravity",this.gravity),this.writeAnimation(e,"KPLN")||e.writeNumberAttrib("static Longitude",this.longitude),this.writeAnimation(e,"KPLT")||e.writeNumberAttrib("static Latitude",this.latitude),this.writeAnimation(e,"KPEV"),e.startBlock("Particle"),this.writeAnimation(e,"KPEL")||e.writeNumberAttrib("static LifeSpan",this.lifeSpan),this.writeAnimation(e,"KPES")||e.writeNumberAttrib("static InitVelocity",this.speed),(32768&this.flags||65536&this.flags)&&e.writeStringAttrib("Path",this.path),e.endBlock(),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 288+super.getByteLength()}}t.default=r},1445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(...arguments),this.speed=0,this.variation=0,this.latitude=0,this.gravity=0,this.lifeSpan=0,this.emissionRate=0,this.width=0,this.length=0,this.filterMode=0,this.rows=0,this.columns=0,this.headOrTail=0,this.tailLength=0,this.timeMiddle=0,this.segmentColors=[new Float32Array(3),new Float32Array(3),new Float32Array(3)],this.segmentAlphas=new Uint8Array(3),this.segmentScaling=new Float32Array(3),this.headIntervals=[new Uint32Array(3),new Uint32Array(3)],this.tailIntervals=[new Uint32Array(3),new Uint32Array(3)],this.textureId=-1,this.squirt=0,this.priorityPlane=0,this.replaceableId=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.speed=e.readFloat32(),this.variation=e.readFloat32(),this.latitude=e.readFloat32(),this.gravity=e.readFloat32(),this.lifeSpan=e.readFloat32(),this.emissionRate=e.readFloat32(),this.width=e.readFloat32(),this.length=e.readFloat32(),this.filterMode=e.readUint32(),this.rows=e.readUint32(),this.columns=e.readUint32(),this.headOrTail=e.readUint32(),this.tailLength=e.readFloat32(),this.timeMiddle=e.readFloat32(),e.readFloat32Array(this.segmentColors[0]),e.readFloat32Array(this.segmentColors[1]),e.readFloat32Array(this.segmentColors[2]),e.readUint8Array(this.segmentAlphas),e.readFloat32Array(this.segmentScaling),e.readUint32Array(this.headIntervals[0]),e.readUint32Array(this.headIntervals[1]),e.readUint32Array(this.tailIntervals[0]),e.readUint32Array(this.tailIntervals[1]),this.textureId=e.readInt32(),this.squirt=e.readUint32(),this.priorityPlane=e.readInt32(),this.replaceableId=e.readUint32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.speed),e.writeFloat32(this.variation),e.writeFloat32(this.latitude),e.writeFloat32(this.gravity),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.emissionRate),e.writeFloat32(this.width),e.writeFloat32(this.length),e.writeUint32(this.filterMode),e.writeUint32(this.rows),e.writeUint32(this.columns),e.writeUint32(this.headOrTail),e.writeFloat32(this.tailLength),e.writeFloat32(this.timeMiddle),e.writeFloat32Array(this.segmentColors[0]),e.writeFloat32Array(this.segmentColors[1]),e.writeFloat32Array(this.segmentColors[2]),e.writeUint8Array(this.segmentAlphas),e.writeFloat32Array(this.segmentScaling),e.writeUint32Array(this.headIntervals[0]),e.writeUint32Array(this.headIntervals[1]),e.writeUint32Array(this.tailIntervals[0]),e.writeUint32Array(this.tailIntervals[1]),e.writeInt32(this.textureId),e.writeUint32(this.squirt),e.writeInt32(this.priorityPlane),e.writeUint32(this.replaceableId),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(const t of super.readGenericBlock(e))if("SortPrimsFarZ"===t)this.flags|=65536;else if("Unshaded"===t)this.flags|=32768;else if("LineEmitter"===t)this.flags|=131072;else if("Unfogged"===t)this.flags|=262144;else if("ModelSpace"===t)this.flags|=524288;else if("XYQuad"===t)this.flags|=1048576;else if("static Speed"===t)this.speed=e.readFloat();else if("Speed"===t)this.readAnimation(e,"KP2S");else if("static Variation"===t)this.variation=e.readFloat();else if("Variation"===t)this.readAnimation(e,"KP2R");else if("static Latitude"===t)this.latitude=e.readFloat();else if("Latitude"===t)this.readAnimation(e,"KP2L");else if("static Gravity"===t)this.gravity=e.readFloat();else if("Gravity"===t)this.readAnimation(e,"KP2G");else if("Visibility"===t)this.readAnimation(e,"KP2V");else if("Squirt"===t)this.squirt=1;else if("LifeSpan"===t)this.lifeSpan=e.readFloat();else if("static EmissionRate"===t)this.emissionRate=e.readFloat();else if("EmissionRate"===t)this.readAnimation(e,"KP2E");else if("static Width"===t)this.width=e.readFloat();else if("Width"===t)this.readAnimation(e,"KP2N");else if("static Length"===t)this.length=e.readFloat();else if("Length"===t)this.readAnimation(e,"KP2W");else if("Blend"===t)this.filterMode=0;else if("Additive"===t)this.filterMode=1;else if("Modulate"===t)this.filterMode=2;else if("Modulate2x"===t)this.filterMode=3;else if("AlphaKey"===t)this.filterMode=4;else if("Rows"===t)this.rows=e.readInt();else if("Columns"===t)this.columns=e.readInt();else if("Head"===t)this.headOrTail=0;else if("Tail"===t)this.headOrTail=1;else if("Both"===t)this.headOrTail=2;else if("TailLength"===t)this.tailLength=e.readFloat();else if("Time"===t)this.timeMiddle=e.readFloat();else if("SegmentColor"===t){e.read();for(let t=0;t<3;t++)e.read(),e.readColor(this.segmentColors[t]);e.read()}else if("Alpha"===t)e.readVector(this.segmentAlphas);else if("ParticleScaling"===t)e.readVector(this.segmentScaling);else if("LifeSpanUVAnim"===t)e.readVector(this.headIntervals[0]);else if("DecayUVAnim"===t)e.readVector(this.headIntervals[1]);else if("TailUVAnim"===t)e.readVector(this.tailIntervals[0]);else if("TailDecayUVAnim"===t)e.readVector(this.tailIntervals[1]);else if("TextureID"===t)this.textureId=e.readInt();else if("ReplaceableId"===t)this.replaceableId=e.readInt();else{if("PriorityPlane"!==t)throw new Error(`Unknown token in ParticleEmitter2: "${t}"`);this.priorityPlane=e.readInt()}}writeMdl(e){e.startObjectBlock("ParticleEmitter2",this.name),this.writeGenericHeader(e),65536&this.flags&&e.writeFlag("SortPrimsFarZ"),32768&this.flags&&e.writeFlag("Unshaded"),131072&this.flags&&e.writeFlag("LineEmitter"),262144&this.flags&&e.writeFlag("Unfogged"),524288&this.flags&&e.writeFlag("ModelSpace"),1048576&this.flags&&e.writeFlag("XYQuad"),this.writeAnimation(e,"KP2S")||e.writeNumberAttrib("static Speed",this.speed),this.writeAnimation(e,"KP2R")||e.writeNumberAttrib("static Variation",this.variation),this.writeAnimation(e,"KP2L")||e.writeNumberAttrib("static Latitude",this.latitude),this.writeAnimation(e,"KP2G")||e.writeNumberAttrib("static Gravity",this.gravity),this.writeAnimation(e,"KP2V"),this.squirt&&e.writeFlag("Squirt"),e.writeNumberAttrib("LifeSpan",this.lifeSpan),this.writeAnimation(e,"KP2E")||e.writeNumberAttrib("static EmissionRate",this.emissionRate),this.writeAnimation(e,"KP2N")||e.writeNumberAttrib("static Width",this.width),this.writeAnimation(e,"KP2W")||e.writeNumberAttrib("static Length",this.length),0===this.filterMode?e.writeFlag("Blend"):1===this.filterMode?e.writeFlag("Additive"):2===this.filterMode?e.writeFlag("Modulate"):3===this.filterMode?e.writeFlag("Modulate2x"):4===this.filterMode&&e.writeFlag("AlphaKey"),e.writeNumberAttrib("Rows",this.rows),e.writeNumberAttrib("Columns",this.columns),0===this.headOrTail?e.writeFlag("Head"):1===this.headOrTail?e.writeFlag("Tail"):2===this.headOrTail&&e.writeFlag("Both"),e.writeNumberAttrib("TailLength",this.tailLength),e.writeNumberAttrib("Time",this.timeMiddle),e.startBlock("SegmentColor"),e.writeColor("Color",this.segmentColors[0]),e.writeColor("Color",this.segmentColors[1]),e.writeColor("Color",this.segmentColors[2]),e.endBlockComma(),e.writeVectorAttrib("Alpha",this.segmentAlphas),e.writeVectorAttrib("ParticleScaling",this.segmentScaling),e.writeVectorAttrib("LifeSpanUVAnim",this.headIntervals[0]),e.writeVectorAttrib("DecayUVAnim",this.headIntervals[1]),e.writeVectorAttrib("TailUVAnim",this.tailIntervals[0]),e.writeVectorAttrib("TailDecayUVAnim",this.tailIntervals[1]),e.writeNumberAttrib("TextureID",this.textureId),0!==this.replaceableId&&e.writeNumberAttrib("ReplaceableId",this.replaceableId),0!==this.priorityPlane&&e.writeNumberAttrib("PriorityPlane",this.priorityPlane),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 175+super.getByteLength()}}t.default=r},3094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(...arguments),this.lifeSpan=0,this.emissionRate=0,this.speed=0,this.color=new Float32Array(3),this.alpha=1,this.replaceableId=0,this.path="",this.animationVisiblityGuide=""}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.lifeSpan=e.readFloat32(),this.emissionRate=e.readFloat32(),this.speed=e.readFloat32(),e.readFloat32Array(this.color),this.alpha=e.readFloat32(),this.replaceableId=e.readUint32(),this.path=e.read(260),this.animationVisiblityGuide=e.read(260),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.emissionRate),e.writeFloat32(this.speed),e.writeFloat32Array(this.color),e.writeFloat32(this.alpha),e.writeUint32(this.replaceableId),e.skip(260-e.write(this.path)),e.skip(260-e.write(this.animationVisiblityGuide)),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("SortPrimsFarZ"===t)this.flags|=65536;else if("Unshaded"===t)this.flags|=32768;else if("Unfogged"===t)this.flags|=262144;else if("static LifeSpan"===t)this.lifeSpan=e.readFloat();else if("LifeSpan"===t)this.readAnimation(e,"KPPL");else if("static EmissionRate"===t)this.emissionRate=e.readFloat();else if("EmissionRate"===t)this.readAnimation(e,"KPPE");else if("static Speed"===t)this.speed=e.readFloat();else if("Speed"===t)this.readAnimation(e,"KPPS");else if("static Color"===t)e.readVector(this.color);else if("Color"===t)this.readAnimation(e,"KPPC");else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KPPA");else if("Visibility"===t)this.readAnimation(e,"KPPV");else if("ReplaceableId"===t)this.replaceableId=e.readInt();else if("Path"===t)this.path=e.read();else{if("AnimVisibilityGuide"!==t)throw new Error(`Unknown token in ParticleEmitterPopcorn: "${t}"`);this.animationVisiblityGuide=e.read()}}writeMdl(e){e.startObjectBlock("ParticleEmitterPopcorn",this.name),this.writeGenericHeader(e),65536&this.flags&&e.writeFlag("SortPrimsFarZ"),32768&this.flags&&e.writeFlag("Unshaded"),262144&this.flags&&e.writeFlag("Unfogged"),this.writeAnimation(e,"KPPL")||e.writeNumberAttrib("static LifeSpan",this.lifeSpan),this.writeAnimation(e,"KPPE")||e.writeNumberAttrib("static EmissionRate",this.emissionRate),this.writeAnimation(e,"KPPS")||e.writeNumberAttrib("static Speed",this.speed),this.writeAnimation(e,"KPPC")||e.writeVectorAttrib("static Color",this.color),this.writeAnimation(e,"KPPA")||e.writeNumberAttrib("static Alpha",this.alpha),this.writeAnimation(e,"KPPV"),0!==this.replaceableId&&e.writeNumberAttrib("ReplaceableId",this.replaceableId),this.path.length&&e.writeStringAttrib("Path",this.path),this.animationVisiblityGuide.length&&e.writeStringAttrib("AnimVisibilityGuide",this.animationVisiblityGuide),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 556+super.getByteLength()}}t.default=r},4491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863);class r extends a.default{constructor(){super(16384),this.heightAbove=0,this.heightBelow=0,this.alpha=0,this.color=new Float32Array(3),this.lifeSpan=0,this.textureSlot=0,this.emissionRate=0,this.rows=0,this.columns=0,this.materialId=0,this.gravity=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.heightAbove=e.readFloat32(),this.heightBelow=e.readFloat32(),this.alpha=e.readFloat32(),e.readFloat32Array(this.color),this.lifeSpan=e.readFloat32(),this.textureSlot=e.readUint32(),this.emissionRate=e.readUint32(),this.rows=e.readUint32(),this.columns=e.readUint32(),this.materialId=e.readInt32(),this.gravity=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.heightAbove),e.writeFloat32(this.heightBelow),e.writeFloat32(this.alpha),e.writeFloat32Array(this.color),e.writeFloat32(this.lifeSpan),e.writeUint32(this.textureSlot),e.writeUint32(this.emissionRate),e.writeUint32(this.rows),e.writeUint32(this.columns),e.writeInt32(this.materialId),e.writeFloat32(this.gravity),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("static HeightAbove"===t)this.heightAbove=e.readFloat();else if("HeightAbove"===t)this.readAnimation(e,"KRHA");else if("static HeightBelow"===t)this.heightBelow=e.readFloat();else if("HeightBelow"===t)this.readAnimation(e,"KRHB");else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KRAL");else if("static Color"===t)e.readColor(this.color);else if("Color"===t)this.readAnimation(e,"KRCO");else if("static TextureSlot"===t)this.textureSlot=e.readInt();else if("TextureSlot"===t)this.readAnimation(e,"KRTX");else if("Visibility"===t)this.readAnimation(e,"KRVS");else if("EmissionRate"===t)this.emissionRate=e.readInt();else if("LifeSpan"===t)this.lifeSpan=e.readFloat();else if("Gravity"===t)this.gravity=e.readFloat();else if("Rows"===t)this.rows=e.readInt();else if("Columns"===t)this.columns=e.readInt();else{if("MaterialID"!==t)throw new Error(`Unknown token in RibbonEmitter: "${t}"`);this.materialId=e.readInt()}}writeMdl(e){e.startObjectBlock("RibbonEmitter",this.name),this.writeGenericHeader(e),this.writeAnimation(e,"KRHA")||e.writeNumberAttrib("static HeightAbove",this.heightAbove),this.writeAnimation(e,"KRHB")||e.writeNumberAttrib("static HeightBelow",this.heightBelow),this.writeAnimation(e,"KRAL")||e.writeNumberAttrib("static Alpha",this.alpha),this.writeAnimation(e,"KRCO")||e.writeColor("static Color",this.color),this.writeAnimation(e,"KRTX")||e.writeNumberAttrib("static TextureSlot",this.textureSlot),this.writeAnimation(e,"KRVS"),e.writeNumberAttrib("EmissionRate",this.emissionRate),e.writeNumberAttrib("LifeSpan",this.lifeSpan),0!==this.gravity&&e.writeNumberAttrib("Gravity",this.gravity),e.writeNumberAttrib("Rows",this.rows),e.writeNumberAttrib("Columns",this.columns),e.writeNumberAttrib("MaterialID",this.materialId),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 56+super.getByteLength()}}t.default=r},6659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9350);t.default=class{constructor(){this.name="",this.interval=new Uint32Array(2),this.moveSpeed=0,this.flags=0,this.rarity=0,this.syncPoint=0,this.extent=new a.default}readMdx(e){this.name=e.read(80),e.readUint32Array(this.interval),this.moveSpeed=e.readFloat32(),this.flags=e.readUint32(),this.rarity=e.readFloat32(),this.syncPoint=e.readUint32(),this.extent.readMdx(e)}writeMdx(e){e.skip(80-e.write(this.name)),e.writeUint32Array(this.interval),e.writeFloat32(this.moveSpeed),e.writeUint32(this.flags),e.writeFloat32(this.rarity),e.writeUint32(this.syncPoint),this.extent.writeMdx(e)}readMdl(e){this.name=e.read();for(let t of e.readBlock())if("Interval"===t)e.readVector(this.interval);else if("NonLooping"===t)this.flags=1;else if("MoveSpeed"===t)this.moveSpeed=e.readFloat();else if("Rarity"===t)this.rarity=e.readFloat();else if("MinimumExtent"===t)e.readVector(this.extent.min);else if("MaximumExtent"===t)e.readVector(this.extent.max);else{if("BoundsRadius"!==t)throw new Error(`Unknown token in Sequence: "${t}"`);this.extent.boundsRadius=e.readFloat()}}writeMdl(e){e.startObjectBlock("Anim",this.name),e.writeVectorAttrib("Interval",this.interval),1===this.flags&&e.writeFlag("NonLooping"),0!==this.moveSpeed&&e.writeNumberAttrib("MoveSpeed",this.moveSpeed),0!==this.rarity&&e.writeNumberAttrib("Rarity",this.rarity),this.extent.writeMdl(e),e.endBlock()}}},5944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.replaceableId=0,this.path="",this.flags=0}readMdx(e){this.replaceableId=e.readUint32(),this.path=e.read(260),this.flags=e.readUint32()}writeMdx(e){e.writeUint32(this.replaceableId),e.skip(260-e.write(this.path)),e.writeUint32(this.flags)}readMdl(e){for(let t of e.readBlock())if("Image"===t)this.path=e.read();else if("ReplaceableId"===t)this.replaceableId=e.readInt();else if("WrapWidth"===t)this.flags|=1;else{if("WrapHeight"!==t)throw new Error(`Unknown token in Texture: "${t}"`);this.flags|=2}}writeMdl(e){e.startBlock("Bitmap"),this.path.length&&e.writeStringAttrib("Image",this.path),0!==this.replaceableId&&e.writeNumberAttrib("ReplaceableId",this.replaceableId),1&this.flags&&e.writeFlag("WrapWidth"),2&this.flags&&e.writeFlag("WrapHeight"),e.endBlock()}}},6103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(343);class r extends a.default{readMdx(e){let t=e.readUint32();this.readAnimations(e,t-4)}writeMdx(e){e.writeUint32(this.getByteLength()),this.writeAnimations(e)}readMdl(e){for(let t of e.readBlock())if("Translation"===t)this.readAnimation(e,"KTAT");else if("Rotation"===t)this.readAnimation(e,"KTAR");else{if("Scaling"!==t)throw new Error(`Unknown token in TextureAnimation: "${t}"`);this.readAnimation(e,"KTAS")}}writeMdl(e){e.startBlock("TVertexAnim "),this.writeAnimation(e,"KTAT"),this.writeAnimation(e,"KTAR"),this.writeAnimation(e,"KTAS"),e.endBlock()}getByteLength(){return 4+super.getByteLength()}}t.default=r},2390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.index=0,this.ident=0,this.indentSpaces=4,this.precision=1e6,this.buffer=e||""}clear(){this.buffer="",this.index=0,this.ident=0}readToken(){let e=this.buffer,t=e.length,n=!1,a=!1,r="";for(;this.index<t;){let t=e[this.index++];if(n)"\n"===t&&(n=!1);else if(a)if("\\"===t)r+=t+e[this.index++];else if("\n"===t)r+="\\n";else if("\r"===t)r+="\\r";else{if('"'===t)return r;r+=t}else if(" "===t||","===t||"\t"===t||"\n"===t||":"===t||"\r"===t){if(r.length)return r}else{if("{"===t||"}"===t)return r.length?(this.index--,r):t;if("/"===t&&"/"===e[this.index]){if(r.length)return this.index--,r;n=!0}else if('"'===t){if(r.length)return this.index--,r;a=!0}else r+=t}}}read(){let e=this.readToken();if(void 0===e)throw new Error("End of stream reached prematurely");return e}peek(){let e=this.index,t=this.read();return this.index=e,t}readInt(){return parseInt(this.read())}readFloat(){return parseFloat(this.read())}readVector(e){this.read();for(let t=0,n=e.length;t<n;t++)e[t]=this.readFloat();return this.read(),e}readVectorsBlock(e,t){this.read();for(let n=0,a=e.length;n<a;n+=t)this.readVector(e.subarray(n,n+t));return this.read(),e}readColor(e){return this.read(),e[2]=this.readFloat(),e[1]=this.readFloat(),e[0]=this.readFloat(),this.read(),e}*readBlock(){this.read();let e=this.read();for(;"}"!==e;)yield e,e=this.read()}writeLine(e){this.buffer+=`${" ".repeat(this.ident*this.indentSpaces)}${e}\n`}writeFlag(e){this.writeLine(`${e},`)}writeFlagAttrib(e,t){this.writeLine(`${e} ${t},`)}writeNumberAttrib(e,t){this.writeLine(`${e} ${this.floatDecimals(t)},`)}writeStringAttrib(e,t){this.writeLine(`${e} "${t}",`)}writeVectorAttrib(e,t){this.writeLine(`${e} { ${this.floatArrayDecimals(t)} },`)}writeColor(e,t){let n=this.floatDecimals(t[0]),a=this.floatDecimals(t[1]),r=this.floatDecimals(t[2]);this.writeLine(`${e} { ${r}, ${a}, ${n} },`)}writeVector(e){this.writeLine(`{ ${this.floatArrayDecimals(e)} },`)}writeVectorArrayBlock(e,t,n){this.startBlock(e,t.length/n);for(let e=0,a=t.length;e<a;e+=n)this.writeVector(t.subarray(e,e+n));this.endBlock()}startBlock(e,...t){t.length&&(e=`${e} ${t.join(" ")}`),this.writeLine(`${e} {`),this.ident+=1}startObjectBlock(e,t){this.writeLine(`${e} "${t.replace(/"/g,'\\"')}" {`),this.ident+=1}endBlock(){this.ident-=1,this.writeLine("}")}endBlockComma(){this.ident-=1,this.writeLine("},")}indent(){this.ident+=1}unindent(){this.ident-=1}floatDecimals(e){return""+Math.trunc(e*this.precision)/this.precision}floatArrayDecimals(e){if(e instanceof Float32Array){let t=[];for(let n=0,a=e.length;n<a;n++)t[n]=this.floatDecimals(e[n]);return t.join(", ")}return e.join(", ")}}},9015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.tag=n,this.chunk=e.readUint8Array(new Uint8Array(t))}writeMdx(e){e.writeBinary(this.tag),e.writeUint32(this.chunk.byteLength),e.writeUint8Array(this.chunk)}getByteLength(){return 8+this.chunk.byteLength}}},9433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4293),r=n(6269),i=n(5860),l=n(4373),s=n(8931),o=n(2586),u=n(6480),c=n(631),d=n(708);t.default=class{constructor(){this.readonly=!1,this.headerOffset=0,this.sectorSize=4096,this.c=new o.default,this.hashTable=new c.default(this.c),this.blockTable=new l.default(this.c),this.files=[]}load(e,t=!1){let n=a.bytesOf(e);this.readonly=t;let r=d.searchHeader(n);if(-1===r)throw new Error("No MPQ header");let l=new Uint32Array(n.buffer,r,8),s=l[3],o=i.numberToUint32(l[4]+r),c=i.numberToUint32(l[5]+r),h=l[6],f=l[7];f>h&&(f=h),this.headerOffset=r,this.sectorSize=512*(1<<(s>>>16)),this.hashTable.load(n.slice(o,o+16*h)),this.blockTable.load(n.slice(c,c+16*f)),this.files.length=0;for(let e of this.hashTable.entries){let t=e.blockIndex;t<this.blockTable.entries.length&&(this.files[t]=new u.default(this,e,this.blockTable.entries[t],n,null))}let _=this.get("(listfile)");if(_){let e=_.text();if(e)for(let t of e.split("\r\n"))this.get(t)}}save(){if(this.readonly)return null;let e=32;this.delete("(attributes)"),this.saveMemory(),this.set("(listfile)",this.getFileNames().join("\r\n"));let t=e;for(let e of this.files)if(e){if(!e.offsetChanged(t))return null;e.encode(),t+=e.block.compressedSize}let n=this.hashTable,a=this.blockTable,r=n.entries.length,i=a.entries.length,l=t-e,o=e+l+16*r+16*i,u=e+l,c=u+16*r,d=new Uint8Array(o),h=new Uint32Array(d.buffer,0,8);h[0]=s.MAGIC,h[1]=e,h[2]=o,h[3]=Math.log2(this.sectorSize/512)<<16,h[4]=u,h[5]=c,h[6]=r,h[7]=i,t=e;for(let e of this.files)e&&(e.rawBuffer&&d.set(e.rawBuffer,t),t+=e.block.compressedSize);return n.save(d.subarray(t,t+16*n.entries.length)),t+=16*n.entries.length,a.save(d.subarray(t,t+16*a.entries.length)),d}saveMemory(){if(this.readonly)return 0;let e=this.blockTable.entries,t=this.hashTable.entries,n=e.length,a=0;for(;n--;){let r=e[n];if(0===r.normalSize)this.removeBlock(n),a+=r.compressedSize;else{let e=!1;for(let a of t)if(a.blockIndex===n){e=!0;break}e||(this.removeBlock(n),a+=r.compressedSize)}}return a}removeBlock(e){for(let t of this.hashTable.entries)t.blockIndex<s.HASH_ENTRY_DELETED&&t.blockIndex>e&&(t.blockIndex-=1);this.blockTable.entries.splice(e,1)}getFileNames(){let e=[];for(let t of this.files)t&&""!==t.name&&e.push(t.name);return e}countUnresolved(){let e=0;for(let t of this.files)t.nameResolved||e++;return e}applyListfile(e){for(let t of e)this.get(t)}set(e,t){if(this.readonly)return!1;let n=a.bytesOf(t),r=this.get(e);if(r)r.set(n);else{let t=this.blockTable.entries.length,a=this.hashTable.add(e,t);if(!a)return!1;let i=this.blockTable.add(n);r=new u.default(this,a,i,null,n),r.name=e,r.nameResolved=!0,this.files[t]=r}return!0}get(e){let t=this.hashTable.get(e);if(t){let n=t.blockIndex;if(n<s.HASH_ENTRY_DELETED){let t=this.files[n];if(t)return t.name=e,t.nameResolved=!0,t}}return null}has(e){return!!this.get(e)}delete(e){if(this.readonly)return!1;let t=this.get(e);return!!t&&(t.delete(),!0)}rename(e,t){if(this.readonly)return!1;let n=this.get(e);return!!n&&(n.rename(t),!0)}resizeHashtable(e){if(this.readonly)return!1;e=Math.max(4,r.powerOfTwo(e));let t=this.files;if(t.length>e)return!1;for(let e of t)if(!e.nameResolved)return!1;let n=this.hashTable,a=n.entries,i=a.slice();n.clear(),n.addEmpties(e);for(let e of i)if(e.blockIndex!==s.HASH_ENTRY_EMPTY){let r=t[e.blockIndex];a[n.getInsertionIndex(r.name)].copy(e)}return!0}}},9317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.offset=0,this.compressedSize=0,this.normalSize=0,this.flags=0}load(e){this.offset=e[0],this.compressedSize=e[1],this.normalSize=e[2],this.flags=e[3]}save(e){e[0]=this.offset,e[1]=this.compressedSize,e[2]=this.normalSize,e[3]=this.flags}}},4373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9317),r=n(8931);t.default=class{constructor(e){this.c=e,this.entries=[]}add(e){let t=new a.default;return t.normalSize=e.byteLength,this.entries.push(t),t}clear(){this.entries.length=0}addEmpties(e){for(let t=0;t<e;t++)this.entries.push(new a.default)}load(e){let t=e.byteLength/16,n=new Uint32Array(this.c.decryptBlock(e,r.BLOCK_TABLE_KEY).buffer),a=0;this.clear(),this.addEmpties(t);for(let e of this.entries)e.load(n.subarray(a,a+4)),a+=4}save(e){let t=new Uint32Array(4*this.entries.length),n=0;for(let e of this.entries)e.save(t.subarray(n,n+4)),n+=4;let a=new Uint8Array(t.buffer);this.c.encryptBlock(a,r.BLOCK_TABLE_KEY),e.set(a)}}},8931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPRESSION_ADPCM_STEREO=t.COMPRESSION_ADPCM_MONO=t.COMPRESSION_BZIP2=t.COMPRESSION_IMPLODE=t.COMPRESSION_DEFLATE=t.COMPRESSION_HUFFMAN=t.FILE_EXISTS=t.FILE_SECTOR_CRC=t.FILE_DELETE_MARKER=t.FILE_SINGLE_UNIT=t.FILE_PATCH_FILE=t.FILE_OFFSET_ADJUSTED_KEY=t.FILE_ENCRYPTED=t.FILE_COMPRESSED=t.FILE_IMPLODE=t.BLOCK_TABLE_KEY=t.HASH_ENTRY_EMPTY=t.HASH_ENTRY_DELETED=t.HASH_FILE_KEY=t.HASH_NAME_B=t.HASH_NAME_A=t.HASH_TABLE_INDEX=t.HASH_TABLE_KEY=t.MAGIC=void 0,t.MAGIC=441536589,t.HASH_TABLE_KEY=3283040112,t.HASH_TABLE_INDEX=0,t.HASH_NAME_A=1,t.HASH_NAME_B=2,t.HASH_FILE_KEY=3,t.HASH_ENTRY_DELETED=4294967294,t.HASH_ENTRY_EMPTY=4294967295,t.BLOCK_TABLE_KEY=3968054179,t.FILE_IMPLODE=256,t.FILE_COMPRESSED=512,t.FILE_ENCRYPTED=65536,t.FILE_OFFSET_ADJUSTED_KEY=131072,t.FILE_PATCH_FILE=1048576,t.FILE_SINGLE_UNIT=16777216,t.FILE_DELETE_MARKER=33554432,t.FILE_SECTOR_CRC=67108864,t.FILE_EXISTS=2147483648,t.COMPRESSION_HUFFMAN=1,t.COMPRESSION_DEFLATE=2,t.COMPRESSION_IMPLODE=8,t.COMPRESSION_BZIP2=16,t.COMPRESSION_ADPCM_MONO=64,t.COMPRESSION_ADPCM_STEREO=128},2586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8931),r=new Uint8Array(4),i=new Uint32Array(r.buffer);t.default=class{constructor(){this.cryptTable=new Uint32Array(1280);let e=1048577,t=0,n=0;for(let a=0;a<256;a++)for(let r=a,i=0;i<5;i+=1,r+=256)e=(125*e+3)%2796203,t=(65535&e)<<16,e=(125*e+3)%2796203,n=65535&e,this.cryptTable[r]=t|n}hash(e,t){let n=this.cryptTable,a=2146271213,r=4008636142;e=e.toUpperCase();for(let i=0;i<e.length;i++){let l=e.charCodeAt(i);a=n[(t<<8)+l]^a+r,r=l+a+r+(r<<5)+3}return a>>>0}decryptBlock(e,t){let n=this.cryptTable,a=4008636142,l=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(let s=0,o=e.byteLength>>>2;s<o;s++)a+=n[1024+(255&t)],r[0]=l[4*s],r[1]=l[4*s+1],r[2]=l[4*s+2],r[3]=l[4*s+3],i[0]^=t+a,t=286331153+(~t<<21)|t>>>11,a=i[0]+a+(a<<5)+3,l[4*s]=r[0],l[4*s+1]=r[1],l[4*s+2]=r[2],l[4*s+3]=r[3];return e}encryptBlock(e,t){let n=this.cryptTable,a=4008636142,l=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(let s=0,o=e.byteLength>>>2;s<o;s++){a+=n[1024+(255&t)],r[0]=l[4*s],r[1]=l[4*s+1],r[2]=l[4*s+2],r[3]=l[4*s+3];let e=i[0];i[0]^=t+a,t=286331153+(~t<<21)|t>>>11,a=e+a+(a<<5)+3,l[4*s]=r[0],l[4*s+1]=r[1],l[4*s+2]=r[2],l[4*s+3]=r[3]}return e}computeFileKey(e,t){let n=e.lastIndexOf("\\"),r=e.substring(n+1),i=this.hash(r,a.HASH_FILE_KEY);return t.flags&a.FILE_OFFSET_ADJUSTED_KEY&&(i=i+t.offset^t.normalSize),i}}},3221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.ctype=0,this.outputPos=0,this.dsize_bits=0,this.dsize_mask=0,this.bit_buff=0,this.extra_bits=0,this.in_pos=0,this.out_buff=[],this.in_buff=e}}const a=new Uint8Array([2,4,4,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]),r=new Uint8Array([3,13,5,25,9,17,1,62,30,46,14,54,22,38,6,58,26,42,10,50,18,34,66,2,124,60,92,28,108,44,76,12,116,52,84,20,100,36,68,4,120,56,88,24,104,40,72,8,240,112,176,48,208,80,144,16,224,96,160,32,192,64,128,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8]),l=new Uint16Array([0,1,2,3,4,5,6,7,8,10,14,22,38,70,134,262]),s=new Uint8Array([3,2,3,3,4,4,4,5,5,5,5,6,6,6,7,7]),o=new Uint8Array([5,3,1,6,10,2,12,20,4,24,8,48,16,32,64,0]),u=new Uint8Array([11,12,12,12,12,12,12,12,12,8,7,12,12,7,12,12,12,12,12,12,12,12,12,12,12,12,13,12,12,12,12,12,4,10,8,12,10,12,10,8,7,7,8,9,7,6,7,8,7,6,7,7,7,7,8,7,7,8,8,12,11,7,9,11,12,6,7,6,6,5,7,8,8,6,11,9,6,7,6,6,7,11,6,6,6,7,9,8,9,9,11,8,11,9,12,8,12,5,6,6,6,5,6,6,6,5,11,7,5,6,5,5,6,10,5,5,5,5,8,7,8,8,10,11,11,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,12,13,13,13,12,13,13,13,12,13,13,13,13,12,13,13,13,12,12,12,13,13,13,13,13,13,13,13,13,13,13]),c=new Uint16Array([1168,4064,2016,3040,992,3552,1504,2528,480,184,98,3808,1760,34,2784,736,3296,1248,2272,224,3936,1888,2912,864,3424,1376,4672,2400,352,3680,1632,2656,15,592,56,608,80,3168,912,216,66,2,88,432,124,41,60,152,92,9,28,108,44,76,24,12,116,232,104,1120,144,52,176,1808,2144,49,84,17,33,23,20,168,40,1,784,304,62,100,30,46,36,1296,14,54,22,68,48,200,464,208,272,72,1552,336,96,136,4e3,7,38,6,58,27,26,42,10,11,528,4,19,50,3,29,18,400,13,21,5,25,8,120,240,112,656,1040,16,1952,2976,928,576,7232,3136,5184,1088,6208,2112,4160,64,8064,3968,6016,1920,7040,2944,4992,896,7552,3456,5504,1408,6528,2432,4480,384,7808,3712,5760,1664,6784,2688,4736,640,7296,3200,5248,1152,6272,2176,4224,128,7936,3840,5888,1792,6912,2816,4864,3488,1440,2464,416,3744,1696,2720,672,3232,1184,2208,160,3872,1824,2848,800,3360,1312,2336,288,3616,1568,2592,544,3104,1056,2080,32,4032,1984,3008,960,3520,1472,2496,448,3776,1728,2752,704,3264,1216,2240,192,3904,1856,2880,832,768,3392,7424,3328,5376,1344,1280,6400,2304,2368,4352,256,7680,3584,320,5632,1536,6656,3648,1600,2624,2560,4608,512,7168,3072,5120,1024,6144,2048,4096,0]);let d=!1;const h=new Uint8Array(256),f=new Uint8Array(256);let _=!1;const m=new Uint8Array(256),p=new Uint8Array(256),g=new Uint8Array(128),b=new Uint8Array(256);function w(e,t,n){for(let a=0,r=t.length;a<r;a++){let r=1<<n[a];for(let n=t[a];n<256;n+=r)e[n]=a}}function v(e,t){return t<=e.extra_bits?(e.extra_bits-=t,e.bit_buff>>=t,0):(e.bit_buff>>=e.extra_bits,e.in_pos===e.in_buff.byteLength?1:(e.bit_buff|=e.in_buff[e.in_pos++]<<8,e.bit_buff>>=t-e.extra_bits,e.extra_bits=e.extra_bits-t+8,0))}function A(e){if(1&e.bit_buff){if(v(e,1))return 774;let t,n=f[255&e.bit_buff];if(v(e,s[n]))return 774;if(0!=(t=i[n])){let a=e.bit_buff&(1<<t)-1;if(v(e,t)&&n+a!=270)return 774;n=l[n]+a}return n+256}if(v(e,1))return 774;if(0==e.ctype){let t=255&e.bit_buff;return v(e,8)?774:t}let t;if(255&e.bit_buff){if(t=m[255&e.bit_buff],255==t)if(63&e.bit_buff){if(v(e,4))return 774;t=p[255&e.bit_buff]}else{if(v(e,6))return 774;t=g[127&e.bit_buff]}}else{if(v(e,8))return 774;t=b[255&e.bit_buff]}return v(e,u[t])?774:t}function y(e,t){let n,r=h[255&e.bit_buff];if(v(e,a[r]))return 0;if(2==t){if(n=r<<2|3&e.bit_buff,v(e,2))return 0}else if(n=r<<e.dsize_bits|e.bit_buff&e.dsize_mask,v(e,e.dsize_bits))return 0;return n+1}t.default=function(e){let t=new n(e);if(t.in_buff.byteLength<=4)throw new Error("Bad data");if(t.ctype=t.in_buff[0],t.dsize_bits=t.in_buff[1],t.bit_buff=t.in_buff[2],t.extra_bits=0,t.in_pos=3,4>t.dsize_bits||t.dsize_bits>6)throw new Error("Invalid dictionary size");if(t.dsize_mask=65535>>16-t.dsize_bits,0!==t.ctype){if(1!==t.ctype)throw new Error("Invalid mode");_||(!function(){let e,t,n=255;for(let a=255;n>=0;n--,a--){let r=a,i=u[r];if(i<=8){t=1<<i,e=c[n];do{m[e]=a,e+=t}while(e<256)}else if(0!=(e=255&c[n]))if(m[e]=255,63&c[n]){i-=4,u[r]=i,t=1<<i,e=c[n]>>4;do{p[e]=a,e+=t}while(e<256)}else{i-=6,u[r]=i,t=1<<i,e=c[n]>>6;do{g[e]=a,e+=t}while(e<128)}else{i-=8,u[r]=i,t=1<<i,e=c[n]>>8;do{b[e]=a,e+=t}while(e<256)}}}(),_=!0)}if(d||(w(f,o,s),w(h,r,a),d=!0),774===function(e){let t;for(;(t=A(e))<773;)if(t>=256){let n,a=t-254;if(0==(n=y(e,a)))return 774;let r=e.outputPos,i=r-n;for(e.outputPos+=a;a-- >0;)e.out_buff[r++]=e.out_buff[i++]}else e.out_buff[e.outputPos++]=t;return t}(t))throw new Error("Error while expanding");return new Uint8Array(t.out_buff)}},6480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9591),r=n(9048),i=n(8931),l=n(3221),s=n(708);t.default=class{constructor(e,t,n,a,r){this.rawBuffer=null,this.buffer=null;let i=e.headerOffset;this.archive=e,this.c=e.c,this.name=`File${`${t.blockIndex}`.padStart(8,"0")}`,this.nameResolved=!1,this.hash=t,this.block=n,a&&(this.rawBuffer=a.slice(i+n.offset,i+n.offset+n.compressedSize)),r&&(this.buffer=r)}bytes(){return null===this.buffer&&this.decode(),this.buffer}arrayBuffer(){return this.bytes().buffer}text(){return r.decodeUtf8(this.bytes())}set(e){if(this.archive.readonly)return!1;let t=this.hash,n=this.block;return t.locale=0,t.platform=0,n.compressedSize=0,n.normalSize=e.byteLength,n.flags=0,this.buffer=e,this.rawBuffer=null,!0}delete(){if(this.archive.readonly)return!1;let e=this.archive,t=this.hash,n=t.blockIndex;t.delete();for(let t of e.hashTable.entries)t.blockIndex<i.HASH_ENTRY_DELETED&&t.blockIndex>n&&(t.blockIndex-=1);return e.blockTable.entries.splice(n,1),e.files.splice(n,1),!0}rename(e){if(this.archive.readonly)return!1;let t=this.hash,n=t.locale,a=t.platform,r=t.blockIndex;t.delete();let i=this.archive.hashTable.add(e,r);return i.locale=n,i.platform=a,this.name=e,this.nameResolved=!0,this.hash=i,!0}decode(){if(!this.rawBuffer)throw new Error(`File ${this.name}: Nothing to decode`);let e=this.archive,t=this.block,n=e.c,a=n.computeFileKey(this.name,t),r=this.rawBuffer,s=t.flags;if(s===i.FILE_EXISTS)this.buffer=r.slice(0,t.normalSize);else if(s&i.FILE_SINGLE_UNIT){let e;e=s&i.FILE_ENCRYPTED?n.decryptBlock(r.slice(0,t.compressedSize),a):r.subarray(0,t.compressedSize),e=s&i.FILE_COMPRESSED?this.decompressSector(e,t.normalSize):e.slice(),this.buffer=e}else{let o=Math.ceil(t.normalSize/e.sectorSize),u=new Uint8Array(t.normalSize),c=new Uint32Array(r.buffer,0,o+1);s&i.FILE_ENCRYPTED&&(c=n.decryptBlock(c.slice(),a-1));let d=c[0],h=c[1],f=0;for(let _=0;_<o;_++){let m;if(m=s&i.FILE_ENCRYPTED?n.decryptBlock(r.slice(d,h),a+_):r.subarray(d,h),s&i.FILE_COMPRESSED){let n=e.sectorSize;t.normalSize-f<n&&(n=t.normalSize-f),m=this.decompressSector(m,n)}s&i.FILE_IMPLODE&&(m=l.default(m)),u.set(m,f),f+=m.byteLength,_<o&&(d=h,h=c[_+2])}this.buffer=u}e.readonly&&(this.rawBuffer=null)}decompressSector(e,t){if(e.byteLength===t)return e;{let t=e[0];if(t&i.COMPRESSION_BZIP2)throw new Error(`File ${this.name}: compression type 'bzip2' not supported`);if(t&i.COMPRESSION_IMPLODE)try{e=l.default(e.subarray(1))}catch(e){throw new Error(`File ${this.name}: failed to decompress with 'explode': ${e}`)}if(t&i.COMPRESSION_DEFLATE)try{e=a.inflate(e.subarray(1))}catch(e){throw new Error(`File ${this.name}: failed to decompress with 'zlib': ${e}`)}if(t&i.COMPRESSION_HUFFMAN)throw new Error(`File ${this.name}: compression type 'huffman' not supported`);if(t&i.COMPRESSION_ADPCM_STEREO)throw new Error(`File ${this.name}: compression type 'adpcm stereo' not supported`);if(t&i.COMPRESSION_ADPCM_MONO)throw new Error(`File ${this.name}: compression type 'adpcm mono' not supported`);return e}}encode(){if(null!==this.buffer&&null===this.rawBuffer){let e=this.buffer;if(s.isArchive(e))this.rawBuffer=this.buffer,this.block.compressedSize=this.buffer.byteLength,this.block.flags=i.FILE_EXISTS;else{let t=this.archive.sectorSize,n=Math.ceil(e.byteLength/t),r=new Uint32Array(n+1),l=r.byteLength,s=[],o=[];r[0]=l;for(let i=0;i<n;i++){let n=i*t,u=e.subarray(n,n+t),c=u.byteLength,d=a.deflate(u),h=!1;d.byteLength+1<c&&(u=d,c=d.byteLength+1,h=!0),l+=c,r[i+1]=l,s[i]=u,o[i]=h}if(l<e.byteLength){let e=new Uint8Array(l);e.set(new Uint8Array(r.buffer)),l=r.byteLength;for(let t=0;t<n;t++){o[t]&&(e[l]=2,l+=1);let n=s[t];e.set(n,l),l+=n.byteLength}this.rawBuffer=e,this.block.compressedSize=e.byteLength,this.block.flags=(i.FILE_EXISTS|i.FILE_COMPRESSED)>>>0}else this.rawBuffer=this.buffer,this.block.compressedSize=this.buffer.byteLength,this.block.flags=i.FILE_EXISTS}}}reEncrypt(e){if(!this.rawBuffer)return!1;let t=this.archive,n=this.block,a=t.c,r=this.rawBuffer,l=n.flags,s=a.computeFileKey(this.name,n);n.offset=e;let o=a.computeFileKey(this.name,n);if(l&i.FILE_SINGLE_UNIT)a.decryptBlock(r,s),a.encryptBlock(r,o);else{let e=Math.ceil(n.normalSize/t.sectorSize),i=new Uint32Array(r.buffer,0,e+1);a.decryptBlock(i,s-1);let l=i[0],u=i[1];for(let t=0;t<e;t++){let n=r.subarray(l,u);a.decryptBlock(n,s+t),a.encryptBlock(n,o+t),t<e&&(l=u,u=i[t+2])}a.encryptBlock(i,o-1)}return!0}offsetChanged(e){let t=this.block;return t.offset!==e&&t.flags&i.FILE_OFFSET_ADJUSTED_KEY?!!this.nameResolved&&this.reEncrypt(e):(t.offset=e,!0)}}},5768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8931);t.default=class{constructor(){this.nameA=4294967295,this.nameB=4294967295,this.locale=65535,this.platform=65535,this.blockIndex=a.HASH_ENTRY_EMPTY}load(e){let t=e[2];this.nameA=e[0],this.nameB=e[1],this.locale=65535&t,this.platform=t>>>16,this.blockIndex=e[3]}copy(e){this.nameA=e.nameA,this.nameB=e.nameB,this.locale=e.locale,this.platform=e.platform,this.blockIndex=e.blockIndex}save(e){e[0]=this.nameA,e[1]=this.nameB,e[2]=this.locale<<16|this.platform,e[3]=this.blockIndex}delete(){this.nameA=4294967295,this.nameB=4294967295,this.locale=65535,this.platform=65535,this.blockIndex=a.HASH_ENTRY_DELETED}}},631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5768),r=n(8931);t.default=class{constructor(e){this.c=e,this.entries=[],this.addEmpties(4)}clear(){this.entries.length=0}addEmpties(e){for(let t=0;t<e;t++)this.entries.push(new a.default)}getInsertionIndex(e){let t=this.entries,n=this.c.hash(e,r.HASH_TABLE_INDEX)&t.length-1;for(let e=0,a=t.length;e<a;e++){let r=(e+n)%a;if(65535===t[r].platform)return r}return-1}add(e,t){let n=this.getInsertionIndex(e);if(-1!==n){let a=this.entries[n];return a.nameA=this.c.hash(e,r.HASH_NAME_A),a.nameB=this.c.hash(e,r.HASH_NAME_B),a.locale=0,a.platform=0,a.blockIndex=t,a}}load(e){let t=e.byteLength/16,n=new Uint32Array(this.c.decryptBlock(e,r.HASH_TABLE_KEY).buffer),a=0;this.clear(),this.addEmpties(t);for(let e of this.entries)e.load(n.subarray(a,a+4)),a+=4}save(e){let t=new Uint32Array(4*this.entries.length),n=0;for(let e of this.entries)e.save(t.subarray(n,n+4)),n+=4;let a=new Uint8Array(t.buffer);this.c.encryptBlock(a,r.HASH_TABLE_KEY),e.set(a)}get(e){let t=this.c,n=this.entries,a=t.hash(e,r.HASH_TABLE_INDEX)&n.length-1,i=t.hash(e,r.HASH_NAME_A),l=t.hash(e,r.HASH_NAME_B);for(let e=0,t=n.length;e<t;e++){let r=n[(e+a)%t];if(i===r.nameA&&l===r.nameB)return r;if(4294967295===r.blockIndex)return null}return null}}},4288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9433),r=n(2586),i=n(631),l=n(5768),s=n(4373),o=n(9317),u=n(6480),c=n(708);t.default={Archive:a.default,Crypto:r.default,HashTable:i.default,Hash:l.default,BlockTable:s.default,Block:o.default,File:u.default,isArchive:c.isArchive}},708:(e,t)=>{"use strict";function n(e){let t=-1;for(let n=0,a=Math.ceil(e.byteLength/512);n<a;n++){let a=512*n;77===e[a]&&80===e[a+1]&&81===e[a+2]&&26===e[a+3]&&(t=a)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isArchive=t.searchHeader=void 0,t.searchHeader=n,t.isArchive=function(e){return 72===e[0]&&77===e[1]&&51===e[2]&&87===e[3]||-1!==n(e)}},9631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.rows=[]}load(e){if(!e.startsWith("ID"))throw new Error("WrongMagicNumber");let t=this.rows,n=0,a=0;for(let r of e.split("\n"))if("B"!==r[0])for(let e of r.split(";")){let r,i=e[0],l=e.substring(1).trim();"X"===i?n=parseInt(l,10)-1:"Y"===i?a=parseInt(l,10)-1:"K"===i&&(t[a]||(t[a]=[]),'"'===l[0]?r=l.substring(1,l.length-1):"TRUE"===l?r=!0:"FALSE"===l?r=!1:(r=parseFloat(l),isNaN(r)&&(r=l)),t[a][n]=r)}}save(){let e=this.rows,t=e.length,n=[],a=0;for(let r=0;r<t;r++){let t=e[r],i=t.length;i>a&&(a=i);let l=!0;for(let e=0;e<i;e++){let a=t[e];if(void 0!==a){let t;t="string"==typeof a?`"${a}"`:"boolean"==typeof a?a?"TRUE":"FALSE":`${a}`,l?(l=!1,n.push(`C;X${e+1};Y${r+1};K${t}`)):n.push(`C;X${e+1};K${t}`)}}}return`ID;P\r\nB;X${a};Y${t}\r\n${n.join("\r\n")}\r\nE`}}},5788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9631);t.default={File:a.default}},695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9508),r=n(4293);t.default=class{constructor(){this.width=0,this.height=0,this.data=null}load(e){let t=r.bytesOf(e),n=new a.default;n.load(t);let i=n.header;this.width=i.width,this.height=i.height,this.data=new ImageData(i.width,i.height),n.getImageData(this.data)}}},3596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(695),r=n(4163);t.default={Image:a.default,isTga:r.default}},4163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2885);t.default=function(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),!!(e instanceof Uint8Array&&a.isStringInBytes(e,"TRUEVISION-XFILE.\0",e.length-18))}},3990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2099);t.default=class{constructor(){this.id="\0\0\0\0",this.variation=0,this.location=new Float32Array(3),this.angle=0,this.scale=new Float32Array([1,1,1]),this.skin="\0\0\0\0",this.flags=0,this.life=0,this.itemTable=-1,this.itemSets=[],this.editorId=0,this.u1=new Uint8Array(8)}load(e,t,n){if(this.id=e.readBinary(4),this.variation=e.readInt32(),e.readFloat32Array(this.location),this.angle=e.readFloat32(),e.readFloat32Array(this.scale),n>131&&(this.skin=e.readBinary(4)),this.flags=e.readUint8(),this.life=e.readUint8(),t>7){this.itemTable=e.readUint32();for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.load(e),this.itemSets.push(t)}}this.editorId=e.readInt32()}save(e,t,n){if(e.writeBinary(this.id),e.writeInt32(this.variation),e.writeFloat32Array(this.location),e.writeFloat32(this.angle),e.writeFloat32Array(this.scale),n>131&&e.writeBinary(this.skin),e.writeUint8(this.flags),e.writeUint8(this.life),t>7){e.writeUint32(this.itemTable),e.writeUint32(this.itemSets.length);for(let t of this.itemSets)t.save(e)}e.writeInt32(this.editorId)}getByteLength(e,t){let n=42;if(t>131&&(n+=4),e>7){n+=8;for(let e of this.itemSets)n+=e.getByteLength()}return n}}},2588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(3990),i=n(5356);t.default=class{constructor(){this.version=0,this.u1=new Uint8Array(4),this.doodads=[],this.u2=new Uint8Array(4),this.terrainDoodads=[]}load(e,t){let n=new a.default(e);if("W3do"!==n.readBinary(4))return!1;this.version=n.readInt32(),n.readUint8Array(this.u1);for(let e=0,a=n.readInt32();e<a;e++){let e=new r.default;e.load(n,this.version,t),this.doodads.push(e)}n.readUint8Array(this.u2);for(let e=0,t=n.readInt32();e<t;e++){let e=new i.default;e.load(n,this.version),this.terrainDoodads.push(e)}}save(e){let t=new a.default(new ArrayBuffer(this.getByteLength(e)));t.writeBinary("W3do"),t.writeInt32(this.version),t.writeUint8Array(this.u1),t.writeUint32(this.doodads.length);for(let n of this.doodads)n.save(t,this.version,e);t.writeUint8Array(this.u2),t.writeUint32(this.terrainDoodads.length);for(let e of this.terrainDoodads)e.save(t,this.version);return t.uint8array}getByteLength(e){let t=24+16*this.terrainDoodads.length;for(let n of this.doodads)t+=n.getByteLength(this.version,e);return t}}},8953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2588),r=n(3990),i=n(2099),l=n(4600),s=n(5356);t.default={File:a.default,Doodad:r.default,RandomItemSet:i.default,RandomItem:l.default,TerrainDoodad:s.default}},4600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.readBinary(4),this.chance=e.readInt32()}save(e){e.writeBinary(this.id),e.writeInt32(this.chance)}}},2099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4600);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.load(e),this.items.push(t)}}save(e){e.writeUint32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},5356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.u1=0,this.location=new Uint32Array(2)}load(e,t){this.id=e.readBinary(4),this.u1=e.readUint32(),e.readUint32Array(this.location)}save(e,t){e.writeBinary(this.id),e.writeUint32(this.u1),e.writeUint32Array(this.location)}}},2438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(2273);t.default=class{constructor(){this.version=1,this.entries=new Map}load(e){let t=new a.default(e);this.version=t.readUint32();for(let e=0,n=t.readUint32();e<n;e++){let e=new r.default;e.load(t),e.isCustom?this.entries.set(e.path,e):this.entries.set(`war3mapimported\\${e.path}`,e)}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeUint32(this.version),e.writeUint32(this.entries.size);for(let t of this.entries.values())t.save(e);return e.uint8array}getByteLength(){let e=8;for(let t of this.entries.values())e+=t.getByteLength();return e}set(e){if(!this.entries.has(e)){let t=new r.default;return t.isCustom=10,t.path=e,this.entries.set(e,t),!0}return!1}has(e){return this.entries.has(e)}delete(e){return this.entries.delete(e)}rename(e,t){let n=this.entries.get(e);return!!n&&(n.isCustom=10,n.path=t,!0)}}},2273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.isCustom=0,this.path=""}load(e){this.isCustom=e.readUint8(),this.path=e.readNull()}save(e){e.writeUint8(this.isCustom),e.writeNull(this.path)}getByteLength(){return 2+a.byteLengthUtf8(this.path)}}},2729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2438),r=n(2273);t.default={File:a.default,Import:r.default}},2088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3019),r=n(8953),i=n(2729),l=n(1792),s=n(3158),o=n(9260),u=n(766),c=n(8045),d=n(1179),h=n(2004),f=n(6932),_=n(8765),m=n(4021),p=n(2117),g=n(6891),b=n(7523),w=n(3270),v=n(2408),A=n(5545);t.default={Map:a.default,doo:r.default,imp:i.default,mmp:l.default,shd:s.default,w3c:o.default,w3d:u.default,w3e:c.default,w3i:d.default,w3o:h.default,w3r:f.default,w3s:_.default,w3u:m.default,wct:p.default,wpm:g.default,wtg:b.default,wts:w.default,unitsdoo:v.default,w3f:A.default}},3019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(9433),i=n(2438),l=n(9769),s=n(3042),o=n(5474),u=n(4996),c=n(5629),d=n(2647);t.default=class{constructor(){this.u1=0,this.name="",this.flags=0,this.maxPlayers=0,this.archive=new r.default,this.imports=new i.default,this.readonly=!1}load(e,t=!1){let n=new a.default(e);"HM3W"===n.readBinary(4)&&(this.u1=n.readUint32(),this.name=n.readNull(),this.flags=n.readUint32(),this.maxPlayers=n.readUint32()),this.readonly=t,this.archive.load(e,t),this.readImports()}save(){if(this.readonly)return null;this.setImportsFile();let e=this.archive.save();if(!e)return null;let t=this.getMapInformation();if(!t||t.getBuildVersion()<131){let t=new Uint8Array(512+e.byteLength),n=new a.default(t);return n.writeBinary("HM3W"),n.writeUint32(this.u1),n.writeNull(this.name),n.writeUint32(this.flags),n.writeUint32(this.maxPlayers),t.set(e,512),t}return e}getFileNames(){return this.archive.getFileNames()}getImportNames(){let e=[];for(let t of this.imports.entries.values()){let n=t.isCustom;10===n||13===n?e.push(t.path):e.push(`war3mapImported\\${t.path}`)}return e}setImportsFile(){return!this.readonly&&(this.imports.entries.size>0&&this.set("war3map.imp",this.imports.save()))}import(e,t){return!this.readonly&&(!!this.archive.set(e,t)&&(this.imports.set(e),!0))}set(e,t){return!this.readonly&&this.archive.set(e,t)}get(e){return this.archive.get(e)}getScriptFile(){return this.get("war3map.j")||this.get("scripts\\war3map.j")||this.get("war3map.lua")||this.get("scripts\\war3map.lua")}has(e){return this.archive.has(e)}delete(e){return!this.readonly&&(this.imports.delete(e),this.archive.delete(e))}rename(e,t){return!this.readonly&&(!!this.archive.rename(e,t)&&(this.imports.rename(e,t),!0))}getMapInformation(){let e=this.archive.get("war3map.w3i");if(!e)throw new Error("File does not exist");let t=new d.default;return t.load(e.bytes()),t}readImports(){let e=this.archive.get("war3map.imp");if(e){let t=e.arrayBuffer();t&&this.imports.load(t)}}readTriggers(e){let t=this.archive.get("war3map.wtg");if(t){let n=t.arrayBuffer();if(n){let t=new u.default;return t.load(n,e),t}}}readCustomTextTriggers(){let e=this.archive.get("war3map.wct");if(e){let t=e.arrayBuffer();if(t){let e=new o.default;return e.load(t),e}}}readStringTable(){let e=this.archive.get("war3map.wts");if(e){let t=e.text();if(t){let e=new c.default;return e.load(t),e}}}readModifications(){let e={},t=["w3u","w3t","w3b","w3d","w3a","w3h","w3q"],n=[!1,!1,!1,!0,!0,!1,!0];for(let a=0,r=t.length;a<r;a++){let r=this.archive.get(`war3map.${t[a]}`);if(r){let i=r.arrayBuffer();if(i){let r;r=n[a]?new l.default:new s.default,r.load(i),e[t[a]]=r}}}return e}}},771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(7720);t.default=class{constructor(){this.u1=0,this.icons=[]}load(e){let t=new a.default(e);this.u1=t.readInt32();for(let e=0,n=t.readInt32();e<n;e++){let n=new r.default;n.load(t),this.icons[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.u1),e.writeUint32(this.icons.length);for(let t of this.icons)t.save(e);return e.uint8array}getByteLength(){return 8+16*this.icons.length}}},1792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(771),r=n(7720);t.default={File:a.default,MinimapIcon:r.default}},7720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.type=0,this.location=new Int32Array(2),this.color=new Uint8Array(4)}load(e){this.type=e.readInt32(),e.readInt32Array(this.location),e.readUint8Array(this.color)}save(e){e.writeInt32(this.type),e.writeInt32Array(this.location),e.writeUint8Array(this.color)}}},7241:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.shadows=new Uint8Array(0)}load(e,t,n){this.shadows=new Uint8Array(e.slice(0,t*n*16))}save(){return this.shadows.slice()}getByteLength(){return this.shadows.length}}},3158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7241);t.default={File:a.default}},2253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.readBinary(4),this.chance=e.readInt32()}save(e){e.writeBinary(this.id),e.writeInt32(this.chance)}}},4179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2253);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readInt32();t<n;t++){let n=new a.default;n.load(e),this.items[t]=n}}save(e){e.writeInt32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},3994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(3391);t.default=class{constructor(){this.version=8,this.subversion=11,this.units=[]}load(e,t){let n=new a.default(e);if("W3do"===n.readBinary(4)){this.version=n.readInt32(),this.subversion=n.readUint32();for(let e=0,a=n.readInt32();e<a;e++){let a=new r.default;a.load(n,this.version,this.subversion,t),this.units[e]=a}}}save(e){let t=new a.default(new ArrayBuffer(this.getByteLength(e)));t.writeBinary("W3do"),t.writeInt32(this.version),t.writeUint32(this.subversion),t.writeInt32(this.units.length);for(let n of this.units)n.save(t,this.version,this.subversion,e);return t.uint8array}getByteLength(e){let t=16;for(let n of this.units)t+=n.getByteLength(this.version,this.subversion,e);return t}}},2408:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3994),r=n(3391),i=n(4179),l=n(2253),s=n(3056),o=n(6552),u=n(1446);t.default={File:a.default,Unit:r.default,DroppedItemSet:i.default,DroppedItem:l.default,InventoryItem:s.default,ModifiedAbility:o.default,RandomUnit:u.default}},3056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.slot=0,this.id="\0\0\0\0"}load(e){this.slot=e.readInt32(),this.id=e.readBinary(4)}save(e){e.writeInt32(this.slot),e.writeBinary(this.id)}}},6552:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.activeForAutocast=0,this.heroLevel=1}load(e){this.id=e.readBinary(4),this.activeForAutocast=e.readInt32(),this.heroLevel=e.readInt32()}save(e){e.writeBinary(this.id),e.writeInt32(this.activeForAutocast),e.writeInt32(this.heroLevel)}}},1446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.readBinary(4),this.chance=e.readInt32()}save(e){e.writeBinary(this.id),e.writeInt32(this.chance)}}},3391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4179),r=n(3056),i=n(6552),l=n(1446);t.default=class{constructor(){this.id="\0\0\0\0",this.variation=0,this.location=new Float32Array(3),this.angle=0,this.scale=new Float32Array([1,1,1]),this.skin="\0\0\0\0",this.flags=0,this.player=0,this.unknown=0,this.hitpoints=-1,this.mana=-1,this.droppedItemTable=0,this.droppedItemSets=[],this.goldAmount=0,this.targetAcquisition=0,this.heroLevel=0,this.heroStrength=0,this.heroAgility=0,this.heroIntelligence=0,this.itemsInInventory=[],this.modifiedAbilities=[],this.randomFlag=0,this.level=new Uint8Array(3),this.itemClass=0,this.unitGroup=0,this.positionInGroup=0,this.randomUnitTables=[],this.customTeamColor=0,this.waygate=0,this.creationNumber=0}load(e,t,n,s){this.id=e.readBinary(4),this.variation=e.readInt32(),e.readFloat32Array(this.location),this.angle=e.readFloat32(),e.readFloat32Array(this.scale),s>131&&(this.skin=e.readBinary(4)),this.flags=e.readUint8(),this.player=e.readInt32(),this.unknown=e.readUint16(),this.hitpoints=e.readInt32(),this.mana=e.readInt32(),n>10&&(this.droppedItemTable=e.readInt32());for(let t=0,n=e.readInt32();t<n;t++){let n=new a.default;n.load(e),this.droppedItemSets[t]=n}this.goldAmount=e.readInt32(),this.targetAcquisition=e.readFloat32(),this.heroLevel=e.readInt32(),n>10&&(this.heroStrength=e.readInt32(),this.heroAgility=e.readInt32(),this.heroIntelligence=e.readInt32());for(let t=0,n=e.readInt32();t<n;t++){let n=new r.default;n.load(e),this.itemsInInventory[t]=n}for(let t=0,n=e.readInt32();t<n;t++){let n=new i.default;n.load(e),this.modifiedAbilities[t]=n}if(this.randomFlag=e.readInt32(),0===this.randomFlag)e.readUint8Array(this.level),this.itemClass=e.readUint8();else if(1===this.randomFlag)this.unitGroup=e.readUint32(),this.positionInGroup=e.readUint32();else if(2===this.randomFlag)for(let t=0,n=e.readInt32();t<n;t++){let n=new l.default;n.load(e),this.randomUnitTables[t]=n}this.customTeamColor=e.readInt32(),this.waygate=e.readInt32(),this.creationNumber=e.readInt32()}save(e,t,n,a){e.writeBinary(this.id),e.writeInt32(this.variation),e.writeFloat32Array(this.location),e.writeFloat32(this.angle),e.writeFloat32Array(this.scale),a>131&&e.writeBinary(this.skin),e.writeUint8(this.flags),e.writeInt32(this.player),e.writeUint16(this.unknown),e.writeInt32(this.hitpoints),e.writeInt32(this.mana),n>10&&e.writeInt32(this.droppedItemTable),e.writeInt32(this.droppedItemSets.length);for(let t of this.droppedItemSets)t.save(e);e.writeInt32(this.goldAmount),e.writeFloat32(this.targetAcquisition),e.writeInt32(this.heroLevel),n>10&&(e.writeInt32(this.heroStrength),e.writeInt32(this.heroAgility),e.writeInt32(this.heroIntelligence)),e.writeInt32(this.itemsInInventory.length);for(let t of this.itemsInInventory)t.save(e);e.writeInt32(this.modifiedAbilities.length);for(let t of this.modifiedAbilities)t.save(e);if(e.writeInt32(this.randomFlag),0===this.randomFlag)e.writeUint8Array(this.level),e.writeUint8(this.itemClass);else if(1===this.randomFlag)e.writeUint32(this.unitGroup),e.writeUint32(this.positionInGroup);else if(2===this.randomFlag){e.writeInt32(this.randomUnitTables.length);for(let t of this.randomUnitTables)t.save(e)}e.writeInt32(this.customTeamColor),e.writeInt32(this.waygate),e.writeInt32(this.creationNumber)}getByteLength(e,t,n){let a=91;n>131&&(a+=4),t>10&&(a+=16);for(let e of this.droppedItemSets)a+=e.getByteLength();return a+=8*this.itemsInInventory.length,a+=12*this.modifiedAbilities.length,0===this.randomFlag?a+=4:1===this.randomFlag?a+=8:2===this.randomFlag&&(a+=4+8*this.randomUnitTables.length),a}}},2753:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.targetLocation=new Float32Array(3),this.rotation=0,this.angleOfAttack=0,this.distance=0,this.roll=0,this.fieldOfView=0,this.farClippingPlane=0,this.nearClippingPlane=0,this.cinematicName="",this.localPitch=0,this.localYaw=0,this.localRoll=0}load(e,t){e.readFloat32Array(this.targetLocation),this.rotation=e.readFloat32(),this.angleOfAttack=e.readFloat32(),this.distance=e.readFloat32(),this.roll=e.readFloat32(),this.fieldOfView=e.readFloat32(),this.farClippingPlane=e.readFloat32(),this.nearClippingPlane=e.readFloat32(),this.cinematicName=e.readNull(),t>131&&(this.localPitch=e.readFloat32(),this.localYaw=e.readFloat32(),this.localRoll=e.readFloat32())}save(e,t){e.writeFloat32Array(this.targetLocation),e.writeFloat32(this.rotation),e.writeFloat32(this.angleOfAttack),e.writeFloat32(this.distance),e.writeFloat32(this.roll),e.writeFloat32(this.fieldOfView),e.writeFloat32(this.farClippingPlane),e.writeFloat32(this.nearClippingPlane),e.writeNull(this.cinematicName),t>131&&(e.writeFloat32(this.localPitch),e.writeFloat32(this.localYaw),e.writeFloat32(this.localRoll))}getByteLength(e){let t=41+a.byteLengthUtf8(this.cinematicName);return e>131&&(t+=12),t}}},8546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(2753);t.default=class{constructor(){this.version=0,this.cameras=[]}load(e,t){let n=new a.default(e);this.version=n.readInt32();for(let e=0,a=n.readUint32();e<a;e++){let a=new r.default;a.load(n,t),this.cameras[e]=a}}save(e){let t=new a.default(new ArrayBuffer(this.getByteLength(e)));t.writeInt32(this.version),t.writeUint32(this.cameras.length);for(let n of this.cameras)n.save(t,e);return t.uint8array}getByteLength(e){let t=8;for(let n of this.cameras)t+=n.getByteLength(e);return t}}},9260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8546),r=n(2753);t.default={File:a.default,Camera:r.default}},9769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(6311);t.default=class{constructor(){this.version=0,this.originalTable=new r.default,this.customTable=new r.default}load(e){let t;t=e instanceof a.default?e:new a.default(e),this.version=t.readInt32(),this.originalTable.load(t,!0),this.customTable.load(t,!0)}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));return e.writeInt32(this.version),this.originalTable.save(e,!0),this.customTable.save(e,!0),e.uint8array}getByteLength(){return 4+this.originalTable.getByteLength(!0)+this.customTable.getByteLength(!0)}}},766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9769);t.default={File:a.default}},4072:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.groundHeight=0,this.waterHeight=0,this.mapEdge=0,this.ramp=0,this.blight=0,this.water=0,this.boundary=0,this.groundTexture=0,this.cliffVariation=0,this.groundVariation=0,this.cliffTexture=0,this.layerHeight=0}load(e){this.groundHeight=(e.readInt16()-8192)/512;let t=e.readInt16();this.waterHeight=((16383&t)-8192)/512,this.mapEdge=16384&t;let n=e.readUint8();this.ramp=16&n,this.blight=32&n,this.water=64&n,this.boundary=128&n,this.groundTexture=15&n;let a=e.readUint8();this.cliffVariation=(224&a)>>>5,this.groundVariation=31&a;let r=e.readUint8();this.cliffTexture=(240&r)>>>4,this.layerHeight=15&r}save(e){e.writeInt16(512*this.groundHeight+8192),e.writeInt16(512*this.waterHeight+8192+this.mapEdge<<14),e.writeUint8(this.ramp<<4|this.blight<<5|this.water<<6|this.boundary<<7|this.groundTexture),e.writeUint8(this.cliffVariation<<5|this.groundVariation),e.writeUint8((this.cliffTexture<<4)+this.layerHeight)}}},7999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(4072);t.default=class{constructor(){this.version=0,this.tileset="A",this.haveCustomTileset=0,this.groundTilesets=[],this.cliffTilesets=[],this.mapSize=new Int32Array(2),this.centerOffset=new Float32Array(2),this.corners=[]}load(e){let t=new a.default(e);if("W3E!"===t.readBinary(4)){this.version=t.readInt32(),this.tileset=t.readBinary(1),this.haveCustomTileset=t.readInt32();for(let e=0,n=t.readInt32();e<n;e++)this.groundTilesets[e]=t.readBinary(4);for(let e=0,n=t.readInt32();e<n;e++)this.cliffTilesets[e]=t.readBinary(4);t.readInt32Array(this.mapSize),t.readFloat32Array(this.centerOffset);for(let e=0,n=this.mapSize[1];e<n;e++){this.corners[e]=[];for(let n=0,a=this.mapSize[0];n<a;n++){let a=new r.default;a.load(t),this.corners[e][n]=a}}}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeBinary("W3E!"),e.writeInt32(this.version),e.writeBinary(this.tileset),e.writeInt32(this.haveCustomTileset),e.writeUint32(this.groundTilesets.length);for(let t of this.groundTilesets)e.writeBinary(t);e.writeUint32(this.cliffTilesets.length);for(let t of this.cliffTilesets)e.writeBinary(t);e.writeInt32Array(this.mapSize),e.writeFloat32Array(this.centerOffset);for(let t of this.corners)for(let n of t)n.save(e);return e.uint8array}getByteLength(){return 37+4*this.groundTilesets.length+4*this.cliffTilesets.length+this.mapSize[0]*this.mapSize[1]*7}}},8045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7999),r=n(4072);t.default={File:a.default,Corner:r.default}},7714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(1011),i=n(2165),l=n(9048);t.default=class{constructor(){this.version=0,this.campaignVersion=0,this.editorVersion=0,this.name="",this.difficulty="",this.author="",this.description="",this.mode=-1,this.backgroundScreen=-1,this.backgroundScreenPath="",this.minimapImagePath="",this.ambientSound=0,this.ambientSoundPath="",this.terrainFog=0,this.fogStartZ=0,this.fogEndZ=0,this.fogDensity=0,this.fogColor=new Uint8Array(4),this.userInterface=-1,this.mapTitles=[],this.mapOrders=[]}load(e){let t=new a.default(e);this.version=t.readInt32(),this.campaignVersion=t.readInt32(),this.editorVersion=t.readInt32(),this.name=t.readNull(),this.difficulty=t.readNull(),this.author=t.readNull(),this.description=t.readNull(),this.mode=t.readInt32(),this.backgroundScreen=t.readInt32(),this.backgroundScreenPath=t.readNull(),this.minimapImagePath=t.readNull(),this.ambientSound=t.readInt32(),this.ambientSoundPath=t.readNull(),this.terrainFog=t.readInt32(),this.fogStartZ=t.readFloat32(),this.fogEndZ=t.readFloat32(),this.fogDensity=t.readFloat32(),t.readUint8Array(this.fogColor),this.userInterface=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.mapTitles[e]=n}for(let e=0,n=t.readUint32();e<n;e++){let n=new i.default;n.load(t),this.mapOrders[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.version),e.writeInt32(this.campaignVersion),e.writeInt32(this.editorVersion),e.writeNull(this.name),e.writeNull(this.difficulty),e.writeNull(this.author),e.writeNull(this.description),e.writeInt32(this.mode),e.writeInt32(this.backgroundScreen),e.writeNull(this.backgroundScreenPath),e.writeNull(this.minimapImagePath),e.writeInt32(this.ambientSound),e.writeNull(this.ambientSoundPath),e.writeInt32(this.terrainFog),e.writeFloat32(this.fogStartZ),e.writeFloat32(this.fogEndZ),e.writeFloat32(this.fogDensity),e.writeUint8Array(this.fogColor),e.writeInt32(this.userInterface),e.writeUint32(this.mapTitles.length);for(let t of this.mapTitles)t.save(e);e.writeUint32(this.mapOrders.length);for(let t of this.mapOrders)t.save(e);return e.uint8array}getByteLength(){let e=63+l.byteLengthUtf8(this.name)+l.byteLengthUtf8(this.difficulty)+l.byteLengthUtf8(this.author)+l.byteLengthUtf8(this.description)+l.byteLengthUtf8(this.backgroundScreenPath)+l.byteLengthUtf8(this.minimapImagePath)+l.byteLengthUtf8(this.ambientSoundPath);for(let t of this.mapTitles)e+=t.getByteLength();for(let t of this.mapOrders)e+=t.getByteLength();return e}}},5545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7714),r=n(1011),i=n(2165);t.default={File:a.default,MapTitle:r.default,MapOrder:i.default}},2165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.u1=0,this.path=""}load(e){this.u1=e.readInt8(),this.path=e.readNull()}save(e){e.writeInt8(this.u1),e.writeNull(this.path)}getByteLength(){return 2+a.byteLengthUtf8(this.path)}}},1011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.visible=0,this.chapterTitle="",this.mapTitle="",this.path=""}load(e){this.visible=e.readInt32(),this.chapterTitle=e.readNull(),this.mapTitle=e.readNull(),this.path=e.readNull()}save(e){e.writeInt32(this.visible),e.writeNull(this.chapterTitle),e.writeNull(this.mapTitle),e.writeNull(this.path)}getByteLength(){return 7+a.byteLengthUtf8(this.chapterTitle)+a.byteLengthUtf8(this.mapTitle)+a.byteLengthUtf8(this.path)}}},2647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(9048),i=n(9705),l=n(7097),s=n(3709),o=n(5818),u=n(1032),c=n(1564);t.default=class{constructor(){this.version=0,this.saves=0,this.editorVersion=0,this.buildVersion=new Uint32Array(4),this.name="",this.author="",this.description="",this.recommendedPlayers="",this.cameraBounds=new Float32Array(8),this.cameraBoundsComplements=new Int32Array(4),this.playableSize=new Int32Array(2),this.flags=0,this.tileset="A",this.campaignBackground=0,this.loadingScreenModel="",this.loadingScreenText="",this.loadingScreenTitle="",this.loadingScreenSubtitle="",this.loadingScreen=0,this.prologueScreenModel="",this.prologueScreenText="",this.prologueScreenTitle="",this.prologueScreenSubtitle="",this.useTerrainFog=0,this.fogHeight=new Float32Array(2),this.fogDensity=0,this.fogColor=new Uint8Array(4),this.globalWeather=0,this.soundEnvironment="",this.lightEnvironmentTileset="\0",this.waterVertexColor=new Uint8Array(4),this.scriptMode=0,this.graphicsMode=0,this.players=[],this.forces=[],this.upgradeAvailabilityChanges=[],this.techAvailabilityChanges=[],this.randomUnitTables=[],this.randomItemTables=[],this.unknown1=0}load(e){let t=new a.default(e);this.version=t.readInt32(),this.saves=t.readInt32(),this.editorVersion=t.readInt32(),this.version>27&&t.readUint32Array(this.buildVersion),this.name=t.readNull(),this.author=t.readNull(),this.description=t.readNull(),this.recommendedPlayers=t.readNull(),t.readFloat32Array(this.cameraBounds),t.readInt32Array(this.cameraBoundsComplements),t.readInt32Array(this.playableSize),this.flags=t.readUint32(),this.tileset=t.readBinary(1),this.campaignBackground=t.readInt32(),this.version>24&&(this.loadingScreenModel=t.readNull()),this.loadingScreenText=t.readNull(),this.loadingScreenTitle=t.readNull(),this.loadingScreenSubtitle=t.readNull(),this.loadingScreen=t.readInt32(),this.version>24&&(this.prologueScreenModel=t.readNull()),this.prologueScreenText=t.readNull(),this.prologueScreenTitle=t.readNull(),this.prologueScreenSubtitle=t.readNull(),this.version>24&&(this.useTerrainFog=t.readInt32(),t.readFloat32Array(this.fogHeight),this.fogDensity=t.readFloat32(),t.readUint8Array(this.fogColor),this.globalWeather=t.readInt32(),this.soundEnvironment=t.readNull(),this.lightEnvironmentTileset=t.readBinary(1),t.readUint8Array(this.waterVertexColor)),this.version>27&&(this.scriptMode=t.readUint32()),this.version>30&&(this.graphicsMode=t.readUint32(),this.unknown1=t.readUint32());for(let e=0,n=t.readInt32();e<n;e++){let n=new l.default;n.load(t,this.version),this.players[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new i.default;n.load(t),this.forces[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new c.default;n.load(t),this.upgradeAvailabilityChanges[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new u.default;n.load(t),this.techAvailabilityChanges[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new o.default;n.load(t),this.randomUnitTables[e]=n}if(this.version>24)for(let e=0,n=t.readInt32();e<n;e++){let n=new s.default;n.load(t),this.randomItemTables[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.version),e.writeInt32(this.saves),e.writeInt32(this.editorVersion),this.version>27&&e.writeUint32Array(this.buildVersion),e.writeNull(this.name),e.writeNull(this.author),e.writeNull(this.description),e.writeNull(this.recommendedPlayers),e.writeFloat32Array(this.cameraBounds),e.writeInt32Array(this.cameraBoundsComplements),e.writeInt32Array(this.playableSize),e.writeUint32(this.flags),e.writeBinary(this.tileset),e.writeInt32(this.campaignBackground),this.version>24&&e.writeNull(this.loadingScreenModel),e.writeNull(this.loadingScreenText),e.writeNull(this.loadingScreenTitle),e.writeNull(this.loadingScreenSubtitle),e.writeInt32(this.loadingScreen),this.version>24&&e.writeNull(this.prologueScreenModel),e.writeNull(this.prologueScreenText),e.writeNull(this.prologueScreenTitle),e.writeNull(this.prologueScreenSubtitle),this.version>24&&(e.writeInt32(this.useTerrainFog),e.writeFloat32Array(this.fogHeight),e.writeFloat32(this.fogDensity),e.writeUint8Array(this.fogColor),e.writeInt32(this.globalWeather),e.writeNull(this.soundEnvironment),e.writeBinary(this.lightEnvironmentTileset),e.writeUint8Array(this.waterVertexColor)),this.version>27&&e.writeUint32(this.scriptMode),this.version>30&&(e.writeUint32(this.graphicsMode),e.writeUint32(this.unknown1)),e.writeUint32(this.players.length);for(let t of this.players)t.save(e,this.version);e.writeUint32(this.forces.length);for(let t of this.forces)t.save(e);e.writeUint32(this.upgradeAvailabilityChanges.length);for(let t of this.upgradeAvailabilityChanges)t.save(e);e.writeUint32(this.techAvailabilityChanges.length);for(let t of this.techAvailabilityChanges)t.save(e);e.writeUint32(this.randomUnitTables.length);for(let t of this.randomUnitTables)t.save(e);if(this.version>24){e.writeUint32(this.randomItemTables.length);for(let t of this.randomItemTables)t.save(e)}return e.uint8array}getByteLength(){let e=111+r.byteLengthUtf8(this.name)+r.byteLengthUtf8(this.author)+r.byteLengthUtf8(this.description)+r.byteLengthUtf8(this.recommendedPlayers)+r.byteLengthUtf8(this.loadingScreenText)+r.byteLengthUtf8(this.loadingScreenTitle)+r.byteLengthUtf8(this.loadingScreenSubtitle)+r.byteLengthUtf8(this.prologueScreenText)+r.byteLengthUtf8(this.prologueScreenTitle)+r.byteLengthUtf8(this.prologueScreenSubtitle);for(let t of this.players)e+=t.getByteLength(this.version);for(let t of this.forces)e+=t.getByteLength();e+=16*this.upgradeAvailabilityChanges.length,e+=8*this.techAvailabilityChanges.length;for(let t of this.randomUnitTables)e+=t.getByteLength();if(this.version>24){e+=36+r.byteLengthUtf8(this.loadingScreenModel)+r.byteLengthUtf8(this.prologueScreenModel)+r.byteLengthUtf8(this.soundEnvironment);for(let t of this.randomItemTables)e+=t.getByteLength()}return this.version>27&&(e+=20),this.version>30&&(e+=8),e}getBuildVersion(){return 100*this.buildVersion[0]+this.buildVersion[1]}}},9705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.flags=0,this.playerMasks=0,this.name=""}load(e){this.flags=e.readUint32(),this.playerMasks=e.readUint32(),this.name=e.readNull()}save(e){e.writeUint32(this.flags),e.writeUint32(this.playerMasks),e.writeNull(this.name)}getByteLength(){return 9+a.byteLengthUtf8(this.name)}}},1179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2647),r=n(7097),i=n(9705),l=n(1564),s=n(1032),o=n(5818),u=n(1972),c=n(3709),d=n(5172),h=n(2354);t.default={File:a.default,Player:r.default,Force:i.default,UpgradeAvailabilityChange:l.default,TechAvailabilityChange:s.default,RandomUnitTable:o.default,RandomUnit:u.default,RandomItemTable:c.default,RandomItemSet:d.default,RandomItem:h.default}},7097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.id=0,this.type=0,this.race=0,this.isFixedStartPosition=0,this.name="",this.startLocation=new Float32Array(2),this.allyLowPriorities=0,this.allyHighPriorities=0,this.unknown1=new Uint8Array(8)}load(e,t){this.id=e.readInt32(),this.type=e.readInt32(),this.race=e.readInt32(),this.isFixedStartPosition=e.readInt32(),this.name=e.readNull(),e.readFloat32Array(this.startLocation),this.allyLowPriorities=e.readUint32(),this.allyHighPriorities=e.readUint32(),t>30&&e.readUint8Array(this.unknown1)}save(e,t){e.writeInt32(this.id),e.writeInt32(this.type),e.writeInt32(this.race),e.writeInt32(this.isFixedStartPosition),e.writeNull(this.name),e.writeFloat32Array(this.startLocation),e.writeUint32(this.allyLowPriorities),e.writeUint32(this.allyHighPriorities),t>30&&e.writeUint8Array(this.unknown1)}getByteLength(e){return(e>30?41:33)+a.byteLengthUtf8(this.name)}}},2354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.chance=0,this.id="\0\0\0\0"}load(e){this.chance=e.readInt32(),this.id=e.readBinary(4)}save(e){e.writeInt32(this.chance),e.writeBinary(this.id)}}},5172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2354);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readUint32();t<n;t++){let n=new a.default;n.load(e),this.items[t]=n}}save(e){e.writeUint32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},3709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(5172);t.default=class{constructor(){this.id=0,this.name="",this.sets=[]}load(e){this.id=e.readInt32(),this.name=e.readNull();for(let t=0,n=e.readUint32();t<n;t++){let n=new r.default;n.load(e),this.sets[t]=n}}save(e){e.writeInt32(this.id),e.writeNull(this.name),e.writeUint32(this.sets.length);for(let t of this.sets)t.save(e)}getByteLength(){let e=9+a.byteLengthUtf8(this.name);for(let t of this.sets)e+=t.getByteLength();return e}}},1972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.chance=0,this.ids=[]}load(e,t){this.chance=e.readInt32();for(let n=0;n<t;n++)this.ids[n]=e.readBinary(4)}save(e){e.writeInt32(this.chance);for(let t of this.ids)e.writeBinary(t)}}},5818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(1972);t.default=class{constructor(){this.id=0,this.name="",this.positions=0,this.columnTypes=new Int32Array(0),this.units=[]}load(e){this.id=e.readInt32(),this.name=e.readNull(),this.positions=e.readInt32(),this.columnTypes=e.readInt32Array(this.positions);for(let t=0,n=e.readUint32();t<n;t++){let n=new r.default;n.load(e,this.positions),this.units[t]=n}}save(e){e.writeInt32(this.id),e.writeNull(this.name),e.writeInt32(this.positions),e.writeInt32Array(this.columnTypes),e.writeUint32(this.units.length);for(let t of this.units)t.save(e)}getByteLength(){return 13+a.byteLengthUtf8(this.name)+this.columnTypes.byteLength+this.units.length*(4+4*this.positions)}}},1032:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.playerFlags=0,this.id="\0\0\0\0"}load(e){this.playerFlags=e.readUint32(),this.id=e.readBinary(4)}save(e){e.writeUint32(this.playerFlags),e.writeBinary(this.id)}}},1564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.playerFlags=0,this.id="\0\0\0\0",this.levelAffected=0,this.availability=0}load(e){this.playerFlags=e.readUint32(),this.id=e.readBinary(4),this.levelAffected=e.readInt32(),this.availability=e.readInt32()}save(e){e.writeUint32(this.playerFlags),e.writeBinary(this.id),e.writeInt32(this.levelAffected),e.writeInt32(this.availability)}}},5241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(3042),i=n(9769);t.default=class{constructor(){this.version=0,this.units=null,this.items=null,this.destructables=null,this.doodads=null,this.abilities=null,this.buffs=null,this.upgrades=null}load(e){let t=new a.default(e);this.version=t.readInt32(),t.readInt32()&&(this.units=new r.default,this.units.load(t)),t.readInt32()&&(this.items=new r.default,this.items.load(t)),t.readInt32()&&(this.destructables=new r.default,this.destructables.load(t)),t.readInt32()&&(this.doodads=new i.default,this.doodads.load(t)),t.readInt32()&&(this.abilities=new i.default,this.abilities.load(t)),t.readInt32()&&(this.buffs=new r.default,this.buffs.load(t)),t.readInt32()&&(this.upgrades=new i.default,this.upgrades.load(t))}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));return e.writeInt32(this.version),this.units?(e.writeInt32(1),e.writeUint8Array(this.units.save())):e.writeInt32(0),this.items?(e.writeInt32(1),e.writeUint8Array(this.items.save())):e.writeInt32(0),this.destructables?(e.writeInt32(1),e.writeUint8Array(this.destructables.save())):e.writeInt32(0),this.doodads?(e.writeInt32(1),e.writeUint8Array(this.doodads.save())):e.writeInt32(0),this.abilities?(e.writeInt32(1),e.writeUint8Array(this.abilities.save())):e.writeInt32(0),this.buffs?(e.writeInt32(1),e.writeUint8Array(this.buffs.save())):e.writeInt32(0),this.upgrades?(e.writeInt32(1),e.writeUint8Array(this.upgrades.save())):e.writeInt32(0),e.uint8array}getByteLength(){let e=32;return this.units&&(e+=this.units.getByteLength()),this.items&&(e+=this.items.getByteLength()),this.destructables&&(e+=this.destructables.getByteLength()),this.doodads&&(e+=this.doodads.getByteLength()),this.abilities&&(e+=this.abilities.getByteLength()),this.buffs&&(e+=this.buffs.getByteLength()),this.upgrades&&(e+=this.upgrades.getByteLength()),e}}},2004:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5241);t.default={File:a.default}},2331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(8913);t.default=class{constructor(){this.version=0,this.regions=[]}load(e){let t=new a.default(e);this.version=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.regions[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.version),e.writeUint32(this.regions.length);for(let t of this.regions)t.save(e);return e.uint8array}getByteLength(){let e=8;for(let t of this.regions)e+=t.getByteLength();return e}}},6932:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2331),r=n(8913);t.default={File:a.default,Region:r.default}},8913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.left=0,this.right=0,this.bottom=0,this.top=0,this.name="",this.creationNumber=0,this.weatherEffectId="\0\0\0\0",this.ambientSound="",this.color=new Uint8Array(4)}load(e){this.left=e.readFloat32(),this.right=e.readFloat32(),this.bottom=e.readFloat32(),this.top=e.readFloat32(),this.name=e.readNull(),this.creationNumber=e.readUint32(),this.weatherEffectId=e.readBinary(4),this.ambientSound=e.readNull(),e.readUint8Array(this.color)}save(e){e.writeFloat32(this.left),e.writeFloat32(this.right),e.writeFloat32(this.bottom),e.writeFloat32(this.top),e.writeNull(this.name),e.writeUint32(this.creationNumber),this.weatherEffectId?e.writeBinary(this.weatherEffectId):e.writeUint32(0),e.writeNull(this.ambientSound),e.writeUint8Array(this.color)}getByteLength(){return 30+a.byteLengthUtf8(this.name)+a.byteLengthUtf8(this.ambientSound)}}},2459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(8443);t.default=class{constructor(){this.version=0,this.sounds=[]}load(e){let t=new a.default(e);this.version=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.sounds[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.version),e.writeUint32(this.sounds.length);for(let t of this.sounds)t.save(e);return e.uint8array}getByteLength(){let e=8;for(let t of this.sounds)e+=t.getByteLength();return e}}},8765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2459),r=n(8443);t.default={File:a.default,Sound:r.default}},8443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.name="",this.file="",this.eaxEffect="",this.flags=0,this.fadeInRate=0,this.fadeOutRate=0,this.volume=0,this.pitch=0,this.pitchVariance=0,this.priority=0,this.channel=0,this.minDistance=0,this.maxDistance=0,this.distanceCutoff=0,this.coneInside=0,this.coneOutside=0,this.coneOutsideVolume=0,this.coneOrientationX=0,this.coneOrientationY=0,this.coneOrientationZ=0}load(e){this.name=e.readNull(),this.file=e.readNull(),this.eaxEffect=e.readNull(),this.flags=e.readUint32(),this.fadeInRate=e.readInt32(),this.fadeOutRate=e.readInt32(),this.volume=e.readInt32(),this.pitch=e.readFloat32(),this.pitchVariance=e.readFloat32(),this.priority=e.readInt32(),this.channel=e.readInt32(),this.minDistance=e.readFloat32(),this.maxDistance=e.readFloat32(),this.distanceCutoff=e.readFloat32(),this.coneInside=e.readFloat32(),this.coneOutside=e.readFloat32(),this.coneOutsideVolume=e.readInt32(),this.coneOrientationX=e.readFloat32(),this.coneOrientationY=e.readFloat32(),this.coneOrientationZ=e.readFloat32()}save(e){e.writeNull(this.name),e.writeNull(this.file),e.writeNull(this.eaxEffect),e.writeUint32(this.flags),e.writeUint32(this.fadeInRate),e.writeUint32(this.fadeOutRate),e.writeUint32(this.volume),e.writeFloat32(this.pitch),e.writeFloat32(this.pitchVariance),e.writeInt32(this.priority),e.writeInt32(this.channel),e.writeFloat32(this.minDistance),e.writeFloat32(this.maxDistance),e.writeFloat32(this.distanceCutoff),e.writeFloat32(this.coneInside),e.writeFloat32(this.coneOutside),e.writeInt32(this.coneOutsideVolume),e.writeFloat32(this.coneOrientationX),e.writeFloat32(this.coneOrientationY),e.writeFloat32(this.coneOrientationZ)}getByteLength(){return 71+a.byteLengthUtf8(this.name)+a.byteLengthUtf8(this.file)+a.byteLengthUtf8(this.eaxEffect)}}},3042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(6311);t.default=class{constructor(){this.version=0,this.originalTable=new r.default,this.customTable=new r.default}load(e){let t;t=e instanceof a.default?e:new a.default(e),this.version=t.readInt32(),this.originalTable.load(t,!1),this.customTable.load(t,!1)}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));return e.writeInt32(this.version),this.originalTable.save(e,!1),this.customTable.save(e,!1),e.uint8array}getByteLength(){return 4+this.originalTable.getByteLength(!1)+this.customTable.getByteLength(!1)}}},4021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3042),r=n(6311),i=n(1724),l=n(1776);t.default={File:a.default,ModificationTable:r.default,ModificationObject:i.default,Modification:l.default}},1776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.id="\0\0\0\0",this.variableType=0,this.levelOrVariation=0,this.dataPointer=0,this.value=0,this.u1=0}load(e,t){if(this.id=e.readBinary(4),this.variableType=e.readInt32(),t&&(this.levelOrVariation=e.readInt32(),this.dataPointer=e.readInt32()),0===this.variableType)this.value=e.readInt32();else if(1===this.variableType||2===this.variableType)this.value=e.readFloat32();else{if(3!==this.variableType)throw new Error(`Modification: unknown variable type ${this.variableType}`);this.value=e.readNull()}this.u1=e.readInt32()}save(e,t){if(e.writeBinary(this.id),e.writeInt32(this.variableType),t&&(e.writeInt32(this.levelOrVariation),e.writeInt32(this.dataPointer)),0===this.variableType)e.writeInt32(this.value);else if(1===this.variableType||2===this.variableType)e.writeFloat32(this.value);else{if(3!==this.variableType)throw new Error(`Modification: unknown variable type ${this.variableType}`);e.writeNull(this.value)}e.writeInt32(this.u1)}getByteLength(e){let t=12;return e&&(t+=8),3===this.variableType?t+=a.byteLengthUtf8(this.value)+1:t+=4,t}}},6311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1724);t.default=class{constructor(){this.objects=[]}load(e,t){for(let n=0,r=e.readUint32();n<r;n++){let r=new a.default;r.load(e,t),this.objects[n]=r}}save(e,t){e.writeUint32(this.objects.length);for(let n of this.objects)n.save(e,t)}getByteLength(e){let t=4;for(let n of this.objects)t+=n.getByteLength(e);return t}}},1724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1776);t.default=class{constructor(){this.oldId="\0\0\0\0",this.newId="\0\0\0\0",this.modifications=[]}load(e,t){this.oldId=e.readBinary(4),this.newId=e.readBinary(4);for(let n=0,r=e.readUint32();n<r;n++){let r=new a.default;r.load(e,t),this.modifications[n]=r}}save(e,t){"\0\0\0\0"!==this.oldId?e.writeBinary(this.oldId):e.writeUint32(0),"\0\0\0\0"!==this.newId?e.writeBinary(this.newId):e.writeUint32(0),e.writeUint32(this.modifications.length);for(let n of this.modifications)n.save(e,t)}getByteLength(e){let t=12;for(let n of this.modifications)t+=n.getByteLength(e);return t}}},3472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.text=""}load(e){let t=e.readInt32();t&&(this.text=e.read(t-1),e.skip(1))}save(e){this.text.length?(e.writeInt32(a.byteLengthUtf8(this.text)+1),e.write(this.text),e.skip(1)):e.writeInt32(0)}getByteLength(){let e=4;return this.text.length&&(e+=a.byteLengthUtf8(this.text)+1),e}}},5474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(9048),i=n(3472);t.default=class{constructor(){this.version=0,this.comment="",this.trigger=new i.default,this.triggers=[]}load(e){let t=new a.default(e);this.version=t.readInt32(),1===this.version&&(this.comment=t.readNull(),this.trigger.load(t));for(let e=0,n=t.readUint32();e<n;e++){let n=new i.default;n.load(t),this.triggers[e]=n}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeInt32(this.version),1===this.version&&(e.writeNull(this.comment),this.trigger.save(e)),e.writeUint32(this.triggers.length);for(let t of this.triggers)t.save(e);return e.uint8array}getByteLength(){let e=8;1===this.version&&(e+=r.byteLengthUtf8(this.comment)+1+this.trigger.getByteLength());for(let t of this.triggers)e+=t.getByteLength();return e}}},2117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5474),r=n(3472);t.default={File:a.default,CustomTextTrigger:r.default}},925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249);t.default=class{constructor(){this.version=0,this.size=new Int32Array(2),this.pathing=new Uint8Array(0)}load(e){let t=new a.default(e);"MP3W"===t.readBinary(4)&&(this.version=t.readInt32(),t.readInt32Array(this.size),this.pathing=t.readUint8Array(this.size[0]*this.size[1]))}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));return e.writeBinary("MP3W"),e.writeInt32(this.version),e.writeInt32Array(this.size),e.writeUint8Array(this.pathing),e.uint8array}getByteLength(){return 16+this.size[0]*this.size[1]}}},6891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(925);t.default={File:a.default}},518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(9305);class i{constructor(){this.type=-1,this.group=-1,this.name="",this.isEnabled=0,this.parameters=[],this.ecas=[]}load(e,t,n,a){if(this.type=e.readInt32(),this.type<0||this.type>3)throw new Error(`ECA: Bad type: ${this.type}`);if(n&&(this.group=e.readUint32()),this.name=e.readNull(),0===this.name.length)throw new Error("ECA: Empty name");this.isEnabled=e.readInt32();let l=a.getFunction(this.type,this.name);if(!l)throw new Error(`ECA "${this.name}:${this.type}": Unknown signature`);for(let n=0,i=l.args.length;n<i;n++){let i=new r.default;try{i.load(e,t,a)}catch(e){throw new Error(`ECA "${this.name}": Parameter ${n}: ${e}`)}this.parameters[n]=i}if(7===t)for(let n=0,r=e.readUint32();n<r;n++){let r=new i;try{r.load(e,t,!0,a)}catch(e){throw new Error(`ECA "${this.name}": Child ECA ${n} ${e}`)}this.ecas[n]=r}}save(e,t){e.writeInt32(this.type),-1!==this.group&&e.writeInt32(this.group),e.writeNull(this.name),e.writeInt32(this.isEnabled);for(let n of this.parameters)n.save(e,t);if(7===t){e.writeUint32(this.ecas.length);for(let n of this.ecas)n.save(e,t)}}getByteLength(e){let t=9+a.byteLengthUtf8(this.name);-1!==this.group&&(t+=4);for(let n of this.parameters)t+=n.getByteLength(e);if(7===e){t+=4;for(let n of this.ecas)t+=n.getByteLength(e)}return t}}t.default=i},4996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7249),r=n(2641),i=n(700),l=n(3185);t.default=class{constructor(){this.version=0,this.categories=[],this.u1=0,this.variables=[],this.triggers=[]}load(e,t){let n=new a.default(e);if("WTG!"!==n.readBinary(4))throw new Error("Not a WTG file");this.version=n.readInt32();for(let e=0,t=n.readUint32();e<t;e++){let t=new r.default;t.load(n,this.version),this.categories[e]=t}this.u1=n.readInt32();for(let e=0,t=n.readUint32();e<t;e++){let t=new i.default;t.load(n,this.version),this.variables[e]=t}for(let e=0,a=n.readUint32();e<a;e++){let a=new l.default;try{a.load(n,this.version,t)}catch(t){throw new Error(`Trigger ${e}: ${t}`)}this.triggers[e]=a}}save(){let e=new a.default(new ArrayBuffer(this.getByteLength()));e.writeBinary("WTG!"),e.writeInt32(this.version),e.writeUint32(this.categories.length);for(let t of this.categories)t.save(e,this.version);e.writeInt32(this.u1),e.writeUint32(this.variables.length);for(let t of this.variables)t.save(e,this.version);e.writeUint32(this.triggers.length);for(let t of this.triggers)t.save(e,this.version);return e.uint8array}getByteLength(){let e=24,t=this.version;for(let n of this.categories)e+=n.getByteLength(t);for(let n of this.variables)e+=n.getByteLength(t);for(let n of this.triggers)e+=n.getByteLength(t);return e}}},7523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4996),r=n(2641),i=n(700),l=n(3185),s=n(518),o=n(9305),u=n(831),c=n(2094);t.default={File:a.default,TriggerCategory:r.default,Variable:i.default,Trigger:l.default,ECA:s.default,Parameter:o.default,SubParameters:u.default,TriggerData:c.TriggerData}},9305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(831);class i{constructor(){this.type=0,this.value="",this.subParameters=null,this.u1=0,this.isArray=0,this.arrayIndex=null}load(e,t,n){if(this.type=e.readInt32(),this.type<-1||this.type>3)throw new Error(`Parameter: Bad type: ${this.type}`);if(this.value=e.readNull(),e.readInt32()){let a=new r.default;try{a.load(e,t,n)}catch(e){throw new Error(`Parameter "${this.value}": SubParameters ${e}`)}this.subParameters=a}if((4===t&&2===this.type||7===t&&this.subParameters)&&(this.u1=e.readInt32()),(4===t&&2!==this.type||7===t)&&(this.isArray=e.readInt32()),this.isArray){let a=new i;try{a.load(e,t,n)}catch(e){throw new Error(`Parameter "${this.value}": ArrayIndex: ${e}`)}this.arrayIndex=a}}save(e,t){e.writeInt32(this.type),e.writeNull(this.value),this.subParameters?(e.writeInt32(1),this.subParameters.save(e,t)):e.writeInt32(0),(4===t&&2===this.type||7===t&&this.subParameters)&&e.writeInt32(this.u1),(4===t&&2!==this.type||7===t)&&e.writeInt32(this.isArray),this.isArray&&this.arrayIndex&&this.arrayIndex.save(e,t)}getByteLength(e){let t=9+a.byteLengthUtf8(this.value);return this.subParameters&&(t+=this.subParameters.getByteLength(e)),(4===e&&2===this.type||7===e&&this.subParameters)&&(t+=4),(4===e&&2!==this.type||7===e)&&(t+=4),this.isArray&&this.arrayIndex&&(t+=this.arrayIndex.getByteLength(e)),t}}t.default=i},831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(9305);t.default=class{constructor(){this.type=0,this.name="",this.beginParameters=0,this.parameters=[]}load(e,t,n){if(this.type=e.readInt32(),this.type<0||this.type>3)throw new Error(`SubParameters: Bad type: ${this.type}`);if(this.name=e.readNull(),0===this.name.length)throw new Error("SubParameters: Empty name");if(this.beginParameters=e.readInt32(),this.beginParameters){let a=n.getFunction(this.type,this.name);if(!a)throw new Error(`SubParameters "${this.name}:${this.type}": Unknown signature`);for(let i=0,l=a.args.length;i<l;i++){let a=new r.default;try{a.load(e,t,n)}catch(e){throw new Error(`SubParameters "${this.name}": Parameter ${i}: ${e}`)}this.parameters[i]=a}}}save(e,t){e.writeInt32(this.type),e.writeNull(this.name),e.writeInt32(this.beginParameters);for(let n of this.parameters)n.save(e,t)}getByteLength(e){let t=9+a.byteLengthUtf8(this.name);if(this.parameters.length)for(let n of this.parameters)t+=n.getByteLength(e);return t}}},3185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048),r=n(518);t.default=class{constructor(){this.name="",this.description="",this.isComment=0,this.isEnabled=0,this.isCustom=0,this.isInitiallyOff=0,this.runOnInitialization=0,this.category=0,this.ecas=[]}load(e,t,n){this.name=e.readNull(),this.description=e.readNull(),7===t&&(this.isComment=e.readInt32()),this.isEnabled=e.readInt32(),this.isCustom=e.readInt32(),this.isInitiallyOff=e.readInt32(),this.runOnInitialization=e.readInt32(),this.category=e.readInt32();for(let a=0,i=e.readUint32();a<i;a++){let i=new r.default;try{i.load(e,t,!1,n)}catch(e){throw new Error(`Trigger "${this.name}": ECA ${a}: ${e}`)}this.ecas[a]=i}}save(e,t){e.writeNull(this.name),e.writeNull(this.description),7===t&&e.writeInt32(this.isComment),e.writeInt32(this.isEnabled),e.writeInt32(this.isCustom),e.writeInt32(this.isInitiallyOff),e.writeInt32(this.runOnInitialization),e.writeInt32(this.category),e.writeUint32(this.ecas.length);for(let n of this.ecas)n.save(e,t)}getByteLength(e){let t=26+a.byteLengthUtf8(this.name)+a.byteLengthUtf8(this.description);7===e&&(t+=4);for(let n of this.ecas)t+=n.getByteLength(e);return t}}},2641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.id=0,this.name="",this.isComment=0}load(e,t){this.id=e.readInt32(),this.name=e.readNull(),7===t&&(this.isComment=e.readInt32())}save(e,t){e.writeInt32(this.id),e.writeNull(this.name),7===t&&e.writeInt32(this.isComment)}getByteLength(e){let t=5+a.byteLengthUtf8(this.name);return 7===e&&(t+=4),t}}},2094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerData=void 0;const a=n(6978),r=n(9134);t.TriggerData=class{constructor(){this.types={},this.functions=[{},{},{},{}],this.presets={},this.externalTypes={},this.externalFunctions=[{},{},{},{}],this.externalPresets={}}addTriggerData(e,t){let n=this.types,a=this.functions,i=this.presets;t&&(n=this.externalTypes,a=this.externalFunctions,i=this.externalPresets);let l=new r.IniFile;l.load(e);let s=l.getSection("TriggerTypes");s&&this.addTriggerTypes(n,s),s=l.getSection("TriggerEvents"),s&&this.addTriggerDataFunctions(a[0],s,1),s=l.getSection("TriggerConditions"),s&&this.addTriggerDataFunctions(a[1],s,1),s=l.getSection("TriggerActions"),s&&this.addTriggerDataFunctions(a[2],s,1),s=l.getSection("TriggerCalls"),s&&this.addTriggerDataFunctions(a[3],s,3),s=l.getSection("TriggerParams"),s&&this.addTriggerDataPresets(i,s)}addTriggerTypes(e,t){for(let[n,a]of t){let t=a.split(",");e[n.toLowerCase()]=t[4]||""}}addTriggerDataFunctions(e,t,n){for(let[a,r]of t)if("_"!==a[0]){let i=r.split(","),l=[],s=t.get(`_${a}_scriptname`)||null,o=null;3===n&&(o=i[2]);for(let e=n,t=i.length;e<t;e++){let t=i[e];Number.isNaN(parseFloat(t))&&"nothing"!==t&&""!==t&&l.push(t)}e[a.toLowerCase()]={args:l,scriptName:s,returnType:o}}}addTriggerDataPresets(e,t){for(let[n,a]of t){let t=a.split(",");e[n.toLowerCase()]=t[2].replace(/"/g,"").replace(/`/g,'"')}}addJassFunctions(e){let t,n=new a.default(e);for(;void 0!==(t=n.read());)if("native"===t||"function"===t){let e=n.read();if(e&&(t=n.read(),"takes"===t)){let t=[],a=n.readSafe();if("nothing"!==a)for(t.push(a),n.readSafe();","===n.read();)t.push(n.readSafe()),n.readSafe();else n.read();let r=n.readSafe();"nothing"===r&&(r=null);let i=e.toLowerCase(),l={args:t,scriptName:e,returnType:r};this.externalFunctions[2][i]=l,"nothing"!==r&&(this.externalFunctions[3][i]=l)}}}getBaseType(e){e=e.toLowerCase();let t=this.types[e];return void 0===t&&(t=this.externalTypes[e]),""===t||void 0===t?e:t}isBaseFunction(e,t){return t=t.toLowerCase(),!!this.functions[e][t]}getFunction(e,t){t=t.toLowerCase();let n=this.functions[e][t];return n||(n=this.externalFunctions[e][t]),n}getFunctionType(e){e=e.toLowerCase();let t=this.functions;for(let n=0;n<4;n++)if(t[n][e])return n;return-1}getPreset(e){e=e.toLowerCase();let t=this.presets[e];return void 0===t&&(t=this.externalPresets[e]),t}isCustomPreset(e){if(e=e.toLowerCase(),void 0!==this.presets[e])return!1;if(void 0!==this.externalPresets[e])return!0;throw new Error(`Failed to find a preset: ${e}`)}}},700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9048);t.default=class{constructor(){this.name="",this.type="",this.u1=0,this.isArray=0,this.arraySize=0,this.isInitialized=0,this.initialValue=""}load(e,t){this.name=e.readNull(),this.type=e.readNull(),this.u1=e.readInt32(),this.isArray=e.readInt32(),7===t&&(this.arraySize=e.readInt32()),this.isInitialized=e.readInt32(),this.initialValue=e.readNull()}save(e,t){e.writeNull(this.name),e.writeNull(this.type),e.writeInt32(this.u1),e.writeInt32(this.isArray),7===t&&e.writeInt32(this.arraySize),e.writeInt32(this.isInitialized),e.writeNull(this.initialValue)}getByteLength(e){let t=15+a.byteLengthUtf8(this.name)+a.byteLengthUtf8(this.type)+a.byteLengthUtf8(this.initialValue);return 7===e&&(t+=4),t}}},5629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2390);t.default=class{constructor(){this.stringMap=new Map}load(e){let t,n=new a.default(e),r=e.indexOf("STRING");if(-1!==r)for(n.index=r;t=n.readToken();)if("STRING"===t){let t=n.readInt();n.read();let a=e.indexOf("}",n.index);if(-1===a)throw this.stringMap.set(t,e.slice(n.index,e.length).trim()),new Error(`WTS: missing data in string ${this.stringMap.size} (and maybe more)`);this.stringMap.set(t,e.slice(n.index,a).trim()),n.index=a}}save(){let e="";for(let[t,n]of this.stringMap)e+=`STRING ${t}\r\n{\r\n${n}\r\n}\r\n\r\n`;return e}getString(e){return"string"!=typeof e?this.stringMap.get(e):e.startsWith("TRIGSTR_")?this.stringMap.get(parseInt(e.slice(8))):void 0}setString(e,t){"string"==typeof e?e.startsWith("TRIGSTR_")&&this.stringMap.set(parseInt(e.slice(8)),t):this.stringMap.set(e,t)}}},3270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5629);t.default={File:a.default}},6773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3955);t.default={sanityTest:a.default}},3955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6269);function r(e,t){let n=t[e];for(let a=0;a<e;a++)if(t[a]===n)return!0;return!1}t.default=function(e){let t=[],n=e.content,i=e.alphaBits,l=e.mipmapOffsets,s=e.mipmapSizes,o=e.width,u=e.height;if(0!==n&&1!==n&&t.push({type:"warning",message:"Unknown content type"}),0!==i&&1!==i&&4!==i&&8!==i&&t.push({type:"warning",message:`Expected alpha bits to be 0, 1, 4, or 8, but got ${i}`}),(o>512||u>512)&&t.push({type:"warning",message:`Expected width and height up to 512, but got ${o}x${u}`}),0===n){const n=e.jpgHeader;n.length>624&&t.push({type:"warning",message:`Expected the JPG header to be at most 624 bytes, but got ${n.length}`})}a.isPowerOfTwo(o)&&a.isPowerOfTwo(u)||t.push({type:"warning",message:`Expected the width and height to be powers of two, but got ${o}x${u}`});for(let a=0;a<16;a++){if(s[a]>0)if(o<1&&u<1)t.push({type:"warning",message:`Mipmap ${a}: this mipmap should not exist`});else if(r(a,l))t.push({type:"warning",message:`Mipmap ${a}: this mipmap is fake`});else{let r;o=Math.max(o,1),u=Math.max(u,1);try{r=e.getMipmap(a)}catch(e){t.push({type:"warning",message:`Mipmap ${a}: Decoding failed`})}if(r)if(0===n)r.width===o&&r.height===u||t.push({type:"warning",message:`Mipmap ${a}: the JPG width (${r.width}) and height (${r.height}) do not match the mipmap width (${o}) and height (${u})`});else if(1===n){let e=o*u,n=e+Math.ceil(e*i/8);n!==s[a]&&t.push({type:"warning",message:`Mipmap ${a}: the declared size is ${s[a]}, but the real size is ${n}`})}}o>>=1,u>>=1}return{warnings:t.length,nodes:t}}},5797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8079);t.default={sanityTest:a.default}},8079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6269);t.default=function(e){let t=[],n=e.width,r=e.height,i=e.mipmaps(),l=Math.log2(Math.max(n,r));i<l&&t.push({type:"warning",message:`Expected ${l} mipmaps, but got ${i}`}),a.isPowerOfTwo(n)&&a.isPowerOfTwo(r)||t.push({type:"warning",message:`Expected the width and height to be powers of two, but got ${n}x${r}`});for(let n=0;n<i;n++)try{e.getMipmap(n)}catch(e){t.push({type:"warning",message:`Mipmap ${n}: Decoding failed`})}return{warnings:t.length,nodes:t}}},5928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5584),r=n(6773),i=n(5797),l=n(8790),s=n(7450),o=n(138),u=n(7335);t.default={UnitTester:a.default,blp:r.default,dds:i.default,MappedData:l.MappedData,jass2:s.default,mdlx:o.default,w3x:u.default}},9067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6978);function r(e,t){let n=e.readSafe(),a=[];e.read();let r=e.readSafe();if("nothing"!==r)for(a.push({type:r,name:e.readSafe()});","===e.read();)a.push({type:e.readSafe(),name:e.readSafe()});else e.read();let i=e.readSafe();return{name:n,decl:`\n/**\n * ${t?"constant ":""}native ${n} takes ${a.length?a.map((e=>`${e.type} ${e.name}`)).join(", "):"nothing"} returns ${i}\n */\nfunction ${n}(C: Context, L: lua_State) {\n  ${function(e){return e.map(((e,t)=>{let n=e.type;if("code"===n)return`let ${e.name} = luaL_ref(L, LUA_REGISTRYINDEX);`;{let a;return a="integer"===n?"luaL_checkinteger":"real"===n?"luaL_checknumber":"boolean"===n?"lua_toboolean":"string"===n?"luaL_checkstring":"lua_touserdata",`let ${e.name} = ${a}(L, ${t+1});`}})).join("\n")}(a)}\n  console.warn('${n} was called but is not implemented :(');\n  ${function(e){if("nothing"===e)return"return 0";{let t,n;if("integer"===e)t="lua_pushinteger",n="0";else if("real"===e)t="lua_pushnumber",n="0";else if("boolean"===e)t="lua_pushboolean",n="false";else if("string"===e)t="lua_pushstring",n="''";else{if("code"===e)throw"CODE??";t="lua_pushlightuserdata",n="{name: 'FAKE'}"}return`${t}(L, ${n});\nreturn 1;`}}(i)}\n}`}}t.default=function(e){let t,n=new a.default(e),i=[],l=[];for(;void 0!==(t=n.read());){let e=!1;if("constant"===t&&(e=!0,t=n.read()),"native"===t){let{name:t,decl:a}=r(n,e);i.push(t),l.push(a)}}return`${l.join("\n")}\n${function(e){return`\n/**\n * Bind natives to the given context.\n */\nexport default function bind(C: Context) {\nlet L = C.L;\n${e.map((e=>`  lua_register(L, '${e}', ${e}.bind(null, C));`)).join("\n")}\n}`}(i)}\n`}},2417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8762),r=n(7595),i=n(6112),l=n(3277),s=n(6110),o=n(6896),u=n(9896),c=n(8280),d=n(775),h=n(2471),f=n(5814),_=n(6819),m=n(8193),p=n(5734),g=n(305),b=n(4674),w=n(9933),v=n(2365),A=n(7417),y=n(5283),L=n(9521),S=n(8269),T=n(8726),E=n(9130),k=n(6073),x=n(9816),I=n(4314),M=n(3351),U=n(8237),P=n(9691),R=n(1075),O=n(4882),C=n(2813),B=n(9123),F=n(232),D=n(4005),G=n(4263),N=n(7827),V=n(4970),H=n(242),j=n(8783),K=n(131),z=n(3666),X=n(3986),J=n(3698);t.default=function(){let e=[],t=[],n=[],Y=[],$=[],q=[],W=[],Z=[],Q=[],ee=[],te=[],ne=[],ae=[],re=[],ie=[],le=[],se=[],oe=[],ue=[],ce=[],de=[],he=[],fe=[],_e=[],me=[],pe=[],ge=[],be=[],we=[],ve=[],Ae=[],ye=[],Le=[],Se=[],Te=[],Ee=[],ke=[],xe=[],Ie=[];for(let t=0;t<24;t++)e[t]=new a.default(t);for(let e=0;e<8;e++)t[e]=new r.default(e);for(let e=0;e<4;e++)n[e]=new i.default(e);for(let e=0;e<10;e++)Y[e]=new l.default(e);for(let e=0;e<2;e++)$[e]=new s.default(e);for(let e=0;e<7;e++)q[e]=new o.default(e);for(let e=0;e<27;e++)W[e]=new u.default(e);for(let e=0;e<24;e++)Z[e]=new c.default(e);for(let e=0;e<8;e++)Q[e]=new d.default(e);for(let e=0;e<4;e++)ee[e]=new h.default(e);for(let e=0;e<11;e++)te[e]=new f.default(e);for(let e=11;e<63;e++)ne[e]=new _.default(e);for(let e=0;e<8;e++){let t=Math.pow(2,e);ae[t]=new m.default(t)}for(let e=0;e<6;e++)re[e]=new p.default(e);for(let e=0;e<8;e++){let t=Math.pow(2,e);ie[t]=new g.default(t)}for(let e=0;e<20;e++){let t=Math.pow(2,e);le[t]=new b.default(t)}for(let e=0;e<4;e++)se[e]=new w.default(e);for(let e=0;e<3;e++)oe[e]=new v.default(e);for(let e=0;e<4;e++)ue[e]=new A.default(e);for(let e=0;e<4;e++)ce[e]=new y.default(e);for(let e=0;e<5;e++)de[e]=new L.default(e);for(let e=0;e<3;e++)he[e]=new S.default(e);for(let e=0;e<8;e++)fe[e]=new T.default(e);for(let e=0;e<2;e++)_e[e]=new E.default(e);for(let e=2;e<3;e++)_e[e]=new k.default(e);for(let e=0;e<26;e++)me[e]=new x.default(e);for(let e=0;e<4;e++)pe[e]=new I.default(e);for(let e=0;e<3;e++)ge[e]=new M.default(e);for(let e=0;e<25;e++)be[e]=new U.default(e);for(let e=0;e<11;e++)we[e]=new P.default(e);for(let e=11;e<18;e++)we[e]=new R.default(e);for(let e=18;e<52;e++)we[e]=new O.default(e);for(let e=52;e<89;e++)we[e]=new C.default(e);for(let e=89;e<90;e++)we[e]=new B.default(e);for(let e=90;e<92;e++)we[e]=new F.default(e);for(let e=256;e<260;e++)we[e]=new P.default(e);for(let e=261;e<269;e++)we[e]=new R.default(e);for(let e=269;e<278;e++)we[e]=new O.default(e);for(let e=286;e<295;e++)we[e]=new C.default(e);for(let e=0;e<6;e++)ve[e]=new D.default(e);for(let e=0;e<27;e++)Ae[e]=new G.default(e);for(let e=0;e<9;e++)ye[e]=new N.default(e);for(let e=0;e<7;e++)Le[e]=new V.default(e);for(let e=0;e<6;e++)Se[e]=new H.default(e);for(let e=0;e<1;e++)Te[e]=new j.default(e);for(let e=0;e<4;e++)Ee[e]=new K.default(e);for(let e=0;e<3;e++){let t=Math.pow(2,e);ke[t]=new z.default(t)}for(let e=0;e<7;e++)xe[e]=new X.default(e);for(let e=0;e<2;e++)Ie[e]=new J.default(e);return{playerColors:e,races:t,playerGameResults:n,allianceTypes:Y,versions:$,attackTypes:q,damageTypes:W,weaponTypes:Z,pathingTypes:Q,mouseButtonTypes:ee,animTypes:te,subAnimTypes:ne,racePrefs:ae,mapControls:re,gameTypes:ie,mapFlags:le,placements:se,startLocPrios:oe,mapDensities:ue,gameDifficulties:ce,gameSpeeds:de,playerSlotStates:he,volumeGroups:fe,gameStates:_e,playerStates:me,unitStates:pe,aiDifficulties:ge,playerScores:be,events:we,limitOps:ve,unitTypes:Ae,itemTypes:ye,cameraFields:Le,blendModes:Se,rarityControls:Te,texMapFlags:Ee,fogStates:ke,effectTypes:xe,soundTypes:Ie}}},5626:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7187),r=n(5745),i=n(7870),l=n(670),s=n(4049),o=n(2362),u=n(2495),c=n(2417),d=n(5911);class h extends a.EventEmitter{constructor(){super(),this.map=null,this.handle=0,this.freeHandles=[],this.handles=[],this.name="",this.description="",this.players=[],this.actualPlayers=0,this.startLocations=[],this.constantHandles=c.default(),this.timers=new Set,this.triggers=new Set,this.threads=new Set,this.currentThread=null,this.enumUnit=null,this.filterUnit=null,this.enumPlayer=null,this.t=0,this.L=l.luaL_newstate(),o.default(this),i.lua_atnativeerror(this.L,(e=>{let t=i.lua_touserdata(e,-1);return i.lua_pushstring(e,t.stack),1}));for(let e=0;e<28;e++)this.players[e]=this.addHandle(new u.default(e,28))}start(){this.t=performance.now()}step(){let e=performance.now(),t=.001*(e-this.t),n=this.timers,a=this.threads;for(let e of n)if(e.elapsed+=t,e.elapsed>=e.timeout){let t=new d.default(this.L,{expiredTimer:e}),a=t.L;i.lua_rawgeti(a,i.LUA_REGISTRYINDEX,e.handlerFunc),this.threads.add(t),e.periodic?e.elapsed=0:n.delete(e)}for(let e of a)if(e.sleep-=t,e.sleep<=0){this.currentThread=e;let t=e.L,n=i.lua_resume(t,this.L,0);n===i.LUA_OK?a.delete(e):n===i.LUA_YIELD?e.sleep=l.luaL_checknumber(t,1):(console.log("[JS] Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(t,-1))),i.lua_pop(t,2))}this.t=e}addHandle(e){if(-1===e.handleId){let t;t=this.freeHandles.length?this.freeHandles.pop():this.handle++,this.handles[t]=e,e.handleId=t}return e}freeHandle(e){-1!==e.handleId&&(this.freeHandles.push(e.handleId),this.handles[e.handleId]=null,e.handleId=-1)}call(e){let t=this.L;"string"==typeof e?i.lua_getglobal(t,e):"number"==typeof e&&i.lua_rawgeti(t,i.LUA_REGISTRYINDEX,e),i.lua_pcall(t,0,0,0)&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(t,-1))),i.lua_pop(t,2))}run(e,t){let n=this.L;t&&(e=s.default(e)),l.luaL_loadstring(n,r.to_luastring(e))&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(n,-1))),i.lua_pop(n,2)),i.lua_pcall(n,0,0,0)&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(n,-1))),i.lua_pop(n,2))}open(e){this.map=e;let t=e.getScriptFile();if(t){let e=t.text();if(e){let n=t.name.endsWith(".j");this.run(e,n)}}}}t.default=h},7450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5626),r=n(4049),i=n(8615),l=n(9067);t.default={Context:a.default,jass2lua:r.default,types:i,compileNatives:l.default}},4049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6978);t.default=function(e){let t,n=new a.default(e),r=[];for(;void 0!==(t=n.read());)if("function"===t){let e=n.readSafe();n.read(),t=n.read();let a="";if("nothing"!==t)for(a+=n.readSafe();","===n.read();)n.read(),a+=","+n.readSafe();else n.read();n.read();let i=`function ${e}(${a})`,l=[];for(;"endfunction"!==(t=n.readSafe());)if("local"===t){n.read();let e=n.readSafe();"array"===e?l.push(`local ${n.readSafe()}={}`):l.push(`local ${e}${n.readUntil("\n")}\n`)}else if("if"===t||"elseif"===t||"not"===t)l.push(t+" ");else if("then"===t)l.push(" "+t);else if("loop"===t)l.push("while 1 do");else if("endloop"===t||"endif"===t)l.push("end");else if("exitwhen"===t)l.push(`if ${n.readUntil("\n")} then break end\n`);else if("return"===t){let e=n.readUntil("\n");t=n.peek(),"endif"===t||"endloop"===t||"endfunction"===t?l.push(`return ${e}\n`):l.push(`if 1 then return ${e} end\n`)}else if("\n"===t){let e=l[l.length-1];e&&"\n"!==e[e.length-1]&&l.push("\n")}else"set"!==t&&"call"!==t&&"function"!==t&&l.push(t);r.push(`${i}\n${l.join("")}end`)}else if("globals"===t)for(;"endglobals"!==(t=n.read());)if("\n"!==t){"constant"===t&&(t=n.read());let e=n.read();if("array"===e)r.push(`${n.readSafe()}={}`);else{let t="nil";"="===n.peek()&&(n.read(),t=n.readUntil("\n")),"nil"!==t&&r.push(`${e}=${t}`)}}return r.join("\n")}},2362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7870),r=n(670),i=n(8615);function l(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.races[n]),1}function s(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.allianceTypes[n]),1}function o(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.racePrefs[n]),1}function u(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameStates[n]),1}function c(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameStates[n]),1}function d(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerStates[n]),1}function h(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerScores[n]),1}function f(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerGameResults[n]),1}function _(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.unitStates[n]),1}function m(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.aiDifficulties[n]),1}function p(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function g(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function b(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function w(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function v(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function A(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function y(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.limitOps[n]),1}function L(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.unitTypes[n]),1}function S(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameSpeeds[n]),1}function T(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.placements[n]),1}function E(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.startLocPrios[n]),1}function k(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameDifficulties[n]),1}function x(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameTypes[n]),1}function I(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapFlags[n]),1}function M(e,t){r.luaL_checkinteger(t,1);return console.warn("ConvertMapVisibility used, but the implementation is unknown"),a.lua_pushnil(t),1}function U(e,t){r.luaL_checkinteger(t,1);return console.warn("ConvertMapSetting used, but the implementation is unknown"),a.lua_pushnil(t),1}function P(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapDensities[n]),1}function R(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapControls[n]),1}function O(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerColors[n]),1}function C(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerSlotStates[n]),1}function B(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.volumeGroups[n]),1}function F(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.cameraFields[n]),1}function D(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.blendModes[n]),1}function G(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.rarityControls[n]),1}function N(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.texMapFlags[n]),1}function V(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.fogStates[n]),1}function H(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.effectTypes[n]),1}function j(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.versions[n]),1}function K(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.itemTypes[n]),1}function z(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.attackTypes[n]),1}function X(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.damageTypes[n]),1}function J(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.weaponTypes[n]),1}function Y(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.soundTypes[n]),1}function $(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.pathingTypes[n]),1}function q(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mouseButtonTypes[n]),1}function W(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.animTypes[n]),1}function Z(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.subAnimTypes[n]),1}function Q(e,t){r.luaL_checkstring(t,1);return console.warn("OrderId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ee(e,t){r.luaL_checkinteger(t,1);return console.warn("OrderId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function te(e,t){r.luaL_checkstring(t,1);return console.warn("UnitId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ne(e,t){r.luaL_checkinteger(t,1);return console.warn("UnitId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function ae(e,t){r.luaL_checkstring(t,1);return console.warn("AbilityId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function re(e,t){r.luaL_checkinteger(t,1);return console.warn("AbilityId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function ie(e,t){r.luaL_checkinteger(t,1);return console.warn("GetObjectName was called but is not implemented :("),a.lua_pushstring(t,""),1}function le(e,t){return a.lua_pushinteger(t,24),1}function se(e,t){return a.lua_pushinteger(t,24),1}function oe(e,t){return a.lua_pushinteger(t,25),1}function ue(e,t){return a.lua_pushinteger(t,28),1}function ce(e,t){return a.lua_pushinteger(t,26),1}function de(e,t){return a.lua_pushinteger(t,27),1}function he(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n*(Math.PI/180)),1}function fe(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n*(180/Math.PI)),1}function _e(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.sin(n)),1}function me(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.cos(n)),1}function pe(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.tan(n)),1}function ge(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.asin(n)),1}function be(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.acos(n)),1}function we(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.atan(n)),1}function ve(e,t){let n=r.luaL_checknumber(t,1),i=r.luaL_checknumber(t,2);return a.lua_pushnumber(t,Math.atan2(n,i)),1}function Ae(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.sqrt(n)),1}function ye(e,t){let n=r.luaL_checknumber(t,1),i=r.luaL_checknumber(t,2);return a.lua_pushnumber(t,Math.pow(n,i)),1}function Le(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushnumber(t,n),1}function Se(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushinteger(t,0|n),1}function Te(e,t){r.luaL_checkinteger(t,1);return console.warn("I2S was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ee(e,t){r.luaL_checknumber(t,1);return console.warn("R2S was called but is not implemented :("),a.lua_pushstring(t,""),1}function ke(e,t){r.luaL_checknumber(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("R2SW was called but is not implemented :("),a.lua_pushstring(t,""),1}function xe(e,t){r.luaL_checkstring(t,1);return console.warn("S2I was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ie(e,t){r.luaL_checkstring(t,1);return console.warn("S2R was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Me(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.handleId),1}function Ue(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SubString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Pe(e,t){r.luaL_checkstring(t,1);return console.warn("StringLength was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Re(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("StringCase was called but is not implemented :("),a.lua_pushstring(t,""),1}function Oe(e,t){r.luaL_checkstring(t,1);return console.warn("StringHash was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ce(e,t){r.luaL_checkstring(t,1);return console.warn("GetLocalizedString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Be(e,t){r.luaL_checkstring(t,1);return console.warn("GetLocalizedHotkey was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Fe(e,t){r.luaL_checkstring(t,1);return console.warn("SetMapName was called but is not implemented :("),0}function De(e,t){r.luaL_checkstring(t,1);return console.warn("SetMapDescription was called but is not implemented :("),0}function Ge(e,t){r.luaL_checkinteger(t,1);return console.warn("SetTeams was called but is not implemented :("),0}function Ne(e,t){r.luaL_checkinteger(t,1);return console.warn("SetPlayers was called but is not implemented :("),0}function Ve(e,t){let n=r.luaL_checkinteger(t,1),a=r.luaL_checknumber(t,2),l=r.luaL_checknumber(t,3);return e.startLocations[n]=e.addHandle(new i.JassLocation(a,l)),0}function He(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("DefineStartLocationLoc was called but is not implemented :("),0}function je(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("SetStartLocPrioCount was called but is not implemented :("),0}function Ke(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SetStartLocPrio was called but is not implemented :("),0}function ze(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetStartLocPrioSlot was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Xe(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetStartLocPrio was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Je(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetGameTypeSupported was called but is not implemented :("),0}function Ye(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetMapFlag was called but is not implemented :("),0}function $e(e,t){a.lua_touserdata(t,1);return console.warn("SetGamePlacement was called but is not implemented :("),0}function qe(e,t){a.lua_touserdata(t,1);return console.warn("SetGameSpeed was called but is not implemented :("),0}function We(e,t){a.lua_touserdata(t,1);return console.warn("SetGameDifficulty was called but is not implemented :("),0}function Ze(e,t){a.lua_touserdata(t,1);return console.warn("SetResourceDensity was called but is not implemented :("),0}function Qe(e,t){a.lua_touserdata(t,1);return console.warn("SetCreatureDensity was called but is not implemented :("),0}function et(e,t){return console.warn("GetTeams was called but is not implemented :("),a.lua_pushinteger(t,0),1}function tt(e,t){return console.warn("GetPlayers was called but is not implemented :("),a.lua_pushinteger(t,0),1}function nt(e,t){a.lua_touserdata(t,1);return console.warn("IsGameTypeSupported was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function at(e,t){return console.warn("GetGameTypeSelected was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function rt(e,t){a.lua_touserdata(t,1);return console.warn("IsMapFlagSet was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function it(e,t){return console.warn("GetGamePlacement was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function lt(e,t){return console.warn("GetGameSpeed was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function st(e,t){return console.warn("GetGameDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ot(e,t){return console.warn("GetResourceDensity was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ut(e,t){return console.warn("GetCreatureDensity was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ct(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function dt(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ht(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ft(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetPlayerTeam was called but is not implemented :("),0}function _t(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checkinteger(t,2);return n.startLocation=i,0}function mt(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ForcePlayerStartLocation was called but is not implemented :("),0}function pt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.color=r,0}function gt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetPlayerAlliance was called but is not implemented :("),0}function bt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("SetPlayerTaxRate was called but is not implemented :("),0}function wt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetPlayerRacePreference was called but is not implemented :("),0}function vt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_toboolean(t,2);return n.raceSelectable=r,0}function At(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.controller=r,0}function yt(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checkstring(t,2);return n.name=i,0}function Lt(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetPlayerOnScoreScreen was called but is not implemented :("),0}function St(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerTeam was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Tt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.startLocation),1}function Et(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.color),1}function kt(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerSelectable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function xt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.controller),1}function It(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerSlotState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GetPlayerTaxRate was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ut(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerRacePrefSet was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushstring(t,n.name),1}function Rt(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassTimer)),1}function Ot(e,t){let n=a.lua_touserdata(t,1);return e.timers.delete(n),e.freeHandle(n),0}function Ct(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checknumber(t,2),l=a.lua_toboolean(t,3),s=r.luaL_ref(t,a.LUA_REGISTRYINDEX);return n.elapsed=0,n.timeout=i,n.periodic=l,n.handlerFunc=s,e.timers.add(n),0}function Bt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.elapsed),1}function Ft(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.timeout-n.elapsed),1}function Dt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.timeout),1}function Gt(e,t){let n=a.lua_touserdata(t,1);return e.timers.delete(n),0}function Nt(e,t){let n=a.lua_touserdata(t,1);return e.timers.add(n),0}function Vt(e,t){let n=e.currentThread;return n&&n.expiredTimer?a.lua_pushlightuserdata(t,n.expiredTimer):a.lua_pushnil(t),1}function Ht(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassGroup)),1}function jt(e,t){let n=a.lua_touserdata(t,1);return e.freeHandle(n),0}function Kt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.units.add(r),0}function zt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.units.delete(r),0}function Xt(e,t){return a.lua_touserdata(t,1).units.clear(),0}function Jt(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsOfType was called but is not implemented :("),0}function Yt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsOfPlayer was called but is not implemented :("),0}function $t(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("GroupEnumUnitsOfTypeCounted was called but is not implemented :("),0}function qt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsInRect was called but is not implemented :("),0}function Wt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("GroupEnumUnitsInRectCounted was called but is not implemented :("),0}function Zt(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("GroupEnumUnitsInRange was called but is not implemented :("),0}function Qt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4);return console.warn("GroupEnumUnitsInRangeOfLoc was called but is not implemented :("),0}function en(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5),r.luaL_checkinteger(t,6);return console.warn("GroupEnumUnitsInRangeCounted was called but is not implemented :("),0}function tn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4),r.luaL_checkinteger(t,5);return console.warn("GroupEnumUnitsInRangeOfLocCounted was called but is not implemented :("),0}function nn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsSelected was called but is not implemented :("),0}function an(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("GroupImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rn(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GroupImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ln(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("GroupPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sn(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupPointOrderLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function on(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("GroupPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function un(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("GroupPointOrderByIdLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cn(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function dn(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("GroupTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function hn(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_ref(t,a.LUA_REGISTRYINDEX);for(let t of n.units)e.enumUnit=t,e.call(i);return e.enumUnit=null,r.luaL_unref(t,i),0}function fn(e,t){a.lua_touserdata(t,1);return console.warn("FirstOfGroup was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _n(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassForce)),1}function mn(e,t){let n=a.lua_touserdata(t,1);return e.freeHandle(n),0}function pn(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.players.add(r),0}function gn(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.players.delete(r),0}function bn(e,t){return a.lua_touserdata(t,1).players.clear(),0}function wn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("ForceEnumPlayers was called but is not implemented :("),0}function vn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("ForceEnumPlayersCounted was called but is not implemented :("),0}function An(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("ForceEnumAllies was called but is not implemented :("),0}function yn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("ForceEnumEnemies was called but is not implemented :("),0}function Ln(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_ref(t,a.LUA_REGISTRYINDEX);for(let t of n.players)e.enumPlayer=t,e.call(i);return e.enumPlayer=null,r.luaL_unref(t,i),0}function Sn(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("Rect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RectFromLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function En(e,t){a.lua_touserdata(t,1);return console.warn("RemoveRect was called but is not implemented :("),0}function kn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetRect was called but is not implemented :("),0}function xn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("SetRectFromLoc was called but is not implemented :("),0}function In(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("MoveRectTo was called but is not implemented :("),0}function Mn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("MoveRectToLoc was called but is not implemented :("),0}function Un(e,t){a.lua_touserdata(t,1);return console.warn("GetRectCenterX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Pn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectCenterY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Rn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMinX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function On(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMinY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Cn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMaxX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Bn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMaxY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Fn(e,t){return console.warn("CreateRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Dn(e,t){a.lua_touserdata(t,1);return console.warn("RemoveRegion was called but is not implemented :("),0}function Gn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionAddRect was called but is not implemented :("),0}function Nn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionClearRect was called but is not implemented :("),0}function Vn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("RegionAddCell was called but is not implemented :("),0}function Hn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionAddCellAtLoc was called but is not implemented :("),0}function jn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("RegionClearCell was called but is not implemented :("),0}function Kn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionClearCellAtLoc was called but is not implemented :("),0}function zn(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("Location was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xn(e,t){a.lua_touserdata(t,1);return console.warn("RemoveLocation was called but is not implemented :("),0}function Jn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("MoveLocation was called but is not implemented :("),0}function Yn(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function $n(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function qn(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Wn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("IsPointInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ea(e,t){return console.warn("GetWorldBounds was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ta(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassTrigger)),1}function na(e,t){let n=a.lua_touserdata(t,1);return e.triggers.delete(n),e.freeHandle(n),0}function aa(e,t){a.lua_touserdata(t,1);return console.warn("ResetTrigger was called but is not implemented :("),0}function ra(e,t){a.lua_touserdata(t,1);return console.warn("EnableTrigger was called but is not implemented :("),0}function ia(e,t){a.lua_touserdata(t,1);return console.warn("DisableTrigger was called but is not implemented :("),0}function la(e,t){a.lua_touserdata(t,1);return console.warn("IsTriggerEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sa(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("TriggerWaitOnSleeps was called but is not implemented :("),0}function oa(e,t){a.lua_touserdata(t,1);return console.warn("IsTriggerWaitOnSleeps was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ua(e,t){return a.lua_pushlightuserdata(t,e.filterUnit),1}function ca(e,t){return a.lua_pushlightuserdata(t,e.enumUnit),1}function da(e,t){return console.warn("GetFilterDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ha(e,t){return console.warn("GetEnumDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fa(e,t){return console.warn("GetFilterItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _a(e,t){return console.warn("GetEnumItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ma(e,t){return console.warn("GetFilterPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pa(e,t){return a.lua_pushlightuserdata(t,e.enumPlayer),1}function ga(e,t){let n=e.currentThread;return n&&n.triggeringTrigger?a.lua_pushlightuserdata(t,n.triggeringTrigger):a.lua_pushnil(t),1}function ba(e,t){return console.warn("GetTriggerEventId was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function wa(e,t){a.lua_touserdata(t,1);return console.warn("GetTriggerEvalCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function va(e,t){a.lua_touserdata(t,1);return console.warn("GetTriggerExecCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Aa(e,t){r.luaL_checkstring(t,1);return console.warn("ExecuteFunc was called but is not implemented :("),0}function ya(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("And was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function La(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("Or was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sa(e,t){a.lua_touserdata(t,1);return console.warn("Not was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ta(e,t){r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("Condition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ea(e,t){a.lua_touserdata(t,1);return console.warn("DestroyCondition was called but is not implemented :("),0}function ka(e,t){r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("Filter was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xa(e,t){a.lua_touserdata(t,1);return console.warn("DestroyFilter was called but is not implemented :("),0}function Ia(e,t){a.lua_touserdata(t,1);return console.warn("DestroyBoolExpr was called but is not implemented :("),0}function Ma(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("TriggerRegisterVariableEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ua(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("TriggerRegisterTimerEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTimerExpireEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ra(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("TriggerRegisterGameStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Oa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDialogEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ca(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDialogButtonEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ba(e,t){return console.warn("GetEventGameState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterGameEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Da(e,t){return console.warn("GetWinningPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ga(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterEnterRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Na(e,t){return console.warn("GetTriggeringRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Va(e,t){return console.warn("GetEnteringUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ha(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterLeaveRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ja(e,t){return console.warn("GetLeavingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ka(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTrackableHitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function za(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTrackableTrackEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xa(e,t){return console.warn("GetTriggeringTrackable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ja(e,t){return console.warn("GetClickedButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ya(e,t){return console.warn("GetClickedDialog was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $a(e,t){return console.warn("GetTournamentFinishSoonTimeRemaining was called but is not implemented :("),a.lua_pushnumber(t,0),1}function qa(e,t){return console.warn("GetTournamentFinishNowRule was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Wa(e,t){return console.warn("GetTournamentFinishNowPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Za(e,t){a.lua_touserdata(t,1);return console.warn("GetTournamentScore was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Qa(e,t){return console.warn("GetSaveBasicFilename was called but is not implemented :("),a.lua_pushstring(t,""),1}function er(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterPlayerEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function tr(e,t){return console.warn("GetTriggerPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function nr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterPlayerUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ar(e,t){return console.warn("GetLevelingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function rr(e,t){return console.warn("GetLearningUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ir(e,t){return console.warn("GetLearnedSkill was called but is not implemented :("),a.lua_pushinteger(t,0),1}function lr(e,t){return console.warn("GetLearnedSkillLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function sr(e,t){return console.warn("GetRevivableUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function or(e,t){return console.warn("GetRevivingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ur(e,t){return console.warn("GetAttacker was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function cr(e,t){return console.warn("GetRescuer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function dr(e,t){return console.warn("GetDyingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hr(e,t){return console.warn("GetKillingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fr(e,t){return console.warn("GetDecayingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _r(e,t){return console.warn("GetConstructingStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function mr(e,t){return console.warn("GetCancelledStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pr(e,t){return console.warn("GetConstructedStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function gr(e,t){return console.warn("GetResearchingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function br(e,t){return console.warn("GetResearched was called but is not implemented :("),a.lua_pushinteger(t,0),1}function wr(e,t){return console.warn("GetTrainedUnitType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function vr(e,t){return console.warn("GetTrainedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ar(e,t){return console.warn("GetDetectedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yr(e,t){return console.warn("GetSummoningUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Lr(e,t){return console.warn("GetSummonedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sr(e,t){return console.warn("GetTransportUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tr(e,t){return console.warn("GetLoadedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Er(e,t){return console.warn("GetSellingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kr(e,t){return console.warn("GetSoldUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xr(e,t){return console.warn("GetBuyingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ir(e,t){return console.warn("GetSoldItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mr(e,t){return console.warn("GetChangingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ur(e,t){return console.warn("GetChangingUnitPrevOwner was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pr(e,t){return console.warn("GetManipulatingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rr(e,t){return console.warn("GetManipulatedItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Or(e,t){return console.warn("GetOrderedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Cr(e,t){return console.warn("GetIssuedOrderId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Br(e,t){return console.warn("GetOrderPointX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Fr(e,t){return console.warn("GetOrderPointY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Dr(e,t){return console.warn("GetOrderPointLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gr(e,t){return console.warn("GetOrderTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nr(e,t){return console.warn("GetOrderTargetDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vr(e,t){return console.warn("GetOrderTargetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Hr(e,t){return console.warn("GetOrderTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function jr(e,t){return console.warn("GetSpellAbilityUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kr(e,t){return console.warn("GetSpellAbilityId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function zr(e,t){return console.warn("GetSpellAbility was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xr(e,t){return console.warn("GetSpellTargetLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Jr(e,t){return console.warn("GetSpellTargetX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Yr(e,t){return console.warn("GetSpellTargetY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function $r(e,t){return console.warn("GetSpellTargetDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qr(e,t){return console.warn("GetSpellTargetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wr(e,t){return console.warn("GetSpellTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Zr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterPlayerAllianceChange was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5);return console.warn("TriggerRegisterPlayerStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ei(e,t){return console.warn("GetEventPlayerState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ti(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("TriggerRegisterPlayerChatEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ni(e,t){return console.warn("GetEventPlayerChatString was called but is not implemented :("),a.lua_pushstring(t,""),1}function ai(e,t){return console.warn("GetEventPlayerChatStringMatched was called but is not implemented :("),a.lua_pushstring(t,""),1}function ri(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDeathEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ii(e,t){let n=e.currentThread;return n&&n.triggerUnit?a.lua_pushlightuserdata(t,n.triggerUnit):a.lua_pushnil(t),1}function li(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5);return console.warn("TriggerRegisterUnitStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function si(e,t){return console.warn("GetEventUnitState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function oi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ui(e,t){return console.warn("GetEventDamage was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ci(e,t){return console.warn("GetEventDamageSource was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function di(e,t){return console.warn("GetEventDetectingPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterFilterUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fi(e,t){return console.warn("GetEventTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _i(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterUnitInRange was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function mi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerAddCondition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRemoveCondition was called but is not implemented :("),0}function gi(e,t){a.lua_touserdata(t,1);return console.warn("TriggerClearConditions was called but is not implemented :("),0}function bi(e,t){a.lua_touserdata(t,1),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("TriggerAddAction was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function wi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRemoveAction was called but is not implemented :("),0}function vi(e,t){a.lua_touserdata(t,1);return console.warn("TriggerClearActions was called but is not implemented :("),0}function Ai(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n),a.lua_yield(t,1),0}function yi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TriggerWaitForSound was called but is not implemented :("),0}function Li(e,t){a.lua_touserdata(t,1);return console.warn("TriggerEvaluate was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Si(e,t){a.lua_touserdata(t,1);return console.warn("TriggerExecute was called but is not implemented :("),0}function Ti(e,t){a.lua_touserdata(t,1);return console.warn("TriggerExecuteWait was called but is not implemented :("),0}function Ei(e,t){return console.warn("TriggerSyncStart was called but is not implemented :("),0}function ki(e,t){return console.warn("TriggerSyncReady was called but is not implemented :("),0}function xi(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ii(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetWidgetLife was called but is not implemented :("),0}function Mi(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ui(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Pi(e,t){return console.warn("GetTriggerWidget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ri(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Oi(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checkinteger(t,7);return console.warn("CreateDestructableZ was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ci(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateDeadDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bi(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checkinteger(t,7);return console.warn("CreateDeadDestructableZ was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fi(e,t){a.lua_touserdata(t,1);return console.warn("RemoveDestructable was called but is not implemented :("),0}function Di(e,t){a.lua_touserdata(t,1);return console.warn("KillDestructable was called but is not implemented :("),0}function Gi(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetDestructableInvulnerable was called but is not implemented :("),0}function Ni(e,t){a.lua_touserdata(t,1);return console.warn("IsDestructableInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("EnumDestructablesInRect was called but is not implemented :("),0}function Hi(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ji(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ki(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function zi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableLife was called but is not implemented :("),0}function Xi(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ji(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableMaxLife was called but is not implemented :("),0}function Yi(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableMaxLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function $i(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("DestructableRestoreLife was called but is not implemented :("),0}function qi(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QueueDestructableAnimation was called but is not implemented :("),0}function Wi(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetDestructableAnimation was called but is not implemented :("),0}function Zi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableAnimationSpeed was called but is not implemented :("),0}function Qi(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowDestructable was called but is not implemented :("),0}function el(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableOccluderHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function tl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableOccluderHeight was called but is not implemented :("),0}function nl(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableName was called but is not implemented :("),a.lua_pushstring(t,""),1}function al(e,t){return console.warn("GetTriggerDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function rl(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("CreateItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function il(e,t){a.lua_touserdata(t,1);return console.warn("RemoveItem was called but is not implemented :("),0}function ll(e,t){a.lua_touserdata(t,1);return console.warn("GetItemPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function sl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ol(e,t){a.lua_touserdata(t,1);return console.warn("GetItemX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ul(e,t){a.lua_touserdata(t,1);return console.warn("GetItemY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function cl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetItemPosition was called but is not implemented :("),0}function dl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemDropOnDeath was called but is not implemented :("),0}function hl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemDroppable was called but is not implemented :("),0}function fl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemPawnable was called but is not implemented :("),0}function _l(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetItemPlayer was called but is not implemented :("),0}function ml(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemInvulnerable was called but is not implemented :("),0}function pl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemVisible was called but is not implemented :("),0}function bl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemOwned was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemPowerup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Al(e,t){a.lua_touserdata(t,1);return console.warn("IsItemSellable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemPawnable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ll(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdPowerup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Sl(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdSellable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Tl(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdPawnable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function El(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("EnumItemsInRect was called but is not implemented :("),0}function kl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function xl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemType was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Il(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemDropID was called but is not implemented :("),0}function Ml(e,t){a.lua_touserdata(t,1);return console.warn("GetItemName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ul(e,t){a.lua_touserdata(t,1);return console.warn("GetItemCharges was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Pl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemCharges was called but is not implemented :("),0}function Rl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemUserData was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ol(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemUserData was called but is not implemented :("),0}function Cl(e,t){let n=a.lua_touserdata(t,1),l=r.luaL_checkinteger(t,2),s=r.luaL_checknumber(t,3),o=r.luaL_checknumber(t,4),u=r.luaL_checknumber(t,5);return a.lua_pushlightuserdata(t,e.addHandle(new i.JassUnit(n,l,s,o,u))),1}function Bl(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("CreateUnitByName was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("CreateUnitAtLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Dl(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("CreateUnitAtLocByName was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("CreateCorpse was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nl(e,t){a.lua_touserdata(t,1);return console.warn("KillUnit was called but is not implemented :("),0}function Vl(e,t){a.lua_touserdata(t,1);return console.warn("RemoveUnit was called but is not implemented :("),0}function Hl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowUnit was called but is not implemented :("),0}function jl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitState was called but is not implemented :("),0}function Kl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitX was called but is not implemented :("),0}function zl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitY was called but is not implemented :("),0}function Xl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitPosition was called but is not implemented :("),0}function Jl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetUnitPositionLoc was called but is not implemented :("),0}function Yl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitFacing was called but is not implemented :("),0}function $l(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitFacingTimed was called but is not implemented :("),0}function ql(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitMoveSpeed was called but is not implemented :("),0}function Wl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitFlyHeight was called but is not implemented :("),0}function Zl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitTurnSpeed was called but is not implemented :("),0}function Ql(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitPropWindow was called but is not implemented :("),0}function es(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitAcquireRange was called but is not implemented :("),0}function ts(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitCreepGuard was called but is not implemented :("),0}function ns(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitAcquireRange was called but is not implemented :("),a.lua_pushnumber(t,0),1}function as(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitTurnSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function rs(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitPropWindow was called but is not implemented :("),a.lua_pushnumber(t,0),1}function is(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFlyHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ls(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultAcquireRange was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ss(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultTurnSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function os(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultPropWindow was called but is not implemented :("),a.lua_pushnumber(t,0),1}function us(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultFlyHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function cs(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetUnitOwner was called but is not implemented :("),0}function ds(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetUnitColor was called but is not implemented :("),0}function hs(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetUnitScale was called but is not implemented :("),0}function fs(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitTimeScale was called but is not implemented :("),0}function _s(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitBlendTime was called but is not implemented :("),0}function ms(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetUnitVertexColor was called but is not implemented :("),0}function ps(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QueueUnitAnimation was called but is not implemented :("),0}function gs(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetUnitAnimation was called but is not implemented :("),0}function bs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitAnimationByIndex was called but is not implemented :("),0}function ws(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("SetUnitAnimationWithRarity was called but is not implemented :("),0}function vs(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_toboolean(t,3);return console.warn("AddUnitAnimationProperties was called but is not implemented :("),0}function As(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("SetUnitLookAt was called but is not implemented :("),0}function ys(e,t){a.lua_touserdata(t,1);return console.warn("ResetUnitLookAt was called but is not implemented :("),0}function Ls(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetUnitRescuable was called but is not implemented :("),0}function Ss(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitRescueRange was called but is not implemented :("),0}function Ts(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroStr was called but is not implemented :("),0}function Es(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroAgi was called but is not implemented :("),0}function ks(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroInt was called but is not implemented :("),0}function xs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroStr was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Is(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroAgi was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ms(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroInt was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Us(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitStripHeroLevel was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ps(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroXP was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Rs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroXP was called but is not implemented :("),0}function Os(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroSkillPoints was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Cs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitModifySkillPoints was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("AddHeroXP was called but is not implemented :("),0}function Fs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroLevel was called but is not implemented :("),0}function Ds(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Gs(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ns(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroProperName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Vs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SuspendHeroXP was called but is not implemented :("),0}function Hs(e,t){a.lua_touserdata(t,1);return console.warn("IsSuspendedXP was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function js(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SelectHeroSkill was called but is not implemented :("),0}function Ks(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GetUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function zs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("DecUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Xs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("IncUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Js(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ys(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("ReviveHero was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $s(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("ReviveHeroLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitExploded was called but is not implemented :("),0}function Ws(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitInvulnerable was called but is not implemented :("),0}function Zs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("PauseUnit was called but is not implemented :("),0}function Qs(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitPaused was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function eo(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitPathing was called but is not implemented :("),0}function to(e,t){return console.warn("ClearSelection was called but is not implemented :("),0}function no(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SelectUnit was called but is not implemented :("),0}function ao(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitPointValue was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ro(e,t){r.luaL_checkinteger(t,1);return console.warn("GetUnitPointValueByType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function io(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitAddItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lo(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitAddItemById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function so(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitAddItemToSlotById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function oo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitRemoveItem was called but is not implemented :("),0}function uo(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitRemoveItemFromSlot was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function co(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitHasItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ho(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitItemInSlot was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fo(e,t){a.lua_touserdata(t,1);return console.warn("UnitInventorySize was called but is not implemented :("),a.lua_pushinteger(t,0),1}function _o(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnitDropItemPoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitDropItemSlot was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function po(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("UnitDropItemTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function go(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitUseItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnitUseItemPoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("UnitUseItemTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ao(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function yo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Lo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFacing was called but is not implemented :("),a.lua_pushnumber(t,0),1}function So(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitMoveSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function To(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultMoveSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Eo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetUnitState was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ko(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.player),1}function xo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Io(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRace was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Uo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFoodUsed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Po(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFoodMade was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ro(e,t){r.luaL_checkinteger(t,1);return console.warn("GetFoodMade was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Oo(e,t){r.luaL_checkinteger(t,1);return console.warn("GetFoodUsed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Co(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitUseFood was called but is not implemented :("),0}function Bo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyPoint was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Do(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Go(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInGroup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function No(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInForce was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitOwnedByPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ho(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitAlly was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function jo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitEnemy was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ko(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitDetected was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInvisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitFogged was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitMasked was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $o(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitSelected was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitRace was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("IsUnitInRange was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function eu(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IsUnitInRangeXY was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("IsUnitInRangeLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nu(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitHidden was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function au(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitIllusion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ru(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInTransport was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function iu(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitLoaded was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lu(e,t){r.luaL_checkinteger(t,1);return console.warn("IsHeroUnitId was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function su(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitIdType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ou(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("UnitShareVision was called but is not implemented :("),0}function uu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitSuspendDecay was called but is not implemented :("),0}function cu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitAddType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function du(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitRemoveType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function hu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitAddAbility was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function fu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitRemoveAbility was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function _u(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitMakeAbilityPermanent was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("UnitRemoveBuffs was called but is not implemented :("),0}function pu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitRemoveBuffsEx was called but is not implemented :("),0}function gu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitHasBuffsEx was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitCountBuffsEx was called but is not implemented :("),a.lua_pushinteger(t,0),1}function wu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitAddSleep was called but is not implemented :("),0}function vu(e,t){a.lua_touserdata(t,1);return console.warn("UnitCanSleep was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Au(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitAddSleepPerm was called but is not implemented :("),0}function yu(e,t){a.lua_touserdata(t,1);return console.warn("UnitCanSleepPerm was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Lu(e,t){a.lua_touserdata(t,1);return console.warn("UnitIsSleeping was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Su(e,t){a.lua_touserdata(t,1);return console.warn("UnitWakeUp was called but is not implemented :("),0}function Tu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("UnitApplyTimedLife was called but is not implemented :("),0}function Eu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitIgnoreAlarm was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ku(e,t){a.lua_touserdata(t,1);return console.warn("UnitIgnoreAlarmToggled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function xu(e,t){a.lua_touserdata(t,1);return console.warn("UnitResetCooldown was called but is not implemented :("),0}function Iu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitSetConstructionProgress was called but is not implemented :("),0}function Mu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitSetUpgradeProgress was called but is not implemented :("),0}function Uu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitPauseTimedLife was called but is not implemented :("),0}function Pu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitSetUsesAltIcon was called but is not implemented :("),0}function Ru(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8),a.lua_touserdata(t,9),a.lua_touserdata(t,10),a.lua_touserdata(t,11);return console.warn("UnitDamagePoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ou(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_touserdata(t,6),a.lua_touserdata(t,7),a.lua_touserdata(t,8);return console.warn("UnitDamageTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("IssueImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("IssueImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Fu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssuePointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Du(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("IssuePointOrderLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssuePointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Nu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("IssuePointOrderByIdLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("IssueTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Hu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("IssueTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ju(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("IssueInstantPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ku(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("IssueInstantPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("IssueInstantTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("IssueInstantTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ju(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssueBuildOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssueBuildOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $u(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3);return console.warn("IssueNeutralImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("IssueNeutralImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("IssueNeutralPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("IssueNeutralPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4);return console.warn("IssueNeutralTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ec(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("IssueNeutralTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tc(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitCurrentOrder was called but is not implemented :("),a.lua_pushinteger(t,0),1}function nc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetResourceAmount was called but is not implemented :("),0}function ac(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("AddResourceAmount was called but is not implemented :("),0}function rc(e,t){a.lua_touserdata(t,1);return console.warn("GetResourceAmount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ic(e,t){a.lua_touserdata(t,1);return console.warn("WaygateGetDestinationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function lc(e,t){a.lua_touserdata(t,1);return console.warn("WaygateGetDestinationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function sc(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("WaygateSetDestination was called but is not implemented :("),0}function oc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("WaygateActivate was called but is not implemented :("),0}function uc(e,t){a.lua_touserdata(t,1);return console.warn("WaygateIsActive was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cc(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddItemToAllStock was called but is not implemented :("),0}function dc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("AddItemToStock was called but is not implemented :("),0}function hc(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddUnitToAllStock was called but is not implemented :("),0}function fc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("AddUnitToStock was called but is not implemented :("),0}function _c(e,t){r.luaL_checkinteger(t,1);return console.warn("RemoveItemFromAllStock was called but is not implemented :("),0}function mc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("RemoveItemFromStock was called but is not implemented :("),0}function pc(e,t){r.luaL_checkinteger(t,1);return console.warn("RemoveUnitFromAllStock was called but is not implemented :("),0}function gc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("RemoveUnitFromStock was called but is not implemented :("),0}function bc(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllItemTypeSlots was called but is not implemented :("),0}function wc(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllUnitTypeSlots was called but is not implemented :("),0}function vc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemTypeSlots was called but is not implemented :("),0}function Ac(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitTypeSlots was called but is not implemented :("),0}function yc(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitUserData was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Lc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitUserData was called but is not implemented :("),0}function Sc(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.players[n]),1}function Tc(e,t){return console.warn("GetLocalPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ec(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerAlly was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function kc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerEnemy was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function xc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerInForce was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ic(e,t){a.lua_touserdata(t,1);return console.warn("IsPlayerObserver was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Mc(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsVisibleToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Uc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationVisibleToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pc(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsFoggedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationFoggedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Oc(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsMaskedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationMaskedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bc(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.race),1}function Fc(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.index),1}function Dc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetPlayerUnitCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Gc(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4);return console.warn("GetPlayerTypedUnitCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Nc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetPlayerStructureCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Vc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetPlayerState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Hc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetPlayerScore was called but is not implemented :("),a.lua_pushinteger(t,0),1}function jc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GetPlayerAlliance was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Kc(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerHandicap was called but is not implemented :("),a.lua_pushnumber(t,0),1}function zc(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerHandicapXP was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Xc(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetPlayerHandicap was called but is not implemented :("),0}function Jc(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetPlayerHandicapXP was called but is not implemented :("),0}function Yc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerTechMaxAllowed was called but is not implemented :("),0}function $c(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GetPlayerTechMaxAllowed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function qc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddPlayerTechResearched was called but is not implemented :("),0}function Wc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerTechResearched was called but is not implemented :("),0}function Zc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("GetPlayerTechResearched was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("GetPlayerTechCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ed(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetPlayerUnitsOwner was called but is not implemented :("),0}function td(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("CripplePlayer was called but is not implemented :("),0}function nd(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetPlayerAbilityAvailable was called but is not implemented :("),0}function ad(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerState was called but is not implemented :("),0}function rd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RemovePlayer was called but is not implemented :("),0}function id(e,t){a.lua_touserdata(t,1);return console.warn("CachePlayerHeroData was called but is not implemented :("),0}function ld(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetFogStateRect was called but is not implemented :("),0}function sd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),a.lua_toboolean(t,6);return console.warn("SetFogStateRadius was called but is not implemented :("),0}function od(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5);return console.warn("SetFogStateRadiusLoc was called but is not implemented :("),0}function ud(e,t){a.lua_toboolean(t,1);return console.warn("FogMaskEnable was called but is not implemented :("),0}function cd(e,t){return console.warn("IsFogMaskEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function dd(e,t){a.lua_toboolean(t,1);return console.warn("FogEnable was called but is not implemented :("),0}function hd(e,t){return console.warn("IsFogEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function fd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("CreateFogModifierRect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _d(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7);return console.warn("CreateFogModifierRadius was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function md(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6);return console.warn("CreateFogModifierRadiusLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pd(e,t){a.lua_touserdata(t,1);return console.warn("DestroyFogModifier was called but is not implemented :("),0}function gd(e,t){a.lua_touserdata(t,1);return console.warn("FogModifierStart was called but is not implemented :("),0}function bd(e,t){a.lua_touserdata(t,1);return console.warn("FogModifierStop was called but is not implemented :("),0}function wd(e,t){return console.warn("VersionGet was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function vd(e,t){a.lua_touserdata(t,1);return console.warn("VersionCompatible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ad(e,t){a.lua_touserdata(t,1);return console.warn("VersionSupported was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yd(e,t){a.lua_toboolean(t,1);return console.warn("EndGame was called but is not implemented :("),0}function Ld(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("ChangeLevel was called but is not implemented :("),0}function Sd(e,t){a.lua_toboolean(t,1);return console.warn("RestartGame was called but is not implemented :("),0}function Td(e,t){return console.warn("ReloadGame was called but is not implemented :("),0}function Ed(e,t){a.lua_touserdata(t,1);return console.warn("SetCampaignMenuRace was called but is not implemented :("),0}function kd(e,t){r.luaL_checkinteger(t,1);return console.warn("SetCampaignMenuRaceEx was called but is not implemented :("),0}function xd(e,t){return console.warn("ForceCampaignSelectScreen was called but is not implemented :("),0}function Id(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("LoadGame was called but is not implemented :("),0}function Md(e,t){r.luaL_checkstring(t,1);return console.warn("SaveGame was called but is not implemented :("),0}function Ud(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("RenameSaveDirectory was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pd(e,t){r.luaL_checkstring(t,1);return console.warn("RemoveSaveDirectory was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rd(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("CopySaveGame was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Od(e,t){r.luaL_checkstring(t,1);return console.warn("SaveGameExists was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cd(e,t){return console.warn("SyncSelections was called but is not implemented :("),0}function Bd(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetFloatGameState was called but is not implemented :("),0}function Fd(e,t){a.lua_touserdata(t,1);return console.warn("GetFloatGameState was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Dd(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetIntegerGameState was called but is not implemented :("),0}function Gd(e,t){a.lua_touserdata(t,1);return console.warn("GetIntegerGameState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Nd(e,t){a.lua_toboolean(t,1);return console.warn("SetTutorialCleared was called but is not implemented :("),0}function Vd(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetMissionAvailable was called but is not implemented :("),0}function Hd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetCampaignAvailable was called but is not implemented :("),0}function jd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetOpCinematicAvailable was called but is not implemented :("),0}function Kd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetEdCinematicAvailable was called but is not implemented :("),0}function zd(e,t){return console.warn("GetDefaultDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xd(e,t){a.lua_touserdata(t,1);return console.warn("SetDefaultDifficulty was called but is not implemented :("),0}function Jd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetCustomCampaignButtonVisible was called but is not implemented :("),0}function Yd(e,t){r.luaL_checkinteger(t,1);return console.warn("GetCustomCampaignButtonVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $d(e,t){return console.warn("DoNotSaveReplay was called but is not implemented :("),0}function qd(e,t){return console.warn("DialogCreate was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wd(e,t){a.lua_touserdata(t,1);return console.warn("DialogDestroy was called but is not implemented :("),0}function Zd(e,t){a.lua_touserdata(t,1);return console.warn("DialogClear was called but is not implemented :("),0}function Qd(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("DialogSetMessage was called but is not implemented :("),0}function eh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("DialogAddButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function th(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4);return console.warn("DialogAddQuitButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function nh(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("DialogDisplay was called but is not implemented :("),0}function ah(e,t){return console.warn("ReloadGameCachesFromDisk was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rh(e,t){r.luaL_checkstring(t,1);return console.warn("InitGameCache was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ih(e,t){a.lua_touserdata(t,1);return console.warn("SaveGameCache was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4);return console.warn("StoreInteger was called but is not implemented :("),0}function sh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checknumber(t,4);return console.warn("StoreReal was called but is not implemented :("),0}function oh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("StoreBoolean was called but is not implemented :("),0}function uh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4);return console.warn("StoreUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ch(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checkstring(t,4);return console.warn("StoreString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function dh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredInteger was called but is not implemented :("),0}function hh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredReal was called but is not implemented :("),0}function fh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredBoolean was called but is not implemented :("),0}function _h(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredUnit was called but is not implemented :("),0}function mh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredString was called but is not implemented :("),0}function ph(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredInteger was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredReal was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ah(e,t){a.lua_touserdata(t,1);return console.warn("FlushGameCache was called but is not implemented :("),0}function yh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("FlushStoredMission was called but is not implemented :("),0}function Lh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredInteger was called but is not implemented :("),0}function Sh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredReal was called but is not implemented :("),0}function Th(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredBoolean was called but is not implemented :("),0}function Eh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredUnit was called but is not implemented :("),0}function kh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredString was called but is not implemented :("),0}function xh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredInteger was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ih(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Mh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Uh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ph(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7);return console.warn("RestoreUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rh(e,t){return console.warn("InitHashtable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Oh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SaveInteger was called but is not implemented :("),0}function Ch(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4);return console.warn("SaveReal was called but is not implemented :("),0}function Bh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_toboolean(t,4);return console.warn("SaveBoolean was called but is not implemented :("),0}function Fh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkstring(t,4);return console.warn("SaveStr was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Dh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SavePlayerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveWidgetHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Nh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDestructableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Hh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUnitHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function jh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveAbilityHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Kh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTimerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerConditionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerActionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerEventHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $h(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveForceHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveGroupHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLocationHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveRectHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveBooleanExprHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ef(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveSoundHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveEffectHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUnitPoolHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function af(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveItemPoolHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveQuestHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveQuestItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDefeatConditionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function of(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTimerDialogHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLeaderboardHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveMultiboardHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function df(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveMultiboardItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function hf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTrackableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ff(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDialogHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function _f(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveButtonHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTextTagHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function pf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLightningHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveImageHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUbersplatHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveRegionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveFogStateHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Af(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveFogModifierHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveAgentHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Lf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveHashtableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Sf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadInteger was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Tf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ef(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function kf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadStr was called but is not implemented :("),a.lua_pushstring(t,""),1}function xf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadPlayerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function If(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadWidgetHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDestructableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Uf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUnitHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadAbilityHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Of(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTimerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Cf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerConditionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ff(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerActionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Df(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerEventHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadForceHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadGroupHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLocationHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Hf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadRectHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function jf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadBooleanExprHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadSoundHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function zf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadEffectHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUnitPoolHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Jf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadItemPoolHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Yf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadQuestHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $f(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadQuestItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDefeatConditionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTimerDialogHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Zf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLeaderboardHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadMultiboardHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function e_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadMultiboardItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function t_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTrackableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function n_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDialogHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function a_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadButtonHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function r_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTextTagHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function i_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLightningHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function l_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadImageHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function s_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUbersplatHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function o_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadRegionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function u_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadFogStateHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function c_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadFogModifierHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function d_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadHashtableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function h_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedInteger was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function f_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedReal was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function __(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function m_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function p_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function g_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedInteger was called but is not implemented :("),0}function b_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedReal was called but is not implemented :("),0}function w_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedBoolean was called but is not implemented :("),0}function v_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedString was called but is not implemented :("),0}function A_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedHandle was called but is not implemented :("),0}function y_(e,t){a.lua_touserdata(t,1);return console.warn("FlushParentHashtable was called but is not implemented :("),0}function L_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("FlushChildHashtable was called but is not implemented :("),0}function S_(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetRandomInt was called but is not implemented :("),a.lua_pushinteger(t,0),1}function T_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetRandomReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function E_(e,t){return console.warn("CreateUnitPool was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function k_(e,t){a.lua_touserdata(t,1);return console.warn("DestroyUnitPool was called but is not implemented :("),0}function x_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("UnitPoolAddUnitType was called but is not implemented :("),0}function I_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitPoolRemoveUnitType was called but is not implemented :("),0}function M_(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("PlaceRandomUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function U_(e,t){return console.warn("CreateItemPool was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function P_(e,t){a.lua_touserdata(t,1);return console.warn("DestroyItemPool was called but is not implemented :("),0}function R_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("ItemPoolAddItemType was called but is not implemented :("),0}function O_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ItemPoolRemoveItemType was called but is not implemented :("),0}function C_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PlaceRandomItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function B_(e,t){r.luaL_checkinteger(t,1);return console.warn("ChooseRandomCreep was called but is not implemented :("),a.lua_pushinteger(t,0),1}function F_(e,t){return console.warn("ChooseRandomNPBuilding was called but is not implemented :("),a.lua_pushinteger(t,0),1}function D_(e,t){r.luaL_checkinteger(t,1);return console.warn("ChooseRandomItem was called but is not implemented :("),a.lua_pushinteger(t,0),1}function G_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ChooseRandomItemEx was called but is not implemented :("),a.lua_pushinteger(t,0),1}function N_(e,t){r.luaL_checkinteger(t,1);return console.warn("SetRandomSeed was called but is not implemented :("),0}function V_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetTerrainFog was called but is not implemented :("),0}function H_(e,t){return console.warn("ResetTerrainFog was called but is not implemented :("),0}function j_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetUnitFog was called but is not implemented :("),0}function K_(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7);return console.warn("SetTerrainFogEx was called but is not implemented :("),0}function z_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkstring(t,4);return console.warn("DisplayTextToPlayer was called but is not implemented :("),0}function X_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkstring(t,5);return console.warn("DisplayTimedTextToPlayer was called but is not implemented :("),0}function J_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkstring(t,5);return console.warn("DisplayTimedTextFromPlayer was called but is not implemented :("),0}function Y_(e,t){return console.warn("ClearTextMessages was called but is not implemented :("),0}function $_(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("SetDayNightModels was called but is not implemented :("),0}function q_(e,t){r.luaL_checkstring(t,1);return console.warn("SetSkyModel was called but is not implemented :("),0}function W_(e,t){a.lua_toboolean(t,1);return console.warn("EnableUserControl was called but is not implemented :("),0}function Z_(e,t){a.lua_toboolean(t,1);return console.warn("EnableUserUI was called but is not implemented :("),0}function Q_(e,t){a.lua_toboolean(t,1);return console.warn("SuspendTimeOfDay was called but is not implemented :("),0}function em(e,t){r.luaL_checknumber(t,1);return console.warn("SetTimeOfDayScale was called but is not implemented :("),0}function tm(e,t){return console.warn("GetTimeOfDayScale was called but is not implemented :("),a.lua_pushnumber(t,0),1}function nm(e,t){a.lua_toboolean(t,1),r.luaL_checknumber(t,2);return console.warn("ShowInterface was called but is not implemented :("),0}function am(e,t){a.lua_toboolean(t,1);return console.warn("PauseGame was called but is not implemented :("),0}function rm(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("UnitAddIndicator was called but is not implemented :("),0}function im(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("AddIndicator was called but is not implemented :("),0}function lm(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PingMinimap was called but is not implemented :("),0}function sm(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),a.lua_toboolean(t,7);return console.warn("PingMinimapEx was called but is not implemented :("),0}function om(e,t){a.lua_toboolean(t,1);return console.warn("EnableOcclusion was called but is not implemented :("),0}function um(e,t){r.luaL_checkstring(t,1);return console.warn("SetIntroShotText was called but is not implemented :("),0}function cm(e,t){r.luaL_checkstring(t,1);return console.warn("SetIntroShotModel was called but is not implemented :("),0}function dm(e,t){a.lua_toboolean(t,1);return console.warn("EnableWorldFogBoundary was called but is not implemented :("),0}function hm(e,t){r.luaL_checkstring(t,1);return console.warn("PlayModelCinematic was called but is not implemented :("),0}function fm(e,t){r.luaL_checkstring(t,1);return console.warn("PlayCinematic was called but is not implemented :("),0}function _m(e,t){r.luaL_checkstring(t,1);return console.warn("ForceUIKey was called but is not implemented :("),0}function mm(e,t){return console.warn("ForceUICancel was called but is not implemented :("),0}function pm(e,t){return console.warn("DisplayLoadDialog was called but is not implemented :("),0}function gm(e,t){r.luaL_checkstring(t,1);return console.warn("SetAltMinimapIcon was called but is not implemented :("),0}function bm(e,t){a.lua_toboolean(t,1);return console.warn("DisableRestartMission was called but is not implemented :("),0}function wm(e,t){return console.warn("CreateTextTag was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function vm(e,t){a.lua_touserdata(t,1);return console.warn("DestroyTextTag was called but is not implemented :("),0}function Am(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagText was called but is not implemented :("),0}function ym(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetTextTagPos was called but is not implemented :("),0}function Lm(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagPosUnit was called but is not implemented :("),0}function Sm(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetTextTagColor was called but is not implemented :("),0}function Tm(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagVelocity was called but is not implemented :("),0}function Em(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagVisibility was called but is not implemented :("),0}function km(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagSuspended was called but is not implemented :("),0}function xm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagPermanent was called but is not implemented :("),0}function Im(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagAge was called but is not implemented :("),0}function Mm(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagLifespan was called but is not implemented :("),0}function Um(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagFadepoint was called but is not implemented :("),0}function Pm(e,t){r.luaL_checkinteger(t,1);return console.warn("SetReservedLocalHeroButtons was called but is not implemented :("),0}function Rm(e,t){return console.warn("GetAllyColorFilterState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Om(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllyColorFilterState was called but is not implemented :("),0}function Cm(e,t){return console.warn("GetCreepCampFilterState was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bm(e,t){a.lua_toboolean(t,1);return console.warn("SetCreepCampFilterState was called but is not implemented :("),0}function Fm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableMinimapFilterButtons was called but is not implemented :("),0}function Dm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableDragSelect was called but is not implemented :("),0}function Gm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnablePreSelect was called but is not implemented :("),0}function Nm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableSelect was called but is not implemented :("),0}function Vm(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CreateTrackable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Hm(e,t){return console.warn("CreateQuest was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function jm(e,t){a.lua_touserdata(t,1);return console.warn("DestroyQuest was called but is not implemented :("),0}function Km(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetTitle was called but is not implemented :("),0}function zm(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetDescription was called but is not implemented :("),0}function Xm(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetIconPath was called but is not implemented :("),0}function Jm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetRequired was called but is not implemented :("),0}function Ym(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetCompleted was called but is not implemented :("),0}function $m(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetDiscovered was called but is not implemented :("),0}function qm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetFailed was called but is not implemented :("),0}function Wm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetEnabled was called but is not implemented :("),0}function Zm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestRequired was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestCompleted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ep(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestDiscovered was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tp(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestFailed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function np(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ap(e,t){a.lua_touserdata(t,1);return console.warn("QuestCreateItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function rp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestItemSetDescription was called but is not implemented :("),0}function ip(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestItemSetCompleted was called but is not implemented :("),0}function lp(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestItemCompleted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sp(e,t){return console.warn("CreateDefeatCondition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function op(e,t){a.lua_touserdata(t,1);return console.warn("DestroyDefeatCondition was called but is not implemented :("),0}function up(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("DefeatConditionSetDescription was called but is not implemented :("),0}function cp(e,t){return console.warn("FlashQuestDialogButton was called but is not implemented :("),0}function dp(e,t){return console.warn("ForceQuestDialogUpdate was called but is not implemented :("),0}function hp(e,t){a.lua_touserdata(t,1);return console.warn("CreateTimerDialog was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyTimerDialog was called but is not implemented :("),0}function _p(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("TimerDialogSetTitle was called but is not implemented :("),0}function mp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("TimerDialogSetTitleColor was called but is not implemented :("),0}function pp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("TimerDialogSetTimeColor was called but is not implemented :("),0}function gp(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TimerDialogSetSpeed was called but is not implemented :("),0}function bp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("TimerDialogDisplay was called but is not implemented :("),0}function wp(e,t){a.lua_touserdata(t,1);return console.warn("IsTimerDialogDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vp(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TimerDialogSetRealTimeRemaining was called but is not implemented :("),0}function Ap(e,t){return console.warn("CreateLeaderboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyLeaderboard was called but is not implemented :("),0}function Lp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardDisplay was called but is not implemented :("),0}function Sp(e,t){a.lua_touserdata(t,1);return console.warn("IsLeaderboardDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Tp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardGetItemCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ep(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("LeaderboardSetSizeByItemCount was called but is not implemented :("),0}function kp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("LeaderboardAddItem was called but is not implemented :("),0}function xp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("LeaderboardRemoveItem was called but is not implemented :("),0}function Ip(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardRemovePlayerItem was called but is not implemented :("),0}function Mp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardClear was called but is not implemented :("),0}function Up(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByValue was called but is not implemented :("),0}function Pp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByPlayer was called but is not implemented :("),0}function Rp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByLabel was called but is not implemented :("),0}function Op(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardHasPlayerItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardGetPlayerIndex was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Bp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("LeaderboardSetLabel was called but is not implemented :("),0}function Fp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardGetLabelText was called but is not implemented :("),a.lua_pushstring(t,""),1}function Dp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("PlayerSetLeaderboard was called but is not implemented :("),0}function Gp(e,t){a.lua_touserdata(t,1);return console.warn("PlayerGetLeaderboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Np(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("LeaderboardSetLabelColor was called but is not implemented :("),0}function Vp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("LeaderboardSetValueColor was called but is not implemented :("),0}function Hp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("LeaderboardSetStyle was called but is not implemented :("),0}function jp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LeaderboardSetItemValue was called but is not implemented :("),0}function Kp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkstring(t,3);return console.warn("LeaderboardSetItemLabel was called but is not implemented :("),0}function zp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("LeaderboardSetItemStyle was called but is not implemented :("),0}function Xp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("LeaderboardSetItemLabelColor was called but is not implemented :("),0}function Jp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("LeaderboardSetItemValueColor was called but is not implemented :("),0}function Yp(e,t){return console.warn("CreateMultiboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $p(e,t){a.lua_touserdata(t,1);return console.warn("DestroyMultiboard was called but is not implemented :("),0}function qp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("MultiboardDisplay was called but is not implemented :("),0}function Wp(e,t){a.lua_touserdata(t,1);return console.warn("IsMultiboardDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("MultiboardMinimize was called but is not implemented :("),0}function Qp(e,t){a.lua_touserdata(t,1);return console.warn("IsMultiboardMinimized was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function eg(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardClear was called but is not implemented :("),0}function tg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetTitleText was called but is not implemented :("),0}function ng(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetTitleText was called but is not implemented :("),a.lua_pushstring(t,""),1}function ag(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetTitleTextColor was called but is not implemented :("),0}function rg(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetRowCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ig(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetColumnCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function lg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("MultiboardSetColumnCount was called but is not implemented :("),0}function sg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("MultiboardSetRowCount was called but is not implemented :("),0}function og(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("MultiboardSetItemsStyle was called but is not implemented :("),0}function ug(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemsValue was called but is not implemented :("),0}function cg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetItemsValueColor was called but is not implemented :("),0}function dg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("MultiboardSetItemsWidth was called but is not implemented :("),0}function hg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemsIcon was called but is not implemented :("),0}function fg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("MultiboardGetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _g(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardReleaseItem was called but is not implemented :("),0}function mg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("MultiboardSetItemStyle was called but is not implemented :("),0}function pg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemValue was called but is not implemented :("),0}function gg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetItemValueColor was called but is not implemented :("),0}function bg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("MultiboardSetItemWidth was called but is not implemented :("),0}function wg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemIcon was called but is not implemented :("),0}function vg(e,t){a.lua_toboolean(t,1);return console.warn("MultiboardSuppressDisplay was called but is not implemented :("),0}function Ag(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("SetCameraPosition was called but is not implemented :("),0}function yg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("SetCameraQuickPosition was called but is not implemented :("),0}function Lg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("SetCameraBounds was called but is not implemented :("),0}function Sg(e,t){return console.warn("StopCamera was called but is not implemented :("),0}function Tg(e,t){r.luaL_checknumber(t,1);return console.warn("ResetToGameCamera was called but is not implemented :("),0}function Eg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("PanCameraTo was called but is not implemented :("),0}function kg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PanCameraToTimed was called but is not implemented :("),0}function xg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PanCameraToWithZ was called but is not implemented :("),0}function Ig(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("PanCameraToTimedWithZ was called but is not implemented :("),0}function Mg(e,t){r.luaL_checkstring(t,1);return console.warn("SetCinematicCamera was called but is not implemented :("),0}function Ug(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCameraRotateMode was called but is not implemented :("),0}function Pg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetCameraField was called but is not implemented :("),0}function Rg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("AdjustCameraField was called but is not implemented :("),0}function Og(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetCameraTargetController was called but is not implemented :("),0}function Cg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetCameraOrientController was called but is not implemented :("),0}function Bg(e,t){return console.warn("CreateCameraSetup was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fg(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CameraSetupSetField was called but is not implemented :("),0}function Dg(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("CameraSetupGetField was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Gg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CameraSetupSetDestPosition was called but is not implemented :("),0}function Ng(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vg(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Hg(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function jg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetupApply was called but is not implemented :("),0}function Kg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetupApplyWithZ was called but is not implemented :("),0}function zg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3);return console.warn("CameraSetupApplyForceDuration was called but is not implemented :("),0}function Xg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("CameraSetupApplyForceDurationWithZ was called but is not implemented :("),0}function Jg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetTargetNoise was called but is not implemented :("),0}function Yg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetSourceNoise was called but is not implemented :("),0}function $g(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetTargetNoiseEx was called but is not implemented :("),0}function qg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetSourceNoiseEx was called but is not implemented :("),0}function Wg(e,t){r.luaL_checknumber(t,1);return console.warn("CameraSetSmoothingFactor was called but is not implemented :("),0}function Zg(e,t){r.luaL_checkstring(t,1);return console.warn("SetCineFilterTexture was called but is not implemented :("),0}function Qg(e,t){a.lua_touserdata(t,1);return console.warn("SetCineFilterBlendMode was called but is not implemented :("),0}function eb(e,t){a.lua_touserdata(t,1);return console.warn("SetCineFilterTexMapFlags was called but is not implemented :("),0}function tb(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCineFilterStartUV was called but is not implemented :("),0}function nb(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCineFilterEndUV was called but is not implemented :("),0}function ab(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetCineFilterStartColor was called but is not implemented :("),0}function rb(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetCineFilterEndColor was called but is not implemented :("),0}function ib(e,t){r.luaL_checknumber(t,1);return console.warn("SetCineFilterDuration was called but is not implemented :("),0}function lb(e,t){a.lua_toboolean(t,1);return console.warn("DisplayCineFilter was called but is not implemented :("),0}function sb(e,t){return console.warn("IsCineFilterDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ob(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),r.luaL_checkstring(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("SetCinematicScene was called but is not implemented :("),0}function ub(e,t){return console.warn("EndCinematicScene was called but is not implemented :("),0}function cb(e,t){a.lua_toboolean(t,1);return console.warn("ForceCinematicSubtitles was called but is not implemented :("),0}function db(e,t){r.luaL_checkinteger(t,1);return console.warn("GetCameraMargin was called but is not implemented :("),a.lua_pushnumber(t,0),1}function hb(e,t){return console.warn("GetCameraBoundMinX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function fb(e,t){return console.warn("GetCameraBoundMinY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function _b(e,t){return console.warn("GetCameraBoundMaxX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function mb(e,t){return console.warn("GetCameraBoundMaxY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function pb(e,t){a.lua_touserdata(t,1);return console.warn("GetCameraField was called but is not implemented :("),a.lua_pushnumber(t,0),1}function gb(e,t){return console.warn("GetCameraTargetPositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function bb(e,t){return console.warn("GetCameraTargetPositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function wb(e,t){return console.warn("GetCameraTargetPositionZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function vb(e,t){return console.warn("GetCameraTargetPositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ab(e,t){return console.warn("GetCameraEyePositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function yb(e,t){return console.warn("GetCameraEyePositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Lb(e,t){return console.warn("GetCameraEyePositionZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Sb(e,t){return console.warn("GetCameraEyePositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tb(e,t){r.luaL_checkstring(t,1);return console.warn("NewSoundEnvironment was called but is not implemented :("),0}function Eb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkstring(t,7);return console.warn("CreateSound was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkstring(t,7);return console.warn("CreateSoundFilenameWithLabel was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateSoundFromLabel was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ib(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("CreateMIDISound was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mb(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetSoundParamsFromLabel was called but is not implemented :("),0}function Ub(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetSoundDistanceCutoff was called but is not implemented :("),0}function Pb(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundChannel was called but is not implemented :("),0}function Rb(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundVolume was called but is not implemented :("),0}function Ob(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetSoundPitch was called but is not implemented :("),0}function Cb(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundPlayPosition was called but is not implemented :("),0}function Bb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetSoundDistances was called but is not implemented :("),0}function Fb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4);return console.warn("SetSoundConeAngles was called but is not implemented :("),0}function Db(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundConeOrientation was called but is not implemented :("),0}function Gb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundPosition was called but is not implemented :("),0}function Nb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundVelocity was called but is not implemented :("),0}function Vb(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("AttachSoundToUnit was called but is not implemented :("),0}function Hb(e,t){a.lua_touserdata(t,1);return console.warn("StartSound was called but is not implemented :("),0}function jb(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("StopSound was called but is not implemented :("),0}function Kb(e,t){a.lua_touserdata(t,1);return console.warn("KillSoundWhenDone was called but is not implemented :("),0}function zb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checkinteger(t,3);return console.warn("SetMapMusic was called but is not implemented :("),0}function Xb(e,t){return console.warn("ClearMapMusic was called but is not implemented :("),0}function Jb(e,t){r.luaL_checkstring(t,1);return console.warn("PlayMusic was called but is not implemented :("),0}function Yb(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("PlayMusicEx was called but is not implemented :("),0}function $b(e,t){a.lua_toboolean(t,1);return console.warn("StopMusic was called but is not implemented :("),0}function qb(e,t){return console.warn("ResumeMusic was called but is not implemented :("),0}function Wb(e,t){r.luaL_checkstring(t,1);return console.warn("PlayThematicMusic was called but is not implemented :("),0}function Zb(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2);return console.warn("PlayThematicMusicEx was called but is not implemented :("),0}function Qb(e,t){return console.warn("EndThematicMusic was called but is not implemented :("),0}function ew(e,t){r.luaL_checkinteger(t,1);return console.warn("SetMusicVolume was called but is not implemented :("),0}function tw(e,t){r.luaL_checkinteger(t,1);return console.warn("SetMusicPlayPosition was called but is not implemented :("),0}function nw(e,t){r.luaL_checkinteger(t,1);return console.warn("SetThematicMusicPlayPosition was called but is not implemented :("),0}function aw(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundDuration was called but is not implemented :("),0}function rw(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundDuration was called but is not implemented :("),a.lua_pushinteger(t,0),1}function iw(e,t){r.luaL_checkstring(t,1);return console.warn("GetSoundFileDuration was called but is not implemented :("),a.lua_pushinteger(t,0),1}function lw(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("VolumeGroupSetVolume was called but is not implemented :("),0}function sw(e,t){return console.warn("VolumeGroupReset was called but is not implemented :("),0}function ow(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundIsPlaying was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uw(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundIsLoading was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("RegisterStackedSound was called but is not implemented :("),0}function dw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnregisterStackedSound was called but is not implemented :("),0}function hw(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("AddWeatherEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fw(e,t){a.lua_touserdata(t,1);return console.warn("RemoveWeatherEffect was called but is not implemented :("),0}function _w(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("EnableWeatherEffect was called but is not implemented :("),0}function mw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkinteger(t,5),a.lua_toboolean(t,6);return console.warn("TerrainDeformCrater was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checknumber(t,9),a.lua_toboolean(t,10);return console.warn("TerrainDeformRipple was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function gw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checkinteger(t,9),r.luaL_checkinteger(t,10);return console.warn("TerrainDeformWave was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function bw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6),r.luaL_checkinteger(t,7);return console.warn("TerrainDeformRandom was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ww(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("TerrainDeformStop was called but is not implemented :("),0}function vw(e,t){return console.warn("TerrainDeformStopAll was called but is not implemented :("),0}function Aw(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("AddSpecialEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2);return console.warn("AddSpecialEffectLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Lw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3);return console.warn("AddSpecialEffectTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sw(e,t){a.lua_touserdata(t,1);return console.warn("DestroyEffect was called but is not implemented :("),0}function Tw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("AddSpellEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ew(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("AddSpellEffectLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("AddSpellEffectById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("AddSpellEffectByIdLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Iw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkstring(t,4);return console.warn("AddSpellEffectTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkstring(t,4);return console.warn("AddSpellEffectTargetById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Uw(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("AddLightning was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pw(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("AddLightningEx was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rw(e,t){a.lua_touserdata(t,1);return console.warn("DestroyLightning was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ow(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("MoveLightning was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("MoveLightningEx was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorA was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Fw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorR was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Dw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorG was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Gw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorB was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Nw(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetLightningColor was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("GetAbilityEffect was called but is not implemented :("),a.lua_pushstring(t,""),1}function Hw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("GetAbilityEffectById was called but is not implemented :("),a.lua_pushstring(t,""),1}function jw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2);return console.warn("GetAbilitySound was called but is not implemented :("),a.lua_pushstring(t,""),1}function Kw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("GetAbilitySoundById was called but is not implemented :("),a.lua_pushstring(t,""),1}function zw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainCliffLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Xw(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetWaterBaseColor was called but is not implemented :("),0}function Jw(e,t){a.lua_toboolean(t,1);return console.warn("SetWaterDeforms was called but is not implemented :("),0}function Yw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function $w(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainVariance was called but is not implemented :("),a.lua_pushinteger(t,0),1}function qw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("SetTerrainType was called but is not implemented :("),0}function Ww(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsTerrainPathable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetTerrainPathable was called but is not implemented :("),0}function Qw(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checknumber(t,9),r.luaL_checknumber(t,10),r.luaL_checkinteger(t,11);return console.warn("CreateImage was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ev(e,t){a.lua_touserdata(t,1);return console.warn("DestroyImage was called but is not implemented :("),0}function tv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowImage was called but is not implemented :("),0}function nv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3);return console.warn("SetImageConstantHeight was called but is not implemented :("),0}function av(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetImagePosition was called but is not implemented :("),0}function rv(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetImageColor was called but is not implemented :("),0}function iv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetImageRender was called but is not implemented :("),0}function lv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetImageRenderAlways was called but is not implemented :("),0}function sv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("SetImageAboveWater was called but is not implemented :("),0}function ov(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetImageType was called but is not implemented :("),0}function uv(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkinteger(t,7),a.lua_toboolean(t,8),a.lua_toboolean(t,9);return console.warn("CreateUbersplat was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function cv(e,t){a.lua_touserdata(t,1);return console.warn("DestroyUbersplat was called but is not implemented :("),0}function dv(e,t){a.lua_touserdata(t,1);return console.warn("ResetUbersplat was called but is not implemented :("),0}function hv(e,t){a.lua_touserdata(t,1);return console.warn("FinishUbersplat was called but is not implemented :("),0}function fv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowUbersplat was called but is not implemented :("),0}function _v(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUbersplatRender was called but is not implemented :("),0}function mv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUbersplatRenderAlways was called but is not implemented :("),0}function pv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5);return console.warn("SetBlight was called but is not implemented :("),0}function gv(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetBlightRect was called but is not implemented :("),0}function bv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetBlightPoint was called but is not implemented :("),0}function wv(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetBlightLoc was called but is not implemented :("),0}function vv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CreateBlightedGoldmine was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Av(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("IsPointBlighted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yv(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4),a.lua_toboolean(t,5),r.luaL_checkstring(t,6),a.lua_toboolean(t,7);return console.warn("SetDoodadAnimation was called but is not implemented :("),0}function Lv(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("SetDoodadAnimationRect was called but is not implemented :("),0}function Sv(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("StartMeleeAI was called but is not implemented :("),0}function Tv(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("StartCampaignAI was called but is not implemented :("),0}function Ev(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("CommandAI was called but is not implemented :("),0}function kv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("PauseCompAI was called but is not implemented :("),0}function xv(e,t){a.lua_touserdata(t,1);return console.warn("GetAIDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Iv(e,t){a.lua_touserdata(t,1);return console.warn("RemoveGuardPosition was called but is not implemented :("),0}function Mv(e,t){a.lua_touserdata(t,1);return console.warn("RecycleGuardPosition was called but is not implemented :("),0}function Uv(e,t){a.lua_touserdata(t,1);return console.warn("RemoveAllGuardPositions was called but is not implemented :("),0}function Pv(e,t){r.luaL_checkstring(t,1);return console.warn("Cheat was called but is not implemented :("),0}function Rv(e,t){return console.warn("IsNoVictoryCheat was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ov(e,t){return console.warn("IsNoDefeatCheat was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cv(e,t){r.luaL_checkstring(t,1);return console.warn("Preload was called but is not implemented :("),0}function Bv(e,t){r.luaL_checknumber(t,1);return console.warn("PreloadEnd was called but is not implemented :("),0}function Fv(e,t){return console.warn("PreloadStart was called but is not implemented :("),0}function Dv(e,t){return console.warn("PreloadRefresh was called but is not implemented :("),0}function Gv(e,t){return console.warn("PreloadEndEx was called but is not implemented :("),0}function Nv(e,t){return console.warn("PreloadGenClear was called but is not implemented :("),0}function Vv(e,t){return console.warn("PreloadGenStart was called but is not implemented :("),0}function Hv(e,t){r.luaL_checkstring(t,1);return console.warn("PreloadGenEnd was called but is not implemented :("),0}function jv(e,t){r.luaL_checkstring(t,1);return console.warn("Preloader was called but is not implemented :("),0}function Kv(e,t){r.luaL_checkstring(t,1);return console.warn("AutomationTestStart was called but is not implemented :("),0}function zv(e,t){r.luaL_checkstring(t,1);return console.warn("AutomationTestEnd was called but is not implemented :("),0}function Xv(e,t){return console.warn("BlzGetTriggerPlayerMouseX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Jv(e,t){return console.warn("BlzGetTriggerPlayerMouseY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Yv(e,t){return console.warn("BlzGetTriggerPlayerMousePosition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $v(e,t){return console.warn("BlzGetTriggerPlayerMouseButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityTooltip was called but is not implemented :("),0}function Wv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityActivatedTooltip was called but is not implemented :("),0}function Zv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityExtendedTooltip was called but is not implemented :("),0}function Qv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityActivatedExtendedTooltip was called but is not implemented :("),0}function eA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityResearchTooltip was called but is not implemented :("),0}function tA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityResearchExtendedTooltip was called but is not implemented :("),0}function nA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function aA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityActivatedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function rA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function iA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityActivatedExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function lA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityResearchTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function sA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityResearchExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function oA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetAbilityIcon was called but is not implemented :("),0}function uA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityIcon was called but is not implemented :("),a.lua_pushstring(t,""),1}function cA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetAbilityActivatedIcon was called but is not implemented :("),0}function dA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedIcon was called but is not implemented :("),a.lua_pushstring(t,""),1}function hA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityPosX was called but is not implemented :("),a.lua_pushinteger(t,0),1}function fA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityPosY was called but is not implemented :("),a.lua_pushinteger(t,0),1}function _A(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityPosX was called but is not implemented :("),0}function mA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityPosY was called but is not implemented :("),0}function pA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedPosX was called but is not implemented :("),a.lua_pushinteger(t,0),1}function gA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedPosY was called but is not implemented :("),a.lua_pushinteger(t,0),1}function bA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityActivatedPosX was called but is not implemented :("),0}function wA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityActivatedPosY was called but is not implemented :("),0}function vA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitMaxHP was called but is not implemented :("),a.lua_pushinteger(t,0),1}function AA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetUnitMaxHP was called but is not implemented :("),0}function yA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitMaxMana was called but is not implemented :("),a.lua_pushinteger(t,0),1}function LA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetUnitMaxMana was called but is not implemented :("),0}function SA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzDeleteHeroAbility was called but is not implemented :("),0}function TA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemName was called but is not implemented :("),0}function EA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemDescription was called but is not implemented :("),0}function kA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemDescription was called but is not implemented :("),a.lua_pushstring(t,""),1}function xA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemTooltip was called but is not implemented :("),0}function IA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function MA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemExtendedTooltip was called but is not implemented :("),0}function UA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function PA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemIconPath was called but is not implemented :("),0}function RA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemIconPath was called but is not implemented :("),a.lua_pushstring(t,""),1}function OA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetUnitName was called but is not implemented :("),0}function CA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetHeroProperName was called but is not implemented :("),0}function BA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitBaseDamage was called but is not implemented :("),a.lua_pushinteger(t,0),1}function FA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitBaseDamage was called but is not implemented :("),0}function DA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitDiceNumber was called but is not implemented :("),a.lua_pushinteger(t,0),1}function GA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitDiceNumber was called but is not implemented :("),0}function NA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitDiceSides was called but is not implemented :("),a.lua_pushinteger(t,0),1}function VA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitDiceSides was called but is not implemented :("),0}function HA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitAttackCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function jA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitAttackCooldown was called but is not implemented :("),0}function KA(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("BlzSetSpecialEffectColorByPlayer was called but is not implemented :("),0}function zA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("BlzSetSpecialEffectColor was called but is not implemented :("),0}function XA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetSpecialEffectAlpha was called but is not implemented :("),0}function JA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectScale was called but is not implemented :("),0}function YA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetSpecialEffectPosition was called but is not implemented :("),0}function $A(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectHeight was called but is not implemented :("),0}function qA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectTimeScale was called but is not implemented :("),0}function WA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectTime was called but is not implemented :("),0}function ZA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetSpecialEffectOrientation was called but is not implemented :("),0}function QA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectYaw was called but is not implemented :("),0}function ey(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectPitch was called but is not implemented :("),0}function ty(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectRoll was called but is not implemented :("),0}function ny(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectX was called but is not implemented :("),0}function ay(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectY was called but is not implemented :("),0}function ry(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectZ was called but is not implemented :("),0}function iy(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("BlzSetSpecialEffectPositionLoc was called but is not implemented :("),0}function ly(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function sy(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function oy(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function uy(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitArmor was called but is not implemented :("),a.lua_pushnumber(t,0),1}function cy(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetUnitArmor was called but is not implemented :("),0}function dy(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("BlzUnitHideAbility was called but is not implemented :("),0}function hy(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4);return console.warn("BlzUnitDisableAbility was called but is not implemented :("),0}function fy(e,t){a.lua_touserdata(t,1);return console.warn("BlzUnitCancelTimedLife was called but is not implemented :("),0}function _y(e,t){a.lua_touserdata(t,1);return console.warn("BlzIsUnitSelectable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function my(e,t){a.lua_touserdata(t,1);return console.warn("BlzIsUnitInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function py(e,t){a.lua_touserdata(t,1);return console.warn("BlzUnitInterruptAttack was called but is not implemented :("),0}function gy(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitCollisionSize was called but is not implemented :("),a.lua_pushnumber(t,0),1}function by(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityManaCost was called but is not implemented :("),a.lua_pushinteger(t,0),1}function wy(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function vy(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetUnitAbilityCooldown was called but is not implemented :("),0}function Ay(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzGetUnitAbilityCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function yy(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitAbilityCooldownRemaining was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ly(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzEndUnitAbilityCooldown was called but is not implemented :("),0}function Sy(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzGetUnitAbilityManaCost was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ty(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("BlzSetUnitAbilityManaCost was called but is not implemented :("),0}function Ey(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalUnitZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ky(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzDecPlayerTechResearched was called but is not implemented :("),0}function xy(e,t){r.luaL_checknumber(t,1);return console.warn("BlzSetEventDamage was called but is not implemented :("),0}t.default=function(e){let t=e.L;a.lua_register(t,"ConvertRace",l.bind(null,e)),a.lua_register(t,"ConvertAllianceType",s.bind(null,e)),a.lua_register(t,"ConvertRacePref",o.bind(null,e)),a.lua_register(t,"ConvertIGameState",u.bind(null,e)),a.lua_register(t,"ConvertFGameState",c.bind(null,e)),a.lua_register(t,"ConvertPlayerState",d.bind(null,e)),a.lua_register(t,"ConvertPlayerScore",h.bind(null,e)),a.lua_register(t,"ConvertPlayerGameResult",f.bind(null,e)),a.lua_register(t,"ConvertUnitState",_.bind(null,e)),a.lua_register(t,"ConvertAIDifficulty",m.bind(null,e)),a.lua_register(t,"ConvertGameEvent",p.bind(null,e)),a.lua_register(t,"ConvertPlayerEvent",g.bind(null,e)),a.lua_register(t,"ConvertPlayerUnitEvent",b.bind(null,e)),a.lua_register(t,"ConvertWidgetEvent",w.bind(null,e)),a.lua_register(t,"ConvertDialogEvent",v.bind(null,e)),a.lua_register(t,"ConvertUnitEvent",A.bind(null,e)),a.lua_register(t,"ConvertLimitOp",y.bind(null,e)),a.lua_register(t,"ConvertUnitType",L.bind(null,e)),a.lua_register(t,"ConvertGameSpeed",S.bind(null,e)),a.lua_register(t,"ConvertPlacement",T.bind(null,e)),a.lua_register(t,"ConvertStartLocPrio",E.bind(null,e)),a.lua_register(t,"ConvertGameDifficulty",k.bind(null,e)),a.lua_register(t,"ConvertGameType",x.bind(null,e)),a.lua_register(t,"ConvertMapFlag",I.bind(null,e)),a.lua_register(t,"ConvertMapVisibility",M.bind(null,e)),a.lua_register(t,"ConvertMapSetting",U.bind(null,e)),a.lua_register(t,"ConvertMapDensity",P.bind(null,e)),a.lua_register(t,"ConvertMapControl",R.bind(null,e)),a.lua_register(t,"ConvertPlayerColor",O.bind(null,e)),a.lua_register(t,"ConvertPlayerSlotState",C.bind(null,e)),a.lua_register(t,"ConvertVolumeGroup",B.bind(null,e)),a.lua_register(t,"ConvertCameraField",F.bind(null,e)),a.lua_register(t,"ConvertBlendMode",D.bind(null,e)),a.lua_register(t,"ConvertRarityControl",G.bind(null,e)),a.lua_register(t,"ConvertTexMapFlags",N.bind(null,e)),a.lua_register(t,"ConvertFogState",V.bind(null,e)),a.lua_register(t,"ConvertEffectType",H.bind(null,e)),a.lua_register(t,"ConvertVersion",j.bind(null,e)),a.lua_register(t,"ConvertItemType",K.bind(null,e)),a.lua_register(t,"ConvertAttackType",z.bind(null,e)),a.lua_register(t,"ConvertDamageType",X.bind(null,e)),a.lua_register(t,"ConvertWeaponType",J.bind(null,e)),a.lua_register(t,"ConvertSoundType",Y.bind(null,e)),a.lua_register(t,"ConvertPathingType",$.bind(null,e)),a.lua_register(t,"ConvertMouseButtonType",q.bind(null,e)),a.lua_register(t,"ConvertAnimType",W.bind(null,e)),a.lua_register(t,"ConvertSubAnimType",Z.bind(null,e)),a.lua_register(t,"OrderId",Q.bind(null,e)),a.lua_register(t,"OrderId2String",ee.bind(null,e)),a.lua_register(t,"UnitId",te.bind(null,e)),a.lua_register(t,"UnitId2String",ne.bind(null,e)),a.lua_register(t,"AbilityId",ae.bind(null,e)),a.lua_register(t,"AbilityId2String",re.bind(null,e)),a.lua_register(t,"GetObjectName",ie.bind(null,e)),a.lua_register(t,"GetBJMaxPlayers",le.bind(null,e)),a.lua_register(t,"GetBJPlayerNeutralVictim",se.bind(null,e)),a.lua_register(t,"GetBJPlayerNeutralExtra",oe.bind(null,e)),a.lua_register(t,"GetBJMaxPlayerSlots",ue.bind(null,e)),a.lua_register(t,"GetPlayerNeutralPassive",ce.bind(null,e)),a.lua_register(t,"GetPlayerNeutralAggressive",de.bind(null,e)),a.lua_register(t,"Deg2Rad",he.bind(null,e)),a.lua_register(t,"Rad2Deg",fe.bind(null,e)),a.lua_register(t,"Sin",_e.bind(null,e)),a.lua_register(t,"Cos",me.bind(null,e)),a.lua_register(t,"Tan",pe.bind(null,e)),a.lua_register(t,"Asin",ge.bind(null,e)),a.lua_register(t,"Acos",be.bind(null,e)),a.lua_register(t,"Atan",we.bind(null,e)),a.lua_register(t,"Atan2",ve.bind(null,e)),a.lua_register(t,"SquareRoot",Ae.bind(null,e)),a.lua_register(t,"Pow",ye.bind(null,e)),a.lua_register(t,"I2R",Le.bind(null,e)),a.lua_register(t,"R2I",Se.bind(null,e)),a.lua_register(t,"I2S",Te.bind(null,e)),a.lua_register(t,"R2S",Ee.bind(null,e)),a.lua_register(t,"R2SW",ke.bind(null,e)),a.lua_register(t,"S2I",xe.bind(null,e)),a.lua_register(t,"S2R",Ie.bind(null,e)),a.lua_register(t,"GetHandleId",Me.bind(null,e)),a.lua_register(t,"SubString",Ue.bind(null,e)),a.lua_register(t,"StringLength",Pe.bind(null,e)),a.lua_register(t,"StringCase",Re.bind(null,e)),a.lua_register(t,"StringHash",Oe.bind(null,e)),a.lua_register(t,"GetLocalizedString",Ce.bind(null,e)),a.lua_register(t,"GetLocalizedHotkey",Be.bind(null,e)),a.lua_register(t,"SetMapName",Fe.bind(null,e)),a.lua_register(t,"SetMapDescription",De.bind(null,e)),a.lua_register(t,"SetTeams",Ge.bind(null,e)),a.lua_register(t,"SetPlayers",Ne.bind(null,e)),a.lua_register(t,"DefineStartLocation",Ve.bind(null,e)),a.lua_register(t,"DefineStartLocationLoc",He.bind(null,e)),a.lua_register(t,"SetStartLocPrioCount",je.bind(null,e)),a.lua_register(t,"SetStartLocPrio",Ke.bind(null,e)),a.lua_register(t,"GetStartLocPrioSlot",ze.bind(null,e)),a.lua_register(t,"GetStartLocPrio",Xe.bind(null,e)),a.lua_register(t,"SetGameTypeSupported",Je.bind(null,e)),a.lua_register(t,"SetMapFlag",Ye.bind(null,e)),a.lua_register(t,"SetGamePlacement",$e.bind(null,e)),a.lua_register(t,"SetGameSpeed",qe.bind(null,e)),a.lua_register(t,"SetGameDifficulty",We.bind(null,e)),a.lua_register(t,"SetResourceDensity",Ze.bind(null,e)),a.lua_register(t,"SetCreatureDensity",Qe.bind(null,e)),a.lua_register(t,"GetTeams",et.bind(null,e)),a.lua_register(t,"GetPlayers",tt.bind(null,e)),a.lua_register(t,"IsGameTypeSupported",nt.bind(null,e)),a.lua_register(t,"GetGameTypeSelected",at.bind(null,e)),a.lua_register(t,"IsMapFlagSet",rt.bind(null,e)),a.lua_register(t,"GetGamePlacement",it.bind(null,e)),a.lua_register(t,"GetGameSpeed",lt.bind(null,e)),a.lua_register(t,"GetGameDifficulty",st.bind(null,e)),a.lua_register(t,"GetResourceDensity",ot.bind(null,e)),a.lua_register(t,"GetCreatureDensity",ut.bind(null,e)),a.lua_register(t,"GetStartLocationX",ct.bind(null,e)),a.lua_register(t,"GetStartLocationY",dt.bind(null,e)),a.lua_register(t,"GetStartLocationLoc",ht.bind(null,e)),a.lua_register(t,"SetPlayerTeam",ft.bind(null,e)),a.lua_register(t,"SetPlayerStartLocation",_t.bind(null,e)),a.lua_register(t,"ForcePlayerStartLocation",mt.bind(null,e)),a.lua_register(t,"SetPlayerColor",pt.bind(null,e)),a.lua_register(t,"SetPlayerAlliance",gt.bind(null,e)),a.lua_register(t,"SetPlayerTaxRate",bt.bind(null,e)),a.lua_register(t,"SetPlayerRacePreference",wt.bind(null,e)),a.lua_register(t,"SetPlayerRaceSelectable",vt.bind(null,e)),a.lua_register(t,"SetPlayerController",At.bind(null,e)),a.lua_register(t,"SetPlayerName",yt.bind(null,e)),a.lua_register(t,"SetPlayerOnScoreScreen",Lt.bind(null,e)),a.lua_register(t,"GetPlayerTeam",St.bind(null,e)),a.lua_register(t,"GetPlayerStartLocation",Tt.bind(null,e)),a.lua_register(t,"GetPlayerColor",Et.bind(null,e)),a.lua_register(t,"GetPlayerSelectable",kt.bind(null,e)),a.lua_register(t,"GetPlayerController",xt.bind(null,e)),a.lua_register(t,"GetPlayerSlotState",It.bind(null,e)),a.lua_register(t,"GetPlayerTaxRate",Mt.bind(null,e)),a.lua_register(t,"IsPlayerRacePrefSet",Ut.bind(null,e)),a.lua_register(t,"GetPlayerName",Pt.bind(null,e)),a.lua_register(t,"CreateTimer",Rt.bind(null,e)),a.lua_register(t,"DestroyTimer",Ot.bind(null,e)),a.lua_register(t,"TimerStart",Ct.bind(null,e)),a.lua_register(t,"TimerGetElapsed",Bt.bind(null,e)),a.lua_register(t,"TimerGetRemaining",Ft.bind(null,e)),a.lua_register(t,"TimerGetTimeout",Dt.bind(null,e)),a.lua_register(t,"PauseTimer",Gt.bind(null,e)),a.lua_register(t,"ResumeTimer",Nt.bind(null,e)),a.lua_register(t,"GetExpiredTimer",Vt.bind(null,e)),a.lua_register(t,"CreateGroup",Ht.bind(null,e)),a.lua_register(t,"DestroyGroup",jt.bind(null,e)),a.lua_register(t,"GroupAddUnit",Kt.bind(null,e)),a.lua_register(t,"GroupRemoveUnit",zt.bind(null,e)),a.lua_register(t,"GroupClear",Xt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfType",Jt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfPlayer",Yt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfTypeCounted",$t.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRect",qt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRectCounted",Wt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRange",Zt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeOfLoc",Qt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeCounted",en.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeOfLocCounted",tn.bind(null,e)),a.lua_register(t,"GroupEnumUnitsSelected",nn.bind(null,e)),a.lua_register(t,"GroupImmediateOrder",an.bind(null,e)),a.lua_register(t,"GroupImmediateOrderById",rn.bind(null,e)),a.lua_register(t,"GroupPointOrder",ln.bind(null,e)),a.lua_register(t,"GroupPointOrderLoc",sn.bind(null,e)),a.lua_register(t,"GroupPointOrderById",on.bind(null,e)),a.lua_register(t,"GroupPointOrderByIdLoc",un.bind(null,e)),a.lua_register(t,"GroupTargetOrder",cn.bind(null,e)),a.lua_register(t,"GroupTargetOrderById",dn.bind(null,e)),a.lua_register(t,"ForGroup",hn.bind(null,e)),a.lua_register(t,"FirstOfGroup",fn.bind(null,e)),a.lua_register(t,"CreateForce",_n.bind(null,e)),a.lua_register(t,"DestroyForce",mn.bind(null,e)),a.lua_register(t,"ForceAddPlayer",pn.bind(null,e)),a.lua_register(t,"ForceRemovePlayer",gn.bind(null,e)),a.lua_register(t,"ForceClear",bn.bind(null,e)),a.lua_register(t,"ForceEnumPlayers",wn.bind(null,e)),a.lua_register(t,"ForceEnumPlayersCounted",vn.bind(null,e)),a.lua_register(t,"ForceEnumAllies",An.bind(null,e)),a.lua_register(t,"ForceEnumEnemies",yn.bind(null,e)),a.lua_register(t,"ForForce",Ln.bind(null,e)),a.lua_register(t,"Rect",Sn.bind(null,e)),a.lua_register(t,"RectFromLoc",Tn.bind(null,e)),a.lua_register(t,"RemoveRect",En.bind(null,e)),a.lua_register(t,"SetRect",kn.bind(null,e)),a.lua_register(t,"SetRectFromLoc",xn.bind(null,e)),a.lua_register(t,"MoveRectTo",In.bind(null,e)),a.lua_register(t,"MoveRectToLoc",Mn.bind(null,e)),a.lua_register(t,"GetRectCenterX",Un.bind(null,e)),a.lua_register(t,"GetRectCenterY",Pn.bind(null,e)),a.lua_register(t,"GetRectMinX",Rn.bind(null,e)),a.lua_register(t,"GetRectMinY",On.bind(null,e)),a.lua_register(t,"GetRectMaxX",Cn.bind(null,e)),a.lua_register(t,"GetRectMaxY",Bn.bind(null,e)),a.lua_register(t,"CreateRegion",Fn.bind(null,e)),a.lua_register(t,"RemoveRegion",Dn.bind(null,e)),a.lua_register(t,"RegionAddRect",Gn.bind(null,e)),a.lua_register(t,"RegionClearRect",Nn.bind(null,e)),a.lua_register(t,"RegionAddCell",Vn.bind(null,e)),a.lua_register(t,"RegionAddCellAtLoc",Hn.bind(null,e)),a.lua_register(t,"RegionClearCell",jn.bind(null,e)),a.lua_register(t,"RegionClearCellAtLoc",Kn.bind(null,e)),a.lua_register(t,"Location",zn.bind(null,e)),a.lua_register(t,"RemoveLocation",Xn.bind(null,e)),a.lua_register(t,"MoveLocation",Jn.bind(null,e)),a.lua_register(t,"GetLocationX",Yn.bind(null,e)),a.lua_register(t,"GetLocationY",$n.bind(null,e)),a.lua_register(t,"GetLocationZ",qn.bind(null,e)),a.lua_register(t,"IsUnitInRegion",Wn.bind(null,e)),a.lua_register(t,"IsPointInRegion",Zn.bind(null,e)),a.lua_register(t,"IsLocationInRegion",Qn.bind(null,e)),a.lua_register(t,"GetWorldBounds",ea.bind(null,e)),a.lua_register(t,"CreateTrigger",ta.bind(null,e)),a.lua_register(t,"DestroyTrigger",na.bind(null,e)),a.lua_register(t,"ResetTrigger",aa.bind(null,e)),a.lua_register(t,"EnableTrigger",ra.bind(null,e)),a.lua_register(t,"DisableTrigger",ia.bind(null,e)),a.lua_register(t,"IsTriggerEnabled",la.bind(null,e)),a.lua_register(t,"TriggerWaitOnSleeps",sa.bind(null,e)),a.lua_register(t,"IsTriggerWaitOnSleeps",oa.bind(null,e)),a.lua_register(t,"GetFilterUnit",ua.bind(null,e)),a.lua_register(t,"GetEnumUnit",ca.bind(null,e)),a.lua_register(t,"GetFilterDestructable",da.bind(null,e)),a.lua_register(t,"GetEnumDestructable",ha.bind(null,e)),a.lua_register(t,"GetFilterItem",fa.bind(null,e)),a.lua_register(t,"GetEnumItem",_a.bind(null,e)),a.lua_register(t,"GetFilterPlayer",ma.bind(null,e)),a.lua_register(t,"GetEnumPlayer",pa.bind(null,e)),a.lua_register(t,"GetTriggeringTrigger",ga.bind(null,e)),a.lua_register(t,"GetTriggerEventId",ba.bind(null,e)),a.lua_register(t,"GetTriggerEvalCount",wa.bind(null,e)),a.lua_register(t,"GetTriggerExecCount",va.bind(null,e)),a.lua_register(t,"ExecuteFunc",Aa.bind(null,e)),a.lua_register(t,"And",ya.bind(null,e)),a.lua_register(t,"Or",La.bind(null,e)),a.lua_register(t,"Not",Sa.bind(null,e)),a.lua_register(t,"Condition",Ta.bind(null,e)),a.lua_register(t,"DestroyCondition",Ea.bind(null,e)),a.lua_register(t,"Filter",ka.bind(null,e)),a.lua_register(t,"DestroyFilter",xa.bind(null,e)),a.lua_register(t,"DestroyBoolExpr",Ia.bind(null,e)),a.lua_register(t,"TriggerRegisterVariableEvent",Ma.bind(null,e)),a.lua_register(t,"TriggerRegisterTimerEvent",Ua.bind(null,e)),a.lua_register(t,"TriggerRegisterTimerExpireEvent",Pa.bind(null,e)),a.lua_register(t,"TriggerRegisterGameStateEvent",Ra.bind(null,e)),a.lua_register(t,"TriggerRegisterDialogEvent",Oa.bind(null,e)),a.lua_register(t,"TriggerRegisterDialogButtonEvent",Ca.bind(null,e)),a.lua_register(t,"GetEventGameState",Ba.bind(null,e)),a.lua_register(t,"TriggerRegisterGameEvent",Fa.bind(null,e)),a.lua_register(t,"GetWinningPlayer",Da.bind(null,e)),a.lua_register(t,"TriggerRegisterEnterRegion",Ga.bind(null,e)),a.lua_register(t,"GetTriggeringRegion",Na.bind(null,e)),a.lua_register(t,"GetEnteringUnit",Va.bind(null,e)),a.lua_register(t,"TriggerRegisterLeaveRegion",Ha.bind(null,e)),a.lua_register(t,"GetLeavingUnit",ja.bind(null,e)),a.lua_register(t,"TriggerRegisterTrackableHitEvent",Ka.bind(null,e)),a.lua_register(t,"TriggerRegisterTrackableTrackEvent",za.bind(null,e)),a.lua_register(t,"GetTriggeringTrackable",Xa.bind(null,e)),a.lua_register(t,"GetClickedButton",Ja.bind(null,e)),a.lua_register(t,"GetClickedDialog",Ya.bind(null,e)),a.lua_register(t,"GetTournamentFinishSoonTimeRemaining",$a.bind(null,e)),a.lua_register(t,"GetTournamentFinishNowRule",qa.bind(null,e)),a.lua_register(t,"GetTournamentFinishNowPlayer",Wa.bind(null,e)),a.lua_register(t,"GetTournamentScore",Za.bind(null,e)),a.lua_register(t,"GetSaveBasicFilename",Qa.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerEvent",er.bind(null,e)),a.lua_register(t,"GetTriggerPlayer",tr.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerUnitEvent",nr.bind(null,e)),a.lua_register(t,"GetLevelingUnit",ar.bind(null,e)),a.lua_register(t,"GetLearningUnit",rr.bind(null,e)),a.lua_register(t,"GetLearnedSkill",ir.bind(null,e)),a.lua_register(t,"GetLearnedSkillLevel",lr.bind(null,e)),a.lua_register(t,"GetRevivableUnit",sr.bind(null,e)),a.lua_register(t,"GetRevivingUnit",or.bind(null,e)),a.lua_register(t,"GetAttacker",ur.bind(null,e)),a.lua_register(t,"GetRescuer",cr.bind(null,e)),a.lua_register(t,"GetDyingUnit",dr.bind(null,e)),a.lua_register(t,"GetKillingUnit",hr.bind(null,e)),a.lua_register(t,"GetDecayingUnit",fr.bind(null,e)),a.lua_register(t,"GetConstructingStructure",_r.bind(null,e)),a.lua_register(t,"GetCancelledStructure",mr.bind(null,e)),a.lua_register(t,"GetConstructedStructure",pr.bind(null,e)),a.lua_register(t,"GetResearchingUnit",gr.bind(null,e)),a.lua_register(t,"GetResearched",br.bind(null,e)),a.lua_register(t,"GetTrainedUnitType",wr.bind(null,e)),a.lua_register(t,"GetTrainedUnit",vr.bind(null,e)),a.lua_register(t,"GetDetectedUnit",Ar.bind(null,e)),a.lua_register(t,"GetSummoningUnit",yr.bind(null,e)),a.lua_register(t,"GetSummonedUnit",Lr.bind(null,e)),a.lua_register(t,"GetTransportUnit",Sr.bind(null,e)),a.lua_register(t,"GetLoadedUnit",Tr.bind(null,e)),a.lua_register(t,"GetSellingUnit",Er.bind(null,e)),a.lua_register(t,"GetSoldUnit",kr.bind(null,e)),a.lua_register(t,"GetBuyingUnit",xr.bind(null,e)),a.lua_register(t,"GetSoldItem",Ir.bind(null,e)),a.lua_register(t,"GetChangingUnit",Mr.bind(null,e)),a.lua_register(t,"GetChangingUnitPrevOwner",Ur.bind(null,e)),a.lua_register(t,"GetManipulatingUnit",Pr.bind(null,e)),a.lua_register(t,"GetManipulatedItem",Rr.bind(null,e)),a.lua_register(t,"GetOrderedUnit",Or.bind(null,e)),a.lua_register(t,"GetIssuedOrderId",Cr.bind(null,e)),a.lua_register(t,"GetOrderPointX",Br.bind(null,e)),a.lua_register(t,"GetOrderPointY",Fr.bind(null,e)),a.lua_register(t,"GetOrderPointLoc",Dr.bind(null,e)),a.lua_register(t,"GetOrderTarget",Gr.bind(null,e)),a.lua_register(t,"GetOrderTargetDestructable",Nr.bind(null,e)),a.lua_register(t,"GetOrderTargetItem",Vr.bind(null,e)),a.lua_register(t,"GetOrderTargetUnit",Hr.bind(null,e)),a.lua_register(t,"GetSpellAbilityUnit",jr.bind(null,e)),a.lua_register(t,"GetSpellAbilityId",Kr.bind(null,e)),a.lua_register(t,"GetSpellAbility",zr.bind(null,e)),a.lua_register(t,"GetSpellTargetLoc",Xr.bind(null,e)),a.lua_register(t,"GetSpellTargetX",Jr.bind(null,e)),a.lua_register(t,"GetSpellTargetY",Yr.bind(null,e)),a.lua_register(t,"GetSpellTargetDestructable",$r.bind(null,e)),a.lua_register(t,"GetSpellTargetItem",qr.bind(null,e)),a.lua_register(t,"GetSpellTargetUnit",Wr.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerAllianceChange",Zr.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerStateEvent",Qr.bind(null,e)),a.lua_register(t,"GetEventPlayerState",ei.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerChatEvent",ti.bind(null,e)),a.lua_register(t,"GetEventPlayerChatString",ni.bind(null,e)),a.lua_register(t,"GetEventPlayerChatStringMatched",ai.bind(null,e)),a.lua_register(t,"TriggerRegisterDeathEvent",ri.bind(null,e)),a.lua_register(t,"GetTriggerUnit",ii.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitStateEvent",li.bind(null,e)),a.lua_register(t,"GetEventUnitState",si.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitEvent",oi.bind(null,e)),a.lua_register(t,"GetEventDamage",ui.bind(null,e)),a.lua_register(t,"GetEventDamageSource",ci.bind(null,e)),a.lua_register(t,"GetEventDetectingPlayer",di.bind(null,e)),a.lua_register(t,"TriggerRegisterFilterUnitEvent",hi.bind(null,e)),a.lua_register(t,"GetEventTargetUnit",fi.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitInRange",_i.bind(null,e)),a.lua_register(t,"TriggerAddCondition",mi.bind(null,e)),a.lua_register(t,"TriggerRemoveCondition",pi.bind(null,e)),a.lua_register(t,"TriggerClearConditions",gi.bind(null,e)),a.lua_register(t,"TriggerAddAction",bi.bind(null,e)),a.lua_register(t,"TriggerRemoveAction",wi.bind(null,e)),a.lua_register(t,"TriggerClearActions",vi.bind(null,e)),a.lua_register(t,"TriggerSleepAction",Ai.bind(null,e)),a.lua_register(t,"TriggerWaitForSound",yi.bind(null,e)),a.lua_register(t,"TriggerEvaluate",Li.bind(null,e)),a.lua_register(t,"TriggerExecute",Si.bind(null,e)),a.lua_register(t,"TriggerExecuteWait",Ti.bind(null,e)),a.lua_register(t,"TriggerSyncStart",Ei.bind(null,e)),a.lua_register(t,"TriggerSyncReady",ki.bind(null,e)),a.lua_register(t,"GetWidgetLife",xi.bind(null,e)),a.lua_register(t,"SetWidgetLife",Ii.bind(null,e)),a.lua_register(t,"GetWidgetX",Mi.bind(null,e)),a.lua_register(t,"GetWidgetY",Ui.bind(null,e)),a.lua_register(t,"GetTriggerWidget",Pi.bind(null,e)),a.lua_register(t,"CreateDestructable",Ri.bind(null,e)),a.lua_register(t,"CreateDestructableZ",Oi.bind(null,e)),a.lua_register(t,"CreateDeadDestructable",Ci.bind(null,e)),a.lua_register(t,"CreateDeadDestructableZ",Bi.bind(null,e)),a.lua_register(t,"RemoveDestructable",Fi.bind(null,e)),a.lua_register(t,"KillDestructable",Di.bind(null,e)),a.lua_register(t,"SetDestructableInvulnerable",Gi.bind(null,e)),a.lua_register(t,"IsDestructableInvulnerable",Ni.bind(null,e)),a.lua_register(t,"EnumDestructablesInRect",Vi.bind(null,e)),a.lua_register(t,"GetDestructableTypeId",Hi.bind(null,e)),a.lua_register(t,"GetDestructableX",ji.bind(null,e)),a.lua_register(t,"GetDestructableY",Ki.bind(null,e)),a.lua_register(t,"SetDestructableLife",zi.bind(null,e)),a.lua_register(t,"GetDestructableLife",Xi.bind(null,e)),a.lua_register(t,"SetDestructableMaxLife",Ji.bind(null,e)),a.lua_register(t,"GetDestructableMaxLife",Yi.bind(null,e)),a.lua_register(t,"DestructableRestoreLife",$i.bind(null,e)),a.lua_register(t,"QueueDestructableAnimation",qi.bind(null,e)),a.lua_register(t,"SetDestructableAnimation",Wi.bind(null,e)),a.lua_register(t,"SetDestructableAnimationSpeed",Zi.bind(null,e)),a.lua_register(t,"ShowDestructable",Qi.bind(null,e)),a.lua_register(t,"GetDestructableOccluderHeight",el.bind(null,e)),a.lua_register(t,"SetDestructableOccluderHeight",tl.bind(null,e)),a.lua_register(t,"GetDestructableName",nl.bind(null,e)),a.lua_register(t,"GetTriggerDestructable",al.bind(null,e)),a.lua_register(t,"CreateItem",rl.bind(null,e)),a.lua_register(t,"RemoveItem",il.bind(null,e)),a.lua_register(t,"GetItemPlayer",ll.bind(null,e)),a.lua_register(t,"GetItemTypeId",sl.bind(null,e)),a.lua_register(t,"GetItemX",ol.bind(null,e)),a.lua_register(t,"GetItemY",ul.bind(null,e)),a.lua_register(t,"SetItemPosition",cl.bind(null,e)),a.lua_register(t,"SetItemDropOnDeath",dl.bind(null,e)),a.lua_register(t,"SetItemDroppable",hl.bind(null,e)),a.lua_register(t,"SetItemPawnable",fl.bind(null,e)),a.lua_register(t,"SetItemPlayer",_l.bind(null,e)),a.lua_register(t,"SetItemInvulnerable",ml.bind(null,e)),a.lua_register(t,"IsItemInvulnerable",pl.bind(null,e)),a.lua_register(t,"SetItemVisible",gl.bind(null,e)),a.lua_register(t,"IsItemVisible",bl.bind(null,e)),a.lua_register(t,"IsItemOwned",wl.bind(null,e)),a.lua_register(t,"IsItemPowerup",vl.bind(null,e)),a.lua_register(t,"IsItemSellable",Al.bind(null,e)),a.lua_register(t,"IsItemPawnable",yl.bind(null,e)),a.lua_register(t,"IsItemIdPowerup",Ll.bind(null,e)),a.lua_register(t,"IsItemIdSellable",Sl.bind(null,e)),a.lua_register(t,"IsItemIdPawnable",Tl.bind(null,e)),a.lua_register(t,"EnumItemsInRect",El.bind(null,e)),a.lua_register(t,"GetItemLevel",kl.bind(null,e)),a.lua_register(t,"GetItemType",xl.bind(null,e)),a.lua_register(t,"SetItemDropID",Il.bind(null,e)),a.lua_register(t,"GetItemName",Ml.bind(null,e)),a.lua_register(t,"GetItemCharges",Ul.bind(null,e)),a.lua_register(t,"SetItemCharges",Pl.bind(null,e)),a.lua_register(t,"GetItemUserData",Rl.bind(null,e)),a.lua_register(t,"SetItemUserData",Ol.bind(null,e)),a.lua_register(t,"CreateUnit",Cl.bind(null,e)),a.lua_register(t,"CreateUnitByName",Bl.bind(null,e)),a.lua_register(t,"CreateUnitAtLoc",Fl.bind(null,e)),a.lua_register(t,"CreateUnitAtLocByName",Dl.bind(null,e)),a.lua_register(t,"CreateCorpse",Gl.bind(null,e)),a.lua_register(t,"KillUnit",Nl.bind(null,e)),a.lua_register(t,"RemoveUnit",Vl.bind(null,e)),a.lua_register(t,"ShowUnit",Hl.bind(null,e)),a.lua_register(t,"SetUnitState",jl.bind(null,e)),a.lua_register(t,"SetUnitX",Kl.bind(null,e)),a.lua_register(t,"SetUnitY",zl.bind(null,e)),a.lua_register(t,"SetUnitPosition",Xl.bind(null,e)),a.lua_register(t,"SetUnitPositionLoc",Jl.bind(null,e)),a.lua_register(t,"SetUnitFacing",Yl.bind(null,e)),a.lua_register(t,"SetUnitFacingTimed",$l.bind(null,e)),a.lua_register(t,"SetUnitMoveSpeed",ql.bind(null,e)),a.lua_register(t,"SetUnitFlyHeight",Wl.bind(null,e)),a.lua_register(t,"SetUnitTurnSpeed",Zl.bind(null,e)),a.lua_register(t,"SetUnitPropWindow",Ql.bind(null,e)),a.lua_register(t,"SetUnitAcquireRange",es.bind(null,e)),a.lua_register(t,"SetUnitCreepGuard",ts.bind(null,e)),a.lua_register(t,"GetUnitAcquireRange",ns.bind(null,e)),a.lua_register(t,"GetUnitTurnSpeed",as.bind(null,e)),a.lua_register(t,"GetUnitPropWindow",rs.bind(null,e)),a.lua_register(t,"GetUnitFlyHeight",is.bind(null,e)),a.lua_register(t,"GetUnitDefaultAcquireRange",ls.bind(null,e)),a.lua_register(t,"GetUnitDefaultTurnSpeed",ss.bind(null,e)),a.lua_register(t,"GetUnitDefaultPropWindow",os.bind(null,e)),a.lua_register(t,"GetUnitDefaultFlyHeight",us.bind(null,e)),a.lua_register(t,"SetUnitOwner",cs.bind(null,e)),a.lua_register(t,"SetUnitColor",ds.bind(null,e)),a.lua_register(t,"SetUnitScale",hs.bind(null,e)),a.lua_register(t,"SetUnitTimeScale",fs.bind(null,e)),a.lua_register(t,"SetUnitBlendTime",_s.bind(null,e)),a.lua_register(t,"SetUnitVertexColor",ms.bind(null,e)),a.lua_register(t,"QueueUnitAnimation",ps.bind(null,e)),a.lua_register(t,"SetUnitAnimation",gs.bind(null,e)),a.lua_register(t,"SetUnitAnimationByIndex",bs.bind(null,e)),a.lua_register(t,"SetUnitAnimationWithRarity",ws.bind(null,e)),a.lua_register(t,"AddUnitAnimationProperties",vs.bind(null,e)),a.lua_register(t,"SetUnitLookAt",As.bind(null,e)),a.lua_register(t,"ResetUnitLookAt",ys.bind(null,e)),a.lua_register(t,"SetUnitRescuable",Ls.bind(null,e)),a.lua_register(t,"SetUnitRescueRange",Ss.bind(null,e)),a.lua_register(t,"SetHeroStr",Ts.bind(null,e)),a.lua_register(t,"SetHeroAgi",Es.bind(null,e)),a.lua_register(t,"SetHeroInt",ks.bind(null,e)),a.lua_register(t,"GetHeroStr",xs.bind(null,e)),a.lua_register(t,"GetHeroAgi",Is.bind(null,e)),a.lua_register(t,"GetHeroInt",Ms.bind(null,e)),a.lua_register(t,"UnitStripHeroLevel",Us.bind(null,e)),a.lua_register(t,"GetHeroXP",Ps.bind(null,e)),a.lua_register(t,"SetHeroXP",Rs.bind(null,e)),a.lua_register(t,"GetHeroSkillPoints",Os.bind(null,e)),a.lua_register(t,"UnitModifySkillPoints",Cs.bind(null,e)),a.lua_register(t,"AddHeroXP",Bs.bind(null,e)),a.lua_register(t,"SetHeroLevel",Fs.bind(null,e)),a.lua_register(t,"GetHeroLevel",Ds.bind(null,e)),a.lua_register(t,"GetUnitLevel",Gs.bind(null,e)),a.lua_register(t,"GetHeroProperName",Ns.bind(null,e)),a.lua_register(t,"SuspendHeroXP",Vs.bind(null,e)),a.lua_register(t,"IsSuspendedXP",Hs.bind(null,e)),a.lua_register(t,"SelectHeroSkill",js.bind(null,e)),a.lua_register(t,"GetUnitAbilityLevel",Ks.bind(null,e)),a.lua_register(t,"DecUnitAbilityLevel",zs.bind(null,e)),a.lua_register(t,"IncUnitAbilityLevel",Xs.bind(null,e)),a.lua_register(t,"SetUnitAbilityLevel",Js.bind(null,e)),a.lua_register(t,"ReviveHero",Ys.bind(null,e)),a.lua_register(t,"ReviveHeroLoc",$s.bind(null,e)),a.lua_register(t,"SetUnitExploded",qs.bind(null,e)),a.lua_register(t,"SetUnitInvulnerable",Ws.bind(null,e)),a.lua_register(t,"PauseUnit",Zs.bind(null,e)),a.lua_register(t,"IsUnitPaused",Qs.bind(null,e)),a.lua_register(t,"SetUnitPathing",eo.bind(null,e)),a.lua_register(t,"ClearSelection",to.bind(null,e)),a.lua_register(t,"SelectUnit",no.bind(null,e)),a.lua_register(t,"GetUnitPointValue",ao.bind(null,e)),a.lua_register(t,"GetUnitPointValueByType",ro.bind(null,e)),a.lua_register(t,"UnitAddItem",io.bind(null,e)),a.lua_register(t,"UnitAddItemById",lo.bind(null,e)),a.lua_register(t,"UnitAddItemToSlotById",so.bind(null,e)),a.lua_register(t,"UnitRemoveItem",oo.bind(null,e)),a.lua_register(t,"UnitRemoveItemFromSlot",uo.bind(null,e)),a.lua_register(t,"UnitHasItem",co.bind(null,e)),a.lua_register(t,"UnitItemInSlot",ho.bind(null,e)),a.lua_register(t,"UnitInventorySize",fo.bind(null,e)),a.lua_register(t,"UnitDropItemPoint",_o.bind(null,e)),a.lua_register(t,"UnitDropItemSlot",mo.bind(null,e)),a.lua_register(t,"UnitDropItemTarget",po.bind(null,e)),a.lua_register(t,"UnitUseItem",go.bind(null,e)),a.lua_register(t,"UnitUseItemPoint",bo.bind(null,e)),a.lua_register(t,"UnitUseItemTarget",wo.bind(null,e)),a.lua_register(t,"GetUnitX",vo.bind(null,e)),a.lua_register(t,"GetUnitY",Ao.bind(null,e)),a.lua_register(t,"GetUnitLoc",yo.bind(null,e)),a.lua_register(t,"GetUnitFacing",Lo.bind(null,e)),a.lua_register(t,"GetUnitMoveSpeed",So.bind(null,e)),a.lua_register(t,"GetUnitDefaultMoveSpeed",To.bind(null,e)),a.lua_register(t,"GetUnitState",Eo.bind(null,e)),a.lua_register(t,"GetOwningPlayer",ko.bind(null,e)),a.lua_register(t,"GetUnitTypeId",xo.bind(null,e)),a.lua_register(t,"GetUnitRace",Io.bind(null,e)),a.lua_register(t,"GetUnitName",Mo.bind(null,e)),a.lua_register(t,"GetUnitFoodUsed",Uo.bind(null,e)),a.lua_register(t,"GetUnitFoodMade",Po.bind(null,e)),a.lua_register(t,"GetFoodMade",Ro.bind(null,e)),a.lua_register(t,"GetFoodUsed",Oo.bind(null,e)),a.lua_register(t,"SetUnitUseFood",Co.bind(null,e)),a.lua_register(t,"GetUnitRallyPoint",Bo.bind(null,e)),a.lua_register(t,"GetUnitRallyUnit",Fo.bind(null,e)),a.lua_register(t,"GetUnitRallyDestructable",Do.bind(null,e)),a.lua_register(t,"IsUnitInGroup",Go.bind(null,e)),a.lua_register(t,"IsUnitInForce",No.bind(null,e)),a.lua_register(t,"IsUnitOwnedByPlayer",Vo.bind(null,e)),a.lua_register(t,"IsUnitAlly",Ho.bind(null,e)),a.lua_register(t,"IsUnitEnemy",jo.bind(null,e)),a.lua_register(t,"IsUnitVisible",Ko.bind(null,e)),a.lua_register(t,"IsUnitDetected",zo.bind(null,e)),a.lua_register(t,"IsUnitInvisible",Xo.bind(null,e)),a.lua_register(t,"IsUnitFogged",Jo.bind(null,e)),a.lua_register(t,"IsUnitMasked",Yo.bind(null,e)),a.lua_register(t,"IsUnitSelected",$o.bind(null,e)),a.lua_register(t,"IsUnitRace",qo.bind(null,e)),a.lua_register(t,"IsUnitType",Wo.bind(null,e)),a.lua_register(t,"IsUnit",Zo.bind(null,e)),a.lua_register(t,"IsUnitInRange",Qo.bind(null,e)),a.lua_register(t,"IsUnitInRangeXY",eu.bind(null,e)),a.lua_register(t,"IsUnitInRangeLoc",tu.bind(null,e)),a.lua_register(t,"IsUnitHidden",nu.bind(null,e)),a.lua_register(t,"IsUnitIllusion",au.bind(null,e)),a.lua_register(t,"IsUnitInTransport",ru.bind(null,e)),a.lua_register(t,"IsUnitLoaded",iu.bind(null,e)),a.lua_register(t,"IsHeroUnitId",lu.bind(null,e)),a.lua_register(t,"IsUnitIdType",su.bind(null,e)),a.lua_register(t,"UnitShareVision",ou.bind(null,e)),a.lua_register(t,"UnitSuspendDecay",uu.bind(null,e)),a.lua_register(t,"UnitAddType",cu.bind(null,e)),a.lua_register(t,"UnitRemoveType",du.bind(null,e)),a.lua_register(t,"UnitAddAbility",hu.bind(null,e)),a.lua_register(t,"UnitRemoveAbility",fu.bind(null,e)),a.lua_register(t,"UnitMakeAbilityPermanent",_u.bind(null,e)),a.lua_register(t,"UnitRemoveBuffs",mu.bind(null,e)),a.lua_register(t,"UnitRemoveBuffsEx",pu.bind(null,e)),a.lua_register(t,"UnitHasBuffsEx",gu.bind(null,e)),a.lua_register(t,"UnitCountBuffsEx",bu.bind(null,e)),a.lua_register(t,"UnitAddSleep",wu.bind(null,e)),a.lua_register(t,"UnitCanSleep",vu.bind(null,e)),a.lua_register(t,"UnitAddSleepPerm",Au.bind(null,e)),a.lua_register(t,"UnitCanSleepPerm",yu.bind(null,e)),a.lua_register(t,"UnitIsSleeping",Lu.bind(null,e)),a.lua_register(t,"UnitWakeUp",Su.bind(null,e)),a.lua_register(t,"UnitApplyTimedLife",Tu.bind(null,e)),a.lua_register(t,"UnitIgnoreAlarm",Eu.bind(null,e)),a.lua_register(t,"UnitIgnoreAlarmToggled",ku.bind(null,e)),a.lua_register(t,"UnitResetCooldown",xu.bind(null,e)),a.lua_register(t,"UnitSetConstructionProgress",Iu.bind(null,e)),a.lua_register(t,"UnitSetUpgradeProgress",Mu.bind(null,e)),a.lua_register(t,"UnitPauseTimedLife",Uu.bind(null,e)),a.lua_register(t,"UnitSetUsesAltIcon",Pu.bind(null,e)),a.lua_register(t,"UnitDamagePoint",Ru.bind(null,e)),a.lua_register(t,"UnitDamageTarget",Ou.bind(null,e)),a.lua_register(t,"IssueImmediateOrder",Cu.bind(null,e)),a.lua_register(t,"IssueImmediateOrderById",Bu.bind(null,e)),a.lua_register(t,"IssuePointOrder",Fu.bind(null,e)),a.lua_register(t,"IssuePointOrderLoc",Du.bind(null,e)),a.lua_register(t,"IssuePointOrderById",Gu.bind(null,e)),a.lua_register(t,"IssuePointOrderByIdLoc",Nu.bind(null,e)),a.lua_register(t,"IssueTargetOrder",Vu.bind(null,e)),a.lua_register(t,"IssueTargetOrderById",Hu.bind(null,e)),a.lua_register(t,"IssueInstantPointOrder",ju.bind(null,e)),a.lua_register(t,"IssueInstantPointOrderById",Ku.bind(null,e)),a.lua_register(t,"IssueInstantTargetOrder",zu.bind(null,e)),a.lua_register(t,"IssueInstantTargetOrderById",Xu.bind(null,e)),a.lua_register(t,"IssueBuildOrder",Ju.bind(null,e)),a.lua_register(t,"IssueBuildOrderById",Yu.bind(null,e)),a.lua_register(t,"IssueNeutralImmediateOrder",$u.bind(null,e)),a.lua_register(t,"IssueNeutralImmediateOrderById",qu.bind(null,e)),a.lua_register(t,"IssueNeutralPointOrder",Wu.bind(null,e)),a.lua_register(t,"IssueNeutralPointOrderById",Zu.bind(null,e)),a.lua_register(t,"IssueNeutralTargetOrder",Qu.bind(null,e)),a.lua_register(t,"IssueNeutralTargetOrderById",ec.bind(null,e)),a.lua_register(t,"GetUnitCurrentOrder",tc.bind(null,e)),a.lua_register(t,"SetResourceAmount",nc.bind(null,e)),a.lua_register(t,"AddResourceAmount",ac.bind(null,e)),a.lua_register(t,"GetResourceAmount",rc.bind(null,e)),a.lua_register(t,"WaygateGetDestinationX",ic.bind(null,e)),a.lua_register(t,"WaygateGetDestinationY",lc.bind(null,e)),a.lua_register(t,"WaygateSetDestination",sc.bind(null,e)),a.lua_register(t,"WaygateActivate",oc.bind(null,e)),a.lua_register(t,"WaygateIsActive",uc.bind(null,e)),a.lua_register(t,"AddItemToAllStock",cc.bind(null,e)),a.lua_register(t,"AddItemToStock",dc.bind(null,e)),a.lua_register(t,"AddUnitToAllStock",hc.bind(null,e)),a.lua_register(t,"AddUnitToStock",fc.bind(null,e)),a.lua_register(t,"RemoveItemFromAllStock",_c.bind(null,e)),a.lua_register(t,"RemoveItemFromStock",mc.bind(null,e)),a.lua_register(t,"RemoveUnitFromAllStock",pc.bind(null,e)),a.lua_register(t,"RemoveUnitFromStock",gc.bind(null,e)),a.lua_register(t,"SetAllItemTypeSlots",bc.bind(null,e)),a.lua_register(t,"SetAllUnitTypeSlots",wc.bind(null,e)),a.lua_register(t,"SetItemTypeSlots",vc.bind(null,e)),a.lua_register(t,"SetUnitTypeSlots",Ac.bind(null,e)),a.lua_register(t,"GetUnitUserData",yc.bind(null,e)),a.lua_register(t,"SetUnitUserData",Lc.bind(null,e)),a.lua_register(t,"Player",Sc.bind(null,e)),a.lua_register(t,"GetLocalPlayer",Tc.bind(null,e)),a.lua_register(t,"IsPlayerAlly",Ec.bind(null,e)),a.lua_register(t,"IsPlayerEnemy",kc.bind(null,e)),a.lua_register(t,"IsPlayerInForce",xc.bind(null,e)),a.lua_register(t,"IsPlayerObserver",Ic.bind(null,e)),a.lua_register(t,"IsVisibleToPlayer",Mc.bind(null,e)),a.lua_register(t,"IsLocationVisibleToPlayer",Uc.bind(null,e)),a.lua_register(t,"IsFoggedToPlayer",Pc.bind(null,e)),a.lua_register(t,"IsLocationFoggedToPlayer",Rc.bind(null,e)),a.lua_register(t,"IsMaskedToPlayer",Oc.bind(null,e)),a.lua_register(t,"IsLocationMaskedToPlayer",Cc.bind(null,e)),a.lua_register(t,"GetPlayerRace",Bc.bind(null,e)),a.lua_register(t,"GetPlayerId",Fc.bind(null,e)),a.lua_register(t,"GetPlayerUnitCount",Dc.bind(null,e)),a.lua_register(t,"GetPlayerTypedUnitCount",Gc.bind(null,e)),a.lua_register(t,"GetPlayerStructureCount",Nc.bind(null,e)),a.lua_register(t,"GetPlayerState",Vc.bind(null,e)),a.lua_register(t,"GetPlayerScore",Hc.bind(null,e)),a.lua_register(t,"GetPlayerAlliance",jc.bind(null,e)),a.lua_register(t,"GetPlayerHandicap",Kc.bind(null,e)),a.lua_register(t,"GetPlayerHandicapXP",zc.bind(null,e)),a.lua_register(t,"SetPlayerHandicap",Xc.bind(null,e)),a.lua_register(t,"SetPlayerHandicapXP",Jc.bind(null,e)),a.lua_register(t,"SetPlayerTechMaxAllowed",Yc.bind(null,e)),a.lua_register(t,"GetPlayerTechMaxAllowed",$c.bind(null,e)),a.lua_register(t,"AddPlayerTechResearched",qc.bind(null,e)),a.lua_register(t,"SetPlayerTechResearched",Wc.bind(null,e)),a.lua_register(t,"GetPlayerTechResearched",Zc.bind(null,e)),a.lua_register(t,"GetPlayerTechCount",Qc.bind(null,e)),a.lua_register(t,"SetPlayerUnitsOwner",ed.bind(null,e)),a.lua_register(t,"CripplePlayer",td.bind(null,e)),a.lua_register(t,"SetPlayerAbilityAvailable",nd.bind(null,e)),a.lua_register(t,"SetPlayerState",ad.bind(null,e)),a.lua_register(t,"RemovePlayer",rd.bind(null,e)),a.lua_register(t,"CachePlayerHeroData",id.bind(null,e)),a.lua_register(t,"SetFogStateRect",ld.bind(null,e)),a.lua_register(t,"SetFogStateRadius",sd.bind(null,e)),a.lua_register(t,"SetFogStateRadiusLoc",od.bind(null,e)),a.lua_register(t,"FogMaskEnable",ud.bind(null,e)),a.lua_register(t,"IsFogMaskEnabled",cd.bind(null,e)),a.lua_register(t,"FogEnable",dd.bind(null,e)),a.lua_register(t,"IsFogEnabled",hd.bind(null,e)),a.lua_register(t,"CreateFogModifierRect",fd.bind(null,e)),a.lua_register(t,"CreateFogModifierRadius",_d.bind(null,e)),a.lua_register(t,"CreateFogModifierRadiusLoc",md.bind(null,e)),a.lua_register(t,"DestroyFogModifier",pd.bind(null,e)),a.lua_register(t,"FogModifierStart",gd.bind(null,e)),a.lua_register(t,"FogModifierStop",bd.bind(null,e)),a.lua_register(t,"VersionGet",wd.bind(null,e)),a.lua_register(t,"VersionCompatible",vd.bind(null,e)),a.lua_register(t,"VersionSupported",Ad.bind(null,e)),a.lua_register(t,"EndGame",yd.bind(null,e)),a.lua_register(t,"ChangeLevel",Ld.bind(null,e)),a.lua_register(t,"RestartGame",Sd.bind(null,e)),a.lua_register(t,"ReloadGame",Td.bind(null,e)),a.lua_register(t,"SetCampaignMenuRace",Ed.bind(null,e)),a.lua_register(t,"SetCampaignMenuRaceEx",kd.bind(null,e)),a.lua_register(t,"ForceCampaignSelectScreen",xd.bind(null,e)),a.lua_register(t,"LoadGame",Id.bind(null,e)),a.lua_register(t,"SaveGame",Md.bind(null,e)),a.lua_register(t,"RenameSaveDirectory",Ud.bind(null,e)),a.lua_register(t,"RemoveSaveDirectory",Pd.bind(null,e)),a.lua_register(t,"CopySaveGame",Rd.bind(null,e)),a.lua_register(t,"SaveGameExists",Od.bind(null,e)),a.lua_register(t,"SyncSelections",Cd.bind(null,e)),a.lua_register(t,"SetFloatGameState",Bd.bind(null,e)),a.lua_register(t,"GetFloatGameState",Fd.bind(null,e)),a.lua_register(t,"SetIntegerGameState",Dd.bind(null,e)),a.lua_register(t,"GetIntegerGameState",Gd.bind(null,e)),a.lua_register(t,"SetTutorialCleared",Nd.bind(null,e)),a.lua_register(t,"SetMissionAvailable",Vd.bind(null,e)),a.lua_register(t,"SetCampaignAvailable",Hd.bind(null,e)),a.lua_register(t,"SetOpCinematicAvailable",jd.bind(null,e)),a.lua_register(t,"SetEdCinematicAvailable",Kd.bind(null,e)),a.lua_register(t,"GetDefaultDifficulty",zd.bind(null,e)),a.lua_register(t,"SetDefaultDifficulty",Xd.bind(null,e)),a.lua_register(t,"SetCustomCampaignButtonVisible",Jd.bind(null,e)),a.lua_register(t,"GetCustomCampaignButtonVisible",Yd.bind(null,e)),a.lua_register(t,"DoNotSaveReplay",$d.bind(null,e)),a.lua_register(t,"DialogCreate",qd.bind(null,e)),a.lua_register(t,"DialogDestroy",Wd.bind(null,e)),a.lua_register(t,"DialogClear",Zd.bind(null,e)),a.lua_register(t,"DialogSetMessage",Qd.bind(null,e)),a.lua_register(t,"DialogAddButton",eh.bind(null,e)),a.lua_register(t,"DialogAddQuitButton",th.bind(null,e)),a.lua_register(t,"DialogDisplay",nh.bind(null,e)),a.lua_register(t,"ReloadGameCachesFromDisk",ah.bind(null,e)),a.lua_register(t,"InitGameCache",rh.bind(null,e)),a.lua_register(t,"SaveGameCache",ih.bind(null,e)),a.lua_register(t,"StoreInteger",lh.bind(null,e)),a.lua_register(t,"StoreReal",sh.bind(null,e)),a.lua_register(t,"StoreBoolean",oh.bind(null,e)),a.lua_register(t,"StoreUnit",uh.bind(null,e)),a.lua_register(t,"StoreString",ch.bind(null,e)),a.lua_register(t,"SyncStoredInteger",dh.bind(null,e)),a.lua_register(t,"SyncStoredReal",hh.bind(null,e)),a.lua_register(t,"SyncStoredBoolean",fh.bind(null,e)),a.lua_register(t,"SyncStoredUnit",_h.bind(null,e)),a.lua_register(t,"SyncStoredString",mh.bind(null,e)),a.lua_register(t,"HaveStoredInteger",ph.bind(null,e)),a.lua_register(t,"HaveStoredReal",gh.bind(null,e)),a.lua_register(t,"HaveStoredBoolean",bh.bind(null,e)),a.lua_register(t,"HaveStoredUnit",wh.bind(null,e)),a.lua_register(t,"HaveStoredString",vh.bind(null,e)),a.lua_register(t,"FlushGameCache",Ah.bind(null,e)),a.lua_register(t,"FlushStoredMission",yh.bind(null,e)),a.lua_register(t,"FlushStoredInteger",Lh.bind(null,e)),a.lua_register(t,"FlushStoredReal",Sh.bind(null,e)),a.lua_register(t,"FlushStoredBoolean",Th.bind(null,e)),a.lua_register(t,"FlushStoredUnit",Eh.bind(null,e)),a.lua_register(t,"FlushStoredString",kh.bind(null,e)),a.lua_register(t,"GetStoredInteger",xh.bind(null,e)),a.lua_register(t,"GetStoredReal",Ih.bind(null,e)),a.lua_register(t,"GetStoredBoolean",Mh.bind(null,e)),a.lua_register(t,"GetStoredString",Uh.bind(null,e)),a.lua_register(t,"RestoreUnit",Ph.bind(null,e)),a.lua_register(t,"InitHashtable",Rh.bind(null,e)),a.lua_register(t,"SaveInteger",Oh.bind(null,e)),a.lua_register(t,"SaveReal",Ch.bind(null,e)),a.lua_register(t,"SaveBoolean",Bh.bind(null,e)),a.lua_register(t,"SaveStr",Fh.bind(null,e)),a.lua_register(t,"SavePlayerHandle",Dh.bind(null,e)),a.lua_register(t,"SaveWidgetHandle",Gh.bind(null,e)),a.lua_register(t,"SaveDestructableHandle",Nh.bind(null,e)),a.lua_register(t,"SaveItemHandle",Vh.bind(null,e)),a.lua_register(t,"SaveUnitHandle",Hh.bind(null,e)),a.lua_register(t,"SaveAbilityHandle",jh.bind(null,e)),a.lua_register(t,"SaveTimerHandle",Kh.bind(null,e)),a.lua_register(t,"SaveTriggerHandle",zh.bind(null,e)),a.lua_register(t,"SaveTriggerConditionHandle",Xh.bind(null,e)),a.lua_register(t,"SaveTriggerActionHandle",Jh.bind(null,e)),a.lua_register(t,"SaveTriggerEventHandle",Yh.bind(null,e)),a.lua_register(t,"SaveForceHandle",$h.bind(null,e)),a.lua_register(t,"SaveGroupHandle",qh.bind(null,e)),a.lua_register(t,"SaveLocationHandle",Wh.bind(null,e)),a.lua_register(t,"SaveRectHandle",Zh.bind(null,e)),a.lua_register(t,"SaveBooleanExprHandle",Qh.bind(null,e)),a.lua_register(t,"SaveSoundHandle",ef.bind(null,e)),a.lua_register(t,"SaveEffectHandle",tf.bind(null,e)),a.lua_register(t,"SaveUnitPoolHandle",nf.bind(null,e)),a.lua_register(t,"SaveItemPoolHandle",af.bind(null,e)),a.lua_register(t,"SaveQuestHandle",rf.bind(null,e)),a.lua_register(t,"SaveQuestItemHandle",lf.bind(null,e)),a.lua_register(t,"SaveDefeatConditionHandle",sf.bind(null,e)),a.lua_register(t,"SaveTimerDialogHandle",of.bind(null,e)),a.lua_register(t,"SaveLeaderboardHandle",uf.bind(null,e)),a.lua_register(t,"SaveMultiboardHandle",cf.bind(null,e)),a.lua_register(t,"SaveMultiboardItemHandle",df.bind(null,e)),a.lua_register(t,"SaveTrackableHandle",hf.bind(null,e)),a.lua_register(t,"SaveDialogHandle",ff.bind(null,e)),a.lua_register(t,"SaveButtonHandle",_f.bind(null,e)),a.lua_register(t,"SaveTextTagHandle",mf.bind(null,e)),a.lua_register(t,"SaveLightningHandle",pf.bind(null,e)),a.lua_register(t,"SaveImageHandle",gf.bind(null,e)),a.lua_register(t,"SaveUbersplatHandle",bf.bind(null,e)),a.lua_register(t,"SaveRegionHandle",wf.bind(null,e)),a.lua_register(t,"SaveFogStateHandle",vf.bind(null,e)),a.lua_register(t,"SaveFogModifierHandle",Af.bind(null,e)),a.lua_register(t,"SaveAgentHandle",yf.bind(null,e)),a.lua_register(t,"SaveHashtableHandle",Lf.bind(null,e)),a.lua_register(t,"LoadInteger",Sf.bind(null,e)),a.lua_register(t,"LoadReal",Tf.bind(null,e)),a.lua_register(t,"LoadBoolean",Ef.bind(null,e)),a.lua_register(t,"LoadStr",kf.bind(null,e)),a.lua_register(t,"LoadPlayerHandle",xf.bind(null,e)),a.lua_register(t,"LoadWidgetHandle",If.bind(null,e)),a.lua_register(t,"LoadDestructableHandle",Mf.bind(null,e)),a.lua_register(t,"LoadItemHandle",Uf.bind(null,e)),a.lua_register(t,"LoadUnitHandle",Pf.bind(null,e)),a.lua_register(t,"LoadAbilityHandle",Rf.bind(null,e)),a.lua_register(t,"LoadTimerHandle",Of.bind(null,e)),a.lua_register(t,"LoadTriggerHandle",Cf.bind(null,e)),a.lua_register(t,"LoadTriggerConditionHandle",Bf.bind(null,e)),a.lua_register(t,"LoadTriggerActionHandle",Ff.bind(null,e)),a.lua_register(t,"LoadTriggerEventHandle",Df.bind(null,e)),a.lua_register(t,"LoadForceHandle",Gf.bind(null,e)),a.lua_register(t,"LoadGroupHandle",Nf.bind(null,e)),a.lua_register(t,"LoadLocationHandle",Vf.bind(null,e)),a.lua_register(t,"LoadRectHandle",Hf.bind(null,e)),a.lua_register(t,"LoadBooleanExprHandle",jf.bind(null,e)),a.lua_register(t,"LoadSoundHandle",Kf.bind(null,e)),a.lua_register(t,"LoadEffectHandle",zf.bind(null,e)),a.lua_register(t,"LoadUnitPoolHandle",Xf.bind(null,e)),a.lua_register(t,"LoadItemPoolHandle",Jf.bind(null,e)),a.lua_register(t,"LoadQuestHandle",Yf.bind(null,e)),a.lua_register(t,"LoadQuestItemHandle",$f.bind(null,e)),a.lua_register(t,"LoadDefeatConditionHandle",qf.bind(null,e)),a.lua_register(t,"LoadTimerDialogHandle",Wf.bind(null,e)),a.lua_register(t,"LoadLeaderboardHandle",Zf.bind(null,e));a.lua_register(t,"LoadMultiboardHandle",Qf.bind(null,e)),a.lua_register(t,"LoadMultiboardItemHandle",e_.bind(null,e)),a.lua_register(t,"LoadTrackableHandle",t_.bind(null,e)),a.lua_register(t,"LoadDialogHandle",n_.bind(null,e)),a.lua_register(t,"LoadButtonHandle",a_.bind(null,e)),a.lua_register(t,"LoadTextTagHandle",r_.bind(null,e)),a.lua_register(t,"LoadLightningHandle",i_.bind(null,e)),a.lua_register(t,"LoadImageHandle",l_.bind(null,e)),a.lua_register(t,"LoadUbersplatHandle",s_.bind(null,e)),a.lua_register(t,"LoadRegionHandle",o_.bind(null,e)),a.lua_register(t,"LoadFogStateHandle",u_.bind(null,e)),a.lua_register(t,"LoadFogModifierHandle",c_.bind(null,e)),a.lua_register(t,"LoadHashtableHandle",d_.bind(null,e)),a.lua_register(t,"HaveSavedInteger",h_.bind(null,e)),a.lua_register(t,"HaveSavedReal",f_.bind(null,e)),a.lua_register(t,"HaveSavedBoolean",__.bind(null,e)),a.lua_register(t,"HaveSavedString",m_.bind(null,e)),a.lua_register(t,"HaveSavedHandle",p_.bind(null,e)),a.lua_register(t,"RemoveSavedInteger",g_.bind(null,e)),a.lua_register(t,"RemoveSavedReal",b_.bind(null,e)),a.lua_register(t,"RemoveSavedBoolean",w_.bind(null,e)),a.lua_register(t,"RemoveSavedString",v_.bind(null,e)),a.lua_register(t,"RemoveSavedHandle",A_.bind(null,e)),a.lua_register(t,"FlushParentHashtable",y_.bind(null,e)),a.lua_register(t,"FlushChildHashtable",L_.bind(null,e)),a.lua_register(t,"GetRandomInt",S_.bind(null,e)),a.lua_register(t,"GetRandomReal",T_.bind(null,e)),a.lua_register(t,"CreateUnitPool",E_.bind(null,e)),a.lua_register(t,"DestroyUnitPool",k_.bind(null,e)),a.lua_register(t,"UnitPoolAddUnitType",x_.bind(null,e)),a.lua_register(t,"UnitPoolRemoveUnitType",I_.bind(null,e)),a.lua_register(t,"PlaceRandomUnit",M_.bind(null,e)),a.lua_register(t,"CreateItemPool",U_.bind(null,e)),a.lua_register(t,"DestroyItemPool",P_.bind(null,e)),a.lua_register(t,"ItemPoolAddItemType",R_.bind(null,e)),a.lua_register(t,"ItemPoolRemoveItemType",O_.bind(null,e)),a.lua_register(t,"PlaceRandomItem",C_.bind(null,e)),a.lua_register(t,"ChooseRandomCreep",B_.bind(null,e)),a.lua_register(t,"ChooseRandomNPBuilding",F_.bind(null,e)),a.lua_register(t,"ChooseRandomItem",D_.bind(null,e)),a.lua_register(t,"ChooseRandomItemEx",G_.bind(null,e)),a.lua_register(t,"SetRandomSeed",N_.bind(null,e)),a.lua_register(t,"SetTerrainFog",V_.bind(null,e)),a.lua_register(t,"ResetTerrainFog",H_.bind(null,e)),a.lua_register(t,"SetUnitFog",j_.bind(null,e)),a.lua_register(t,"SetTerrainFogEx",K_.bind(null,e)),a.lua_register(t,"DisplayTextToPlayer",z_.bind(null,e)),a.lua_register(t,"DisplayTimedTextToPlayer",X_.bind(null,e)),a.lua_register(t,"DisplayTimedTextFromPlayer",J_.bind(null,e)),a.lua_register(t,"ClearTextMessages",Y_.bind(null,e)),a.lua_register(t,"SetDayNightModels",$_.bind(null,e)),a.lua_register(t,"SetSkyModel",q_.bind(null,e)),a.lua_register(t,"EnableUserControl",W_.bind(null,e)),a.lua_register(t,"EnableUserUI",Z_.bind(null,e)),a.lua_register(t,"SuspendTimeOfDay",Q_.bind(null,e)),a.lua_register(t,"SetTimeOfDayScale",em.bind(null,e)),a.lua_register(t,"GetTimeOfDayScale",tm.bind(null,e)),a.lua_register(t,"ShowInterface",nm.bind(null,e)),a.lua_register(t,"PauseGame",am.bind(null,e)),a.lua_register(t,"UnitAddIndicator",rm.bind(null,e)),a.lua_register(t,"AddIndicator",im.bind(null,e)),a.lua_register(t,"PingMinimap",lm.bind(null,e)),a.lua_register(t,"PingMinimapEx",sm.bind(null,e)),a.lua_register(t,"EnableOcclusion",om.bind(null,e)),a.lua_register(t,"SetIntroShotText",um.bind(null,e)),a.lua_register(t,"SetIntroShotModel",cm.bind(null,e)),a.lua_register(t,"EnableWorldFogBoundary",dm.bind(null,e)),a.lua_register(t,"PlayModelCinematic",hm.bind(null,e)),a.lua_register(t,"PlayCinematic",fm.bind(null,e)),a.lua_register(t,"ForceUIKey",_m.bind(null,e)),a.lua_register(t,"ForceUICancel",mm.bind(null,e)),a.lua_register(t,"DisplayLoadDialog",pm.bind(null,e)),a.lua_register(t,"SetAltMinimapIcon",gm.bind(null,e)),a.lua_register(t,"DisableRestartMission",bm.bind(null,e)),a.lua_register(t,"CreateTextTag",wm.bind(null,e)),a.lua_register(t,"DestroyTextTag",vm.bind(null,e)),a.lua_register(t,"SetTextTagText",Am.bind(null,e)),a.lua_register(t,"SetTextTagPos",ym.bind(null,e)),a.lua_register(t,"SetTextTagPosUnit",Lm.bind(null,e)),a.lua_register(t,"SetTextTagColor",Sm.bind(null,e)),a.lua_register(t,"SetTextTagVelocity",Tm.bind(null,e)),a.lua_register(t,"SetTextTagVisibility",Em.bind(null,e)),a.lua_register(t,"SetTextTagSuspended",km.bind(null,e)),a.lua_register(t,"SetTextTagPermanent",xm.bind(null,e)),a.lua_register(t,"SetTextTagAge",Im.bind(null,e)),a.lua_register(t,"SetTextTagLifespan",Mm.bind(null,e)),a.lua_register(t,"SetTextTagFadepoint",Um.bind(null,e)),a.lua_register(t,"SetReservedLocalHeroButtons",Pm.bind(null,e)),a.lua_register(t,"GetAllyColorFilterState",Rm.bind(null,e)),a.lua_register(t,"SetAllyColorFilterState",Om.bind(null,e)),a.lua_register(t,"GetCreepCampFilterState",Cm.bind(null,e)),a.lua_register(t,"SetCreepCampFilterState",Bm.bind(null,e)),a.lua_register(t,"EnableMinimapFilterButtons",Fm.bind(null,e)),a.lua_register(t,"EnableDragSelect",Dm.bind(null,e)),a.lua_register(t,"EnablePreSelect",Gm.bind(null,e)),a.lua_register(t,"EnableSelect",Nm.bind(null,e)),a.lua_register(t,"CreateTrackable",Vm.bind(null,e)),a.lua_register(t,"CreateQuest",Hm.bind(null,e)),a.lua_register(t,"DestroyQuest",jm.bind(null,e)),a.lua_register(t,"QuestSetTitle",Km.bind(null,e)),a.lua_register(t,"QuestSetDescription",zm.bind(null,e)),a.lua_register(t,"QuestSetIconPath",Xm.bind(null,e)),a.lua_register(t,"QuestSetRequired",Jm.bind(null,e)),a.lua_register(t,"QuestSetCompleted",Ym.bind(null,e)),a.lua_register(t,"QuestSetDiscovered",$m.bind(null,e)),a.lua_register(t,"QuestSetFailed",qm.bind(null,e)),a.lua_register(t,"QuestSetEnabled",Wm.bind(null,e)),a.lua_register(t,"IsQuestRequired",Zm.bind(null,e)),a.lua_register(t,"IsQuestCompleted",Qm.bind(null,e)),a.lua_register(t,"IsQuestDiscovered",ep.bind(null,e)),a.lua_register(t,"IsQuestFailed",tp.bind(null,e)),a.lua_register(t,"IsQuestEnabled",np.bind(null,e)),a.lua_register(t,"QuestCreateItem",ap.bind(null,e)),a.lua_register(t,"QuestItemSetDescription",rp.bind(null,e)),a.lua_register(t,"QuestItemSetCompleted",ip.bind(null,e)),a.lua_register(t,"IsQuestItemCompleted",lp.bind(null,e)),a.lua_register(t,"CreateDefeatCondition",sp.bind(null,e)),a.lua_register(t,"DestroyDefeatCondition",op.bind(null,e)),a.lua_register(t,"DefeatConditionSetDescription",up.bind(null,e)),a.lua_register(t,"FlashQuestDialogButton",cp.bind(null,e)),a.lua_register(t,"ForceQuestDialogUpdate",dp.bind(null,e)),a.lua_register(t,"CreateTimerDialog",hp.bind(null,e)),a.lua_register(t,"DestroyTimerDialog",fp.bind(null,e)),a.lua_register(t,"TimerDialogSetTitle",_p.bind(null,e)),a.lua_register(t,"TimerDialogSetTitleColor",mp.bind(null,e)),a.lua_register(t,"TimerDialogSetTimeColor",pp.bind(null,e)),a.lua_register(t,"TimerDialogSetSpeed",gp.bind(null,e)),a.lua_register(t,"TimerDialogDisplay",bp.bind(null,e)),a.lua_register(t,"IsTimerDialogDisplayed",wp.bind(null,e)),a.lua_register(t,"TimerDialogSetRealTimeRemaining",vp.bind(null,e)),a.lua_register(t,"CreateLeaderboard",Ap.bind(null,e)),a.lua_register(t,"DestroyLeaderboard",yp.bind(null,e)),a.lua_register(t,"LeaderboardDisplay",Lp.bind(null,e)),a.lua_register(t,"IsLeaderboardDisplayed",Sp.bind(null,e)),a.lua_register(t,"LeaderboardGetItemCount",Tp.bind(null,e)),a.lua_register(t,"LeaderboardSetSizeByItemCount",Ep.bind(null,e)),a.lua_register(t,"LeaderboardAddItem",kp.bind(null,e)),a.lua_register(t,"LeaderboardRemoveItem",xp.bind(null,e)),a.lua_register(t,"LeaderboardRemovePlayerItem",Ip.bind(null,e)),a.lua_register(t,"LeaderboardClear",Mp.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByValue",Up.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByPlayer",Pp.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByLabel",Rp.bind(null,e)),a.lua_register(t,"LeaderboardHasPlayerItem",Op.bind(null,e)),a.lua_register(t,"LeaderboardGetPlayerIndex",Cp.bind(null,e)),a.lua_register(t,"LeaderboardSetLabel",Bp.bind(null,e)),a.lua_register(t,"LeaderboardGetLabelText",Fp.bind(null,e)),a.lua_register(t,"PlayerSetLeaderboard",Dp.bind(null,e)),a.lua_register(t,"PlayerGetLeaderboard",Gp.bind(null,e)),a.lua_register(t,"LeaderboardSetLabelColor",Np.bind(null,e)),a.lua_register(t,"LeaderboardSetValueColor",Vp.bind(null,e)),a.lua_register(t,"LeaderboardSetStyle",Hp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemValue",jp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemLabel",Kp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemStyle",zp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemLabelColor",Xp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemValueColor",Jp.bind(null,e)),a.lua_register(t,"CreateMultiboard",Yp.bind(null,e)),a.lua_register(t,"DestroyMultiboard",$p.bind(null,e)),a.lua_register(t,"MultiboardDisplay",qp.bind(null,e)),a.lua_register(t,"IsMultiboardDisplayed",Wp.bind(null,e)),a.lua_register(t,"MultiboardMinimize",Zp.bind(null,e)),a.lua_register(t,"IsMultiboardMinimized",Qp.bind(null,e)),a.lua_register(t,"MultiboardClear",eg.bind(null,e)),a.lua_register(t,"MultiboardSetTitleText",tg.bind(null,e)),a.lua_register(t,"MultiboardGetTitleText",ng.bind(null,e)),a.lua_register(t,"MultiboardSetTitleTextColor",ag.bind(null,e)),a.lua_register(t,"MultiboardGetRowCount",rg.bind(null,e)),a.lua_register(t,"MultiboardGetColumnCount",ig.bind(null,e)),a.lua_register(t,"MultiboardSetColumnCount",lg.bind(null,e)),a.lua_register(t,"MultiboardSetRowCount",sg.bind(null,e)),a.lua_register(t,"MultiboardSetItemsStyle",og.bind(null,e)),a.lua_register(t,"MultiboardSetItemsValue",ug.bind(null,e)),a.lua_register(t,"MultiboardSetItemsValueColor",cg.bind(null,e)),a.lua_register(t,"MultiboardSetItemsWidth",dg.bind(null,e)),a.lua_register(t,"MultiboardSetItemsIcon",hg.bind(null,e)),a.lua_register(t,"MultiboardGetItem",fg.bind(null,e)),a.lua_register(t,"MultiboardReleaseItem",_g.bind(null,e)),a.lua_register(t,"MultiboardSetItemStyle",mg.bind(null,e)),a.lua_register(t,"MultiboardSetItemValue",pg.bind(null,e)),a.lua_register(t,"MultiboardSetItemValueColor",gg.bind(null,e)),a.lua_register(t,"MultiboardSetItemWidth",bg.bind(null,e)),a.lua_register(t,"MultiboardSetItemIcon",wg.bind(null,e)),a.lua_register(t,"MultiboardSuppressDisplay",vg.bind(null,e)),a.lua_register(t,"SetCameraPosition",Ag.bind(null,e)),a.lua_register(t,"SetCameraQuickPosition",yg.bind(null,e)),a.lua_register(t,"SetCameraBounds",Lg.bind(null,e)),a.lua_register(t,"StopCamera",Sg.bind(null,e)),a.lua_register(t,"ResetToGameCamera",Tg.bind(null,e)),a.lua_register(t,"PanCameraTo",Eg.bind(null,e)),a.lua_register(t,"PanCameraToTimed",kg.bind(null,e)),a.lua_register(t,"PanCameraToWithZ",xg.bind(null,e)),a.lua_register(t,"PanCameraToTimedWithZ",Ig.bind(null,e)),a.lua_register(t,"SetCinematicCamera",Mg.bind(null,e)),a.lua_register(t,"SetCameraRotateMode",Ug.bind(null,e)),a.lua_register(t,"SetCameraField",Pg.bind(null,e)),a.lua_register(t,"AdjustCameraField",Rg.bind(null,e)),a.lua_register(t,"SetCameraTargetController",Og.bind(null,e)),a.lua_register(t,"SetCameraOrientController",Cg.bind(null,e)),a.lua_register(t,"CreateCameraSetup",Bg.bind(null,e)),a.lua_register(t,"CameraSetupSetField",Fg.bind(null,e)),a.lua_register(t,"CameraSetupGetField",Dg.bind(null,e)),a.lua_register(t,"CameraSetupSetDestPosition",Gg.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionLoc",Ng.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionX",Vg.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionY",Hg.bind(null,e)),a.lua_register(t,"CameraSetupApply",jg.bind(null,e)),a.lua_register(t,"CameraSetupApplyWithZ",Kg.bind(null,e)),a.lua_register(t,"CameraSetupApplyForceDuration",zg.bind(null,e)),a.lua_register(t,"CameraSetupApplyForceDurationWithZ",Xg.bind(null,e)),a.lua_register(t,"CameraSetTargetNoise",Jg.bind(null,e)),a.lua_register(t,"CameraSetSourceNoise",Yg.bind(null,e)),a.lua_register(t,"CameraSetTargetNoiseEx",$g.bind(null,e)),a.lua_register(t,"CameraSetSourceNoiseEx",qg.bind(null,e)),a.lua_register(t,"CameraSetSmoothingFactor",Wg.bind(null,e)),a.lua_register(t,"SetCineFilterTexture",Zg.bind(null,e)),a.lua_register(t,"SetCineFilterBlendMode",Qg.bind(null,e)),a.lua_register(t,"SetCineFilterTexMapFlags",eb.bind(null,e)),a.lua_register(t,"SetCineFilterStartUV",tb.bind(null,e)),a.lua_register(t,"SetCineFilterEndUV",nb.bind(null,e)),a.lua_register(t,"SetCineFilterStartColor",ab.bind(null,e)),a.lua_register(t,"SetCineFilterEndColor",rb.bind(null,e)),a.lua_register(t,"SetCineFilterDuration",ib.bind(null,e)),a.lua_register(t,"DisplayCineFilter",lb.bind(null,e)),a.lua_register(t,"IsCineFilterDisplayed",sb.bind(null,e)),a.lua_register(t,"SetCinematicScene",ob.bind(null,e)),a.lua_register(t,"EndCinematicScene",ub.bind(null,e)),a.lua_register(t,"ForceCinematicSubtitles",cb.bind(null,e)),a.lua_register(t,"GetCameraMargin",db.bind(null,e)),a.lua_register(t,"GetCameraBoundMinX",hb.bind(null,e)),a.lua_register(t,"GetCameraBoundMinY",fb.bind(null,e)),a.lua_register(t,"GetCameraBoundMaxX",_b.bind(null,e)),a.lua_register(t,"GetCameraBoundMaxY",mb.bind(null,e)),a.lua_register(t,"GetCameraField",pb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionX",gb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionY",bb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionZ",wb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionLoc",vb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionX",Ab.bind(null,e)),a.lua_register(t,"GetCameraEyePositionY",yb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionZ",Lb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionLoc",Sb.bind(null,e)),a.lua_register(t,"NewSoundEnvironment",Tb.bind(null,e)),a.lua_register(t,"CreateSound",Eb.bind(null,e)),a.lua_register(t,"CreateSoundFilenameWithLabel",kb.bind(null,e)),a.lua_register(t,"CreateSoundFromLabel",xb.bind(null,e)),a.lua_register(t,"CreateMIDISound",Ib.bind(null,e)),a.lua_register(t,"SetSoundParamsFromLabel",Mb.bind(null,e)),a.lua_register(t,"SetSoundDistanceCutoff",Ub.bind(null,e)),a.lua_register(t,"SetSoundChannel",Pb.bind(null,e)),a.lua_register(t,"SetSoundVolume",Rb.bind(null,e)),a.lua_register(t,"SetSoundPitch",Ob.bind(null,e)),a.lua_register(t,"SetSoundPlayPosition",Cb.bind(null,e)),a.lua_register(t,"SetSoundDistances",Bb.bind(null,e)),a.lua_register(t,"SetSoundConeAngles",Fb.bind(null,e)),a.lua_register(t,"SetSoundConeOrientation",Db.bind(null,e)),a.lua_register(t,"SetSoundPosition",Gb.bind(null,e)),a.lua_register(t,"SetSoundVelocity",Nb.bind(null,e)),a.lua_register(t,"AttachSoundToUnit",Vb.bind(null,e)),a.lua_register(t,"StartSound",Hb.bind(null,e)),a.lua_register(t,"StopSound",jb.bind(null,e)),a.lua_register(t,"KillSoundWhenDone",Kb.bind(null,e)),a.lua_register(t,"SetMapMusic",zb.bind(null,e)),a.lua_register(t,"ClearMapMusic",Xb.bind(null,e)),a.lua_register(t,"PlayMusic",Jb.bind(null,e)),a.lua_register(t,"PlayMusicEx",Yb.bind(null,e)),a.lua_register(t,"StopMusic",$b.bind(null,e)),a.lua_register(t,"ResumeMusic",qb.bind(null,e)),a.lua_register(t,"PlayThematicMusic",Wb.bind(null,e)),a.lua_register(t,"PlayThematicMusicEx",Zb.bind(null,e)),a.lua_register(t,"EndThematicMusic",Qb.bind(null,e)),a.lua_register(t,"SetMusicVolume",ew.bind(null,e)),a.lua_register(t,"SetMusicPlayPosition",tw.bind(null,e)),a.lua_register(t,"SetThematicMusicPlayPosition",nw.bind(null,e)),a.lua_register(t,"SetSoundDuration",aw.bind(null,e)),a.lua_register(t,"GetSoundDuration",rw.bind(null,e)),a.lua_register(t,"GetSoundFileDuration",iw.bind(null,e)),a.lua_register(t,"VolumeGroupSetVolume",lw.bind(null,e)),a.lua_register(t,"VolumeGroupReset",sw.bind(null,e)),a.lua_register(t,"GetSoundIsPlaying",ow.bind(null,e)),a.lua_register(t,"GetSoundIsLoading",uw.bind(null,e)),a.lua_register(t,"RegisterStackedSound",cw.bind(null,e)),a.lua_register(t,"UnregisterStackedSound",dw.bind(null,e)),a.lua_register(t,"AddWeatherEffect",hw.bind(null,e)),a.lua_register(t,"RemoveWeatherEffect",fw.bind(null,e)),a.lua_register(t,"EnableWeatherEffect",_w.bind(null,e)),a.lua_register(t,"TerrainDeformCrater",mw.bind(null,e)),a.lua_register(t,"TerrainDeformRipple",pw.bind(null,e)),a.lua_register(t,"TerrainDeformWave",gw.bind(null,e)),a.lua_register(t,"TerrainDeformRandom",bw.bind(null,e)),a.lua_register(t,"TerrainDeformStop",ww.bind(null,e)),a.lua_register(t,"TerrainDeformStopAll",vw.bind(null,e)),a.lua_register(t,"AddSpecialEffect",Aw.bind(null,e)),a.lua_register(t,"AddSpecialEffectLoc",yw.bind(null,e)),a.lua_register(t,"AddSpecialEffectTarget",Lw.bind(null,e)),a.lua_register(t,"DestroyEffect",Sw.bind(null,e)),a.lua_register(t,"AddSpellEffect",Tw.bind(null,e)),a.lua_register(t,"AddSpellEffectLoc",Ew.bind(null,e)),a.lua_register(t,"AddSpellEffectById",kw.bind(null,e)),a.lua_register(t,"AddSpellEffectByIdLoc",xw.bind(null,e)),a.lua_register(t,"AddSpellEffectTarget",Iw.bind(null,e)),a.lua_register(t,"AddSpellEffectTargetById",Mw.bind(null,e)),a.lua_register(t,"AddLightning",Uw.bind(null,e)),a.lua_register(t,"AddLightningEx",Pw.bind(null,e)),a.lua_register(t,"DestroyLightning",Rw.bind(null,e)),a.lua_register(t,"MoveLightning",Ow.bind(null,e)),a.lua_register(t,"MoveLightningEx",Cw.bind(null,e)),a.lua_register(t,"GetLightningColorA",Bw.bind(null,e)),a.lua_register(t,"GetLightningColorR",Fw.bind(null,e)),a.lua_register(t,"GetLightningColorG",Dw.bind(null,e)),a.lua_register(t,"GetLightningColorB",Gw.bind(null,e)),a.lua_register(t,"SetLightningColor",Nw.bind(null,e)),a.lua_register(t,"GetAbilityEffect",Vw.bind(null,e)),a.lua_register(t,"GetAbilityEffectById",Hw.bind(null,e)),a.lua_register(t,"GetAbilitySound",jw.bind(null,e)),a.lua_register(t,"GetAbilitySoundById",Kw.bind(null,e)),a.lua_register(t,"GetTerrainCliffLevel",zw.bind(null,e)),a.lua_register(t,"SetWaterBaseColor",Xw.bind(null,e)),a.lua_register(t,"SetWaterDeforms",Jw.bind(null,e)),a.lua_register(t,"GetTerrainType",Yw.bind(null,e)),a.lua_register(t,"GetTerrainVariance",$w.bind(null,e)),a.lua_register(t,"SetTerrainType",qw.bind(null,e)),a.lua_register(t,"IsTerrainPathable",Ww.bind(null,e)),a.lua_register(t,"SetTerrainPathable",Zw.bind(null,e)),a.lua_register(t,"CreateImage",Qw.bind(null,e)),a.lua_register(t,"DestroyImage",ev.bind(null,e)),a.lua_register(t,"ShowImage",tv.bind(null,e)),a.lua_register(t,"SetImageConstantHeight",nv.bind(null,e)),a.lua_register(t,"SetImagePosition",av.bind(null,e)),a.lua_register(t,"SetImageColor",rv.bind(null,e)),a.lua_register(t,"SetImageRender",iv.bind(null,e)),a.lua_register(t,"SetImageRenderAlways",lv.bind(null,e)),a.lua_register(t,"SetImageAboveWater",sv.bind(null,e)),a.lua_register(t,"SetImageType",ov.bind(null,e)),a.lua_register(t,"CreateUbersplat",uv.bind(null,e)),a.lua_register(t,"DestroyUbersplat",cv.bind(null,e)),a.lua_register(t,"ResetUbersplat",dv.bind(null,e)),a.lua_register(t,"FinishUbersplat",hv.bind(null,e)),a.lua_register(t,"ShowUbersplat",fv.bind(null,e)),a.lua_register(t,"SetUbersplatRender",_v.bind(null,e)),a.lua_register(t,"SetUbersplatRenderAlways",mv.bind(null,e)),a.lua_register(t,"SetBlight",pv.bind(null,e)),a.lua_register(t,"SetBlightRect",gv.bind(null,e)),a.lua_register(t,"SetBlightPoint",bv.bind(null,e)),a.lua_register(t,"SetBlightLoc",wv.bind(null,e)),a.lua_register(t,"CreateBlightedGoldmine",vv.bind(null,e)),a.lua_register(t,"IsPointBlighted",Av.bind(null,e)),a.lua_register(t,"SetDoodadAnimation",yv.bind(null,e)),a.lua_register(t,"SetDoodadAnimationRect",Lv.bind(null,e)),a.lua_register(t,"StartMeleeAI",Sv.bind(null,e)),a.lua_register(t,"StartCampaignAI",Tv.bind(null,e)),a.lua_register(t,"CommandAI",Ev.bind(null,e)),a.lua_register(t,"PauseCompAI",kv.bind(null,e)),a.lua_register(t,"GetAIDifficulty",xv.bind(null,e)),a.lua_register(t,"RemoveGuardPosition",Iv.bind(null,e)),a.lua_register(t,"RecycleGuardPosition",Mv.bind(null,e)),a.lua_register(t,"RemoveAllGuardPositions",Uv.bind(null,e)),a.lua_register(t,"Cheat",Pv.bind(null,e)),a.lua_register(t,"IsNoVictoryCheat",Rv.bind(null,e)),a.lua_register(t,"IsNoDefeatCheat",Ov.bind(null,e)),a.lua_register(t,"Preload",Cv.bind(null,e)),a.lua_register(t,"PreloadEnd",Bv.bind(null,e)),a.lua_register(t,"PreloadStart",Fv.bind(null,e)),a.lua_register(t,"PreloadRefresh",Dv.bind(null,e)),a.lua_register(t,"PreloadEndEx",Gv.bind(null,e)),a.lua_register(t,"PreloadGenClear",Nv.bind(null,e)),a.lua_register(t,"PreloadGenStart",Vv.bind(null,e)),a.lua_register(t,"PreloadGenEnd",Hv.bind(null,e)),a.lua_register(t,"Preloader",jv.bind(null,e)),a.lua_register(t,"AutomationTestStart",Kv.bind(null,e)),a.lua_register(t,"AutomationTestEnd",zv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseX",Xv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseY",Jv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMousePosition",Yv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseButton",$v.bind(null,e)),a.lua_register(t,"BlzSetAbilityTooltip",qv.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedTooltip",Wv.bind(null,e)),a.lua_register(t,"BlzSetAbilityExtendedTooltip",Zv.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedExtendedTooltip",Qv.bind(null,e)),a.lua_register(t,"BlzSetAbilityResearchTooltip",eA.bind(null,e)),a.lua_register(t,"BlzSetAbilityResearchExtendedTooltip",tA.bind(null,e)),a.lua_register(t,"BlzGetAbilityTooltip",nA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedTooltip",aA.bind(null,e)),a.lua_register(t,"BlzGetAbilityExtendedTooltip",rA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedExtendedTooltip",iA.bind(null,e)),a.lua_register(t,"BlzGetAbilityResearchTooltip",lA.bind(null,e)),a.lua_register(t,"BlzGetAbilityResearchExtendedTooltip",sA.bind(null,e)),a.lua_register(t,"BlzSetAbilityIcon",oA.bind(null,e)),a.lua_register(t,"BlzGetAbilityIcon",uA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedIcon",cA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedIcon",dA.bind(null,e)),a.lua_register(t,"BlzGetAbilityPosX",hA.bind(null,e)),a.lua_register(t,"BlzGetAbilityPosY",fA.bind(null,e)),a.lua_register(t,"BlzSetAbilityPosX",_A.bind(null,e)),a.lua_register(t,"BlzSetAbilityPosY",mA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedPosX",pA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedPosY",gA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedPosX",bA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedPosY",wA.bind(null,e)),a.lua_register(t,"BlzGetUnitMaxHP",vA.bind(null,e)),a.lua_register(t,"BlzSetUnitMaxHP",AA.bind(null,e)),a.lua_register(t,"BlzGetUnitMaxMana",yA.bind(null,e)),a.lua_register(t,"BlzSetUnitMaxMana",LA.bind(null,e)),a.lua_register(t,"BlzDeleteHeroAbility",SA.bind(null,e)),a.lua_register(t,"BlzSetItemName",TA.bind(null,e)),a.lua_register(t,"BlzSetItemDescription",EA.bind(null,e)),a.lua_register(t,"BlzGetItemDescription",kA.bind(null,e)),a.lua_register(t,"BlzSetItemTooltip",xA.bind(null,e)),a.lua_register(t,"BlzGetItemTooltip",IA.bind(null,e)),a.lua_register(t,"BlzSetItemExtendedTooltip",MA.bind(null,e)),a.lua_register(t,"BlzGetItemExtendedTooltip",UA.bind(null,e)),a.lua_register(t,"BlzSetItemIconPath",PA.bind(null,e)),a.lua_register(t,"BlzGetItemIconPath",RA.bind(null,e)),a.lua_register(t,"BlzSetUnitName",OA.bind(null,e)),a.lua_register(t,"BlzSetHeroProperName",CA.bind(null,e)),a.lua_register(t,"BlzGetUnitBaseDamage",BA.bind(null,e)),a.lua_register(t,"BlzSetUnitBaseDamage",FA.bind(null,e)),a.lua_register(t,"BlzGetUnitDiceNumber",DA.bind(null,e)),a.lua_register(t,"BlzSetUnitDiceNumber",GA.bind(null,e)),a.lua_register(t,"BlzGetUnitDiceSides",NA.bind(null,e)),a.lua_register(t,"BlzSetUnitDiceSides",VA.bind(null,e)),a.lua_register(t,"BlzGetUnitAttackCooldown",HA.bind(null,e)),a.lua_register(t,"BlzSetUnitAttackCooldown",jA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectColorByPlayer",KA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectColor",zA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectAlpha",XA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectScale",JA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPosition",YA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectHeight",$A.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectTimeScale",qA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectTime",WA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectOrientation",ZA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectYaw",QA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPitch",ey.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectRoll",ty.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectX",ny.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectY",ay.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectZ",ry.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPositionLoc",iy.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectX",ly.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectY",sy.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectZ",oy.bind(null,e)),a.lua_register(t,"BlzGetUnitArmor",uy.bind(null,e)),a.lua_register(t,"BlzSetUnitArmor",cy.bind(null,e)),a.lua_register(t,"BlzUnitHideAbility",dy.bind(null,e)),a.lua_register(t,"BlzUnitDisableAbility",hy.bind(null,e)),a.lua_register(t,"BlzUnitCancelTimedLife",fy.bind(null,e)),a.lua_register(t,"BlzIsUnitSelectable",_y.bind(null,e)),a.lua_register(t,"BlzIsUnitInvulnerable",my.bind(null,e)),a.lua_register(t,"BlzUnitInterruptAttack",py.bind(null,e)),a.lua_register(t,"BlzGetUnitCollisionSize",gy.bind(null,e)),a.lua_register(t,"BlzGetAbilityManaCost",by.bind(null,e)),a.lua_register(t,"BlzGetAbilityCooldown",wy.bind(null,e)),a.lua_register(t,"BlzSetUnitAbilityCooldown",vy.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityCooldown",Ay.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityCooldownRemaining",yy.bind(null,e)),a.lua_register(t,"BlzEndUnitAbilityCooldown",Ly.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityManaCost",Sy.bind(null,e)),a.lua_register(t,"BlzSetUnitAbilityManaCost",Ty.bind(null,e)),a.lua_register(t,"BlzGetLocalUnitZ",Ey.bind(null,e)),a.lua_register(t,"BlzDecPlayerTechResearched",ky.bind(null,e)),a.lua_register(t,"BlzSetEventDamage",xy.bind(null,e))}},5911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7870);t.default=class{constructor(e,t){this.sleep=0,this.L=a.lua_newthread(e),this.expiredTimer=t.expiredTimer||null,this.triggerUnit=t.triggerUnit||null,this.triggeringTrigger=t.triggeringTrigger||null}}},6978:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5860);t.default=class{constructor(e){this.buffer=e,this.index=0}read(){let e=this.buffer,t=e.length,n=!1,a=!1,r=!1,i="";for(;this.index<t;){let l=e[this.index++];if(n)"\n"===l&&(n=!1,this.index--);else if(a){if(i+="\\"===l?l+e[this.index++]:"\n"===l?"\\n":"\r"===l?"\\r":l,'"'===l)return i}else if(r){if(i+=l,"'"===l)return i}else if(" "===l||"\t"===l){if(i.length)return i}else if("("===l||")"===l||"["===l||"]"===l||"="===l||"\r"===l||"\n"===l||","===l||"!"===l||"-"===l||"<"===l||">"===l||"+"===l||"*"===l||"/"===l){if(i.length)return this.index--,i;{let t=e[this.index];if("="===l&&"="===t)return this.index++,"==";if("\r"===l)return"\n"===t&&this.index++,"\n";if("!"===l&&"="===t)return this.index++,"!=";if("/"!==l||"/"!==t)return l;if(i.length)return this.index--,i;n=!0}}else if('"'===l){if(i.length)return this.index--,i;i+=l,a=!0}else if("'"===l){if(i.length)return this.index--,i;i+=l,r=!0}else i+=l;if(this.index===t)return i}}peek(){let e=this.index,t=this.read();return this.index=e,t}readSafe(){let e=this.read();if(void 0===e)throw new Error("Premature end of stream reached");return"null"===e?"nil":"!="===e?"~=":"'"===e[0]?`${a.stringToBase256(e.slice(1,e.indexOf("'",1)))}`:"break"===e||"do"===e||"end"===e||"for"===e||"goto"===e||"in"===e||"nil"===e||"repeat"===e||"until"===e||"while"===e?e+"_":"and"===e||"or"===e?" "+e+" ":"$"===e[0]?"0x"+e.slice(1):e}readUntil(e){let t,n="";for(;(t=this.readSafe())!==e;)n+=t;return n}}},9744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5872);class r extends a.default{}t.default=r},3351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},3277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},5814:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},242:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4970:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},7130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5872),r=n(6078);class i extends a.default{constructor(){super(...arguments),this.targetDistance=0,this.farZ=0,this.angleOfAttack=0,this.fieldOfView=0,this.roll=0,this.rotation=0,this.zOffset=0,this.destPosition=new r.default(0,0)}}t.default=i},9896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},3986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},3281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5872);class r extends a.default{constructor(e){super(),this.id=e}}t.default=r},9814:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7654);class r extends a.default{}t.default=r},3666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.players=new Set}}t.default=r},5283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},9691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},9521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},7654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},5485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.units=new Set}}t.default=r},5872:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.handleId=-1}}},8448:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.table=new Map}save(e,t,n){let a=this.table,r=a.get(e);r||(r=new Map,a.set(e,r)),r.set(t,n)}load(e,t,n){let a=this.table.get(e);if(a){let e=a.get(t);if(void 0!==e)return e}return n}have(e,t){let n=this.table.get(e);return!!n&&n.has(t)}remove(e,t){let n=this.table,a=n.get(e);a&&(a.delete(t),a.size||n.delete(e))}flush(){this.table.clear()}flushChild(e){let t=this.table.get(e);t&&t.clear()}}t.default=r},9130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7654);class r extends a.default{}t.default=r},8615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JassTexMapFlags=t.JassBlendMode=t.JassRarityControl=t.JassStartLocPrio=t.JassPlacement=t.JassPlayerColor=t.JassCameraSetup=t.JassCameraField=t.JassVolumeGroup=t.JassPlayerSlotState=t.JassMapControl=t.JassMapDensity=t.JassMapSetting=t.JassMapVisibility=t.JassMapFlag=t.JassGameType=t.JassGameDifficulty=t.JassGameSpeed=t.JassUnitType=t.JassDialogEvent=t.JassWidgetEvent=t.JassLimitOp=t.JassUnitEvent=t.JassPlayerUnitEvent=t.JassPlayerEvent=t.JassGameEvent=t.JassEventId=t.JassAiDifficulty=t.JassUnitState=t.JassPlayerGameResult=t.JassPlayerScore=t.JassPlayerState=t.JassFGameState=t.JassIGameState=t.JassGameState=t.JassRacePreference=t.JassAllianceType=t.JassRace=t.JassRect=t.JassRegion=t.JassLocation=t.JassTimer=t.JassTrigger=t.JassGroup=t.JassForce=t.JassUnit=t.JassWidget=t.JassPlayer=t.JassAgent=t.JassHandle=void 0,t.JassHashtable=t.JassPathingType=t.JassSoundType=t.JassWeaponType=t.JassDamageType=t.JassAttackType=t.JassItemType=t.JassVersion=t.JassFogState=t.JassWeatherEffect=t.JassEffectType=void 0;const a=n(5872);t.JassHandle=a.default;const r=n(9744);t.JassAgent=r.default;const i=n(2495);t.JassPlayer=i.default;const l=n(8365);t.JassWidget=l.default;const s=n(5824);t.JassUnit=s.default;const o=n(4536);t.JassForce=o.default;const u=n(5485);t.JassGroup=u.default;const c=n(2835);t.JassTrigger=c.default;const d=n(9203);t.JassTimer=d.default;const h=n(6078);t.JassLocation=h.default;const f=n(2193);t.JassRegion=f.default;const _=n(6776);t.JassRect=_.default;const m=n(7595);t.JassRace=m.default;const p=n(3277);t.JassAllianceType=p.default;const g=n(8193);t.JassRacePreference=g.default;const b=n(7654);t.JassGameState=b.default;const w=n(9130);t.JassIGameState=w.default;const v=n(6073);t.JassFGameState=v.default;const A=n(9816);t.JassPlayerState=A.default;const y=n(8237);t.JassPlayerScore=y.default;const L=n(6112);t.JassPlayerGameResult=L.default;const S=n(4314);t.JassUnitState=S.default;const T=n(3351);t.JassAiDifficulty=T.default;const E=n(9814);t.JassEventId=E.default;const k=n(9691);t.JassGameEvent=k.default;const x=n(1075);t.JassPlayerEvent=x.default;const I=n(4882);t.JassPlayerUnitEvent=I.default;const M=n(2813);t.JassUnitEvent=M.default;const U=n(4005);t.JassLimitOp=U.default;const P=n(9123);t.JassWidgetEvent=P.default;const R=n(232);t.JassDialogEvent=R.default;const O=n(4263);t.JassUnitType=O.default;const C=n(9521);t.JassGameSpeed=C.default;const B=n(5283);t.JassGameDifficulty=B.default;const F=n(305);t.JassGameType=F.default;const D=n(4674);t.JassMapFlag=D.default;const G=n(5011);t.JassMapVisibility=G.default;const N=n(6031);t.JassMapSetting=N.default;const V=n(7417);t.JassMapDensity=V.default;const H=n(5734);t.JassMapControl=H.default;const j=n(8269);t.JassPlayerSlotState=j.default;const K=n(8726);t.JassVolumeGroup=K.default;const z=n(4970);t.JassCameraField=z.default;const X=n(7130);t.JassCameraSetup=X.default;const J=n(8762);t.JassPlayerColor=J.default;const Y=n(9933);t.JassPlacement=Y.default;const $=n(2365);t.JassStartLocPrio=$.default;const q=n(8783);t.JassRarityControl=q.default;const W=n(242);t.JassBlendMode=W.default;const Z=n(131);t.JassTexMapFlags=Z.default;const Q=n(3986);t.JassEffectType=Q.default;const ee=n(7341);t.JassWeatherEffect=ee.default;const te=n(3666);t.JassFogState=te.default;const ne=n(6110);t.JassVersion=ne.default;const ae=n(7827);t.JassItemType=ae.default;const re=n(6896);t.JassAttackType=re.default;const ie=n(9896);t.JassDamageType=ie.default;const le=n(8280);t.JassWeaponType=le.default;const se=n(3698);t.JassSoundType=se.default;const oe=n(775);t.JassPathingType=oe.default;const ue=n(8448);t.JassHashtable=ue.default},7827:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},6078:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(e,t){super(),this.z=0,this.x=e,this.y=t}}t.default=r},5734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},7417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6031:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},5011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},2471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},9933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},2495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(e,t){super(),this.team=-1,this.startLocation=-1,this.forcedStartLocation=-1,this.color=-1,this.racePreference=-1,this.raceSelectable=!1,this.controller=-1,this.alliances=new Map,this.index=e,this.name=`Player ${e}`;for(let n=0;n<t;n++)n!==e&&this.alliances.set(n,{passive:!1,helpRequest:!1,helpResponse:!1,sharedXp:!1,sharedSpells:!1,sharedVision:!1,sharedControl:!1,sharedAdvancedControl:!1,rescuable:!1,sharedVisionForced:!1})}}t.default=r},8762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},1075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},6112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},9816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},7595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(e,t,n,a){super(),this.center=new Float32Array([n-e,a-t]),this.min=new Float32Array([e,t]),this.max=new Float32Array([n,a])}}t.default=r},2193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.rects=new Set}}t.default=r},3698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6819:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},9203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.elapsed=0,this.timeout=0,this.periodic=!1,this.handlerFunc=-1}}t.default=r},2835:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.events=[],this.conditions=[],this.actions=[],this.enabled=!0}}t.default=r},5824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5860),r=n(8365);class i extends r.default{constructor(e,t,n,r,i){super(),this.acquireRange=500,this.player=e,this.unitId=a.base256ToString(t),this.x=n,this.y=r,this.face=i}}t.default=i},2813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},4314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},4263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},6110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},8280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3281);class r extends a.default{}t.default=r},7341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5872);class r extends a.default{constructor(e,t){super(),this.enabled=!1,this.whichRect=e,this.effectId=t}}t.default=r},8365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9744);class r extends a.default{constructor(){super(...arguments),this.health=0,this.maxHealth=0}}t.default=r},9123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9814);class r extends a.default{}t.default=r},8790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MappedData=void 0;const a=n(9631),r=n(9134);t.MappedData=class{constructor(e){this.map={},e&&this.load(e)}load(e){if(e.startsWith("ID;")){let t=new a.default;t.load(e);let n=t.rows,r=n[0],i=this.map;for(let e=1,t=n.length;e<t;e++){let t=n[e];if(t){let e=t[0];if(e&&"_"!==e){e=e.toLowerCase(),i[e]||(i[e]={});let n=i[e];for(let e=0,a=r.length;e<a;e++){let a=r[e];void 0===a&&(a=`column${e}`),n[`${a}`]=t[e]}}}}}else{let t=new r.IniFile;t.load(e);let n=t.sections,a=this.map;for(let[e,t]of n.entries()){a[e]||(a[e]={});let n=a[e];for(let[e,a]of t)n[e]=a}}}getRow(e){return this.map[e.toLowerCase()]}getProperty(e,t){return this.map[e.toLowerCase()][t]}setRow(e,t){this.map[e.toLowerCase()]=t}findRow(e,t){for(let n of Object.values(this.map))if(n[e]===t)return n}}},138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8816),r=n(8955),i=n(6512),l=n(7149);t.default={sanityTest:a.default,createPrimitive:r.default,primitives:i,mdlStructure:l.default}},7149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2390),r=n(6190);function i(e,t,n,a){if(n.length)for(let[i,l]of n.entries())l.writeMdl(e,t.version),a.push({name:r.getObjectName(l,i),source:e.buffer}),e.clear()}function l(e,t,n,a){if(n.length){let l=r.getObjectTypeName(n[0])+"s",s=[];i(e,t,n,s),t.saveStaticObjectsBlock(e,l,n),a.push({name:l,source:e.buffer,nodes:s}),e.clear()}}t.default=function(e){let t=new a.default,n=[];if(e.saveVersionBlock(t),n.push({name:"Version",source:t.buffer}),t.clear(),e.saveModelBlock(t),n.push({name:"Model",source:t.buffer}),t.clear(),l(t,e,e.sequences,n),e.globalSequences.length&&(e.saveGlobalSequenceBlock(t),n.push({name:"GlobalSequences",source:t.buffer}),t.clear()),l(t,e,e.textures,n),e.materials.length){let a=[];for(let[n,r]of e.materials.entries()){let l=[];i(t,e,r.layers,l),r.writeMdl(t,e.version),a.push({name:`Material ${n}`,source:t.buffer,nodes:l}),t.clear()}e.saveStaticObjectsBlock(t,"Materials",e.materials),n.push({name:"Materials",source:t.buffer,nodes:a}),t.clear()}return l(t,e,e.textureAnimations,n),i(t,e,e.geosets,n),i(t,e,e.geosetAnimations,n),i(t,e,e.bones,n),i(t,e,e.lights,n),i(t,e,e.helpers,n),i(t,e,e.attachments,n),e.pivotPoints.length&&(e.savePivotPointBlock(t),n.push({name:"PivotPoints",source:t.buffer}),t.clear()),i(t,e,e.particleEmitters,n),i(t,e,e.particleEmitters2,n),i(t,e,e.particleEmittersPopcorn,n),i(t,e,e.ribbonEmitters,n),i(t,e,e.cameras,n),i(t,e,e.eventObjects,n),i(t,e,e.collisionShapes,n),i(t,e,e.faceEffects,n),e.bindPose.length&&(e.saveBindPoseBlock(t),n.push({name:"BindPose",source:t.buffer}),t.clear()),{nodes:n}}},8955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2071),r=n(5944),i=n(1904),l=n(855),s=n(9939),o=n(8163),u=n(5727);t.default=function(e,t,n){let c,d,h,f,_=0;n&&(c=n.lines,d=n.color,h=n.texture,n.twoSided&&(_|=16));let m=new a.default,p=m.extent,g=t.boundingRadius;p.min.fill(-g),p.max.fill(g),p.boundsRadius=g;let b=new r.default;b.path="PLACEHOLDER",m.textures[0]=b,f=e=>e===m?m:h;let w=new i.default,v=new l.default;v.textureId=0,v.flags=_,w.layers[0]=v,m.materials[0]=w;let A=new s.default;A.vertices=t.vertices,A.uvSets[0]=t.uvs,A.matrixGroups=new Uint32Array([1]),A.matrixIndices=new Uint32Array([0]),A.vertexGroups=new Uint8Array(t.vertices.length/3);let y=4,L=t.faces;if(c&&(y=1,L=t.edges),A.faceTypeGroups=new Uint32Array([y]),A.faceGroups=new Uint32Array([L.length]),A.faces=L,m.geosets[0]=A,d){let e=new o.default;e.geosetId=0,e.color=d,m.geosetAnimations[0]=e}let S=new u.default;return S.objectId=0,m.bones[0]=S,e.load(m,f)}},6512:(e,t)=>{"use strict";function n(e,t){return{vertices:new Float32Array([-e,t,0,-e,-t,0,e,-t,0,e,t,0]),uvs:new Float32Array([0,0,0,1,1,1,1,0]),faces:new Uint16Array([0,1,2,0,2,3]),edges:new Uint16Array([0,1,1,2,2,3,3,0]),boundingRadius:Math.hypot(e,t)}}function a(e,t,n){return{vertices:new Float32Array([-e,-t,-n,-e,-t,n,-e,t,-n,-e,t,n,e,t,-n,e,t,n,e,-t,-n,e,-t,n]),uvs:new Float32Array([0,0,0,1,.25,0,.25,1,.5,0,.5,1,.75,0,.75,1]),faces:new Uint16Array([0,1,2,1,3,2,2,3,4,3,5,4,4,5,6,5,7,6,6,7,0,7,1,0,0,2,4,0,4,6,1,5,3,1,7,5]),edges:new Uint16Array([0,1,2,3,4,5,6,7,0,2,2,4,4,6,6,0,1,3,3,5,5,7,7,1]),boundingRadius:Math.hypot(e,t,n)}}function r(e,t,n){let a=(t+1)*(n+1),r=new Float32Array(3*a),i=new Float32Array(2*a),l=new Uint16Array(t*n*6),s=new Uint16Array(t*n*6);for(let a=0,l=0,s=0;a<=t;a++){let o=a*Math.PI/t,u=Math.sin(o),c=Math.cos(o);for(let o=0;o<=n;o+=1,l+=3,s+=2){let d=2*o*Math.PI/n,h=Math.sin(d),f=Math.cos(d);r[l+0]=f*u*e,r[l+1]=h*u*e,r[l+2]=c*e,i[s+0]=o/n,i[s+1]=1-a/t}}for(let e=0,a=0;e<t;e++)for(let t=0;t<n;t+=1,a+=6){let r=e*(n+1)+t,i=r+n+1;l[a+0]=r,l[a+1]=i,l[a+2]=r+1,l[a+3]=i,l[a+4]=i+1,l[a+5]=r+1,s[a+0]=r,s[a+1]=i,s[a+2]=r,s[a+3]=r+1,s[a+4]=i,s[a+5]=i+1}return{vertices:r,uvs:i,faces:l,edges:s,boundingRadius:e}}function i(e,t,n){let a=2*((n=Math.max(n,3))+1)+2,r=new Float32Array(3*a),i=new Float32Array(2*a),l=new Uint16Array(12*n),s=new Uint16Array(10*n),o=2*Math.PI/n,u=0,c=0;for(let a=0;a<n+1;a+=1,u+=6,c+=4){let l=Math.cos(o*a)*e,s=Math.sin(o*a)*e,d=a/n;r[u+0]=l,r[u+1]=s,r[u+2]=t,r[u+3]=l,r[u+4]=s,r[u+5]=-t,i[c+0]=d,i[c+1]=1,i[c+2]=d,i[c+3]=0}r[u+0]=0,r[u+1]=0,r[u+2]=t,r[u+3]=0,r[u+4]=0,r[u+5]=-t,i[c+0]=0,i[c+1]=1,i[c+2]=0,i[c+3]=0;for(let e=0,t=0,r=0;e<n;e+=1,t+=12,r+=10){let n=2*e;l[t+0]=n+0,l[t+1]=n+1,l[t+2]=(n+3)%(a-2),l[t+3]=n+0,l[t+4]=(n+3)%(a-2),l[t+5]=(n+2)%(a-2),l[t+6]=n+0,l[t+7]=(n+2)%(a-2),l[t+8]=a-2,l[t+9]=n+1,l[t+10]=(n+3)%(a-2),l[t+11]=a-1,s[r+0]=n+0,s[r+1]=n+1,s[r+2]=n+0,s[r+3]=(n+2)%(a-2),s[r+4]=n+1,s[r+5]=(n+3)%(a-2),s[r+6]=n+0,s[r+7]=a-2,s[r+8]=n+1,s[r+9]=a-1}return{vertices:r,uvs:i,faces:l,edges:s,boundingRadius:Math.hypot(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createFrustum=t.createUnitCylinder=t.createCylinder=t.createUnitSphere=t.createSphere=t.createUnitCube=t.createCube=t.createUnitRectangle=t.createRectangle=void 0,t.createRectangle=n,t.createUnitRectangle=function(){return n(1,1)},t.createCube=a,t.createUnitCube=function(){return a(1,1,1)},t.createSphere=r,t.createUnitSphere=function(e,t){return r(1,e,t)},t.createCylinder=i,t.createUnitCylinder=function(e){return i(1,1,e)},t.createFrustum=function(e,t,n,a){let r=2*Math.tan(e/2),i=r*n/2,l=n*t/2,s=r*a/2,o=a*t/2;return{vertices:new Float32Array([-l,-i,n,-l,i,n,-o,-s,a,-o,s,a,o,-s,a,o,s,a,l,-i,n,l,i,n]),uvs:new Float32Array([0,0,0,1,.25,0,.25,1,.5,0,.5,1,.75,0,.75,1]),faces:new Uint16Array([0,1,2,1,3,2,2,3,4,3,5,4,4,5,6,5,7,6,6,7,0,7,1,0,0,2,4,0,4,6,1,5,3,1,7,5]),edges:new Uint16Array([0,1,2,3,4,5,6,7,0,2,2,4,4,6,6,0,1,3,3,5,5,7,7,1]),boundingRadius:Math.hypot(o,s)}}},122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7863),r=n(6190);t.default=class{constructor(e){this.objects=[],this.map=new Map,this.foundStand=!1,this.foundDeath=!1,this.model=e,this.current={type:"node",name:"",errors:0,severe:0,warnings:0,unused:0,nodes:[]},this.stack=[this.current],this.addObjects(e.sequences),this.addObjects(e.globalSequences),this.addObjects(e.textures),this.addObjects(e.materials),this.addObjects(e.textureAnimations),this.addObjects(e.geosets),this.addObjects(e.geosetAnimations),this.addObjects(e.bones),this.addObjects(e.lights),this.addObjects(e.helpers),this.addObjects(e.attachments),this.addObjects(e.particleEmitters),this.addObjects(e.particleEmitters2),this.addObjects(e.particleEmittersPopcorn),this.addObjects(e.ribbonEmitters),this.addObjects(e.cameras),this.addObjects(e.eventObjects),this.addObjects(e.collisionShapes),this.addObjects(e.faceEffects)}addObjects(e){if(e.length){let t=e[0]instanceof a.default;for(let n=0,a=e.length;n<a;n++){let a=e[n],i={type:"node",name:r.getObjectName(a,n),errors:0,severe:0,warnings:0,unused:0,nodes:[]};t||(i.uses=0),this.map.set(a,i)}t&&this.objects.push(...e)}}push(e,t){let n=this.map.get(e);if(!n){n={type:"node",name:r.getObjectName(e,t),errors:0,severe:0,warnings:0,unused:0,nodes:[]}}this.current.nodes.push(n),this.current=n,this.stack.unshift(n)}pop(){this.stack.shift(),this.current=this.stack[0]}addReference(e){let t=this.map.get(e);void 0!==t.uses&&(t.uses+=1)}addImplicitReference(){let e=this.current;void 0!==e.uses&&(e.uses+=1)}addError(e){this.current.nodes.push({type:"error",message:e});for(let e of this.stack)e.errors+=1}addSevere(e){this.current.nodes.push({type:"severe",message:e});for(let e of this.stack)e.severe+=1}addWarning(e){this.current.nodes.push({type:"warning",message:e});for(let e of this.stack)e.warnings+=1}addUnused(e){this.current.nodes.push({type:"unused",message:e});for(let e of this.stack)e.unused+=1}assertError(e,t){e||this.addError(t)}assertSevere(e,t){e||this.addSevere(t)}assertWarning(e,t){e||this.addWarning(t)}assertUnused(e,t){e||this.addUnused(t)}}},8816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(122),r=n(6190),i=n(4315);t.default=function(e){let t=new a.default(e);i.testHeader(t),i.testSequences(t),r.testObjects(t,e.globalSequences,i.testGlobalSequence),i.testTextures(t),r.testObjects(t,e.materials,i.testMaterial),r.testObjects(t,e.textureAnimations),r.testObjects(t,e.geosets,i.testGeoset),r.testObjects(t,e.geosetAnimations,i.testGeosetAnimation),r.testObjects(t,e.bones,i.testBone),r.testObjects(t,e.lights,i.testLight),r.testObjects(t,e.helpers),r.testObjects(t,e.attachments,i.testAttachment),i.testPivotPoints(t),r.testObjects(t,e.particleEmitters,i.testParticleEmitter),r.testObjects(t,e.particleEmitters2,i.testParticleEmitter2),e.version>800&&r.testObjects(t,e.particleEmittersPopcorn,i.testParticleEmitterPopcorn),r.testObjects(t,e.ribbonEmitters,i.testRibbonEmitter),r.testObjects(t,e.eventObjects,i.testEventObject),r.testObjects(t,e.cameras,i.testCamera),r.testObjects(t,e.collisionShapes),e.version>800&&(r.testObjects(t,e.faceEffects,i.testFaceEffect),i.testBindPose(t));let n=t.stack[0];r.cleanNode(n);let{nodes:l,errors:s,severe:o,warnings:u,unused:c}=n;for(let e of l)"node"===e.type&&0===e.uses&&(c+=1);return{type:"node",nodes:l,errors:s,severe:o,warnings:u,unused:c}}},4315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testBindPose=t.testFaceEffect=t.testCamera=t.testEventObject=t.testRibbonEmitter=t.testParticleEmitterPopcorn=t.testParticleEmitter2=t.testParticleEmitter=t.testPivotPoints=t.testAttachment=t.testLight=t.testBone=t.testGeosetAnimation=t.testGeoset=t.testMaterial=t.testTextures=t.testGlobalSequence=t.testSequences=t.testHeader=void 0;const a=n(7901),r=n(6190),i=n(617);function l(e,t,n){let a=t.name.toLowerCase().trim().split("-")[0].split(/\s+/),i=a[0],l=t.interval,s=l[1]-l[0],o=e.model.sequences;for(let t=0;t<n;t++){let n=o[t],a=n.interval;l[0]===a[0]?e.addSevere(`This sequence starts at the same frame as sequence ${t+1} "${n.name}"`):l[0]<a[1]&&e.addSevere(`This sequence starts before sequence ${t+1} "${n.name}" ends`)}"alternate"===i&&(i=a[1]),"stand"===i&&(e.foundStand=!0),"death"===i&&(e.foundDeath=!0),e.addImplicitReference(),e.assertWarning(r.sequenceNames.has(i),`"${i}" is not a standard name`),e.assertWarning(0!==s,"Zero length"),e.assertWarning(s>-1,`Negative length: ${s}`),r.testExtent(e,t.extent)}function s(e,t){let n=t.replaceableId,i=t.path.toLowerCase(),l=a.extname(i);e.assertError(""===i||".blp"===l||".tga"===l||".tif"===l||".dds"===l,`Corrupted path: "${i}"`),e.assertError(0===n||r.replaceableIds.has(n),`Unknown replaceable ID: ${n}`),e.assertWarning(""===i||0===n,`Path "${i}" and replaceable ID ${n} used together`)}function o(e,t){let n=e.model.textures,a=e.model.textureAnimations;for(let a of r.getTextureIds(t))r.testReference(e,n,a,"texture");let i=t.textureAnimationId;-1!==i&&r.testReference(e,a,i,"texture animation");let l=t.filterMode;e.assertWarning(l>=0&&l<=6,`Invalid filter mode: ${t.filterMode}`)}t.testHeader=function(e){let t=e.model.version;800!==t&&900!==t&&1e3!==t&&e.addWarning(`Unknown version: ${t}`),900===t&&e.addError("Version 900 is not supported by Warcrft 3"),""!==e.model.animationFile&&e.addWarning(`The animation file should probably be empty, currently set to: "${e.model.animationFile}"`),r.testExtent(e,e.model.extent)},t.testSequences=function(e){let t=e.model.sequences;t.length?(r.testObjects(e,t,l),e.assertSevere(e.foundStand,'Missing "Stand" sequence'),e.assertSevere(e.foundDeath,'Missing "Death" sequence')):e.addWarning("No sequences")},t.testGlobalSequence=function(e,t){e.assertWarning(0!==t,"Zero length"),e.assertWarning(t>=0,`Negative length: ${t}`)},t.testTextures=function(e){let t=e.model.textures;t.length?r.testObjects(e,t,s):e.addWarning("No textures")},t.testMaterial=function(e,t){let n=t.layers,a=t.shader;e.model.version>800&&e.assertWarning(""===a||"Shader_SD_FixedFunction"===a||"Shader_HD_DefaultUnit"===a,`Unknown shader: "${a}"`),n.length?r.testObjects(e,n,o):e.addWarning("No layers")},t.testGeoset=function(e,t,n){let a=e.model.geosetAnimations,i=t.materialId;if(e.assertSevere(t.vertices.length<22299,"Too many vertices in one geoset: "+t.vertices.length/3),r.testGeosetSkinning(e,t),a.length){let t=[];for(let e=0,r=a.length;e<r;e++)a[e].geosetId===n&&t.push(e+1);e.assertWarning(t.length<=1,`Referenced by ${t.length} geoset animations: ${t.join(", ")}`)}r.testReference(e,e.model.materials,i,"material"),t.faces.length?e.addImplicitReference():e.addWarning("Zero faces"),t.sequenceExtents.length!==e.model.sequences.length&&800===e.model.version&&e.addWarning(`Number of sequence extents (${t.sequenceExtents.length}) does not match the number of sequences (${e.model.sequences.length})`),r.testExtent(e,t.extent);for(let n of t.sequenceExtents)r.testExtent(e,n)},t.testGeosetAnimation=function(e,t){let n=e.model.geosets,a=t.geosetId;e.addImplicitReference(),r.testReference(e,n,a,"geoset")};t.testBone=function(e,t){let n=e.model.geosets,a=e.model.geosetAnimations,i=t.geosetId,l=t.geosetAnimationId;if(-1!==i&&r.testReference(e,n,i,"geoset"),-1!==l&&r.testReference(e,a,l,"geoset animation")){let t=a[l];-1!==i&&t.alpha<.1&&!r.hasAnimation(t,"KGAO")&&e.addSevere(`Referencing geoset ${i+1} and geoset animation ${l+1} with a 0 alpha, the geoset may be invisible`)}},t.testLight=function(e,t){let n=t.attenuation;e.assertWarning(n[0]>=80,`Minimum attenuation should probably be bigger than or equal to 80, but is ${n[0]}`),e.assertWarning(n[1]<=200,`Maximum attenuation should probably be smaller than or equal to 200, but is ${n[0]}`),e.assertWarning(n[1]-n[0]>0,"The maximum attenuation should be bigger than the minimum, but isn't")},t.testAttachment=function(e,t){},t.testPivotPoints=function(e){let t=e.model.pivotPoints,n=e.objects;e.assertWarning(t.length===n.length,`Expected ${n.length} pivot points, got ${t.length}`)},t.testParticleEmitter=function(e,t){e.assertError(t.path.toLowerCase().endsWith(".mdl"),"Invalid path")},t.testParticleEmitter2=function(e,t){let n=t.replaceableId;r.testReference(e,e.model.textures,t.textureId,"texture");let a=t.filterMode;if(e.assertWarning(a>=0&&a<=4,`Invalid filter mode: ${t.filterMode}`),e.assertError(0===n||r.replaceableIds.has(n),`Invalid replaceable ID: ${n}`),1048576&t.flags&&e.assertSevere(0!==t.speed&&0!==t.latitude,"XY Quad emitters must have a non-zero speed and latitude"),e.assertSevere(t.timeMiddle>=0&&t.timeMiddle<=1,`Expected time middle to be between 0 and 1, got ${t.timeMiddle}`),t.squirt){let n=t.emissionRate,a=r.getAnimation(t,"KP2E");if(a)for(let e of a.values)e[0]>n&&(n=e[0]);else r.getAnimation(t,"KP2V")||e.addWarning("Using squirt without animating the emission rate or visibility");e.assertWarning(n>r.LOW_SQUIRT_EMISSION_RATE,`Using squirt with a low emission rate (${n.toFixed(1)})`)}},t.testParticleEmitterPopcorn=function(e,t){let n=t.path;n.length&&e.assertError(n.endsWith(".pkfx"),`Corrupted path: "${n}"`)},t.testRibbonEmitter=function(e,t){r.testReference(e,e.model.materials,t.materialId,"material")},t.testEventObject=function(e,t){i.default(e,t)},t.testCamera=function(e,t){e.addImplicitReference()},t.testFaceEffect=function(e,t){let n=t.path;n.length&&e.assertError(n.endsWith(".facefx")||n.endsWith(".facefx_ingame"),`Corrupted face effect path: "${n}"`),e.addImplicitReference()},t.testBindPose=function(e){let t=e.model.bindPose,n=e.objects;e.assertWarning(t.length===n.length+1,`Expected ${n.length+1} matrices, got ${t.length}`)}},617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8272),r=n(4182),i=n(6190);function l(e,t,n){if(-1===n){let n=e.model.sequences;for(let e=0,a=n.length;e<a;e++){let a=n[e].interval;if(t>=a[0]&&t<=a[1])return e}}else{let a=e.model.globalSequences[n];if(t>=0&&t<=a)return n}return-1}function s(e,t,n){return-1===n?`sequence "${e.model.sequences[t].name}"`:`global sequence ${n}`}function o(e,t,n){let a=0;for(let r=0,i=e.length;r<i;r++){let i=e[r],l=Math.abs(i-t[r]),s=Math.abs(i-n[r]);l>a&&(a=l),s>a&&(a=s)}return a}function u(e,t,n,a,r,i,l,u){let c,d=0;if(-1===a){let t=e.model.sequences[n].interval;d=t[0],c=t[1]}else c=e.model.globalSequences[a];let h=i[t[0]],f=i[t[t.length-1]];if(u||(e.assertWarning(h===d,`No opening track for ${s(e,n,a)} at frame ${d}`),e.assertWarning(f===c||0===r,`No closing track for ${s(e,n,a)} at frame ${c}`)),l&&t.length>2){let n=l[t[0]],a=l[t[1]];for(let r=2,s=t.length;r<s;r++){let s=l[t[r]],u=t[r-1],c=o(n,a,s);0===c?e.addUnused(`Track ${u} at frame ${i[u]} has exactly the same value as tracks ${u-1} and ${u+1}`):c<.001&&e.addUnused(`Track ${u} at frame ${i[u]} has roughly the same value as tracks ${u-1} and ${u+1}`),n=a,a=s}}}t.default=function(e,t){let n,s,o=0;t instanceof a.Animation?(e.assertWarning(t.frames.length>0,"Zero tracks"),n=t.frames,o=t.interpolationType,s=t.values):(e.assertError(t.tracks.length>0,"Zero tracks"),n=t.tracks);let c=t.globalSequenceId,d=[];if(-1===c){e.assertWarning(e.model.sequences.length>0,"This animation exists, but the model has no sequences");for(let t=0,n=e.model.sequences.length;t<n;t++)d.push([])}else i.testReference(e,e.model.globalSequences,c,"global sequence")&&(d[c]=[]);!function(e,t,n,a){let r=-1/0;for(let i=0,s=t.length;i<s;i++){let s=t[i];e.assertWarning(s>=0,`Track ${i} has a negative frame ${s}`),s===r?e.addWarning(`Track ${i} has the same frame ${s} as track ${i}`):s<r&&e.addSevere(`Track ${i} at frame ${s} is lower than the track before it at ${r}`);let o=l(e,s,n);-1!==o?a[o].push(i):0!==s&&t.length>1&&(-1===n?e.addUnused(`Track ${i} at frame ${s} is not in any sequence`):e.addUnused(`Track ${i} at frame ${s} is not in global sequence ${n}`)),r=s}}(e,n,c,d);for(let a=0,i=d.length;a<i;a++){let i=d[a];i&&i.length>1&&u(e,i,a,c,o,n,s,t instanceof r.default)}}},6190:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testExtent=t.getAnimation=t.cleanNode=t.testAnimation=t.testGeosetSkinning=t.getTextureIds=t.testReference=t.testObjects=t.getObjectName=t.getObjectTypeName=t.hasAnimation=t.animatedTypeNames=t.replaceableIds=t.sequenceNames=t.LOW_SQUIRT_EMISSION_RATE=void 0;const a=n(4234),r=n(7901),i=n(8272),l=n(343),s=n(7863),o=n(9350),u=n(6659),c=n(5944),d=n(1904),h=n(855),f=n(6103),_=n(9939),m=n(8163),p=n(5727),g=n(8848),b=n(8844),w=n(3631),v=n(8872),A=n(1445),y=n(3094),L=n(4491),S=n(4182),T=n(7709),E=n(9388),k=n(3788),x=n(617);function I(e){return e instanceof o.default?"Extent":e instanceof u.default?"Sequence":"number"==typeof e?"GlobalSequence":e instanceof c.default?"Texture":e instanceof d.default?"Material":e instanceof h.default?"Layer":e instanceof f.default?"TextureAnimation":e instanceof _.default?"Geoset":e instanceof m.default?"GeosetAnimation":e instanceof p.default?"Bone":e instanceof g.default?"Light":e instanceof b.default?"Helper":e instanceof w.default?"Attachment":e instanceof v.default?"ParticleEmitter":e instanceof A.default?"ParticleEmitter2":e instanceof y.default?"ParticleEmitterPopcorn":e instanceof L.default?"RibbonEmitter":e instanceof S.default?"EventObject":e instanceof T.default?"Camera":e instanceof E.default?"CollisionShape":e instanceof k.default?"FaceEffect":e instanceof i.Animation?t.animatedTypeNames.get(e.name):(console.warn("Unknown object type",e),"Unknown")}function M(e,t,n){let a=e.objects[n];a?a instanceof p.default||e.addSevere(`Vertex ${t}: Attached to "${a.name}" which is not a bone`):e.addError(`Vertex ${t}: Attached to object ${n} which does not exist`)}function U(e,t){for(let n of e.objects)if(n.objectId===t)return!0;return!1}function P(e,n){let a=n.name,r=n.interpolationType;e.assertWarning("KP2R"!==a,"Using a variation animation."),e.assertWarning("KP2G"!==a,"Using a gravity animation."),e.assertWarning("Visibility"!==t.animatedTypeNames.get(a)||0===r,"Interpolation type not set to None"),x.default(e,n)}t.LOW_SQUIRT_EMISSION_RATE=8,t.sequenceNames=new Set(["attack","birth","cinematic","death","decay","dissipate","morph","portrait","sleep","spell","stand","walk","ready"]),t.replaceableIds=new Set([1,2,11,21,31,32,33,34,35,36,37]),t.animatedTypeNames=new Map([["KMTF","Texture ID"],["KMTA","Alpha"],["KMTE","Emissive Gain"],["KFC3","Fresnel Color"],["KFCA","Fresnel Opacity"],["KFTC","Fresnel Team Color"],["KTAT","Translation"],["KTAR","Rotation"],["KTAS","Scaling"],["KGAO","Alpha"],["KGAC","Color"],["KGTR","Translation"],["KGRT","Rotation"],["KGSC","Scaling"],["KLAS","Attenuation Start"],["KLAE","Attenuation End"],["KLAC","Color"],["KLAI","Intensity"],["KLBI","Ambient Intensity"],["KLBC","Ambient Color"],["KLAV","Visibility"],["KATV","Visibility"],["KPEE","Emission Rate"],["KPEG","Gravity"],["KPLN","Longitude"],["KPLT","Latitude"],["KPEL","Lifespan"],["KPES","Speed"],["KPEV","Visibility"],["KP2E","Emission Rate"],["KP2G","Gravity"],["KP2L","Latitude"],["KP2R","Variation"],["KP2N","Length"],["KP2W","Width"],["KP2S","Speed"],["KP2V","Visibility"],["KPPA","Alpha"],["KPPC","Color"],["KPPE","EmissionRate"],["KPPL","LifeSpan"],["KPPS","Speed"],["KPPV","Visibility"],["KRHA","Height Above"],["KRHB","Height Below"],["KRAL","Alpha"],["KRCO","Color"],["KRTX","Texture Slot"],["KRVS","Visibility"],["KCTR","Translation"],["KTTR","Rotation"],["KCRL","Target Translation"]]),t.hasAnimation=function(e,t){for(let n of e.animations)if(n.name===t)return!0;return!1},t.getObjectTypeName=I,t.getObjectName=function(e,t){let n=I(e);return e instanceof i.Animation||e instanceof o.default||(n+=` ${t}`),(e instanceof u.default||e instanceof s.default||e instanceof T.default)&&(n+=` - "${e.name}"`),(e instanceof c.default||e instanceof k.default)&&(e.path.length&&(n+=` - "${r.basename(e.path)}"`),e instanceof c.default&&(1===e.replaceableId?n+=" - Team color":2===e.replaceableId?n+=" - Team glow":e.replaceableId>0&&(n+=` - Replaceable ID ${e.replaceableId}`))),n},t.testObjects=function e(t,n,a){let r=n.length;if(r){let i=n[0]instanceof l.default,o=n[0]instanceof s.default;for(let l=0;l<r;l++){let r=n[l];if(t.push(r,l),a&&a(t,r,l),i){e(t,r.animations,P)}if(o){let e=r,n=e.objectId,a=e.parentId;t.assertError(-1===a||U(t,a),`Invalid parent ${a}`),t.assertError(n!==a,"Same object and parent")}t.pop()}}},t.testReference=function(e,t,n,a){return n>=0&&n<t.length?(e.addReference(t[n]),!0):(e.addError(`Invalid ${a} ${n}`),!1)},t.getTextureIds=function(e){for(let t of e.animations)if("KMTF"===t.name)return a.default(t.values.map((e=>e[0])));return[e.textureId]},t.testGeosetSkinning=function(e,t){if(e.model.version>800&&t.skin.length){e.assertWarning(0===t.vertexGroups.length,"This geoset has both skin/weights and vertex groups");let n=t.skin;for(let t=0,a=n.length/8;t<a;t++){let a=8*t,r=n[a],i=n[a+1],l=n[a+2],s=n[a+3],o=n[a+4],u=n[a+5],c=n[a+6],d=n[a+7];o>0&&M(e,t,r),u>0&&M(e,t,i),c>0&&M(e,t,l),d>0&&M(e,t,s);let h=o+u+c+d;0===h?e.addSevere(`Vertex ${t}: Not attached to anything`):255!==h&&e.addSevere(`Vertex ${t}: The weights are not normalized to 1`)}}else if(e.model.bones.length){let n=t.vertexGroups,a=t.matrixGroups,r=t.matrixIndices,i=[];for(let e=0,t=a.length,n=0;e<t;e++)i.push(r.subarray(n,n+a[e])),n+=a[e];for(let t=0,a=n.length;t<a;t++){let a=i[n[t]];if(a)for(let n of a)M(e,t,n);else{let a=n[t];255===a?e.addSevere(`Vertex ${t}: Not attached to anything`):e.addSevere(`Vertex ${t}: Attached to vertex group ${a} which does not exist`)}}}},t.testAnimation=P,t.cleanNode=function e(t){let n=t.nodes;for(let t=n.length-1;t>=0;t--){let a=n[t];"node"===a.type&&(a.errors||a.severe||a.warnings||a.unused||void 0!==a.uses&&!a.uses?e(a):n.splice(t,1))}},t.getAnimation=function(e,t){for(let n of e.animations)if(n.name===t)return n},t.testExtent=function(e,t){e.push(t,0);let{max:n,min:a}=t;(n[0]-a[0]<0||n[1]-a[1]<0||n[2]-a[2]<0)&&e.addWarning("Negative extents"),e.pop()}},5584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1235),r=n(6796),i=n(5226),l=n(3519),s=n(6072),o=n(8858),u=n(3420),c=n(6899),d=n(5406);t.default=class{constructor(e){this.mathRandom=Math.random,this.tests=[];let t=document.createElement("canvas");t.width=t.height=256;let n=new l.default(t,{alpha:!1,antialias:!1});n.gl.clearColor(.05,.05,.05,1),n.on("error",(e=>console.log(e))),n.addHandler(s.default,e),n.addHandler(o.default),n.addHandler(u.default),n.addHandler(c.default),n.addHandler(d.default),this.viewer=n}add(e){e.tests?this.addBaseName(e.tests,e.name):this.tests.push({name:e.name,test:e})}async test(e){for(let t of this.tests){let n=await this.getTestBlob(t),r=await this.getComparisonBlob(t);if(n&&r){let l=await new Promise((e=>a(n).compareTo(r).ignoreColors().onComplete((t=>e(t))))),s=await i.blobToImage(n),o=await i.blobToImage(r);e({done:!1,value:{name:t.name,testImage:s,comparisonImage:o,mismatchPercentage:l.rawMisMatchPercentage}})}else e(n?{done:!1,value:{name:t.name,testImage:await i.blobToImage(n),mismatchPercentage:100}}:r?{done:!1,value:{name:t.name,comparisonImage:await i.blobToImage(r),mismatchPercentage:100}}:{done:!1,value:{name:t.name,mismatchPercentage:100}})}e({done:!0})}async download(e){for(let t of this.tests){let n=t.name,a=await this.getTestBlob(t);e(a?{done:!1,value:{name:n,blob:a}}:{done:!1,value:{name:n}})}e({done:!0})}isDataAGo(e){if(e){if(Array.isArray(e))for(let t of e)if(!t)return!1;return!0}return!1}async getTestBlob(e){let t=e.test.load,n=e.test.test,a=this.viewer;a.clear();let i=a.addScene();i.color.fill(.05);let l=t(a);if(await a.whenAllLoaded(),l=Array.isArray(l)?await Promise.all(l):await l,this.isDataAGo(l))return Math.random=r.default(6),n(a,i,i.camera,l),a.updateAndRender(),Math.random=this.mathRandom,await a.toBlob()}async getComparisonBlob(e){let t=await fetch(`compare/${e.name}.png`);if(t.ok)return await t.blob()}addBaseName(e,t){for(let n of e)n.tests?this.addBaseName(n.tests,t+"-"+n.name):this.tests.push({name:t+"-"+n.name,test:n})}}},5789:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7901),r=n(9134),i=n(2071),l=n(2438),s=n(9769),o=n(2647),u=n(2459),c=n(3042),d=n(6978);function h(e){return e.endsWith(".mdx")||e.endsWith(".mdl")}function f(e){return e.endsWith(".blp")||e.endsWith(".dds")||e.endsWith(".tga")}function _(e,t){t.length>6&&(h(t)||f(t)||function(e){return e.endsWith(".wav")||e.endsWith(".mp3")||e.endsWith(".slk")||e.endsWith(".txt")}(t))&&(t.endsWith(".mdl")&&(t=`${t.slice(0,-4)}.mdx`),e.push(t.replace(/\\\\/g,"\\")))}t.default=function(e){let t=["(listfile)","(signature)","(attributes)","war3map.w3e","war3map.w3i","war3map.wtg","war3map.wct","war3map.wts","war3map.j","scripts\\war3map.j","war3map.lua","scripts\\war3map.lua","war3map.shd","war3mapMap.blp","war3mapMap.b00","war3mapMap.tga","war3mapPreview.tga","war3map.mmp","war3mapPath.tga","war3map.wpm","war3map.doo","war3mapUnits.doo","war3map.w3r","war3map.w3c","war3map.w3s","war3map.w3u","war3map.w3t","war3map.w3a","war3map.w3b","war3map.w3d","war3map.w3q","war3mapMisc.txt","war3mapSkin.txt","war3mapExtra.txt","war3map.imp"],n=e.get("(listfile)");if(n)try{let e=n.text().split(/\r\n/g);for(let n of e)t.push(n.trim())}catch(e){console.warn("(listfile)",e)}for(let a of[".w3u",".w3t",".w3b",".w3d",".w3a",".w3h",".w3q"])if(n=e.get("war3map"+a),n)try{let e,r=n.bytes();e=".w3d"===a||".w3q"===a||".w3a"===a?new s.default:new c.default,e.load(r);let i=[e.originalTable,e.customTable];for(let e of i)for(let n of e.objects)for(let e of n.modifications)3===e.variableType&&_(t,e.value)}catch(e){console.warn(n.name,e)}if(n=e.get("war3map.w3s"),n)try{let e=n.bytes(),a=new u.default;a.load(e);for(let e of a.sounds)t.push(e.file)}catch(e){console.warn("war3map.w3s",e)}if(n=e.get("war3map.j")||e.get("Scripts\\war3map.j")||e.get("war3map.lua")||e.get("Scripts\\war3map.lua"),n)try{let e,a=n.text(),r=new d.default(a);for(;void 0!==(e=r.read());)'"'===e[0]&&_(t,e.slice(1,-1))}catch(e){console.warn(n.name,e)}if(n=e.get("war3mapSkin.txt"),n)try{let e=n.text(),a=new r.IniFile;a.load(e);for(let e of a.sections.values())for(let n of e.values())for(let e of n.split(","))_(t,e)}catch(e){console.warn("war3mapSkin.txt",e)}if(n=e.get("war3map.imp"),n)try{let e=n.bytes(),a=new l.default;a.load(e);for(let e of a.entries.keys())t.push(e)}catch(e){console.warn("war3map.imp",e)}if(n=e.get("war3map.w3i"),n)try{let e=n.bytes(),a=new o.default;a.load(e),_(t,a.loadingScreenModel),_(t,a.prologueScreenModel)}catch(e){console.warn("war3map.w3i",e)}for(let e=0,n=t.length;e<n;e++){let n=t[e];h(n)&&t.push(`${n.slice(0,-4)}_portrait.mdx`)}for(let n=0,a=t.length;n<a;n++){let a=t[n];if(h(a)){let n=e.get(a);if(n)try{let e=n.bytes(),a=new i.default;a.load(e);for(let e of a.textures)e.path.length&&t.push(e.path);for(let e of a.attachments)_(t,e.path);for(let e of a.particleEmitters)_(t,e.path)}catch(e){console.warn(a,e)}}}for(let e=0,n=t.length;e<n;e++){let n=t[e];f(n)&&t.push(`ReplaceableTextures\\CommandButtonsDisabled\\DIS${a.basename(n)}`)}return new Set(t)}},7335:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7598),r=n(5789);t.default={convertWeu:a.default,generateListfile:r.default}},1751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertParameterInline=t.convertParameter=t.convertFunctionCall=t.convertTrigger=void 0;const a=n(518),r=n(9305),i=n(831),l=n(1549),s=new Set(["OperatorCompareBoolean","OperatorCompareAbilityId","OperatorCompareBuffId","OperatorCompareDestructible","OperatorCompareDestructableCode","OperatorCompareButton","OperatorCompareGameDifficulty","OperatorCompareGameSpeed","OperatorCompareHeroSkill","OperatorCompareInteger","OperatorCompareItem","OperatorCompareItemType","OperatorCompareItemCode","OperatorCompareMouseButton","OperatorCompareMeleeDifficulty","OperatorCompareOrderCode","OperatorComparePlayer","OperatorComparePlayerColor","OperatorComparePlayerControl","OperatorComparePlayerSlotStatus","OperatorCompareRace","OperatorCompareReal","OperatorCompareString","OperatorCompareTechCode","OperatorCompareTerrainType","OperatorCompareTrigger","OperatorCompareUnit","OperatorCompareUnitCode","OperatorInt","OperatorReal"]),o=new Set(["EnumDestructablesInRectAllMultiple","EnumDestructablesInCircleBJMultiple","EnumItemsInRectBJMultiple","ForForceMultiple","ForGroupMultiple"]);function u(e,t,n){let r=t.name,d=[],h=t.parameters,f=e.triggerData.getFunction(t.type,t.name);if(!f)throw new Error(`Could not find a function signature: ${r}. Stack: ${e.stackToString()}`);let{args:_,scriptName:m}=f,p=_.length,g=!1,b=!1,w=!1,v=t;if(m=m||t.name,p){let e=_[p-1];"code"===e||o.has(r)?g=!0:"boolexpr"===e?b=!0:"scriptcode"===e&&(w=!0)}if("IfThenElse"===r)d.push(`if ${c(e,h[0],_[0],n)} then`),d.push(`call ${c(e,h[1],_[1],n)}`),d.push("else"),d.push(`call ${c(e,h[2],_[2],n)}`),d.push("endif");else if("OrMultiple"===r)d.push(v.ecas.slice().map((t=>u(e,t,n).map((e=>e.parameters[0].value)))).join(" or "));else if("AndMultiple"===r)d.push(v.ecas.slice().map((t=>u(e,t,n).map((e=>e.parameters[0].value)))).join(" and "));else if("ForLoopAMultiple"===r||"ForLoopBMultiple"===r||"ForLoopVarMultiple"===r){let t,a="A";if("ForLoopBMultiple"===r?a="B":"ForLoopVarMultiple"===r&&(a="Var"),"A"===a||"B"===a){t=`bj_forLoop${a}Index`;let r=`${t}End`;d.push(`set ${t} = ${c(e,h[0],_[0],n)}`),d.push(`set ${r} = ${c(e,h[1],_[1],n)}`),d.push("loop"),d.push(`exitwhen ${t} > ${r}`)}else t=c(e,h[0],_[0],n),d.push(`set ${t} = ${c(e,h[1],_[1],n)}`),d.push("loop"),d.push(`exitwhen ${t} > ${c(e,h[2],_[2],n)}`);for(let t of v.ecas){let a=u(e,t,n);for(let e of a)d.push(`${e.parameters[0].value}`)}d.push(`set ${t} = ${t} + 1`),d.push("endloop")}else if("IfThenElseMultiple"===r){let t,a=[],r=[];for(let e of v.ecas)0===e.group?t=e:1===e.group?a.push(e):2===e.group&&r.push(e);t&&d.push(`if ${u(e,t,n)[0].parameters[0].value} then`);for(let t of a){let a=u(e,t,n);for(let e of a)d.push(`${e.parameters[0].value}`)}if(r.length){d.push("else");for(let t of r){let a=u(e,t,n);for(let e of a)d.push(`${e.parameters[0].value}`)}}d.push("endif")}else if(g||b){let r=e.getTriggerName(),i=`Trig_${l.ensureNameSafety(r)}_Func${n.length}`,s=`function ${i}`,o="nothing",f="call",p=h.length-1,g=t.name.endsWith("Multiple");b&&(s=`Filter(${s})`,o="boolean",f="return"),g&&(p=h.length);let w=n.length;n[w]="NOTHING";let A,y=[...h.slice(0,p).map(((t,a)=>c(e,t,_[a],n))),s];t instanceof a.default?d.push(`call ${m}(${y.join(", ")})`):d.push(`${m}(${y.join(", ")})`),A=g?v.ecas.map((t=>u(e,t,n).map((e=>e.parameters[0].value)).join("\r\n"))).join("\r\n"):`${f} ${c(e,h[p],_[p],n)}`,n[w]=`function ${i} takes nothing returns ${o}\r\n${A}\r\nendfunction`}else w?d.push(c(e,v.parameters[0],"scriptcode",n)):"SetVariable"===r?d.push(`set ${c(e,h[0],_[0],n)} = ${c(e,h[1],_[1],n)}`):"OperatorString"===r?d.push(`${c(e,h[0],_[0],n)} + ${c(e,h[1],_[1],n)}`):s.has(r)?d.push(`${c(e,h[0],_[0],n)} ${c(e,h[1],_[1],n)} ${c(e,h[2],_[2],n)}`):"CommentString"===r?d.push(`// ${h[0].value}`):"GetBooleanAnd"===r?d.push(`(${c(e,h[0],_[0],n)} and ${c(e,h[1],_[1],n)})`):"GetBooleanOr"===r?d.push(`(${c(e,h[0],_[0],n)} or ${c(e,h[1],_[1],n)})`):t instanceof a.default?(0===t.type&&(_=["trigger",..._]),d.push(`call ${m}(${h.map(((t,a)=>c(e,t,_[a],n))).join(", ")})`)):t instanceof i.default&&d.push(`${m}(${h.map(((t,a)=>c(e,t,_[a],n))).join(", ")})`);return d.map((e=>l.createCustomScriptECA(e)))}function c(e,t,n,a){let{type:r,value:i}=t;if(0===r){let t=e.triggerData.getPreset(i);if(void 0===t)throw new Error(`Failed to find a preset: "${i}"`);return t}if(1===r){if(i.startsWith("gg_"))return e.updateGUIReference(i,!1),i;{let n=`udg_${i}`;return t.isArray&&t.arrayIndex&&(n+=`[${c(e,t.arrayIndex,"integer",a)}]`),n}}if(2===t.type)return u(e,t.subParameters,a)[0].parameters[0].value;if(3===t.type){let t=e.triggerData.getBaseType(n);if("string"===t&&"scriptcode"!==n){if(i.startsWith("TRIGSTR")&&e.stringTable){let t=e.stringTable.getString(i);if(void 0!==t)return`"${t.replace(/\r\n/g,"\\r\n")}"`;e.change("missingstring","Entry not found in the string table",i)}return`"${i.replace(/\\/g,"\\\\")}"`}return"integer"===t&&isNaN(parseInt(i))?`'${i}'`:i}return""}t.convertTrigger=function(e,t,n){let a=l.ensureNameSafety(t.name),i=[],s=[],o=[];for(let e of t.ecas)0===e.type?i.push(e):1===e.type?s.push(e):o.push(e);let c=[];if(i.length||s.length||o.length){let t=[],l=[],d=[],h=`gg_trg_${a}`,f=new r.default;f.type=3,f.value=h,t.push(`set ${h} = CreateTrigger()`);for(let a of i){a.parameters.unshift(f);for(let r of u(e,a,n))t.push(r.parameters[0].value)}if(s.length){t.push(`call TriggerAddCondition(${h}, Condition(function Trig_${a}_Conditions)`);for(let t of s)for(let a of u(e,t,n))l.push(`if ${a.parameters[0].value} then\r\n return true\r\nendif`)}if(o.length){t.push(`call TriggerAddAction(${h}, function Trig_${a}_Actions)`);for(let t of o)for(let a of u(e,t,n))d.push(a.parameters[0].value)}d.length&&c.push(`function Trig_${a}_Actions takes nothing returns nothing\r\n${d.join("\r\n")}\r\nendfunction`),l.length&&c.push(`function Trig_${a}_Conditions takes nothing returns boolean\r\n${l.join("\r\n")}\r\nreturn false\r\nendfunction`),c.push(`function InitTrig_${a} takes nothing returns nothing\r\n${t.join("\r\n")}\r\nendfunction`)}return c.join("\r\n")},t.convertFunctionCall=u,t.convertParameter=c,t.convertParameterInline=function(e,t,n){return c(e,t,n,[])}},7843:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3185),r=n(518),i=n(9305),l=n(3472);t.default=class{constructor(e,t){this.preplacedObjects=new Map,this.changes=[],this.stack=[],this.triggerData=e,this.stringTable=t}push(e){this.stack.unshift(e)}pop(){this.stack.shift()}change(e,t,n){this.changes.push({type:e,reason:t,data:n,stack:this.stackToString()})}stackToString(){return this.stack.map((e=>e instanceof i.default?e.value:e.name)).reverse().join(" > ")}getTriggerName(){for(let e of this.stack)if(e instanceof a.default)return e.name;return""}updateGUIReference(e,t){if(e.startsWith("gg_unit")||e.startsWith("gg_dest")){let n=this.preplacedObjects;n.get(e)||n.set(e,t)}}saveGUIReferences(e,t){let n=[];for(let[e,t]of this.preplacedObjects)t||n.push(e);if(n.length){let s=new a.default;s.name="PreplacedObjectReferences",s.isEnabled=1,s.isInitiallyOff=1;for(let e of n){let t=new r.default;t.type=2,t.isEnabled=1,e.startsWith("gg_unit")?t.name="RemoveUnit":e.startsWith("gg_dest")&&(t.name="RemoveDestructable");let n=new i.default;n.type=1,n.value=e,t.parameters[0]=n,s.ecas.push(t)}e.push(s),t.push(new l.default),this.change("references","Saved references to preplaced objects lost due to conversions",n.join("\n"))}}}},8794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(518);function r(e,t,n,i,l){if(i.has(t.name)){let n=i.get(t.name).args;for(let[a,r]of t.parameters.entries()){let{type:t,value:i}=r;if(1===t){for(let t of e.variables)if(t.name===i){n[a]=t.type;break}}else if(2===t){if(r.subParameters){let e=r.subParameters,t=l.getFunction(e.type,e.name);if(t){let e=t.returnType;e&&"AnyType"!==e&&(n[a]=e)}}}else if(3===t)if(i.startsWith("TRIGSTER_")||i.includes("\\"))n[a]="string";else if("true"===i||"false"===i)n[a]="boolean";else if(!isNaN(parseFloat(i))){let e=parseFloat(i);isNaN(e)||(Number.isInteger(e)&&!i.includes(".")?n[a]="integer":n[a]="real")}}}for(let n of t.parameters)2===n.type&&n.subParameters&&r(e,n.subParameters,t,i,l);if(t instanceof a.default)for(let n of t.ecas)r(e,n,t,i,l)}t.default=function(e,t,n){let a,i,l,s=new Map,o=!0;for(;o;)try{a=e.readTriggers(t),o=!1}catch(e){let n=e.message;if(n.endsWith("Unknown signature")){let e=n.lastIndexOf('"'),a=n.lastIndexOf('"',e-1)+1,r=n.slice(a,e),[o,u]=r.split(":"),c=parseInt(u),d={args:[],scriptName:null,returnType:3===c?"AnyType":null};i=o.toLowerCase(),l=d,s.set(o,d),t.externalFunctions[c][i]=l}else i&&l&&(l.args.push("AnyType"),l.args.length>20&&(o=!1))}if(s.size){if(a)for(let e of a.triggers)for(let n of e.ecas)r(a,n,0,s,t);for(let[e,t]of s)n.change("unknownsignature","Unknown signature",`${e}(${t.args.join(", ")}) => ${t.returnType?t.returnType:"void"}`)}return a}},9417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processECA=t.processTrigger=void 0;const a=n(1549),r=n(1751),i=n(1267),l=n(4760);function s(e,t,n){e.push(t);let i=o(e,t,n);if(i.convert){let r=i.reason;if(!a.convertSingleToMultiple(t))return e.pop(),i;{let a=o(e,t,n);if(a.convert)return e.pop(),a;e.change("singletomultiple",r,t.name)}}let l=[];for(let i of t.ecas){let o=s(e,i,n);if(o.convert){let s;if(a.isConditionECA(t.name,i.group)){let l,o,u=r.convertFunctionCall(e,i,n)[0].parameters[0].value;u.startsWith("call ")&&(u=u.slice(5)),"OrMultiple"===t.name?(l=u,o="true"):(l=`not (${u})`,o="false"),s=[a.createCustomScriptECA(`if ${l} then`),a.createCustomScriptECA(`return ${o}`),a.createCustomScriptECA("endif")]}else s=r.convertFunctionCall(e,i,n);for(let e of s)e.group=i.group;e.change("inlinecustomscript",o.reason,s.map((e=>e.parameters[0].value)).join("\n")),l.push(...s)}else l.push(i)}return t.ecas=a.ensureCustomScriptCodeSafety(l),e.pop(),{convert:!1,reason:""}}function o(e,t,n){let a=t.name;if(i.default(e,t)&&e.change("inlinegui",a,t.name),!e.triggerData.isBaseFunction(t.type,t.name))return{convert:!0,reason:t.name};for(let a of t.parameters){if(0===a.type&&e.triggerData.isCustomPreset(a.value)){let t=a.value;if(!l.default(e,a))return{convert:!0,reason:t};e.change("inlinepreset",t,a.value)}let t=u(e,a,n);if(t.convert)return t}return{convert:!1,reason:""}}function u(e,t,n){e.push(t);let a=t.type,r=t.value;if(1===a)r.startsWith("gg_")&&e.updateGUIReference(r,!0);else if(2===a){let a=function(e,t,n){e.push(t);let a=o(e,t,n);if(a.convert)return e.pop(),a;return e.pop(),{convert:!1,reason:""}}(e,t.subParameters,n);if(a.convert)return e.pop(),a}let i=t.arrayIndex;if(i){let t=u(e,i,n);if(t.convert)return e.pop(),t}return e.pop(),{convert:!1,reason:""}}t.processTrigger=function(e,t,n){e.push(t);let i=[],l=[];for(let e of t.ecas){let t=e.type;0===t||1===t?i.push(e):2===t&&l.push(e)}let o=[];for(let t of i){let a=s(e,t,n);if(a.convert)return e.pop(),a;o.push(t)}for(let t of l){let a=s(e,t,n);if(a.convert){let i=r.convertFunctionCall(e,t,n);e.change("inlinecustomscript",a.reason,i.map((e=>e.parameters[0].value)).join("\n")),o.push(...i)}else o.push(t)}return t.ecas=a.ensureCustomScriptCodeSafety(o),e.pop(),{convert:!1,reason:""}},t.processECA=s},8667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(831);t.default=function(e,t){let n=t.name;if(!function(e){return"GetTriggerPlayerMouseX"===e||"GetTriggerPlayerMouseY"===e||"GetTriggerPlayerMousePosition"===e||"GetTriggerPlayerMouseButton"===e||"SetAbilityTooltip"===e||"SetAbilityExtendedTooltip"===e||"SetAbilityResearchTooltip"===e||"SetAbilityResearchExtendedTooltip"===e||"GetAbilityTooltip"===e||"GetAbilityExtendedTooltip"===e||"GetAbilityResearchTooltip"===e||"GetAbilityResearchExtendedTooltip"===e||"SetAbilityIcon"===e||"GetAbilityIcon"===e||"GetAbilityPosX"===e||"GetAbilityPosY"===e||"SetAbilityPosX"===e||"SetAbilityPosY"===e||"GetUnitMaxHP"===e||"SetUnitMaxHP"===e||"GetUnitMaxMana"===e||"SetUnitMaxMana"===e||"SetItemName"===e||"SetItemDescription"===e||"GetItemDescription"===e||"SetItemTooltip"===e||"GetItemTooltip"===e||"SetItemExtendedTooltip"===e||"GetItemExtendedTooltip"===e||"SetItemIconPath"===e||"GetItemIconPath"===e||"SetUnitName"===e||"SetHeroProperName"===e||"GetUnitBaseDamage"===e||"SetUnitBaseDamage"===e||"GetUnitDiceNumber"===e||"SetUnitDiceNumber"===e||"GetUnitDiceSides"===e||"SetUnitDiceSides"===e||"GetUnitAttackCooldown"===e||"SetUnitAttackCooldown"===e||"SetSpcialEffectColorByPlayer"===e||"SetSpecialEffectColor"===e||"SetSpecialEffectAlpha"===e||"SetSpecialEffectScale"===e||"SetSpecialEffectPosition"===e||"SetSpecialEffectHeight"===e||"SetSpecialEffectTimeScale"===e||"SetSpecialEffectTime"===e||"SetSpecialEffectOrientation"===e||"SetSpecialEffectYaw"===e||"SetSpecialEffectPitch"===e||"SetSpecialEffectRoll"===e||"SetSpecialEffectX"===e||"SetSpecialEffectY"===e||"SetSpecialEffectZ"===e||"SetSpecialEffectPositionLoc"===e||"GetLocalSpecialEffectX"===e||"GetLocalSpecialEffectY"===e||"GetLocalSpecialEffectZ"===e||"GetUnitArmor"===e||"SetUnitArmor"===e||"UnitHideAbility"===e||"UnitDisableAbility"===e||"UnitCancelTimedLife"===e||"IsUnitSelectable"===e||"IsUnitInvulnerable"===e||"UnitInterruptAttack"===e||"GetUnitCollisionSize"===e||"GetAbilityManaCost"===e||"GetAbilityCooldown"===e||"SetUnitAbilityCooldown"===e||"GetUnitAbilityCooldown"===e||"GetUnitAbilityCooldownRemaining"===e||"EndUnitAbilityCooldown"===e||"GetUnitAbilityManaCost"===e||"SetEventDamage"===e||"PlaySpecialEffect"===e||"PlaySpecialEffectWithTimeScale"===e}(n))return!1;t.name=`Blz${n}`,t instanceof a.default&&(e.stack[1].value=`Blz${n}`);let r=t.parameters;return"GetAbilityIcon"!==n&&"SetAbilityIcon"!==n||3!==r.length||r.pop(),!0}},1267:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1193),r=n(3354),i=n(8667);let l,s=!1;t.default=function(e,t){s||function(){if(!s){function e(e){return a.default({[e]:{}})}function t(e){return function(t){return a.default({[t]:{parameters:e}})}}s=!0;const n=t([1,0]),i=t([1,0,2]),o=t([1,2,0]),u=t([2,0,1]),c=t([2,1,0]),d=t([0,2,3,1]),h=t([1,0,2,3]),f=t([3,0,1,2]),_=t([3,2,0,1]),m=t([3,2,1,0]);l={UnitId:e("String2UnitIdBJ"),UnitId2String:e("UnitId2StringBJ"),GetObjectName:e("GetAbilityName"),Sin:a.default({SinBJ:{parameters:[[0,"/",Math.PI/180]]}}),Cos:a.default({CosBJ:{parameters:[[0,"/",Math.PI/180]]}}),Tan:a.default({TanBJ:{parameters:[[0,"/",Math.PI/180]]}}),GetHandleId:e("GetHandleIdBJ"),SubString:a.default({SubStringBJ:{parameters:[0,[1,"+",1],2]}}),StringHash:e("StringHashBJ"),GetLocalizedString:e("StringIdentity"),SetMapFlag:a.default({LockGameSpeedBJ:{tests:[[0,"MAP_LOCK_SPEED"],[1,"true"]],parameters:[]},UnlockGameSpeedBJ:{tests:[[0,"MAP_LOCK_SPEED"],[1,"false"]],parameters:[]}}),SetPlayerColor:a.default({SetPlayerColorBJ:{parameters:[0,1,"PlayerChangeColorRetain"]}}),SetPlayerAlliance:d("SetPlayerAllianceBJ"),SetPlayerTaxRate:_("SetPlayerTaxRateBJ"),SetPlayerOnScoreScreen:n("SetPlayerOnScoreScreenBJ"),GetPlayerTaxRate:u("GetPlayerTaxRateBJ"),TimerStart:a.default({StartTimerBJ:{test:[3,"null"],parameters:[0,2,1]}}),PauseTimer:a.default({PauseTimerBJ:{parameters:["PauseResumePause",0]}}),ResumeTimer:a.default({PauseTimerBJ:{parameters:["PauseResumeResume",0]}}),GroupAddUnit:n("GroupAddUnitSimple"),GroupRemoveUnit:n("GroupRemoveUnitSimple"),GroupImmediateOrderById:e("GroupTrainOrderByIdBJ"),ForceAddPlayer:n("ForceAddPlayerSimple"),ForceRemovePlayer:n("ForceRemovePlayerSimple"),GetWorldBounds:e("GetEntireMapRect"),TriggerRegisterTimerEvent:a.default({TriggerRegisterTimerEventPeriodic:{test:[2,"true"],parameters:[0,1]},TriggerRegisterTimerEventSingle:{test:[2,"false"],parameters:[0,1]}}),TriggerRegisterTimerExpireEvent:e("TriggerRegisterTimerExpireEventBJ"),TriggerRegisterGameStateEvent:a.default({TriggerRegisterGameStateEventTimeOfDay:{test:[1,"GAME_STATE_TIME_OF_DAY"],parameters:[0,2,3]}}),TriggerRegisterDialogEvent:e("TriggerRegisterDialogEventBJ"),TriggerRegisterGameEvent:a.default({TriggerRegisterShowSkillEventBJ:{test:[1,"EVENT_GAME_SHOW_SKILL"],parameters:[0]},TriggerRegisterBuildSubmenuEventBJ:{test:[1,"EVENT_GAME_BUILD_SUBMENU"],parameters:[0]},TriggerRegisterGameLoadedEventBJ:{test:[1,"EVENT_GAME_LOADED"],parameters:[0]},TriggerRegisterGameSavedEventBJ:{test:[1,"EVENT_GAME_SAVE"],parameters:[0]}}),GetClickedButton:e("GetClickedButtonBJ"),GetClickedDialog:e("GetClickedDialogBJ"),TriggerRegisterPlayerEvent:a.default({TriggerRegisterPlayerKeyEventBJ:[{test:[2,"EVENT_PLAYER_ARROW_LEFT_DOWN"],parameters:[0,1,"KeyEventTypeDepress","KeyEventKeyLeft"]},{test:[2,"EVENT_PLAYER_ARROW_RIGHT_DOWN"],parameters:[0,1,"KeyEventTypeDepress","KeyEventKeyRight"]},{test:[2,"EVENT_PLAYER_ARROW_DOWN_DOWN"],parameters:[0,1,"KeyEventTypeDepress","KeyEventKeyDown"]},{test:[2,"EVENT_PLAYER_ARROW_UP_DOWN"],parameters:[0,1,"KeyEventTypeDepress","KeyEventKeyUp"]},{test:[2,"EVENT_PLAYER_ARROW_LEFT_UP"],parameters:[0,1,"KeyEventTypeRelease","KeyEventKeyLeft"]},{test:[2,"EVENT_PLAYER_ARROW_RIGHT_UP"],parameters:[0,1,"KeyEventTypeRelease","KeyEventKeyRight"]},{test:[2,"EVENT_PLAYER_ARROW_DOWN_UP"],parameters:[0,1,"KeyEventTypeRelease","KeyEventKeyDown"]},{test:[2,"EVENT_PLAYER_ARROW_UP_UP"],parameters:[0,1,"KeyEventTypeRelease","KeyEventKeyUp"]}],TriggerRegisterPlayerMouseEventBJ:[{test:[2,"EVENT_PLAYER_MOUSE_DOWN"],parameters:[0,1,"MouseEventTypeDown"]},{test:[2,"EVENT_PLAYER_MOUSE_UP"],parameters:[0,1,"MouseEventTypeUp"]},{test:[2,"EVENT_PLAYER_MOUSE_MOVE"],parameters:[0,1,"MouseEventTypeMove"]}],TriggerRegisterPlayerEventVictory:{test:[2,"EVENT_PLAYER_VICTORY"],parameters:[0,1]},TriggerRegisterPlayerEventDefeat:{test:[2,"EVENT_PLAYER_DEFEAT"],parameters:[0,1]},TriggerRegisterPlayerEventLeave:{test:[2,"EVENT_PLAYER_LEAVE"],parameters:[0,1]},TriggerRegisterPlayerEventAllianceChanged:{test:[2,"EVENT_PLAYER_ALLIANCE_CHANGED"],parameters:[0,1]},TriggerRegisterPlayerEventEndCinematic:{test:[2,"EVENT_PLAYER_END_CINEMATIC"],parameters:[0,1]}}),TriggerRegisterPlayerUnitEvent:a.default({TriggerRegisterPlayerUnitEventSimple:{test:[3,"null"],parameters:[0,1,2]}}),GetLearnedSkill:e("GetLearnedSkillBJ"),GetKillingUnit:e("GetKillingUnitBJ"),GetTransportUnit:e("GetTransportUnitBJ"),GetLoadedUnit:e("GetLoadedUnitBJ"),GetIssuedOrderId:e("GetIssuedOrderIdBJ"),TriggerRegisterUnitStateEvent:a.default({TriggerRegisterUnitLifeEvent:{test:[1,"UNIT_STATE_LIFE"],parameters:[0,2,3]},TriggerRegisterUnitManaEvent:{test:[1,"UNIT_STATE_MANA"],parameters:[0,2,3]}}),TriggerWaitForSound:e("WaitForSoundBJ"),GetWidgetLife:e("GetItemLifeBJ"),SetWidgetLife:e("SetItemLifeBJ"),SetDestructableInvulnerable:e("SetDestructableInvulnerableBJ"),IsDestructableInvulnerable:e("IsDestructableInvulnerableBJ"),EnumDestructablesInRect:a.default({EnumDestructablesInRectAll:{test:[1,"null"],parameters:[0,2]}}),SetDestructableMaxLife:e("SetDestructableMaxLifeBJ"),QueueDestructableAnimation:e("QueueDestructableAnimationBJ"),SetDestructableAnimation:e("SetDestructableAnimationBJ"),SetDestructableAnimationSpeed:a.default({SetDestAnimationSpeedPercent:{parameters:[0,[1,"*",100]]}}),ShowDestructable:n("ShowDestructableBJ"),GetTriggerDestructable:e("GetDyingDestructable"),SetItemDropOnDeath:e("SetItemDropOnDeathBJ"),SetItemDroppable:e("SetItemDroppableBJ"),SetItemPlayer:e("SetItemPlayerBJ"),SetItemInvulnerable:e("SetItemInvulnerableBJ"),SetItemVisible:n("SetItemVisibleBJ"),IsItemOwned:a.default({CheckItemStatus:{parameters:[0,"ItemStatusOwned"]}}),IsItemPowerup:a.default({CheckItemStatus:{parameters:[0,"ItemStatusPowerup"]}}),IsItemSellable:a.default({CheckItemStatus:{parameters:[0,"ItemStatusSellable"]}}),IsItemPawnable:a.default({CheckItemStatus:{parameters:[0,"ItemStatusPawnable"]}}),IsItemIdPowerup:a.default({CheckItemcodeStatus:{parameters:[0,"ItemcodeStatusPowerup"]}}),IsItemIdSellable:a.default({CheckItemcodeStatus:{parameters:[0,"ItemcodeStatusSellable"]}}),IsItemIdPawnable:a.default({CheckItemcodeStatus:{parameters:[0,"ItemcodeStatusPawnable"]}}),EnumItemsInRect:a.default({EnumItemsInRectBJ:{test:[1,"null"],parameters:[0,2]}}),ShowUnit:a.default({ShowUnitShow:{test:[1,"true"],parameters:[0]},ShowUnitHide:{test:[1,"false"],parameters:[0]}}),SetUnitState:a.default({SetUnitLifeBJ:{test:[1,"UNIT_STATE_LIFE"],parameters:[0,2]},SetUnitManaBJ:{test:[1,"UNIT_STATE_MANA"],parameters:[0,2]}}),SetUnitFlyHeight:e("SetUnitFlyHeightBJ"),SetUnitTurnSpeed:e("SetUnitTurnSpeedBJ"),SetUnitAcquireRange:e("SetUnitAcquireRangeBJ"),SetUnitCreepGuard:a.default({LockGuardPosition:{test:[1,"true"],parameters:[0]}}),GetUnitDefaultPropWindow:e("GetUnitDefaultPropWindowBJ"),SetUnitScale:a.default({SetUnitScalePercent:{parameters:[0,[1,"*",100],[2,"*",100],[3,"*",100]]}}),SetUnitTimeScale:a.default({SetUnitTimeScalePercent:{parameters:[0,[1,"*",100]]}}),SetUnitBlendTime:e("SetUnitBlendTimeBJ"),QueueUnitAnimation:e("QueueUnitAnimationBJ"),SetUnitAnimation:a.default({ResetUnitAnimation:{test:[1,'"stand"'],parameters:[0]}}),AddUnitAnimationProperties:c("AddUnitAnimationPropertiesBJ"),SetHeroStr:a.default({ModifyHeroStat:{test:[2,"true"],parameters:["HeroStatStr",0,"ModifyMethodSet",1]}}),SetHeroAgi:a.default({ModifyHeroStat:{test:[2,"true"],parameters:["HeroStatAgi",0,"ModifyMethodSet",1]}}),SetHeroInt:a.default({ModifyHeroStat:{test:[2,"true"],parameters:["HeroStatInt",0,"ModifyMethodSet",1]}}),GetHeroStr:a.default({GetHeroStatBJ:{parameters:["HeroStatStr",0,1]}}),GetHeroAgi:a.default({GetHeroStatBJ:{parameters:["HeroStatAgi",0,1]}}),GetHeroInt:a.default({GetHeroStatBJ:{parameters:["HeroStatInt",0,1]}}),UnitModifySkillPoints:a.default({ModifyHeroSkillPoints:{parameters:[0,"0",1]}}),AddHeroXP:i("AddHeroXPSwapped"),GetUnitAbilityLevel:n("GetUnitAbilityLevelSwapped"),DecUnitAbilityLevel:n("DecUnitAbilityLevelSwapped"),IncUnitAbilityLevel:n("IncUnitAbilityLevelSwapped"),SetUnitAbilityLevel:i("SetUnitAbilityLevelSwapped"),SetUnitExploded:e("SetUnitExplodedBJ"),PauseUnit:n("PauseUnitBJ"),IsUnitPaused:e("IsUnitPausedBJ"),SelectUnit:a.default({SelectUnitAdd:{test:[1,"true"],parameters:[0]},SelectUnitRemove:{test:[1,"false"],parameters:[0]}}),UnitAddItem:n("UnitAddItemSwapped"),UnitRemoveItem:n("UnitRemoveItemSwapped"),UnitRemoveItemFromSlot:a.default({UnitRemoveItemFromSlotSwapped:{parameters:[0,[1,"+",1]]}}),UnitItemInSlot:a.default({UnitItemInSlotBJ:{parameters:[0,[1,"+",1]]}}),UnitInventorySize:e("UnitInventorySizeBJ"),UnitDropItemSlot:a.default({UnitDropItemSlotBJ:{parameters:[0,1,[2,"+",1]]}}),UnitDropItemTarget:e("UnitDropItemTargetBJ"),GetUnitState:n("GetUnitStateSwap"),SetUnitUseFood:n("SetUnitUseFoodBJ"),IsUnitOwnedByPlayer:r.transformerIsUnitOwnedByPlayer,IsUnitRace:r.transformerIsUnitRace,IsUnitType:r.transformerIsUnitType,IsUnitHidden:e("IsUnitHiddenBJ"),IsUnitIllusion:e("IsUnitIllusionBJ"),IsUnitInTransport:e("IsUnitInTransportBJ"),IsUnitLoaded:e("IsUnitLoadedBJ"),UnitShareVision:u("UnitShareVisionBJ"),UnitSuspendDecay:n("UnitSuspendDecayBJ"),UnitAddType:n("UnitAddTypeBJ"),UnitRemoveType:n("UnitRemoveTypeBJ"),UnitAddAbility:n("UnitAddAbilityBJ"),UnitRemoveAbility:n("UnitRemoveAbilityBJ"),UnitRemoveBuffs:a.default({UnitRemoveBuffsBJ:[{tests:[[1,"true"],[2,"false"]],parameters:["BuffTypePositive",0]},{tests:[[1,"false"],[2,"true"]],parameters:["BuffTypeNegative",0]},{tests:[[1,"true"],[2,"true"]],parameters:["BuffTypeAll",0]}]}),UnitRemoveBuffsEx:a.default({UnitRemoveBuffsBJ:{tests:[[1,"true"],[2,"true"],[3,"false"],[4,"false"],[5,"false"],[6,"true"],[7,"false"]],parameters:["BuffTypeNonTLife",0]}}),UnitAddSleep:e("UnitSetCanSleepBJ"),UnitCanSleep:e("UnitCanSleepBJ"),UnitIsSleeping:e("UnitIsSleepingBJ"),UnitWakeUp:e("UnitWakeUpBJ"),UnitApplyTimedLife:c("UnitApplyTimedLifeBJ"),UnitPauseTimedLife:n("UnitPauseTimedLifeBJ"),UnitSetUsesAltIcon:n("UnitSetUsesAltIconBJ"),UnitDamageTarget:a.default({UnitDamageTargetBJ:{tests:[[3,"true"],[4,"false"],[7,"WEAPON_TYPE_WHOKNOWS"]],parameters:[0,1,2,5,6]}}),IssueImmediateOrderById:e("IssueTrainOrderByIdBJ"),AddResourceAmount:n("AddResourceAmountBJ"),WaygateActivate:n("WaygateActivateBJ"),WaygateIsActive:e("WaygateIsActiveBJ"),AddItemToStock:h("AddItemToStockBJ"),AddUnitToStock:h("AddUnitToStockBJ"),RemoveItemFromStock:n("RemoveItemFromStockBJ"),RemoveUnitFromStock:n("RemoveUnitFromStockBJ"),Player:a.default({ConvertedPlayer:{parameters:[[0,"+",1]]}}),SetPlayerHandicap:a.default({SetPlayerHandicapBJ:{parameters:[0,[1,"*",100]]}}),SetPlayerHandicapXP:a.default({SetPlayerHandicapXPBJ:{parameters:[0,[1,"*",100]]}}),SetPlayerTechMaxAllowed:o("SetPlayerTechMaxAllowedSwap"),GetPlayerTechMaxAllowed:n("GetPlayerTechMaxAllowedSwap"),SetPlayerTechResearched:o("SetPlayerTechResearchedSwap"),GetPlayerTechCount:a.default({GetPlayerTechCountSimple:{test:[2,"true"],parameters:[1,0]}}),SetPlayerAbilityAvailable:c("SetPlayerAbilityAvailableBJ"),FogMaskEnable:a.default({FogMaskEnableOn:{test:[0,"true"],parameters:[]},FogMaskEnableOff:{test:[0,"false"],parameters:[]}}),FogEnable:a.default({FogEnableOn:{test:[0,"true"],parameters:[]},FogEnableOff:{test:[0,"false"],parameters:[]}}),SetCampaignMenuRace:a.default({SetCampaignMenuRaceBJ:[{test:[0,"RACE_OTHER"],parameters:["CampaignIndexT"]},{test:[0,"RACE_HUMAN"],parameters:["CampaignIndexH"]},{test:[0,"RACE_UNDEAD"],parameters:["CampaignIndexU"]},{test:[0,"RACE_ORC"],parameters:["CampaignIndexO"]},{test:[0,"RACE_NIGHTELF"],parameters:["CampaignIndexN"]}]}),SetCampaignMenuRaceEx:a.default({SetCampaignMenuRaceBJ:[{test:[0,"bj_CAMPAIGN_OFFSET_XN"],parameters:["CampaignIndexXN"]},{test:[0,"bj_CAMPAIGN_OFFSET_XH"],parameters:["CampaignIndexXH"]},{test:[0,"bj_CAMPAIGN_OFFSET_XU"],parameters:["CampaignIndexXU"]},{test:[0,"bj_CAMPAIGN_OFFSET_XO"],parameters:["CampaignIndexXO"]}]}),LoadGame:e("LoadGameBJ"),RenameSaveDirectory:e("RenameSaveDirectoryBJ"),RemoveSaveDirectory:e("RemoveSaveDirectoryBJ"),CopySaveGame:e("CopySaveGameBJ"),GetFloatGameState:a.default({GetTimeOfDay:{test:[0,"GAME_STATE_TIME_OF_DAY"],parameters:[]}}),SetFloatGameState:a.default({SetTimeOfDay:{test:[0,"GAME_STATE_TIME_OF_DAY"],parameters:[1]}}),SetCustomCampaignButtonVisible:a.default({ShowCustomCampaignButton:{parameters:[[0,"+",1],1]}}),GetCustomCampaignButtonVisible:a.default({IsCustomCampaignButtonVisibile:{parameters:[[0,"+",1]]}}),DialogClear:e("DialogClearBJ"),DialogSetMessage:e("DialogSetMessageBJ"),DialogDisplay:c("DialogDisplayBJ"),InitGameCache:e("InitGameCacheBJ"),SaveGameCache:e("SaveGameCacheBJ"),StoreInteger:m("StoreIntegerBJ"),StoreReal:m("StoreRealBJ"),StoreBoolean:m("StoreBooleanBJ"),StoreUnit:m("StoreUnitBJ"),StoreString:m("StoreStringBJ"),HaveStoredBoolean:a.default({HaveStoredValue:{parameters:[2,"CacheValueTypeBoolean",1,0]}}),HaveStoredInteger:a.default({HaveStoredValue:{parameters:[2,"CacheValueTypeInteger",1,0]}}),HaveStoredReal:a.default({HaveStoredValue:{parameters:[2,"CacheValueTypeReal",1,0]}}),HaveStoredUnit:a.default({HaveStoredValue:{parameters:[2,"CacheValueTypeUnit",1,0]}}),HaveStoredString:a.default({HaveStoredValue:{parameters:[2,"CacheValueTypeString",1,0]}}),FlushGameCache:e("FlushGameCacheBJ"),FlushStoredMission:n("FlushStoredMissionBJ"),GetStoredInteger:c("GetStoredIntegerBJ"),GetStoredReal:c("GetStoredRealBJ"),GetStoredBoolean:c("GetStoredBooleanBJ"),GetStoredString:c("GetStoredStringBJ"),InitHashtable:e("InitHashtableBJ"),SaveInteger:m("SaveIntegerBJ"),SaveReal:m("SaveRealBJ"),SaveBoolean:m("SaveBooleanBJ"),SaveStr:m("SaveStringBJ"),SavePlayerHandle:m("SavePlayerHandleBJ"),SaveWidgetHandle:m("SaveWidgetHandleBJ"),SaveDestructableHandle:m("SaveDestructableHandleBJ"),SaveItemHandle:m("SaveItemHandleBJ"),SaveUnitHandle:m("SaveUnitHandleBJ"),SaveAbilityHandle:m("SaveAbilityHandleBJ"),SaveTimerHandle:m("SaveTimerHandleBJ"),SaveTriggerHandle:m("SaveTriggerHandleBJ"),SaveTriggerConditionHandle:m("SaveTriggerConditionHandleBJ"),SaveTriggerActionHandle:m("SaveTriggerActionHandleBJ"),SaveTriggerEventHandle:m("SaveTriggerEventHandleBJ"),SaveForceHandle:m("SaveForceHandleBJ"),SaveGroupHandle:m("SaveGroupHandleBJ"),SaveLocationHandle:m("SaveLocationHandleBJ"),SaveRectHandle:m("SaveRectHandleBJ"),SaveBooleanExprHandle:m("SaveBooleanExprHandleBJ"),SaveSoundHandle:m("SaveSoundHandleBJ"),SaveEffectHandle:m("SaveEffectHandleBJ"),SaveUnitPoolHandle:m("SaveUnitPoolHandleBJ"),SaveItemPoolHandle:m("SaveItemPoolHandleBJ"),SaveQuestHandle:m("SaveQuestHandleBJ"),SaveQuestItemHandle:m("SaveQuestItemHandleBJ"),SaveDefeatConditionHandle:m("SaveDefeatConditionHandleBJ"),SaveTimerDialogHandle:m("SaveTimerDialogHandleBJ"),SaveLeaderboardHandle:m("SaveLeaderboardHandleBJ"),SaveMultiboardHandle:m("SaveMultiboardHandleBJ"),SaveMultiboardItemHandle:m("SaveMultiboardItemHandleBJ"),SaveTrackableHandle:m("SaveTrackableHandleBJ"),SaveDialogHandle:m("SaveDialogHandleBJ"),SaveButtonHandle:m("SaveButtonHandleBJ"),SaveTextTagHandle:m("SaveTextTagHandleBJ"),SaveLightningHandle:m("SaveLightningHandleBJ"),SaveImageHandle:m("SaveImageHandleBJ"),SaveUbersplatHandle:m("SaveUbersplatHandleBJ"),SaveRegionHandle:m("SaveRegionHandleBJ"),SaveFogStateHandle:m("SaveFogStateHandleBJ"),SaveFogModifierHandle:m("SaveFogModifierHandleBJ"),LoadInteger:c("LoadIntegerBJ"),LoadReal:c("LoadRealBJ"),LoadBoolean:c("LoadBooleanBJ"),LoadStr:c("LoadStringBJ"),LoadPlayerHandle:c("LoadPlayerHandleBJ"),LoadWidgetHandle:c("LoadWidgetHandleBJ"),LoadDestructableHandle:c("LoadDestructableHandleBJ"),LoadItemHandle:c("LoadItemHandleBJ"),LoadUnitHandle:c("LoadUnitHandleBJ"),LoadAbilityHandle:c("LoadAbilityHandleBJ"),LoadTimerHandle:c("LoadTimerHandleBJ"),LoadTriggerHandle:c("LoadTriggerHandleBJ"),LoadTriggerConditionHandle:c("LoadTriggerConditionHandleBJ"),LoadTriggerActionHandle:c("LoadTriggerActionHandleBJ"),LoadTriggerEventHandle:c("LoadTriggerEventHandleBJ"),LoadForceHandle:c("LoadForceHandleBJ"),LoadGroupHandle:c("LoadGroupHandleBJ"),LoadLocationHandle:c("LoadLocationHandleBJ"),LoadRectHandle:c("LoadRectHandleBJ"),LoadBooleanExprHandle:c("LoadBooleanExprHandleBJ"),LoadSoundHandle:c("LoadSoundHandleBJ"),LoadEffectHandle:c("LoadEffectHandleBJ"),LoadUnitPoolHandle:c("LoadUnitPoolHandleBJ"),LoadItemPoolHandle:c("LoadItemPoolHandleBJ"),LoadQuestHandle:c("LoadQuestHandleBJ"),LoadQuestItemHandle:c("LoadQuestItemHandleBJ"),LoadDefeatConditionHandle:c("LoadDefeatConditionHandleBJ"),LoadTimerDialogHandle:c("LoadTimerDialogHandleBJ"),LoadLeaderboardHandle:c("LoadLeaderboardHandleBJ"),LoadMultiboardHandle:c("LoadMultiboardHandleBJ"),LoadMultiboardItemHandle:c("LoadMultiboardItemHandleBJ"),LoadTrackableHandle:c("LoadTrackableHandleBJ"),LoadDialogHandle:c("LoadDialogHandleBJ"),LoadButtonHandle:c("LoadButtonHandleBJ"),LoadTextTagHandle:c("LoadTextTagHandleBJ"),LoadLightningHandle:c("LoadLightningHandleBJ"),LoadImageHandle:c("LoadImageHandleBJ"),LoadUbersplatHandle:c("LoadUbersplatHandleBJ"),LoadRegionHandle:c("LoadRegionHandleBJ"),LoadFogStateHandle:c("LoadFogStateHandleBJ"),LoadFogModifierHandle:c("LoadFogModifierHandleBJ"),HaveSavedBoolean:a.default({HaveSavedValue:{parameters:[2,"HashtableValueTypeBoolean",1,0]}}),HaveSavedInteger:a.default({HaveSavedValue:{parameters:[2,"HashtableValueTypeInteger",1,0]}}),HaveSavedReal:a.default({HaveSavedValue:{parameters:[2,"HashtableValueTypeReal",1,0]}}),HaveSavedString:a.default({HaveSavedValue:{parameters:[2,"HashtableValueTypeString",1,0]}}),HaveSavedHandle:a.default({HaveSavedValue:{parameters:[2,"HashtableValueTypeHandle",1,0]}}),FlushParentHashtable:e("FlushParentHashtableBJ"),FlushChildHashtable:n("FlushChildHashtableBJ"),ChooseRandomCreep:e("ChooseRandomCreepBJ"),ChooseRandomNPBuilding:e("ChooseRandomNPBuildingBJ"),ChooseRandomItem:e("ChooseRandomItemBJ"),ChooseRandomItemEx:n("ChooseRandomItemExBJ"),ResetTerrainFog:e("ResetTerrainFogBJ"),SetTerrainFogEx:a.default({SetTerrainFogExBJ:{parameters:[0,1,2,3,[4,"*",100],[5,"*",100],[6,"*",100]]}}),SetTimeOfDayScale:a.default({SetTimeOfDayScalePercentBJ:{parameters:[[0,"*",100]]}}),PauseGame:a.default({PauseGameOn:{test:[0,"true"],parameters:[]},PauseGameOff:{test:[0,"false"],parameters:[]}}),DestroyTextTag:e("DestroyTextTagBJ"),SetTextTagPosUnit:e("SetTextTagPosUnitBJ"),SetTextTagSuspended:e("SetTextTagSuspendedBJ"),SetTextTagPermanent:e("SetTextTagPermanentBJ"),SetTextTagAge:e("SetTextTagAgeBJ"),SetTextTagLifespan:e("SetTextTagLifespanBJ"),SetTextTagFadepoint:e("SetTextTagFadepointBJ"),DestroyQuest:e("DestroyQuestBJ"),QuestSetTitle:e("QuestSetTitleBJ"),QuestSetDescription:e("QuestSetDescriptionBJ"),QuestSetCompleted:e("QuestSetCompletedBJ"),QuestSetDiscovered:e("QuestSetDiscoveredBJ"),QuestSetFailed:e("QuestSetFailedBJ"),QuestSetEnabled:n("QuestSetEnabledBJ"),QuestItemSetDescription:e("QuestItemSetDescriptionBJ"),QuestItemSetCompleted:e("QuestItemSetCompletedBJ"),DestroyDefeatCondition:e("DestroyDefeatConditionBJ"),DefeatConditionSetDescription:e("DefeatConditionSetDescriptionBJ"),FlashQuestDialogButton:e("FlashQuestDialogButtonBJ"),DestroyTimerDialog:e("DestroyTimerDialogBJ"),TimerDialogSetTitle:e("TimerDialogSetTitleBJ"),TimerDialogDisplay:n("TimerDialogDisplayBJ"),DestroyLeaderboard:e("DestroyLeaderboardBJ"),LeaderboardDisplay:n("LeaderboardDisplayBJ"),LeaderboardRemovePlayerItem:n("LeaderboardRemovePlayerItemBJ"),LeaderboardSortItemsByValue:a.default({LeaderboardSortItemsBJ:{parameters:[0,"LeaderboardSortByValue",1]}}),LeaderboardSortItemsByPlayer:a.default({LeaderboardSortItemsBJ:{parameters:[0,"LeaderboardSortByPlayer",1]}}),LeaderboardSortItemsByLabel:a.default({LeaderboardSortItemsBJ:{parameters:[0,"LeaderboardSortByLabel",1]}}),LeaderboardHasPlayerItem:e("LeaderboardHasPlayerItemBJ"),LeaderboardSetLabel:e("LeaderboardSetLabelBJ"),PlayerGetLeaderboard:e("PlayerGetLeaderboardBJ"),LeaderboardSetStyle:e("LeaderboardSetStyleBJ"),DestroyMultiboard:e("DestroyMultiboardBJ"),MultiboardDisplay:n("MultiboardDisplayBJ"),MultiboardMinimize:n("MultiboardMinimizeBJ"),CameraSetupGetField:n("CameraSetupGetFieldSwap"),CameraSetSmoothingFactor:e("CameraSetSmoothingFactorBJ"),DisplayCineFilter:e("DisplayCineFilterBJ"),ForceCinematicSubtitles:e("ForceCinematicSubtitlesBJ"),SetSoundDistanceCutoff:e("SetSoundDistanceCutoffBJ"),SetSoundPitch:e("SetSoundPitchBJ"),AttachSoundToUnit:e("AttachSoundToUnitBJ"),StopSound:a.default({StopSoundBJ:{test:[1,"false"],parameters:[0,2]}}),KillSoundWhenDone:e("KillSoundWhenDoneBJ"),SetMapMusic:a.default({SetMapMusicIndexedBJ:{test:[1,"false"],parameters:[0,2]},SetMapMusicRandomBJ:{tests:[[1,"true"],[2,"0"]],parameters:[0]}}),ClearMapMusic:e("ClearMapMusicBJ"),PlayMusic:e("PlayMusicBJ"),StopMusic:e("StopMusicBJ"),ResumeMusic:e("ResumeMusicBJ"),PlayThematicMusic:e("PlayThematicMusicBJ"),EndThematicMusic:e("EndThematicMusicBJ"),VolumeGroupSetVolume:a.default({VolumeGroupSetVolumeBJ:{parameters:[0,[1,"*",100]]}}),AddWeatherEffect:e("AddWeatherEffectSaveLast"),RemoveWeatherEffect:e("RemoveWeatherEffectBJ"),AddSpecialEffectLoc:n("AddSpecialEffectLocBJ"),AddSpecialEffectTarget:c("AddSpecialEffectTargetUnitBJ"),DestroyEffect:e("DestroyEffectBJ"),DestroyLightning:e("DestroyLightningBJ"),GetLightningColorA:e("GetLightningColorABJ"),GetLightningColorR:e("GetLightningColorRBJ"),GetLightningColorG:e("GetLightningColorGBJ"),GetLightningColorB:e("GetLightningColorBBJ"),SetLightningColor:e("SetLightningColorBJ"),GetAbilityEffectById:e("GetAbilityEffectBJ"),GetAbilitySoundById:e("GetAbilitySoundBJ"),ShowImage:n("ShowImageBJ"),ShowUbersplat:n("ShowUbersplatBJ"),SetBlightRect:u("SetBlightRectBJ"),SetBlightLoc:f("SetBlightRadiusLocBJ"),SetDoodadAnimationRect:a.default({SetDoodadAnimationRectBJ:{test:[3,"false"],parameters:[2,1,0]}})}}}();let n=l[t.name];return n?n(e,t):i.default(e,t)}},4760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(831);let r,i=!1;t.default=function(e,t){i||function(){if(!i){function e(e){return function(t,n){let r=new a.default;return r.name=e,r.type=t.triggerData.getFunctionType(e),n.value=e,n.type=2,n.subParameters=r,!0}}i=!0,r={bj_forLoopAIndex:e("GetForLoopIndexA"),bj_forLoopBIndex:e("GetForLoopIndexB"),bj_queuedExecTotal:e("QueuedTriggerCountBJ"),bj_mapInitialCameraBounds:e("GetCameraBoundsMapRect"),bj_mapInitialPlayableArea:e("GetPlayableMapRect"),bj_lastCreatedWeatherEffect:e("GetLastCreatedWeatherEffect"),bj_lastCreatedTerrainDeformation:e("GetLastCreatedTerrainDeformation"),bj_lastCreatedLightning:e("GetLastCreatedLightningBJ"),bj_lastCreatedFogModifier:e("GetLastCreatedFogModifier"),bj_lastCreatedImage:e("GetLastCreatedImage"),bj_lastCreatedUbersplat:e("GetLastCreatedUbersplat"),bj_lastPlayedSound:e("GetLastPlayedSound"),bj_lastPlayedMusic:e("GetLastPlayedMusic"),bj_useDawnDuskSounds:e("IsDawnDuskEnabled"),bj_lastCreatedEffect:e("GetLastCreatedEffectBJ"),bj_lastCreatedItem:e("GetLastCreatedItem"),bj_lastRemovedItem:e("GetLastRemovedItem"),bj_lastCreatedUnit:e("GetLastCreatedUnit"),bj_lastReplacedUnit:e("GetLastReplacedUnitBJ"),bj_lastCreatedDestructable:e("GetLastCreatedDestructable"),bj_FORCE_ALL_PLAYERS:e("GetPlayersAll"),bj_lastCreatedButton:e("GetLastCreatedButtonBJ"),bj_lastCreatedQuest:e("GetLastCreatedQuestBJ"),bj_lastCreatedQuestItem:e("GetLastCreatedQuestItemBJ"),bj_lastCreatedDefeatCondition:e("GetLastCreatedDefeatConditionBJ"),bj_lastStartedTimer:e("GetLastCreatedTimerBJ"),bj_lastCreatedTimerDialog:e("GetLastCreatedTimerDialogBJ"),bj_lastCreatedLeaderboard:e("GetLastCreatedLeaderboard"),bj_lastCreatedMultiboard:e("GetLastCreatedMultiboard"),bj_lastCreatedTextTag:e("GetLastCreatedTextTag"),bj_lastTransmissionDuration:e("GetLastTransmissionDurationBJ"),bj_lastCreatedGameCache:e("GetLastCreatedGameCacheBJ"),bj_lastCreatedHashtable:e("GetLastCreatedHashtableBJ"),bj_lastLoadedUnit:e("GetLastRestoredUnitBJ"),bj_lastHauntedGoldMine:e("GetLastHauntedGoldMine")}}}();let n=r[t.value];return!!n&&n(e,t)}},3354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformerIsUnitType=t.transformerIsUnitRace=t.transformerIsUnitOwnedByPlayer=void 0;const a=n(1751);t.transformerIsUnitOwnedByPlayer=function(e,t){let n,r=e.stack[1],i=e.stack[2],l=i.parameters;if("OperatorCompareBoolean"!==i.name)return!1;n=i.parameters[0]===r?l[2]:l[0];let s=a.convertParameterInline(e,n,"boolean");if("true"!==s&&"false"!==s)return!1;i.name="OperatorComparePlayer";let o=t.parameters[1];return r.value="GetOwningPlayer",t.name="GetOwningPlayer",t.parameters.length=1,l[0]=r,l[1].value="true"===s?"OperatorEqualENE":"OperatorNotEqualENE",l[2]=o,!0},t.transformerIsUnitRace=function(e,t){let n,r=e.stack[1],i=e.stack[2],l=i.parameters;if("OperatorCompareBoolean"!==i.name)return!1;n=i.parameters[0]===r?l[2]:l[0];let s=a.convertParameterInline(e,n,"boolean");if("true"!==s&&"false"!==s)return!1;i.name="OperatorCompareRace";let o=t.parameters[1];r.value="GetUnitRace",t.name="GetUnitRace",t.parameters.length=1,l[0]=r;let u="OperatorEqualENE"===l[1].value,c="true"===s;return l[1].value=u===c?"OperatorEqualENE":"OperatorNotEqualENE",l[1]=o,!0},t.transformerIsUnitType=function(e,t){return"OperatorCompareBoolean"===e.stack[2].name&&("UNIT_TYPE_DEAD"===a.convertParameterInline(e,t.parameters[1],"unittype")&&(e.stack[1].value="IsUnitDeadBJ",t.name="IsUnitDeadBJ",t.parameters.length=1,!0))}},1193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9305),r=n(831),i=n(1751);function l(e,t,n,a,r){let l=t.parameters,s=[];a.test&&s.push(a.test),a.tests&&s.push(...a.tests);for(let[t,a]of s)if(void 0===r[t]&&(r[t]=i.convertParameterInline(e,l[t],n[t])),a!==r[t])return!1;return!0}function s(e,t,n){if(t.name=n,t.type=e.triggerData.getFunctionType(n),t instanceof r.default){e.stack[1].value=n}}function o(e,t,n,i){if(i.parameters){let l=t.parameters;t.parameters=i.parameters.map((t=>{if("number"==typeof t)return l[t];if("string"==typeof t){let n=new a.default;return e.triggerData.getPreset(t)?n.type=0:n.type=3,n.value=t,n}{let e,i,s=t[0],o=t[1],u=t[2],c=n[s];if("integer"===c)e="OperatorInt";else{if("real"!==c)throw new Error(`Attempted to use an operator on a non-number parameter of type "${c}`);e="OperatorReal"}i="+"===o?"OperatorAdd":"-"===o?"OperatorSubtract":"*"===o?"OperatorMultiply":"OperatorDivide";let d=new a.default;d.value=e,d.type=2;let h=new r.default;h.name=e,h.type=3;let f=l[s],_=new a.default;_.type=0,_.value=i;let m=new a.default;return m.type=3,m.value=`${u}`,h.beginParameters=1,h.parameters=[f,_,m],d.subParameters=h,d}}))}}t.default=function(e){return function(t,n){let a=t.triggerData.getFunction(n.type,n.name);if(!a)return console.warn(`transformer failed to get the signature for the input function: ${n.name}`),!1;let r=a.args,i=[];for(let[a,u]of Object.entries(e)){Array.isArray(u)||(u=[u]);for(let e of u)if(l(t,n,r,e,i))return s(t,n,a),o(t,n,r,e),!0}return!1}}},1549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureNameSafety=t.ensureCustomScriptCodeSafety=t.isConditionECA=t.convertSingleToMultiple=t.createCustomScriptECA=t.createCustomScriptOrCommentECA=void 0;const a=n(9048),r=n(518),i=n(9305);function l(e,t){let n=new r.default;n.type=2,n.name=t?"CommentString":"CustomScriptCode",n.isEnabled=1;let a=new i.default;return a.type=3,a.value=e,n.parameters[0]=a,n}function s(e){return l(e,!1)}function o(e,t){let n=new r.default;return n.name=e.name,n.type=e.type,n.group=t,n.isEnabled=1,n.parameters.push(...e.parameters),n}t.createCustomScriptOrCommentECA=l,t.createCustomScriptECA=s,t.convertSingleToMultiple=function(e){if("IfThenElse"===e.name){let t=e.parameters,n=o(t[0].subParameters,0),a=o(t[1].subParameters,1),r=o(t[2].subParameters,2);return e.name="IfThenElseMultiple",e.parameters.length=0,e.ecas.push(n,a,r),!0}if("ForGroup"===e.name||"ForForce"===e.name){let t=o(e.parameters[1].subParameters,0);return e.name=`${e.name}Multiple`,e.parameters.length=1,e.ecas.push(t),!0}return!1},t.isConditionECA=function(e,t){return 0===t&&("AndMultiple"===e||"OrMultiple"===e||"IfThenElseMultiple"===e)};t.ensureCustomScriptCodeSafety=function(e){let t=[];for(let n of e)if("CustomScriptCode"===n.name){let e=n.parameters[0].value;if(a.byteLengthUtf8(e)>239){let r=a.splitUtf8ByteLength(e,239),i=r.length,l=i-1;for(let e=0;e<i;e++){let a="";e>0&&(a+="*/"),a+=r[e],e<l&&(a+="/*");let i=s(a);i.group=n.group,t.push(i)}}else t.push(n)}else t.push(n);return t},t.ensureNameSafety=function(e){return e.split("").map((e=>e.charCodeAt(0)>127?"_":e)).join("").replace(/\s/g,"_")}},7598:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3472),r=n(8794),i=n(7843),l=n(9417),s=n(1751);t.default=function(e,t,n){let o,u,c;try{o=e.readStringTable()}catch(e){return{ok:!1,error:`Failed to read the string table file: ${e}`}}if(!o)return{ok:!1,error:"The string table file doesn't exist"};let d=e.getScriptFile();if(d&&d.name.endsWith(".j"))try{t.addJassFunctions(d.text())}catch(e){}let h=new i.default(t,o);try{u=r.default(e,t,h)}catch(e){return{ok:!1,error:`Failed to read the triggers file: ${e}`}}if(!u)return{ok:!1,error:"The triggers file doesn't exist"};try{c=e.readCustomTextTriggers()}catch(e){return{ok:!1,error:`Failed to read the custom text triggers file: ${e}`}}if(!c)return{ok:!1,error:"The custom text triggers file doesn't exist"};let f=u.triggers,_=c.triggers,m=c.trigger;if(_.length<f.length)for(let e=0,t=f.length-_.length;e<t;e++)_.push(new a.default);for(let e=0,t=f.length;e<t;e++){let t=f[e],n=[];try{let a=l.processTrigger(h,t,n);if(a.convert){h.push(t);let r=s.convertTrigger(h,t,n);n.length&&(r=`${n.join("\r\n")}\r\n${r}`),_[e].text=r,t.ecas.length=0,t.isCustom=1,h.change("convertedtrigger",a.reason,_[e].text),h.pop()}else if(n.length){let e=n.join("\r\n");m.text+=`// Callbacks generated for trigger "${t.name}" due to conversions\r\n${e}\r\n`,h.change("generatedcallbacks",t.name,e)}}catch(e){return{ok:!1,error:`Error at ${h.stackToString()}: ${e}`}}}h.saveGUIReferences(f,_),e.set("war3map.wtg",u.save()),e.set("war3map.wct",c.save());try{u=e.readTriggers(n)}catch(e){return{ok:!1,error:`Failed to validate the triggers file: ${e}`}}return u?{ok:!0,changes:h.changes}:{ok:!1,error:"Failed to re-read the triggers file"}}},8412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="5.9.1"},3335:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.x=0,this.y=0,this.z=0,this.r=0}fromExtents(e,t){let n=e[0],a=e[1],r=e[2],i=t[0]-n,l=t[1]-a,s=t[2]-r;this.x=n+i/2,this.y=a+l/2,this.z=r+s/2,this.r=Math.max(0,Math.max(i,l,s)/2)}}},9894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=a.vec3.create(),l=a.vec3.create(),s=a.vec3.create(),o=a.quat.create(),u=a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_X,Math.PI/2);t.default=class{constructor(){this.isPerspective=!0,this.fov=0,this.aspect=0,this.isOrtho=!1,this.leftClipPlane=0,this.rightClipPlane=0,this.bottomClipPlane=0,this.topClipPlane=0,this.nearClipPlane=0,this.farClipPlane=0,this.location=a.vec3.create(),this.rotation=a.quat.create(),this.inverseRotation=a.quat.create(),this.viewMatrix=a.mat4.create(),this.projectionMatrix=a.mat4.create(),this.viewProjectionMatrix=a.mat4.create(),this.inverseViewMatrix=a.mat4.create(),this.inverseViewProjectionMatrix=a.mat4.create(),this.directionX=a.vec3.create(),this.directionY=a.vec3.create(),this.directionZ=a.vec3.create(),this.vectors=[a.vec3.fromValues(-1,-1,0),a.vec3.fromValues(-1,1,0),a.vec3.fromValues(1,1,0),a.vec3.fromValues(1,-1,0),a.vec3.fromValues(1,0,0),a.vec3.fromValues(0,1,0),a.vec3.fromValues(0,0,1)],this.billboardedVectors=[a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create()],this.planes=[a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create()]}perspective(e,t,n,a){this.isPerspective=!0,this.isOrtho=!1,this.fov=e,this.aspect=t,this.nearClipPlane=n,this.farClipPlane=a,this.update()}ortho(e,t,n,a,r,i){this.isPerspective=!1,this.isOrtho=!0,this.leftClipPlane=e,this.rightClipPlane=t,this.bottomClipPlane=n,this.topClipPlane=a,this.nearClipPlane=r,this.farClipPlane=i,this.update()}setLocation(e){a.vec3.copy(this.location,e),this.update()}move(e){a.vec3.add(this.location,this.location,e),this.update()}setRotation(e){a.quat.copy(this.rotation,e),this.update()}rotate(e){a.quat.mul(this.rotation,this.rotation,e),this.update()}face(e,t){a.quat.mul(this.rotation,u,r.quatLookAt(o,e,this.location,t)),this.update()}moveToAndFace(e,t,n){a.vec3.copy(this.location,e),this.face(t,n)}reset(){a.vec3.set(this.location,0,0,0),a.quat.identity(this.rotation),this.update()}update(){let e=this.location,t=this.rotation,n=this.inverseRotation,l=this.viewMatrix,s=this.projectionMatrix,o=this.viewProjectionMatrix,u=this.vectors,c=this.billboardedVectors;this.isPerspective?a.mat4.perspective(s,this.fov,this.aspect,this.nearClipPlane,this.farClipPlane):a.mat4.ortho(s,this.leftClipPlane,this.rightClipPlane,this.bottomClipPlane,this.topClipPlane,this.nearClipPlane,this.farClipPlane),a.mat4.fromQuat(l,t),a.mat4.translate(l,l,a.vec3.negate(i,e)),a.mat4.mul(o,s,l),a.mat4.invert(this.inverseViewMatrix,l),a.mat4.invert(this.inverseViewProjectionMatrix,o),r.unpackPlanes(this.planes,o),a.quat.conjugate(n,t),a.vec3.transformQuat(this.directionX,r.VEC3_UNIT_X,n),a.vec3.transformQuat(this.directionY,r.VEC3_UNIT_Y,n),a.vec3.transformQuat(this.directionZ,r.VEC3_UNIT_Z,n);for(let e=0;e<7;e++)a.vec3.transformQuat(c[e],u[e],n)}cameraToWorld(e,t){return a.vec3.transformMat4(e,t,this.inverseViewMatrix)}worldToCamera(e,t){return a.vec3.transformMat4(e,t,this.viewMatrix)}worldToScreen(e,t,n){return a.vec3.transformMat4(i,t,this.viewProjectionMatrix),e[0]=Math.round((i[0]+1)/2*n[2]),e[1]=Math.round((i[1]+1)/2*n[3]),e}screenToWorldRay(e,t,n){let o=i,u=l,c=s,d=t[0],h=t[1],f=this.inverseViewProjectionMatrix;return r.unproject(o,a.vec3.set(c,d,h,0),f,n),r.unproject(u,a.vec3.set(c,d,h,1),f,n),e.set(o,0),e.set(u,3),e}}},3984:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8533);t.default=class{constructor(e,t,n,a){this.plane=-1,this.instances=[],this.visible=!1,this.left=e,this.right=t,this.bottom=n,this.top=a}add(e){this.instances.push(e)}remove(e){let t=this.instances.indexOf(e);this.instances.splice(t,1)}clear(){this.instances.length=0}isVisible(e){return this.plane=a.testCell(e.planes,this.left,this.right,this.bottom,this.top,this.plane),-1===this.plane}}},7739:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.index=-1,this.health=0,this.emitter=e}}},823:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.objects=[],this.alive=0}add(e){this.objects[this.alive++]=e}update(e){let t=this.objects;for(let n=0;n<this.alive;n++){let a=t[n];a.update(e*a.emitter.instance.timeScale),a.health<=0&&(this.alive-=1,a.emitter.kill(a),n!==this.alive&&(t[n]=t[this.alive],n-=1))}}}},8488:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.objects=[],this.alive=0,this.currentEmission=0,this.instance=e}update(e){this.updateEmission(e);let t=this.currentEmission;if(t>=1)for(let e=0;e<t;e+=1)this.emit()}clear(){let e=this.objects;for(let t=0,n=this.alive;t<n;t++){e[t].health=0}this.currentEmission=0}emitObject(e){let t=this.objects;this.alive===t.length&&t.push(this.createObject());let n=t[this.alive];return n.index=this.alive,n.bind(e),this.alive+=1,this.currentEmission-=1,this.instance.scene.emittedObjectUpdater.add(n),n}kill(e){let t=this.objects;this.alive-=1;let n=t[this.alive];t[e.index]=n,t[this.alive]=e,n.index=e.index,e.index=-1}}},5952:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(583);class r extends a.Resource{constructor(e,t){super(t),this.data=null,this.data=e}}t.default=r},5957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t=4){this.size=0,this.arrayBuffer=null,this.byteView=null,this.floatView=null,this.gl=e,this.buffer=e.createBuffer(),this.reserve(t)}reserve(e){if(this.size<e){let t=this.gl;this.size=4*Math.ceil(e/4),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.size,t.DYNAMIC_DRAW),this.arrayBuffer=new ArrayBuffer(this.size),this.byteView=new Uint8Array(this.arrayBuffer),this.floatView=new Float32Array(this.arrayBuffer)}}bindAndUpdate(e=this.size){let t=this.gl,n=this.byteView;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferSubData(t.ARRAY_BUFFER,0,n.subarray(0,e))}}},3615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t=1,n=1){this.width=0,this.height=0,this.arrayBuffer=new ArrayBuffer(0),this.byteView=null,this.floatView=null,this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),this.reserve(t,n)}reserve(e,t){if(this.width<e||this.height<t){const n=this.gl;this.width=Math.max(this.width,e),this.height=Math.max(this.height,t),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.FLOAT,null),this.arrayBuffer=new ArrayBuffer(this.width*this.height*16),this.byteView=new Uint8Array(this.arrayBuffer),this.floatView=new Float32Array(this.arrayBuffer)}}bindAndUpdate(e=this.width,t=this.height){const n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,t,n.RGBA,n.FLOAT,this.byteView)}}},7564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t=4,n=1,a=1){this.width=0,this.height=0,this.gl=e,this.texture=e.createTexture(),this.format=3===t?e.RGB:e.RGBA,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),this.reserve(n,a)}reserve(e,t){if(this.width<e||this.height<t){const n=this.gl;this.width=Math.max(this.width,e),this.height=Math.max(this.height,t),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,n.FLOAT,null)}}bindAndUpdate(e,t=this.width,n=this.height){const a=this.gl;a.bindTexture(a.TEXTURE_2D,this.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,t,n,this.format,a.FLOAT,e)}bind(e){const t=this.gl;t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)}}},8057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5957),r=n(3615),i=n(7564),l=n(6691);t.default=class{constructor(e,t={alpha:!1}){this.currentShader=null,this.extensions={};let n=e.getContext("webgl",t);if(n||(n=e.getContext("experimental-webgl",t)),!n)throw new Error("WebGL: Failed to create a WebGL context!");let a=new Uint8ClampedArray(16).fill(255),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,2,2,0,n.RGBA,n.UNSIGNED_BYTE,a),this.gl=n,this.emptyTexture=r}ensureExtension(e){let t=this.gl.getExtension(e);return!!t&&(this.extensions[e]=t,!0)}createShader(e,t){let n=this.gl,a=n.createShader(n.VERTEX_SHADER);n.shaderSource(a,e),n.compileShader(a);let r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t),n.compileShader(r);let i=n.createProgram();if(n.attachShader(i,a),n.attachShader(i,r),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){let e="Shader failed to link:",t=n.getShaderInfoLog(a);t&&t.length&&(e+=` Vertex shader: ${t}`);let i=n.getShaderInfoLog(r);throw i&&i.length&&(e+=` Fragment shader: ${i}`),new Error(e)}return new l.default(this,i)}enableVertexAttribs(e,t){let n=this.gl;for(let a=e;a<t;a++)n.enableVertexAttribArray(a)}disableVertexAttribs(e,t){let n=this.gl;for(let a=e;a<t;a++)n.disableVertexAttribArray(a)}useShader(e){if(e&&e!==this.currentShader){let t=0,n=e.attribsCount;this.currentShader&&(t=this.currentShader.attribsCount),this.gl.useProgram(e.program),n>t?this.enableVertexAttribs(t,n):n<t&&this.disableVertexAttribs(n,t),this.currentShader=e}}bindTexture(e,t){let n=this.gl;n.activeTexture(n.TEXTURE0+t),e?n.bindTexture(n.TEXTURE_2D,e.webglResource):n.bindTexture(n.TEXTURE_2D,this.emptyTexture)}bindTextureAndWrap(e,t,n,a){let r=this.gl;r.activeTexture(r.TEXTURE0+t),e?r.bindTexture(r.TEXTURE_2D,e.webglResource):r.bindTexture(r.TEXTURE_2D,this.emptyTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a)}setTextureMode(e,t,n,a){let r=this.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,a)}createClientBuffer(e=4){return new a.default(this.gl,e)}createDataTexture(e=4,t=1,n=1){return new i.default(this.gl,e,t,n)}createClientDataTexture(e=1,t=1){return new r.default(this.gl,e,t)}}},7091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8057),r=n(6691),i=n(5957),l=n(7564),s=n(3615);t.default={WebGL:a.default,Shader:r.default,ClientBuffer:i.default,DataTexture:l.default,ClientDataTexture:s.default}},6691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.uniforms={},this.attribs={},this.attribsCount=0,this.webgl=e,this.program=t;let n=e.gl;for(let e=0,a=n.getProgramParameter(t,n.ACTIVE_UNIFORMS);e<a;e++){let a=n.getActiveUniform(t,e);if(a)if(1===a.size)this.uniforms[a.name]=n.getUniformLocation(t,a.name);else{let e=a.name.substr(0,a.name.length-3);for(let r=0;r<a.size;r++){let a=e+"["+r+"]";this.uniforms[a]=n.getUniformLocation(t,a)}}}for(let e=0,a=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);e<a;e++){let a=n.getActiveAttrib(t,e);if(a)if(this.attribsCount+=a.size,1===a.size)this.attribs[a.name]=n.getAttribLocation(t,a.name);else{let e=a.name.substr(0,a.name.length-3);for(let r=0;r<a.size;r++){let a=e+"["+r+"]";this.attribs[a]=n.getAttribLocation(t,a)}}}}use(){this.webgl.useShader(this)}}},1049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3984);t.default=class{constructor(e,t,n,r,i,l){this.cells=[];let s=n/i,o=r/l;this.x=e,this.y=t,this.width=n,this.depth=r,this.cellWidth=i,this.cellDepth=l,this.columns=s,this.rows=o;for(let n=0;n<o;n++)for(let r=0;r<s;r++){let o=e+r*i,u=o+i,c=t+n*l,d=c+l;this.cells[n*s+r]=new a.default(o,u,c,d)}}add(e){let t=this.cells,n=this.columns,a=e.left,r=e.right+1,i=e.bottom,l=e.top+1;if(-1!==a)for(let s=i;s<l;s++)for(let i=a;i<r;i++)t[s*n+i].add(e)}remove(e){let t=this.cells,n=this.columns,a=e.left,r=e.right+1,i=e.bottom,l=e.top+1;if(-1!==a){e.left=-1;for(let s=i;s<l;s++)for(let i=a;i<r;i++)t[s*n+i].remove(e)}}moved(e){let t=this.cellWidth,n=this.cellDepth,a=e.model.bounds,r=e.worldLocation[0]+a.x-this.x,i=e.worldLocation[1]+a.y-this.y,l=a.r,s=e.worldScale,o=Math.floor((r-l*s[0])/t),u=Math.floor((r+l*s[0])/t),c=Math.floor((i-l*s[1])/n),d=Math.floor((i+l*s[1])/n);u<0||o>this.columns-1||d<0||c>this.rows-1?this.remove(e):(o=Math.max(o,0),u=Math.min(u,this.columns-1),c=Math.max(c,0),d=Math.min(d,this.rows-1),o===e.left&&u===e.right&&c===e.bottom&&d===e.top||(this.remove(e),e.left=o,e.right=u,e.bottom=c,e.top=d,this.add(e)))}clear(){for(let e of this.cells)e.clear()}}},5330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerResource=void 0;const a=n(583);class r extends a.Resource{constructor(e){super(e),this.pathSolver=e.pathSolver}}t.HandlerResource=r},8858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2514),r=n(9169),i=n(994);t.default={isValidSource:e=>e instanceof a.BlpImage||r.default(e),resource:i.default}},994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6269),r=n(2514),i=n(1081);class l extends i.default{constructor(e,t){let n;super(t),e instanceof r.BlpImage?n=e:(n=new r.BlpImage,n.load(e));let i=this.viewer.gl,l=i.createTexture();i.bindTexture(i.TEXTURE_2D,l),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR);let s=a.isPowerOfTwo(n.width)&&a.isPowerOfTwo(n.height);s||(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE));let o=n.mipmaps();if(1===o||n.hasFakeMipmaps()||!s){let e=n.getMipmap(0);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)}else{i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR);let e=n.width,t=n.height;for(let a=0;a<o;a++){let r=n.getMipmap(a);i.texImage2D(i.TEXTURE_2D,a,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,r.data),e=Math.ceil(e/2),t=Math.ceil(t/2)}}this.width=n.width,this.height=n.height,this.webglResource=l}}t.default=l},3420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2730),r=n(5498),i=n(5286);t.default={load(e){e.webgl.ensureExtension("WEBGL_compressed_texture_s3tc")||console.warn("DDS: No compressed textures support! This might reduce performance.")},isValidSource:e=>e instanceof a.DdsImage||r.default(e),resource:i.default}},5286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2730),r=n(1081);class i extends r.default{constructor(e,t){let n;super(t),e instanceof a.DdsImage?n=e:(n=new a.DdsImage,n.load(e));let r=this.viewer,i=r.gl,l=r.webgl.extensions.WEBGL_compressed_texture_s3tc,s=n.format,o=0;l&&(s===a.FOURCC_DXT1?o=l.COMPRESSED_RGB_S3TC_DXT1_EXT:s===a.FOURCC_DXT3?o=l.COMPRESSED_RGBA_S3TC_DXT3_EXT:s===a.FOURCC_DXT5&&(o=l.COMPRESSED_RGBA_S3TC_DXT5_EXT));let u=i.createTexture();this.width=n.width,this.height=n.height,this.webglResource=u,i.bindTexture(i.TEXTURE_2D,u);let c=n.mipmaps();s!==a.FOURCC_DXT1&&s!==a.FOURCC_ATI2||i.pixelStorei(i.UNPACK_ALIGNMENT,2);for(let e=0;e<c;e++){let{width:t,height:r,data:l}=n.getMipmap(e,0!==o);o?i.compressedTexImage2D(i.TEXTURE_2D,e,o,t,r,0,l):s===a.FOURCC_DXT1?i.texImage2D(i.TEXTURE_2D,e,i.RGB,t,r,0,i.RGB,i.UNSIGNED_SHORT_5_6_5,l):s===a.FOURCC_DXT3||s===a.FOURCC_DXT5?i.texImage2D(i.TEXTURE_2D,e,i.RGBA,t,r,0,i.RGBA,i.UNSIGNED_BYTE,l):i.texImage2D(i.TEXTURE_2D,e,i.LUMINANCE_ALPHA,t,r,0,i.LUMINANCE_ALPHA,i.UNSIGNED_BYTE,l)}i.pixelStorei(i.UNPACK_ALIGNMENT,4),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),c>1?i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR):i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR)}}t.default=i},78:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8858),r=n(3420),i=n(5406),l=n(6072),s=n(6899),o=n(1090);t.default={blp:a.default,dds:r.default,m3:i.default,mdx:l.default,tga:s.default,War3MapViewer:o.default}},3732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e.name.get(),this.bone=e.bone}}},5225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.region=e,this.material=t}}},2225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){let t=e.flags;this.name=e.name.get(),this.parent=e.parent,this.location=e.location,this.rotation=e.rotation,this.scale=e.scale,this.visibility=e.visibility,this.inhertTranslation=1&t,this.inheritScale=2&t,this.inheritRotation=4&t,this.billboard1=16&t,this.billboard2=64&t,this.twoDProjection=256&t,this.animated=512&t,this.inverseKinematics=1024&t,this.skinned=2048&t,this.real=8192&t}}},8430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.bone=e.bone,this.name=e.name.get()}}},5406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2312),r=n(3349),i=n(9484),l=n(1545),s=n(6548);t.default={load(e){let t=e.gl,n=e.webgl,a=[[255,3,3],[0,66,255],[28,230,185],[84,0,129],[255,252,1],[254,138,14],[32,192,0],[229,91,176],[149,150,151],[126,191,241],[16,98,70],[78,42,4],[40,40,40],[0,0,0]];if(!n.ensureExtension("OES_texture_float"))throw new Error("M3: No float texture support!");let r=[];for(let e=0;e<4;e++){let i=n.createShader(`#define EXPLICITUV${e}\n${l.default}`,s.default);i.use();for(let e=0;e<14;e++){let n=a[e];t.uniform3f(i.uniforms["u_teamColors["+e+"]"],n[0]/255,n[1]/255,n[2]/255)}r[e]=i}e.sharedCache.set("m3",{standardShaders:r,lightPosition:new Float32Array([0,0,1e4])})},isValidSource:e=>e instanceof a.default||r.default(e),resource:i.default}},486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3652),r=n(5974),i={diffuse:1,decal:2,specular:3,gloss:4,emissive:5,emissive2:6,evio:7,evioMask:8,alphaMask:9,alphaMask2:10,normal:11,heightMap:12,lightMap:13,ao:14};t.default=class{constructor(e,t,n,a,l){this.active=0,this.layer=null,this.source="",this.texture=null,this.flags=0,this.colorChannels=0,this.type="",this.op=0,this.uvCoordinate=0,this.textureUnit=0,this.invert=0,this.clampResult=0,this.teamColorMode=0;let s=e.model;this.model=s,this.material=e,this.gl=e.gl,this.index=t;let o="u_"+a,u=o+"LayerSettings.";if(this.uniformMap={map:o+"Map",enabled:u+"enabled",op:u+"op",channels:u+"channels",teamColorMode:u+"teamColorMode",invert:u+"invert",clampResult:u+"clampResult",uvCoordinate:u+"uvCoordinate"},n.entries){let e=n.first();this.layer=e;let t=s.pathSolver,o=e.imagePath.get();if(o){let n=o.toLowerCase();if(n.length){this.source=n,this.active=1;let o=e.uvSource,u=e.flags;this.flags=u,this.colorChannels=e.colorChannelSetting,this.model=s,this.type=a,this.op=l;let c=0;1===o?c=1:9===o?c=2:10===o&&(c=3),this.uvCoordinate=c,this.textureUnit=i[a],this.invert=16&u,this.clampResult=32&u,"diffuse"===a&&(this.teamColorMode=1);let d=new r.default(!!(4&u),!!(8&u));s.viewer.load(n,t).then((e=>{e&&(d.texture=e)})),this.texture=d}}}}bind(e,t){let n=this.gl,r=this.uniformMap,i=e.uniforms,l=this.active;if(n.uniform1f(i[r.enabled],l),l){let e=this.texture,l=t.get(this.material.index*a.STANDARD_MATERIAL_OFFSET+this.index)||e.texture,s=this.textureUnit;n.uniform1i(i[r.map],s),this.model.viewer.webgl.bindTextureAndWrap(l,s,e.wrapS,e.wrapT),n.uniform1f(i[r.op],this.op),n.uniform1f(i[r.channels],this.colorChannels),n.uniform1f(i[r.teamColorMode],this.teamColorMode),n.uniform1f(i[r.invert],this.invert),n.uniform1f(i[r.clampResult],this.clampResult),n.uniform1f(i[r.uvCoordinate],this.uvCoordinate)}}unbind(e){this.active&&this.gl.uniform1f(e.uniforms[this.uniformMap.enabled],0)}}},9484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2312),r=n(4217),i=n(3652),l=n(2225),s=n(5458),o=n(4978),u=n(5131),c=n(7528),d=n(3732),h=n(8430),f=n(235),_=n(5222),m=n(5225);class p extends r.default{constructor(e,t){let n;super(t),this.name="",this.batches=[],this.materials=[[],[]],this.materialMaps=[],this.bones=[],this.sequences=[],this.sts=[],this.stc=[],this.stg=[],this.attachments=[],this.cameras=[],this.regions=[],this.initialReference=[],this.elementBuffer=null,this.arrayBuffer=null,this.vertexSize=0,this.uvSetCount=0,e instanceof a.default?n=e:(n=new a.default,n.load(e));let r=n.model,f=r.divisions.first();this.name=r.modelName.get(),this.setupGeometry(r,f);let _=r.materialReferences.get();this.materialMaps=_;let p=r.materials[0].get();for(let e=0,t=p.length;e<t;e++)this.materials[1].push(new i.M3StandardMaterial(this,e,p[e]));for(let e of f.batches.get()){let t=e.regionIndex,n=_[e.materialReferenceIndex];1===n.materialType&&this.batches.push(new m.default(this.regions[t],this.materials[1][n.materialIndex]))}this.initialReference=r.absoluteInverseBoneRestPositions.get();for(let e of r.bones.get())this.bones.push(new l.default(e));this.boneLookup=r.boneLookup.get();let g=r.sequences.get();if(g)for(let e of g)this.sequences.push(new s.default(e));let b=r.sts.get();if(b)for(let e of b)this.sts.push(new o.default(e));let w=r.stc.get();if(w)for(let e of w)this.stc.push(new u.default(e));let v=r.stg.get();if(v)for(let e of v)this.stg.push(new c.default(e,this.sts,this.stc));this.addGlobalAnims();let A=r.attachmentPoints.get();if(A)for(let e of A)this.attachments.push(new d.default(e));let y=r.cameras.get();if(y)for(let e of y)this.cameras.push(new h.default(e))}addInstance(){return new _.default(this)}setupGeometry(e,t){let n=this.viewer.gl,a=1,r=e.vertexFlags;262144&r?a=2:524288&r?a=3:1048576&r&&(a=4);let i=t.regions.get(),l=0,s=[];for(let e=0,t=i.length;e<t;e++)s[e]=l,l+=i[e].triangleIndicesCount;let o=new Uint16Array(l),u=t.triangles.get();for(let e=0,t=i.length;e<t;e++)this.regions.push(new f.default(this,i[e],u,o,s[e]));let c=e.vertices.get();this.elementBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.elementBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,o,n.STATIC_DRAW);let d=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW),this.arrayBuffer=d,this.vertexSize=4*(7+a),this.uvSetCount=a}mapMaterial(e){let t=this.materialMaps[e];return this.materials[t.materialType][t.materialIndex]}addGlobalAnims(){}}t.default=p},5222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(7564),i=n(9024),l=n(5985),s=n(3652),o=a.mat4.create();class u extends i.default{constructor(e){super(e),this.skeleton=null,this.teamColor=0,this.vertexColor=new Float32Array([1,1,1,1]),this.sequence=-1,this.frame=0,this.sequenceLoopMode=0,this.sequenceEnded=!1,this.forced=!0,this.boneTexture=null,this.skeleton=new l.default(this),-1!==this.sequence&&this.setSequence(this.sequence);let t=e.boneLookup;this.boneTexture=new r.default(e.viewer.gl,3,4*t.length,1)}setTexture(e,t,n){this.overrideTexture(e*s.STANDARD_MATERIAL_OFFSET+t,n)}updateSkeletonAndBoneTexture(e){let t=this.model,n=t.viewer.buffer,r=t.boneLookup,i=this.skeleton,l=i.nodes,s=t.initialReference,u=r.length,c=-1!==this.sequence,d=this.boneTexture;i.update(e),n.reserve(48*u);let h,f=n.floatView;h=c?o:this.worldMatrix;for(let e=0;e<u;e++){let t=12*e;if(c){let t=r[e];h=a.mat4.mul(o,l[t].worldMatrix,s[t])}f[t+0]=h[0],f[t+1]=h[1],f[t+2]=h[2],f[t+3]=h[4],f[t+4]=h[5],f[t+5]=h[6],f[t+6]=h[8],f[t+7]=h[9],f[t+8]=h[10],f[t+9]=h[12],f[t+10]=h[13],f[t+11]=h[14]}d.bindAndUpdate(f,d.width,1)}renderOpaque(){let e=this.model,t=e.batches;if(t.length){let n=e.viewer,a=n.sharedCache.get("m3"),r=n.gl,i=e.vertexSize,l=e.uvSetCount,s=a.standardShaders[l-1],o=s.attribs,u=s.uniforms,c=this.scene.camera,d=this.textureOverrides,h=this.boneTexture;s.use(),r.uniform1f(u.u_teamColor,this.teamColor),r.uniform4fv(u.u_vertexColor,this.vertexColor),r.uniformMatrix4fv(u.u_VP,!1,c.viewProjectionMatrix),r.uniformMatrix4fv(u.u_MV,!1,c.viewMatrix),r.uniform3fv(u.u_eyePos,c.location),r.uniform3fv(u.u_lightPos,a.lightPosition),h.bind(15),r.uniform1i(u.u_boneMap,15),r.uniform1f(u.u_vectorSize,1/h.width),r.uniform1f(u.u_rowSize,1),r.bindBuffer(r.ARRAY_BUFFER,e.arrayBuffer),r.vertexAttribPointer(o.a_position,3,r.FLOAT,!1,i,0),r.vertexAttribPointer(o.a_weights,4,r.UNSIGNED_BYTE,!1,i,12),r.vertexAttribPointer(o.a_bones,4,r.UNSIGNED_BYTE,!1,i,16),r.vertexAttribPointer(o.a_normal,4,r.UNSIGNED_BYTE,!1,i,20);for(let e=0;e<l;e++)r.vertexAttribPointer(o[`a_uv${e}`],2,r.SHORT,!1,i,24+4*e);r.vertexAttribPointer(o.a_tangent,4,r.UNSIGNED_BYTE,!1,i,24+4*l),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.elementBuffer);for(let e of t){let t=e.material,n=e.region;t.bind(s,d),n.render(s),t.unbind(s)}}}updateAnimations(e){let t=this.sequence;if(-1!==t){let n=this.model.sequences[t],a=n.interval;this.frame+=1e3*e,this.frame>a[1]?((0!==this.sequenceLoopMode||1&n.flags)&&2!==this.sequenceLoopMode?this.frame=a[1]:this.frame=a[0],this.sequenceEnded=!0):this.sequenceEnded=!1}(this.forced||-1!==t)&&(this.forced=!1,this.updateSkeletonAndBoneTexture(e))}setTeamColor(e){return this.teamColor=e,this}setVertexColor(e){return this.vertexColor.set(e),this}setSequence(e){let t=this.model;return this.sequence=e,this.frame=0,(e<-1||e>t.sequences.length-1)&&(e=-1,this.sequence=e),this.forced=!0,this}setSequenceLoopMode(e){return this.sequenceLoopMode=e,this}getAttachment(e){let t=this.model.attachments[e];if(t)return this.skeleton.nodes[t.bone]}}t.default=u},2:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(7290);class i extends r.SkeletalNode{convertBasis(e){let t=Math.PI/2;a.quat.rotateZ(e,e,t),a.quat.rotateY(e,e,-t)}}t.default=i},235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a,r){let i=t.firstVertexIndex,l=t.triangleIndicesCount,s=t.firstTriangleIndex;for(let e=0;e<l;e++)a[r+e]=n[s+e]+i;this.gl=e.viewer.gl,this.firstBoneLookupIndex=t.firstBoneLookupIndex,this.boneWeightPairsCount=t.boneWeightPairsCount,this.offset=2*r,this.verticesCount=t.verticesCount,this.elements=l}render(e){let t=this.gl;t.uniform1f(e.uniforms.u_firstBoneLookupIndex,this.firstBoneLookupIndex),t.uniform1f(e.uniforms.u_boneWeightPairsCount,this.boneWeightPairsCount),t.drawElements(t.TRIANGLES,this.elements,t.UNSIGNED_SHORT,this.offset)}}},1219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(6269),i=a.vec3.create(),l=a.quat.create();class s{constructor(e){this.keys=e.keys.get(),this.values=e.values.get(),this.biggestKey=e.biggestKey}}t.default=class{constructor(){this.sd=[]}addSds(e){for(let t of e)this.sd.push(new s(t))}getValueUnsafe(e,t,n,s){let o=this.sd[e];s&&(n%=o.biggestKey);let u=o.keys,c=o.values,d=u.length,h=0;for(;h!==u.length&&n>u[h];)d=h,h++;let f=u.length;if(d===f)return h===f?t.initValue:c[h];if(h===f||d>=h)return c[d];let _=r.clamp((n-u[d])/(u[h]-u[d]),0,1),m=c[d],p=c[h],g=t.interpolationType,b=m;return 4===b.length?0===g?a.quat.copy(l,m):a.quat.slerp(l,m,p,_):3===b.length?0===g?a.vec3.copy(i,m):a.vec3.lerp(i,m,p,_):0===g?m:r.lerp(m,p,_)}}},5458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e.name.get(),this.interval=e.interval,this.movementSpeed=e.movementSpeed,this.frequency=e.frequency,this.boundingSphere=e.boundingSphere,this.flags=e.flags}}},8093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nvarying vec3 v_normal;\nvarying vec4 v_uv[2];\nvarying vec3 v_lightDir;\n// varying vec3 v_eyeVec;\nvarying vec3 v_halfVec;\nvarying vec3 v_teamColor;\nvarying vec4 v_vertexColor;\n\nstruct LayerSettings {\n  bool enabled;\n  float op;\n  float channels;\n  float teamColorMode;\n  // vec3 multAddAlpha;\n  // bool useAlphaFactor;\n  bool invert;\n  // bool multColor;\n  // bool addColor;\n  bool clampResult;\n  // bool useConstantColor;\n  // vec4 constantColor;\n  // float uvSource;\n  float uvCoordinate;\n  // float fresnelMode;\n  // float fresnelTransformMode;\n  // mat4 fresnelTransform;\n  // bool fresnelClamp;\n  // vec3 fresnelExponentBiasScale;\n};\n\nuniform float u_specularity;\nuniform float u_specMult;\nuniform float u_emisMult;\nuniform vec4 u_lightAmbient;\n\nuniform LayerSettings u_diffuseLayerSettings;\nuniform sampler2D u_diffuseMap;\nuniform LayerSettings u_decalLayerSettings;\nuniform sampler2D u_decalMap;\nuniform LayerSettings u_specularLayerSettings;\nuniform sampler2D u_specularMap;\nuniform LayerSettings u_glossLayerSettings;\nuniform sampler2D u_glossMap;\nuniform LayerSettings u_emissiveLayerSettings;\nuniform sampler2D u_emissiveMap;\nuniform LayerSettings u_emissive2LayerSettings;\nuniform sampler2D u_emissive2Map;\nuniform LayerSettings u_evioLayerSettings;\nuniform sampler2D u_evioMap;\nuniform LayerSettings u_evioMaskLayerSettings;\nuniform sampler2D u_evioMaskMap;\nuniform LayerSettings u_alphaLayerSettings;\nuniform sampler2D u_alphaMap;\nuniform LayerSettings u_alphaMaskLayerSettings;\nuniform sampler2D u_alphaMaskMap;\nuniform LayerSettings u_normalLayerSettings;\nuniform sampler2D u_normalMap;\nuniform LayerSettings u_heightLayerSettings;\nuniform sampler2D u_heightMap;\nuniform LayerSettings u_lightMapLayerSettings;\nuniform sampler2D u_lightMapMap;\nuniform LayerSettings u_aoLayerSettings;\nuniform sampler2D u_aoMap;\n\n#define SPECULAR_RGB 0.0\n#define SPECULAR_A_ONLY 1.0\n\n#define FRESNELMODE_NONE 0.0\n#define FRESNELMODE_STANDARD 1.0\n#define FRESNELMODE_INVERTED 2.0\n\n#define FRESNELTRANSFORM_NONE 0.0\n#define FRESNELTRANSFORM_SIMPLE 1.0\n#define FRESNELTRANSFORM_NORMALIZED 2.0\n\n#define UVMAP_EXPLICITUV0 0.0\n#define UVMAP_EXPLICITUV1 1.0\n#define UVMAP_REFLECT_CUBICENVIO 2.0\n#define UVMAP_REFLECT_SPHERICALENVIO 3.0\n#define UVMAP_PLANARLOCALZ 4.0\n#define UVMAP_PLANARWORLDZ 5.0\n#define UVMAP_PARTICLE_FLIPBOOK 6.0\n#define UVMAP_CUBICENVIO 7.0\n#define UVMAP_SPHERICALENVIO 8.0\n#define UVMAP_EXPLICITUV2 9.0\n#define UVMAP_EXPLICITUV3 10.0\n#define UVMAP_PLANARLOCALX 11.0\n#define UVMAP_PLANARLOCALY 12.0\n#define UVMAP_PLANARWORLDX 13.0\n#define UVMAP_PLANARWORLDY 14.0\n#define UVMAP_SCREENSPACE 15.0\n#define UVMAP_TRIPLANAR_LOCAL 16.0\n#define UVMAP_TRIPLANAR_WORLD 17.0\n#define UVMAP_TRIPLANAR_WORLD_LOCAL_Z 18.0\n\n#define CHANNELSELECT_RGB 0.0\n#define CHANNELSELECT_RGBA 1.0\n#define CHANNELSELECT_A 2.0\n#define CHANNELSELECT_R 3.0\n#define CHANNELSELECT_G 4.0\n#define CHANNELSELECT_B 5.0\n\n#define TEAMCOLOR_NONE 0.0\n#define TEAMCOLOR_DIFFUSE 1.0\n#define TEAMCOLOR_EMISSIVE 2.0\n\n#define LAYEROP_MOD 0.0\n#define LAYEROP_MOD2X 1.0\n#define LAYEROP_ADD 2.0\n#define LAYEROP_LERP 3.0\n#define LAYEROP_TEAMCOLOR_EMISSIVE_ADD 4.0\n#define LAYEROP_TEAMCOLOR_DIFFUSE_ADD 5.0\n#define LAYEROP_ADD_NO_ALPHA 6.0\n\n// float calculateFresnelTerm(vec3 normal, vec3 eyeToVertex, float exponent, mat4 fresnelTransform, float fresnelTransformMode, bool fresnelClamp) {\n//   vec3 fresnelDir = eyeToVertex;\n//   float result;\n\n//   if (fresnelTransformMode != FRESNELTRANSFORM_NONE) {\n//     fresnelDir = (fresnelTransform * vec4(fresnelDir, 1.0)).xyz;\n\n//     if (fresnelTransformMode == FRESNELTRANSFORM_NORMALIZED) {\n//       fresnelDir = normalize(fresnelDir);\n//     }\n//   }\n\n//   if (fresnelClamp) {\n//     result = 1.0 - clamp(-dot(normal, fresnelDir), 0.0, 1.0);\n//   } else {\n//     result = 1.0 - abs(dot(normal, fresnelDir));\n//   }\n\n//   result = max(result, 0.0000001);\n\n//   return pow(result, exponent);\n// }\n\nvec3 combineLayerColor(vec4 color, vec3 result, LayerSettings layerSettings) {\n  if (layerSettings.op == LAYEROP_MOD) {\n    result *= color.rgb;\n  } else if (layerSettings.op == LAYEROP_MOD2X) {\n    result *= color.rgb * 2.0;\n  } else if (layerSettings.op == LAYEROP_ADD) {\n    result += color.rgb * color.a;\n  } else if (layerSettings.op == LAYEROP_ADD_NO_ALPHA) {\n    result += color.rgb;\n  } else if (layerSettings.op == LAYEROP_LERP) {\n    result = mix(result, color.rgb, color.a);\n  } else if (layerSettings.op == LAYEROP_TEAMCOLOR_EMISSIVE_ADD) {\n    result += color.a * v_teamColor;\n  } else if (layerSettings.op == LAYEROP_TEAMCOLOR_DIFFUSE_ADD) {\n    result += color.a * v_teamColor;\n  }\n\n  return result;\n}\n\nvec4 chooseChannel(float channel, vec4 texel) {\n  if (channel == CHANNELSELECT_R) {\n    texel = texel.rrrr;\n  } else if (channel == CHANNELSELECT_G) {\n    texel = texel.gggg;\n  } else if (channel == CHANNELSELECT_B) {\n    texel = texel.bbbb;\n  } else if (channel == CHANNELSELECT_A) {\n    texel = texel.aaaa;\n  } else if (channel == CHANNELSELECT_RGB) {\n    texel.a = 1.0;\n  }\n\n  return texel;\n}\n\nvec2 getUV(LayerSettings layerSettings) {\n  if (layerSettings.uvCoordinate == 1.0) {\n    return v_uv[0].zw;\n  } else if (layerSettings.uvCoordinate == 2.0) {\n    return v_uv[1].xy;\n  } else if (layerSettings.uvCoordinate == 3.0) {\n    return v_uv[1].zw;\n  }\n\n  return v_uv[0].xy;\n}\n\nvec4 sampleLayer(sampler2D layer, LayerSettings layerSettings) {\n  // if (layerSettings.useConstantColor) {\n  //   return layerSettings.constantColor;\n  // }\n\n  return texture2D(layer, getUV(layerSettings));\n}\n\nvec4 computeLayerColor(sampler2D layer, LayerSettings layerSettings) {\n  vec4 color = sampleLayer(layer, layerSettings);\n\n  // if (layerSettings.useMask) {\n  //   result *= mask;\n  // }\n\n  vec4 result = chooseChannel(layerSettings.channels, color);\n\n  // if (layerSettings.useAlphaFactor) {\n  //   result.a *= layerSettings.multiplyAddAlpha.z;\n  // }\n\n  if (layerSettings.teamColorMode == TEAMCOLOR_DIFFUSE) {\n    result = vec4(mix(v_teamColor, result.rgb, color.a), 1.0);\n  } else if (layerSettings.teamColorMode == TEAMCOLOR_EMISSIVE) {\n    result = vec4(mix(v_teamColor, result.rgb, color.a), 1.0);\n  }\n\n  if (layerSettings.invert) {\n    result = vec4(1.0) - result;\n  }\n\n  // if (layerSettings.multiplyEnable) {\n  //   result *= layerSettings.multiplyAddAlpha.x;\n  // }\n\n  // if (layerSettings.addEnable) {\n  //   result += layerSettings.multiplyAddAlpha.y;\n  // }\n\n  if (layerSettings.clampResult) {\n    result = clamp(result, 0.0, 1.0);\n  }\n\n  // if (layerSettings.fresnelMode != FRESNELMODE_NONE) {\n  //   float fresnelTerm = calculateFresnelTerm(v_normal, v_eyeVec, layerSettings.fresnelExponentBiasScale.x, layerSettings.fresnelTransform, layerSettings.fresnelTransformMode, layerSettings.fresnelClamp);\n    \n  //   if (layerSettings.fresnelMode == FRESNELMODE_INVERTED) {\n  //     fresnelTerm = 1.0 - fresnelTerm;\n  //   }\n    \n  //   fresnelTerm = clamp(fresnelTerm * layerSettings.fresnelExponentBiasScale.z + layerSettings.fresnelExponentBiasScale.y, 0.0, 1.0);\n    \n  //   result *= fresnelTerm;\n  // }\n\n  return result;\n}\n\nvec3 decodeNormal(sampler2D map) {\n  vec4 texel = texture2D(map, v_uv[0].xy);\n  vec3 normal;\n\n  normal.xy = 2.0 * texel.wy - 1.0;\n  normal.z = sqrt(max(0.0, 1.0 - dot(normal.xy, normal.xy)));\n\n  return normal;\n}\n\nvec4 computeSpecular(sampler2D specularMap, LayerSettings layerSettings, float specularity, float specMult, vec3 normal) {\n  vec4 color;\n\n  if (layerSettings.enabled) {\n    color = computeLayerColor(specularMap, layerSettings);\n  } else {\n    color = vec4(0);\n  }\n\n  float factor = pow(max(-dot(v_halfVec, normal), 0.0), specularity) * specMult;\n\n  return color * factor;\n}\n"},6548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4531),r=n(8093),i=`\n${a.default}\n\n${r.default}\n\nvoid main() {\n  vec3 color;\n  vec4 final = u_lightAmbient;\n  vec3 normal;\n  vec3 lightMapDiffuse;\n\n  if (u_normalLayerSettings.enabled) {\n    normal = decodeNormal(u_normalMap);\n  } else {\n    normal = v_normal;\n  }\n\n  float lambertFactor = max(dot(normal, v_lightDir), 0.0);\n\n  if (lambertFactor > 0.0) {\n    if (u_diffuseLayerSettings.enabled) {\n      vec4 diffuseColor = computeLayerColor(u_diffuseMap, u_diffuseLayerSettings);\n\n      color = combineLayerColor(diffuseColor, color, u_diffuseLayerSettings);\n    }\n\n    if (u_decalLayerSettings.enabled) {\n      vec4 decalColor = computeLayerColor(u_decalMap, u_decalLayerSettings);\n\n      color = combineLayerColor(decalColor, color, u_decalLayerSettings);\n    }\n\n    vec4 specularColor = computeSpecular(u_specularMap, u_specularLayerSettings, u_specularity, u_specMult, normal);\n\n    if (u_lightMapLayerSettings.enabled) {\n      vec4 lightMapColor = computeLayerColor(u_lightMapMap, u_lightMapLayerSettings) * 2.0;\n\n      lightMapDiffuse = lightMapColor.rgb;\n    }\n\n    // final.rgb = color * lightMapDiffuse + specularColor.rgb;\n    final.rgb = (color + specularColor.rgb) * lambertFactor;\n\n    bool addEmissive = false;\n    vec3 emissiveColor;\n    vec4 tempColor;\n\n    if (u_emissiveLayerSettings.enabled) {\n      tempColor = computeLayerColor(u_emissiveMap, u_emissiveLayerSettings);\n\n      if (u_emissiveLayerSettings.op == LAYEROP_MOD || u_emissiveLayerSettings.op == LAYEROP_MOD2X || u_emissiveLayerSettings.op == LAYEROP_LERP) {\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissiveLayerSettings);\n      } else {\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissiveLayerSettings);\n        addEmissive = true;\n      }\n    }\n\n    if (u_emissive2LayerSettings.enabled) {\n      tempColor = computeLayerColor(u_emissive2Map, u_emissive2LayerSettings);\n\n      if (!addEmissive && (u_emissive2LayerSettings.op == LAYEROP_MOD || u_emissive2LayerSettings.op == LAYEROP_MOD2X || u_emissive2LayerSettings.op == LAYEROP_LERP)) {\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissive2LayerSettings);\n      } else {\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissive2LayerSettings);\n        addEmissive = true;\n      }\n    }\n\n    if (addEmissive) {\n      final.rgb += emissiveColor * u_emisMult;\n    }\n  }\n\n  gl_FragColor = final * v_vertexColor;\n}\n`;t.default=i},1545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nuniform mat4 u_VP;\nuniform mat4 u_MV;\nuniform vec3 u_eyePos;\nuniform vec3 u_lightPos;\nuniform float u_firstBoneLookupIndex;\nuniform float u_boneWeightPairsCount;\nuniform vec3 u_teamColors[14];\nuniform float u_teamColor;\nuniform vec4 u_vertexColor;\n\nattribute vec3 a_position;\nattribute vec4 a_normal;\nattribute vec2 a_uv0;\n\n#ifdef EXPLICITUV1\nattribute vec2 a_uv1;\n#endif\n#ifdef EXPLICITUV2\nattribute vec2 a_uv1, a_uv2;\n#endif\n#ifdef EXPLICITUV3\nattribute vec2 a_uv1, a_uv2, a_uv3;\n#endif\n\nattribute vec4 a_tangent;\nattribute vec4 a_bones;\nattribute vec4 a_weights;\n\nvarying vec3 v_normal;\nvarying vec4 v_uv[2]; // Pack 4 vec2 in 2 vec4, to reduce the varyings count\nvarying vec3 v_lightDir;\n// varying vec3 v_eyeVec;\nvarying vec3 v_halfVec;\nvarying vec3 v_teamColor;\nvarying vec4 v_vertexColor;\n\n${n(7838).default}\n\nvec3 TBN(vec3 vector, vec3 tangent, vec3 binormal, vec3 normal) {\n  return vec3(dot(vector, tangent), dot(vector, binormal), dot(vector, normal));\n}\n\nvec4 decodeVector(vec4 v) {\n  return ((v / 255.0) * 2.0) - 1.0;\n}\n\nvoid transform(inout vec3 position, inout vec3 normal, inout vec3 tangent, inout vec3 binormal, vec4 bones, vec4 weights) {\n  if (u_boneWeightPairsCount > 0.0) {\n    mat4 bone;\n\n    if (u_boneWeightPairsCount == 1.0) {\n      bone = fetchMatrix(bones[0], 0.0);\n    } else {\n      bone += fetchMatrix(bones[0], 0.0) * weights[0];\n      bone += fetchMatrix(bones[1], 0.0) * weights[1];\n      bone += fetchMatrix(bones[2], 0.0) * weights[2];\n      bone += fetchMatrix(bones[3], 0.0) * weights[3];\n    }\n\n    position = vec3(bone * vec4(position, 1.0));\n    normal = mat3(bone) * normal;\n    tangent = vec3(bone * vec4(tangent, 0.0));\n    binormal = vec3(bone * vec4(binormal, 0.0));\n  }\n}\n\nvoid main() {\n  vec4 decodedNormal = decodeVector(a_normal);\n\n  vec3 position = a_position;\n  vec3 normal = decodedNormal.xyz;\n  vec3 tangent = vec3(decodeVector(a_tangent));\n  vec3 binormal = cross(normal, tangent) * decodedNormal.w;\n\n  transform(position, normal, tangent, binormal, a_bones + u_firstBoneLookupIndex, a_weights / 255.0);\n\n  vec3 position_mv = vec3(u_MV * vec4(position, 1));\n\n  mat3 mv = mat3(u_MV);\n  vec3 t = normalize(mv * tangent);\n  vec3 b = normalize(mv * binormal);\n  vec3 n = normalize(mv * normal);\n\n  vec3 lightDir = normalize(u_lightPos - position_mv);\n\n  v_lightDir = normalize(TBN(lightDir, t, b, n));\n\n  vec3 eyeVec = normalize(u_eyePos - position_mv);\n  vec3 halfVec = normalize(eyeVec - u_lightPos);\n\n  // v_eyeVec = TBN(eyeVec, t, b, n);\n  v_halfVec = TBN(halfVec, t, b, n);\n\n  v_normal = n;\n\n  vec4 uv0, uv1;\n\n  uv0.xy = a_uv0 / 2048.0;\n\n  #ifdef EXPLICITUV1\n  uv0.zw = a_uv1 / 2048.0;\n  #endif\n\n  #ifdef EXPLICITUV2\n  uv0.zw = a_uv1 / 2048.0;\n  uv1.xy = a_uv2 / 2048.0;\n  #endif\n\n  #ifdef EXPLICITUV3\n  uv0.zw = a_uv1 / 2048.0;\n  uv1.xy = a_uv2 / 2048.0;\n  uv1.zw = a_uv3 / 2048.0;\n  #endif\n\n  v_uv[0] = uv0;\n  v_uv[1] = uv1;\n\n  v_teamColor = u_teamColors[int(u_teamColor)];\n  v_vertexColor = u_vertexColor;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=a},5985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7290),r=n(2);t.default=class{constructor(e){let t=e.model,n=t.bones,i=t.boneLookup,l=a.createSkeletalNodes(n.length,r.default),s=l.nodes;this.nodes=s,this.worldMatrices=l.worldMatrices,this.instance=e,this.modelNodes=n,this.initialReference=t.initialReference,this.sts=t.sts,this.stc=t.stc,this.stg=t.stg,this.boneLookup=i;for(let t=0,a=n.length;t<a;t++){let a=n[t];-1===a.parent?s[t].parent=e:s[t].parent=s[a.parent],a.billboard1&&(s[t].billboarded=!0)}}update(e){let t=this.instance,n=t.scene,a=this.nodes,r=this.modelNodes;for(let i=0,l=a.length;i<l;i++){let l=a[i],s=r[i];this.getValue4(l.localRotation,s.rotation,t),this.getValue3(l.localLocation,s.location,t),this.getValue3(l.localScale,s.scale,t),l.recalculateTransformation(n);for(let t of l.children)t.recalculateTransformation(),t.update(e)}}getValueUnsafe(e,t){let n=t.sequence;return-1!==n?this.stg[n].getValueUnsafe(e,t):e.initValue}getValue(e,t){return this.getValueUnsafe(e,t)}getValue2(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e}getValue3(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e}getValue4(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}}},3652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M3StandardMaterial=t.STANDARD_MATERIAL_OFFSET=void 0;const a=n(486);t.STANDARD_MATERIAL_OFFSET=100;t.M3StandardMaterial=class{constructor(e,t,n){this.model=e,this.gl=e.viewer.gl,this.index=t,this.name=n.name.get(),this.flags=n.flags,this.blendMode=n.blendMode,this.priority=n.priority,this.specularity=n.specularity,this.specMult=n.specMult,this.emisMult=n.emisMult,this.layerBlendType=n.layerBlendType,this.emisBlendType=n.emisBlendType,this.emisMode=n.emisMode,this.doubleSided=8&n.flags,this.layers=[new a.default(this,0,n.diffuseLayer,"diffuse",2),new a.default(this,1,n.decalLayer,"decal",2),new a.default(this,2,n.specularLayer,"specular",2),new a.default(this,3,n.glossLayer,"gloss",2),new a.default(this,4,n.emissiveLayer,"emissive",n.emisBlendType),new a.default(this,5,n.emissive2Layer,"emissive2",n.emisMode),new a.default(this,6,n.evioLayer,"evio",2),new a.default(this,7,n.evioMaskLayer,"evioMask",2),new a.default(this,8,n.alphaMaskLayer,"alphaMask",2),new a.default(this,9,n.alphaMask2Layer,"alphaMask2",2),new a.default(this,10,n.normalLayer,"normal",2),new a.default(this,11,n.heightLayer,"heightMap",2),new a.default(this,12,n.lightMapLayer,"lightMap",2),new a.default(this,13,n.ambientOcclusionLayer,"ao",2)]}bindCommon(){const e=this.gl;1===this.blendMode||2===this.blendMode?(e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE)):e.disable(e.BLEND),this.doubleSided?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.depthMask(!0)}bind(e,t){const n=this.gl;this.bindCommon(),n.uniform1f(e.uniforms.u_specularity,this.specularity),n.uniform1f(e.uniforms.u_specMult,this.specMult),n.uniform1f(e.uniforms.u_emisMult,this.emisMult),n.uniform4f(e.uniforms.u_lightAmbient,.02,.02,.02,0);const a=this.layers;a[0].bind(e,t),a[1].bind(e,t),a[2].bind(e,t),a[4].bind(e,t),a[5].bind(e,t),a[10].bind(e,t),a[12].bind(e,t)}unbind(e){const t=this.gl;t.disable(t.BLEND),t.enable(t.CULL_FACE);const n=this.layers;n[0].unbind(e),n[1].unbind(e),n[2].unbind(e),n[4].unbind(e),n[5].unbind(e),n[10].unbind(e),n[12].unbind(e)}}},5131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1219);t.default=class{constructor(e){this.animRefs=[],this.sd=[];const t=e.animIds.get();this.name=e.name.get(),this.runsConcurrent=e.runsConcurrent,this.priority=e.priority,this.stsIndex=e.stsIndex;let n=e.animRefs.get();const r=new Uint16Array(n.buffer);for(let e=0,n=t.length;e<n;e++)this.animRefs[t[e]]=[r[2*e+1],r[2*e]];for(let t of e.sd){let e=new a.default,n=t.get();n&&e.addSds(n),this.sd.push(e)}}getValueUnsafe(e,t){const n=this.animRefs[e.animId];return n?this.sd[n[0]].getValueUnsafe(n[1],e,t.frame,this.runsConcurrent):e.initValue}}},7528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.name=e.name.get(),this.stcIndices=e.stcIndices.get(),this.sts=t,this.stc=n}getValueUnsafe(e,t){let n=this.stcIndices,a=this.stc,r=this.sts;for(let i=0,l=n.length;i<l;i++){let l=a[n[i]];if(r[l.stsIndex].hasData(e))return l.getValueUnsafe(e,t)}return e.initValue}}},4978:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.animIds={};let t=e.animIds.get();for(let e=0,n=t.length;e<n;e++)this.animIds[t[e]]=e}hasData(e){return!!this.animIds[e.animId]}}},5974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.texture=null,this.wrapS=33071,this.wrapT=33071,e&&(this.wrapS=10497),t&&(this.wrapT=10497)}}},1925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(120);t.default=class{constructor(e,t){this.animations=new Map,this.variants={},this.model=e;for(let n of t.animations)this.animations.set(n.name,a.createTypedSd(e,n))}getScalarValue(e,t,n,a,r,i){if(-1!==n){let i=this.animations.get(t);if(i)return i.getValue(e,n,a,r)}return e[0]=i,-1}getVectorValue(e,t,n,a,r,i){if(-1!==n){let i=this.animations.get(t);if(i)return i.getValue(e,n,a,r)}return e[0]=i[0],e[1]=i[1],e[2]=i[2],-1}getQuatValue(e,t,n,a,r,i){if(-1!==n){let i=this.animations.get(t);if(i)return i.getValue(e,n,a,r)}return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],-1}addVariants(e,t){let n=this.animations.get(e),a=this.model.sequences.length,r=new Uint8Array(a);if(n)for(let e=0;e<a;e++)n.isVariant(e)&&(r[e]=1);this.variants[t]=r}addVariantIntersection(e,t){let n=this.model.sequences.length,a=new Uint8Array(n);for(let t=0;t<n;t++)for(let n of e)this.variants[n][t]&&(a[t]=1);this.variants[t]=a}}},6762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{constructor(e,t,n){super(e,t,n),this.internalModel=null;let a=t.path.replace(/\\/g,"/").toLowerCase().replace(".mdl",".mdx");if(this.path=a,this.attachmentId=t.attachmentId,""!==a&&-1!=a.indexOf(".mdx")){let t=e.viewer.load(a,e.pathSolver,e.solverParams);t.then((e=>{e&&(this.internalModel=e)})),e.blockers.push(t)}}getVisibility(e,t,n,a){return this.getScalarValue(e,"KATV",t,n,a,1)}}t.default=r},2500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new Float32Array(1);t.default=class{constructor(e,t){let n=t.internalModel.addInstance();n.setSequenceLoopMode(2),n.dontInheritScaling=!1,n.hide(),n.setParent(e.nodes[t.objectId]),this.instance=e,this.attachment=t,this.internalInstance=n}update(){let e=this.instance,t=this.internalInstance;e.scene&&-1!==e.sequence&&(this.attachment.getVisibility(n,e.sequence,e.frame,e.counter),n[0]>.1?(e.scene.addInstance(t),t.hidden()&&(t.show(),t.setSequence(0))):t.hide())}}},1643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a,r){let i,l;r?(i=n,l=i.layers[0]):(i=null,l=n),this.index=e,this.geoset=t,this.isExtendedOrUsingSkin=a,this.isHd=r,this.layer=l,this.material=i}}},9562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.objects=[],this.model=e,this.isExtendedOrUsingSkin=t,this.isHd=n}render(e){let t,n=e.scene,a=e.textureOverrides,r=e.layerAlphas,i=this.model,l=i.textures,s=i.batches,o=i.viewer,u=o.sharedCache.get("mdx"),c=o.gl,d=o.webgl,h=this.isExtendedOrUsingSkin,f=this.isHd,_=u.teamColors,m=u.teamGlows;t=f?h?u.hdSkinShader:u.hdVertexGroupShader:h?u.extendedShader:u.standardShader,t.use();let p=t.uniforms;c.uniformMatrix4fv(p.u_VP,!1,n.camera.viewProjectionMatrix);let g=e.boneTexture;if(g?(g.bind(15),c.uniform1f(p.u_hasBones,1),c.uniform1i(p.u_boneMap,15),c.uniform1f(p.u_vectorSize,1/g.width),c.uniform1f(p.u_rowSize,1)):c.uniform1f(p.u_hasBones,0),c.uniform1i(p.u_texture,0),c.bindBuffer(c.ARRAY_BUFFER,i.arrayBuffer),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i.elementBuffer),f){c.uniform1i(p.u_diffuseMap,0),c.uniform1i(p.u_ormMap,1),c.uniform1i(p.u_teamColorMap,2),c.disable(c.BLEND),c.enable(c.DEPTH_TEST),c.depthMask(!0);for(let n of this.objects){let i=s[n],o=i.geoset,u=i.material.layers,h=u[0],f=u[2],m=r[h.index];if(m>0){c.uniform1f(p.u_layerAlpha,m),c.uniform1f(p.u_filterMode,h.filterMode);let n=h.textureId,r=f.textureId,s=l[n],u=l[r],g=_[e.teamColor],b=a.get(n)||s.texture,w=a.get(r)||u.texture;d.bindTextureAndWrap(b,0,s.wrapS,s.wrapT),d.bindTextureAndWrap(w,1,u.wrapS,u.wrapT),d.bindTextureAndWrap(g.texture,2,g.wrapS,g.wrapT),o.bindHd(t,i.isExtendedOrUsingSkin,h.coordId),o.render()}}}else{let n=e.geosetColors,i=e.layerTextures,o=e.uvAnims;c.uniform4fv(p.u_vertexColor,e.vertexColor);for(let u of this.objects){let f=s[u],g=f.geoset,b=f.layer,w=g.index,v=b.index,A=n[w],y=r[v];if(A[3]>.01&&y>.01){let n=i[v],r=l[n],s=o[v];c.uniform4fv(p.u_geosetColor,A),c.uniform1f(p.u_layerAlpha,y),c.uniform2f(p.u_uvTrans,s[0],s[1]),c.uniform2f(p.u_uvRot,s[2],s[3]),c.uniform1f(p.u_uvScale,s[4]),b.bind(t);let u=a.get(n);if(!u){let t,n=r.replaceableId;t=1===n?_[e.teamColor]:2===n?m[e.teamColor]:r,t&&(u=t.texture)}d.bindTextureAndWrap(u,0,r.wrapS,r.wrapT),h?g.bindExtended(t,b.coordId):g.bind(t,b.coordId),g.render()}}}}}},9648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{constructor(e,t,n){super(e,t,n),this.geosetAnimation=e.geosetAnimations[t.geosetAnimationId]}getVisibility(e,t,n,a){return this.geosetAnimation?this.geosetAnimation.getAlpha(e,t,n,a):(e[0]=1,-1)}}t.default=r},608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8533),r=n(1925);class i extends r.default{constructor(e,t){super(e,t),this.name=t.name,this.position=t.position,this.fieldOfView=t.fieldOfView,this.farClippingPlane=t.farClippingPlane,this.nearClippingPlane=t.nearClippingPlane,this.targetPosition=t.targetPosition}getTranslation(e,t,n,r){return this.getVectorValue(e,"KCTR",t,n,r,a.VEC3_ZERO)}getTargetTranslation(e,t,n,r){return this.getVectorValue(e,"KTTR",t,n,r,a.VEC3_ZERO)}getRotation(e,t,n,a){return this.getScalarValue(e,"KCRL",t,n,a,0)}}t.default=i},2767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{}t.default=r},1769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8488);class r extends a.default{constructor(e,t){super(e),this.emitterObject=t}update(e){this.emitterObject.ok&&super.update(e)}}t.default=r},2891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7874);t.default=class{constructor(e){this.objects=[],this.model=e}render(e){let t=e.scene,n=e.nodes,r=e.model.viewer,i=r.gl,l=r.webgl.extensions.ANGLE_instanced_arrays,s=r.sharedCache.get("mdx"),o=s.particlesShader,u=o.uniforms,c=o.attribs,d=s.rectBuffer;i.depthMask(!1),i.enable(i.BLEND),i.disable(i.CULL_FACE),i.enable(i.DEPTH_TEST),o.use(),i.uniformMatrix4fv(u.u_VP,!1,t.camera.viewProjectionMatrix),i.uniform1i(u.u_texture,0),l.vertexAttribDivisorANGLE(c.a_position,0),i.bindBuffer(i.ARRAY_BUFFER,d),i.vertexAttribPointer(c.a_position,1,i.UNSIGNED_BYTE,!1,0,0),l.vertexAttribDivisorANGLE(c.a_p0,1),l.vertexAttribDivisorANGLE(c.a_p1,1),l.vertexAttribDivisorANGLE(c.a_p2,1),l.vertexAttribDivisorANGLE(c.a_p3,1),l.vertexAttribDivisorANGLE(c.a_health,1),l.vertexAttribDivisorANGLE(c.a_color,1),l.vertexAttribDivisorANGLE(c.a_tail,1),l.vertexAttribDivisorANGLE(c.a_leftRightTop,1);for(let e of this.objects)a.renderEmitter(n[e].object,o);l.vertexAttribDivisorANGLE(c.a_leftRightTop,0),l.vertexAttribDivisorANGLE(c.a_tail,0),l.vertexAttribDivisorANGLE(c.a_color,0),l.vertexAttribDivisorANGLE(c.a_health,0),l.vertexAttribDivisorANGLE(c.a_p3,0),l.vertexAttribDivisorANGLE(c.a_p2,0),l.vertexAttribDivisorANGLE(c.a_p1,0),l.vertexAttribDivisorANGLE(c.a_p0,0)}}},2710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1769),r=new Uint32Array(1);class i extends a.default{constructor(){super(...arguments),this.lastValue=0}updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){this.emitterObject.getValue(r,t);let e=r[0];1===e&&e!==this.lastValue&&(this.currentEmission+=1),this.lastValue=e}}emit(){this.emitObject()}}t.default=i},9249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6072),r=n(9641),i=n(4513),l=n(7874),s=n(1875);class o extends r.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=-1,this.globalSequence=-1,this.defval=new Uint32Array(1),this.internalModel=null,this.internalTexture=null,this.colors=[],this.intervalTimes=new Float32Array(3),this.scale=0,this.columns=0,this.rows=0,this.lifeSpan=0,this.blendSrc=0,this.blendDst=0,this.intervals=[],this.distanceCutoff=0,this.maxDistance=0,this.minDistance=0,this.pitch=0,this.pitchVariance=0,this.volume=0,this.decodedBuffers=[],this.ok=!1;let r=e.viewer,o=t.name,u=o.substring(0,3),c=o.substring(4);"FPT"===u&&(u="SPL"),"SPL"===u?this.geometryEmitterType=l.EMITTER_SPLAT:"UBR"===u&&(this.geometryEmitterType=l.EMITTER_UBERSPLAT),this.type=u,this.id=c,this.tracks=t.tracks;let d=t.globalSequenceId;if(-1!==d&&(this.globalSequence=e.globalSequences[d]),"SND"===u&&!r.audioEnabled)return;let h=r.promise();a.default.getEventObjectData(r,u,c,e.hd).then((e=>{if(h(),e){let t=e.row;if(this.ok=!0,"SPN"===u)this.internalModel=e.resources[0];else if("SPL"===u||"UBR"===u){this.internalTexture=new s.default(0,!0,!0),this.internalTexture.texture=e.resources[0],this.scale=t.Scale,this.colors[0]=new Float32Array([t.StartR,t.StartG,t.StartB,t.StartA]),this.colors[1]=new Float32Array([t.MiddleR,t.MiddleG,t.MiddleB,t.MiddleA]),this.colors[2]=new Float32Array([t.EndR,t.EndG,t.EndB,t.EndA]),"SPL"===u?(this.columns=t.Columns,this.rows=t.Rows,this.lifeSpan=t.Lifespan+t.Decay,this.intervalTimes[0]=t.Lifespan,this.intervalTimes[1]=t.Decay,this.intervals[0]=new Float32Array([t.UVLifespanStart,t.UVLifespanEnd,t.LifespanRepeat]),this.intervals[1]=new Float32Array([t.UVDecayStart,t.UVDecayEnd,t.DecayRepeat])):(this.columns=1,this.rows=1,this.lifeSpan=t.BirthTime+t.PauseTime+t.Decay,this.intervalTimes[0]=t.BirthTime,this.intervalTimes[1]=t.PauseTime,this.intervalTimes[2]=t.Decay);let n=i.emitterFilterMode(t.BlendMode,r.gl);this.blendSrc=n[0],this.blendDst=n[1]}else{this.distanceCutoff=t.DistanceCutoff,this.maxDistance=t.MaxDistance,this.minDistance=t.MinDistance,this.pitch=t.Pitch,this.pitchVariance=t.PitchVariance,this.volume=t.Volume;for(let t of e.resources)this.decodedBuffers.push(t.data)}}}))}getValue(e,t){if(-1!==this.globalSequence){let n=this.globalSequence;return this.getValueAtTime(e,t.counter%n,0,n)}if(-1!==t.sequence){let n=this.model.sequences[t.sequence].interval;return this.getValueAtTime(e,t.frame,n[0],n[1])}return e[0]=this.defval[0],-1}getValueAtTime(e,t,n,a){let r=this.tracks;if(t>=n&&t<=a)for(let a=r.length-1;a>-1;a--){if(r[a]<n)return e[0]=0,a;if(r[a]<=t)return e[0]=1,a}return e[0]=0,-1}}t.default=o},7474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7739);class r extends a.default{bind(){let e=this.emitter,t=e.instance,n=t.model.viewer,a=t.scene;if(n.audioEnabled&&a.audioEnabled){let n=e.emitterObject,r=t.nodes[n.index],i=a.audioContext,l=n.decodedBuffers,s=i.createPanner(),o=i.createBufferSource(),u=r.worldLocation;s.positionX.value=u[0],s.positionY.value=u[1],s.positionZ.value=u[2],s.maxDistance=n.distanceCutoff,s.refDistance=n.minDistance,s.connect(i.destination),o.buffer=l[Math.random()*l.length|0],o.connect(s),o.start(0)}}update(e){}}t.default=r},6451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2710),r=n(7474);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},1735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2710),r=n(5285);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},5285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(7739),i=a.vec3.create();class l extends r.default{constructor(){super(...arguments),this.vertices=new Float32Array(12)}bind(){let e=this.emitter,t=e.instance,n=e.emitterObject,r=this.vertices,l=n.scale,s=t.nodes[n.index].worldMatrix;this.health=n.lifeSpan,i[0]=l,i[1]=l,a.vec3.transformMat4(r.subarray(0,2),i,s),i[0]=-l,i[1]=l,a.vec3.transformMat4(r.subarray(3,5),i,s),i[0]=-l,i[1]=-l,a.vec3.transformMat4(r.subarray(6,8),i,s),i[0]=l,i[1]=-l,a.vec3.transformMat4(r.subarray(9,11),i,s)}update(e){this.health-=e}}t.default=l},6820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7739);class r extends a.default{constructor(e){super(e);let t=e.emitterObject.internalModel;this.internalInstance=t.addInstance()}bind(){let e=this.emitter,t=e.instance,n=t.scene,a=t.nodes[e.emitterObject.index],r=this.internalInstance;r.setScene(n),r.setSequence(0),r.setTransformation(a.worldLocation,a.worldRotation,a.worldScale),r.show(),this.health=1}update(e){let t=this.internalInstance,n=t.model;t.frame>=n.sequences[0].interval[1]&&(this.health=0,t.hide())}}t.default=r},395:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2710),r=n(6820);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},2534:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2710),r=n(5285);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},4513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emitterFilterMode=t.layerFilterMode=void 0,t.layerFilterMode=function(e,t){return 2===e?[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]:3===e||4===e?[t.SRC_ALPHA,t.ONE]:5===e?[t.ZERO,t.SRC_COLOR]:6===e?[t.DST_COLOR,t.SRC_COLOR]:[0,0]},t.emitterFilterMode=function(e,t){return 0===e?[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]:1===e?[t.SRC_ALPHA,t.ONE]:2===e?[t.ZERO,t.SRC_COLOR]:3===e?[t.DST_COLOR,t.SRC_COLOR]:4===e?[t.SRC_ALPHA,t.ONE]:[0,0]}},9641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(1925);class l extends i.default{constructor(e,t,n){super(e,t),this.index=n,this.name=t.name,this.objectId=t.objectId,this.parentId=t.parentId,this.pivot=e.pivotPoints[t.objectId]||a.vec3.create();let r=t.flags;this.dontInheritTranslation=1&r,this.dontInheritRotation=2&r,this.dontInheritScaling=4&r,this.billboarded=8&r,this.billboardedX=16&r,this.billboardedY=32&r,this.billboardedZ=64&r,this.cameraAnchored=128&r,this.emitterUsesMdlOrUnshaded=32768&r,this.emitterUsesTgaOrSortPrimitivesFarZ=65536&r,this.lineEmitter=131072&r,this.unfogged=262144&r,this.modelSpace=524288&r,this.xYQuad=1048576&r,this.anyBillboarding=0!==(this.billboarded||this.billboardedX||this.billboardedY||this.billboardedZ),t.objectId===t.parentId&&(this.parentId=-1),this.addVariants("KGTR","translation"),this.addVariants("KGRT","rotation"),this.addVariants("KGSC","scale"),this.addVariantIntersection(["translation","rotation","scale"],"generic")}getVisibility(e,t,n,a){return e[0]=1,-1}getTranslation(e,t,n,a){return this.getVectorValue(e,"KGTR",t,n,a,r.VEC3_ZERO)}getRotation(e,t,n,a){return this.getQuatValue(e,"KGRT",t,n,a,r.QUAT_DEFAULT)}getScale(e,t,n,a){return this.getVectorValue(e,"KGSC",t,n,a,r.VEC3_ONE)}}t.default=l},7874:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderEmitter=t.SETTING_PARTICLES_HIGH=t.EMITTER_EVENT_TEXTURE_OFFSET=t.EMITTER_PARTICLE2_TEXTURE_OFFSET=t.EMITTER_UBERSPLAT=t.EMITTER_SPLAT=t.EMITTER_RIBBON=t.EMITTER_PARTICLE2=t.TAIL=t.HEAD=t.BYTE_OFFSET_TEAM_COLOR=t.FLOAT_OFFSET_HEALTH=t.FLOAT_OFFSET_P3=t.FLOAT_OFFSET_P2=t.FLOAT_OFFSET_P1=t.FLOAT_OFFSET_P0=t.BYTE_OFFSET_LEFT_RIGHT_TOP=t.BYTE_OFFSET_TAIL=t.BYTE_OFFSET_COLOR=t.BYTE_OFFSET_HEALTH=t.BYTE_OFFSET_P3=t.BYTE_OFFSET_P2=t.BYTE_OFFSET_P1=t.BYTE_OFFSET_P0=t.FLOATS_PER_OBJECT=t.BYTES_PER_OBJECT=void 0;const a=n(9234),r=a.vec3.create(),i=a.vec3.create(),l=a.vec3.create();function s(e,n){let a=e.objects,r=n.floatView,i=0;for(let e of a){let n=i*t.FLOATS_PER_OBJECT,a=n+t.FLOAT_OFFSET_P0,l=e.vertices;r[a+0]=l[0],r[a+1]=l[1],r[a+2]=l[2],r[a+3]=l[3],r[a+4]=l[4],r[a+5]=l[5],r[a+6]=l[6],r[a+7]=l[7],r[a+8]=l[8],r[a+9]=l[9],r[a+10]=l[10],r[a+11]=l[11],r[n+t.FLOAT_OFFSET_HEALTH]=e.health,i+=1}}t.BYTES_PER_OBJECT=60,t.FLOATS_PER_OBJECT=t.BYTES_PER_OBJECT>>2,t.BYTE_OFFSET_P0=0,t.BYTE_OFFSET_P1=12,t.BYTE_OFFSET_P2=24,t.BYTE_OFFSET_P3=36,t.BYTE_OFFSET_HEALTH=48,t.BYTE_OFFSET_COLOR=52,t.BYTE_OFFSET_TAIL=56,t.BYTE_OFFSET_LEFT_RIGHT_TOP=57,t.FLOAT_OFFSET_P0=t.BYTE_OFFSET_P0>>2,t.FLOAT_OFFSET_P1=t.BYTE_OFFSET_P1>>2,t.FLOAT_OFFSET_P2=t.BYTE_OFFSET_P2>>2,t.FLOAT_OFFSET_P3=t.BYTE_OFFSET_P3>>2,t.FLOAT_OFFSET_HEALTH=t.BYTE_OFFSET_HEALTH>>2,t.BYTE_OFFSET_TEAM_COLOR=t.BYTE_OFFSET_LEFT_RIGHT_TOP,t.HEAD=0,t.TAIL=1,t.EMITTER_PARTICLE2=0,t.EMITTER_RIBBON=1,t.EMITTER_SPLAT=2,t.EMITTER_UBERSPLAT=3,t.EMITTER_PARTICLE2_TEXTURE_OFFSET=1e3,t.EMITTER_EVENT_TEXTURE_OFFSET=1e4,t.SETTING_PARTICLES_HIGH=2,t.renderEmitter=function(e,n){let o=e.alive,u=e.emitterObject.geometryEmitterType;if(u===t.EMITTER_RIBBON&&(o-=1),o>0){let c=e.instance.model.viewer,d=c.buffer,h=c.gl,f=c.webgl.extensions.ANGLE_instanced_arrays,_=o*t.BYTES_PER_OBJECT,m=n.attribs;d.reserve(_),u===t.EMITTER_PARTICLE2?(function(e,n){let s=e.instance,o=e.objects,u=n.byteView,c=n.floatView,d=e.emitterObject,h=d.modelSpace,f=d.tailLength,_=e.node,m=s.teamColor,p=0;for(let e of o){let n=p*t.BYTES_PER_OBJECT,s=p*t.FLOATS_PER_OBJECT,o=s+t.FLOAT_OFFSET_P0,d=e.location,g=e.scale,b=e.tail;if(b===t.HEAD)h&&(d=a.vec3.transformMat4(r,d,_.worldMatrix)),c[o+0]=d[0],c[o+1]=d[1],c[o+2]=d[2],c[o+3]=e.facing;else{let t=e.velocity,n=i,r=d;n[0]=r[0]-f*t[0],n[1]=r[1]-f*t[1],n[2]=r[2]-f*t[2],h&&(n=a.vec3.transformMat4(n,n,_.worldMatrix),r=a.vec3.transformMat4(l,r,_.worldMatrix)),c[o+0]=n[0],c[o+1]=n[1],c[o+2]=n[2],c[o+3]=r[0],c[o+4]=r[1],c[o+5]=r[2]}c[o+6]=g[0],c[o+7]=g[0],c[o+8]=g[0],c[s+t.FLOAT_OFFSET_HEALTH]=e.health,u[n+t.BYTE_OFFSET_TAIL]=b,u[n+t.BYTE_OFFSET_TEAM_COLOR]=m,p+=1}}(e,d),function(e,n){let a,r=e.instance,i=r.textureOverrides,l=r.scene.camera,s=e.emitterObject,o=s.model,u=o.viewer,c=u.gl,d=u.sharedCache.get("mdx"),h=n.uniforms,f=s.colors,_=s.intervals,m=s.replaceableId,p=s.internalTexture;c.blendFunc(s.blendSrc,s.blendDst),c.uniform1f(h.u_filterMode,s.filterMode),p=s.internalTexture?s.internalTexture:1===m?d.teamColors[r.teamColor]:2===m?d.teamGlows[r.teamColor]:o.textures[s.textureId];let g=i.get(t.EMITTER_PARTICLE2_TEXTURE_OFFSET+s.index);g||(0===m&&(g=i.get(s.textureId)),g||(g=p.texture)),u.webgl.bindTextureAndWrap(g,0,p.wrapS,p.wrapT),a=s.xYQuad?l.vectors:l.billboardedVectors,c.uniform1f(h.u_lifeSpan,s.lifeSpan),c.uniform1f(h.u_timeMiddle,s.timeMiddle),c.uniform1f(h.u_columns,s.columns),c.uniform1f(h.u_rows,s.rows),c.uniform1f(h.u_teamColored,s.teamColored),c.uniform3fv(h["u_intervals[0]"],_[0]),c.uniform3fv(h["u_intervals[1]"],_[1]),c.uniform3fv(h["u_intervals[2]"],_[2]),c.uniform3fv(h["u_intervals[3]"],_[3]),c.uniform4fv(h["u_colors[0]"],f[0]),c.uniform4fv(h["u_colors[1]"],f[1]),c.uniform4fv(h["u_colors[2]"],f[2]),c.uniform3fv(h.u_scaling,s.scaling),s.head&&(c.uniform3fv(h["u_vertices[0]"],a[0]),c.uniform3fv(h["u_vertices[1]"],a[1]),c.uniform3fv(h["u_vertices[2]"],a[2]),c.uniform3fv(h["u_vertices[3]"],a[3])),s.tail&&c.uniform3fv(h.u_cameraZ,l.directionZ)}(e,n)):u===t.EMITTER_RIBBON?(function(e,n){let a=e.first,r=n.byteView,i=n.floatView,l=e.emitterObject.columns,s=1/(e.alive-1),o=0;for(;a.next;){let e=a.next.vertices,n=o*t.BYTES_PER_OBJECT,u=o*t.FLOATS_PER_OBJECT+t.FLOAT_OFFSET_P0,c=n+t.BYTE_OFFSET_COLOR,d=n+t.BYTE_OFFSET_LEFT_RIGHT_TOP,h=(a.slot%l+(1-o*s-s))/l,f=a.slot/l,_=h+s,m=a.vertices,p=a.color;i[u+0]=m[0],i[u+1]=m[1],i[u+2]=m[2],i[u+3]=m[3],i[u+4]=m[4],i[u+5]=m[5],i[u+6]=e[3],i[u+7]=e[4],i[u+8]=e[5],i[u+9]=e[0],i[u+10]=e[1],i[u+11]=e[2],r[c+0]=p[0],r[c+1]=p[1],r[c+2]=p[2],r[c+3]=p[3],r[d+0]=255*h,r[d+1]=255*_,r[d+2]=255*f,a=a.next,o+=1}}(e,d),function(e,t){let n=e.instance.textureOverrides,a=e.emitterObject,r=a.layer,i=a.model,l=i.viewer.gl,s=t.uniforms,o=i.textures[r.textureId],u=n.get(r.textureId)||o.texture;r.bind(t),l.uniform1f(s.u_filterMode,r.filterMode),i.viewer.webgl.bindTextureAndWrap(u,0,o.wrapS,o.wrapT),l.uniform1f(s.u_columns,a.columns),l.uniform1f(s.u_rows,a.rows)}(e,n)):u===t.EMITTER_SPLAT?(s(e,d),function(e,n){let a=e.instance.textureOverrides,r=e.emitterObject,i=r.intervalTimes,l=r.intervals,s=r.colors,o=r.model,u=o.viewer.gl,c=n.uniforms,d=r.internalTexture,h=a.get(t.EMITTER_EVENT_TEXTURE_OFFSET+r.index)||d.texture;u.blendFunc(r.blendSrc,r.blendDst),o.viewer.webgl.bindTextureAndWrap(h,0,d.wrapS,d.wrapT),u.uniform1f(c.u_lifeSpan,r.lifeSpan),u.uniform1f(c.u_columns,r.columns),u.uniform1f(c.u_rows,r.rows),u.uniform3f(c.u_intervalTimes,i[0],i[1],0),u.uniform3fv(c["u_intervals[0]"],l[0]),u.uniform3fv(c["u_intervals[1]"],l[1]),u.uniform4fv(c["u_colors[0]"],s[0]),u.uniform4fv(c["u_colors[1]"],s[1]),u.uniform4fv(c["u_colors[2]"],s[2])}(e,n)):(s(e,d),function(e,n){let a=e.instance.textureOverrides,r=e.emitterObject,i=r.intervalTimes,l=r.colors,s=r.model,o=s.viewer.gl,u=n.uniforms,c=r.internalTexture,d=a.get(t.EMITTER_EVENT_TEXTURE_OFFSET+r.index)||c.texture;o.blendFunc(r.blendSrc,r.blendDst),s.viewer.webgl.bindTextureAndWrap(d,0,c.wrapS,c.wrapT),o.uniform1f(u.u_lifeSpan,r.lifeSpan),o.uniform1f(u.u_columns,r.columns),o.uniform1f(u.u_rows,r.rows),o.uniform3fv(u.u_intervalTimes,i),o.uniform4fv(u["u_colors[0]"],l[0]),o.uniform4fv(u["u_colors[1]"],l[1]),o.uniform4fv(u["u_colors[2]"],l[2])}(e,n)),d.bindAndUpdate(_),h.uniform1i(n.uniforms.u_emitter,u),h.vertexAttribPointer(m.a_p0,3,h.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P0),h.vertexAttribPointer(m.a_p1,3,h.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P1),h.vertexAttribPointer(m.a_p2,3,h.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P2),h.vertexAttribPointer(m.a_p3,3,h.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P3),h.vertexAttribPointer(m.a_health,1,h.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_HEALTH),h.vertexAttribPointer(m.a_color,4,h.UNSIGNED_BYTE,!0,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_COLOR),h.vertexAttribPointer(m.a_tail,1,h.UNSIGNED_BYTE,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_TAIL),h.vertexAttribPointer(m.a_leftRightTop,3,h.UNSIGNED_BYTE,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_LEFT_RIGHT_TOP),f.drawArraysInstancedANGLE(h.TRIANGLES,0,6,o)}}},8749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a,r,i,l,s,o,u){this.geosetAnimation=null,this.model=e,this.index=t,this.positionOffset=n,this.normalOffset=a,this.uvOffset=r,this.skinOffset=i,this.faceOffset=l,this.vertices=s,this.elements=o,this.faceType=u;for(let n of e.geosetAnimations)n.geosetId===t&&(this.geosetAnimation=n)}bindShared(e,t,n){e.vertexAttribPointer(t.a_position,3,e.FLOAT,!1,0,this.positionOffset),e.vertexAttribPointer(t.a_normal,3,e.FLOAT,!1,0,this.normalOffset),e.vertexAttribPointer(t.a_uv,2,e.FLOAT,!1,0,this.uvOffset+n*this.vertices*8)}bindVertexGroups(e,t){let n=this.model,a=n.skinDataType,r=n.bytesPerSkinElement;e.vertexAttribPointer(t.a_bones,4,a,!1,5*r,this.skinOffset),e.vertexAttribPointer(t.a_boneNumber,1,a,!1,5*r,this.skinOffset+4*r)}bind(e,t){let n=this.model.viewer.gl,a=e.attribs;this.bindShared(n,a,t),this.bindVertexGroups(n,a)}bindExtended(e,t){let n=this.model,a=n.viewer.gl,r=e.attribs,i=n.skinDataType,l=n.bytesPerSkinElement;this.bindShared(a,r,t),a.vertexAttribPointer(r.a_bones,4,i,!1,9*l,this.skinOffset),a.vertexAttribPointer(r.a_extendedBones,4,i,!1,9*l,this.skinOffset+4*l),a.vertexAttribPointer(r.a_boneNumber,1,i,!1,9*l,this.skinOffset+8*l)}bindHd(e,t,n){let a=this.model.viewer.gl,r=e.attribs;this.bindShared(a,r,n),t?(a.vertexAttribPointer(r.a_bones,4,a.UNSIGNED_BYTE,!1,8,this.skinOffset),a.vertexAttribPointer(r.a_weights,4,a.UNSIGNED_BYTE,!0,8,this.skinOffset+4)):this.bindVertexGroups(a,r)}render(){let e=this.model.viewer.gl;e.drawElements(this.faceType,this.elements,e.UNSIGNED_SHORT,this.faceOffset)}}},5598:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(1925);class i extends r.default{constructor(e,t){super(e,t);let n=t.color;this.alpha=t.alpha,this.color=a.vec3.fromValues(n[2],n[1],n[0]),this.geosetId=t.geosetId,this.addVariants("KGAO","alpha"),this.addVariants("KGAC","color")}getAlpha(e,t,n,a){return this.getScalarValue(e,"KGAO",t,n,a,this.alpha)}getColor(e,t,n,a){return this.getVectorValue(e,"KGAC",t,n,a,this.color)}}t.default=i},6072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7901),r=n(6187),i=n(2071),l=n(4310),s=n(8790),o=n(3949),u=n(1875),c=n(8673),d=n(533),h=n(6993),f=n(8779),_=n(8040),m=n(1506),p=e=>new s.MappedData(e),g=e=>r.decodeAudioData(e);t.default={load(e,t,n=!1){let a=e.gl,r=e.webgl;if(!r.ensureExtension("OES_texture_float"))throw new Error("MDX: No float texture support!");if(!r.ensureExtension("ANGLE_instanced_arrays"))throw new Error("MDX: No instanced rendering support!");let i=r.createShader(c.default,d.default),l=r.createShader("#define EXTENDED_BONES\n"+c.default,d.default),s=r.createShader("#define SKIN\n"+h.default,f.default),o=r.createShader(h.default,f.default),u=r.createShader(_.default,m.default),p=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p),a.bufferData(a.ARRAY_BUFFER,new Uint8Array([0,1,2,0,2,3]),a.STATIC_DRAW);let g={pathSolver:t,reforged:n,standardShader:i,extendedShader:l,hdSkinShader:s,hdVertexGroupShader:o,particlesShader:u,rectBuffer:p,teamColors:[],teamGlows:[],eventObjectTables:{}};e.sharedCache.set("mdx",g)},isValidSource:e=>e instanceof i.default||(l.isMdx(e)||l.isMdl(e)),resource:o.default,loadTeamTextures(e){let{pathSolver:t,reforged:n,teamColors:a,teamGlows:r}=e.sharedCache.get("mdx");if(0===a.length){let i=n?28:16,l=n?"dds":"blp",s=n?{reforged:!0}:void 0;for(let n=0;n<i;n++){let i=`${`${n}`.padStart(2,"0")}.${l}`,o=new u.default(1,!0,!0),c=new u.default(2,!0,!0);e.load(`ReplaceableTextures\\TeamColor\\TeamColor${i}`,t,s).then((e=>o.texture=e)),e.load(`ReplaceableTextures\\TeamGlow\\TeamGlow${i}`,t,s).then((e=>c.texture=e)),a[n]=o,r[n]=c}}},getEventObjectSoundFile(e,t,n,r){if(!t||".flac"===a.extname(e))return e;for(let t=1,a=r.length;t<a;t++){let a=r[t].data.getRow(e);if(a){let e=a.Flags,t=a.Filepath;if("SD_ONLY"===e){if(!n)return t}else{if("HD_ONLY"!==e)return t;if(n)return t}}}},async getEventObjectData(e,t,n,a){if("SPN"!==t&&"SPL"!==t&&"UBR"!==t&&"SND"!==t)return;let{pathSolver:r,reforged:i,eventObjectTables:l}=e.sharedCache.get("mdx"),s=i?{reforged:!0}:void 0,o=(e,t)=>r?r(e,t):e;if(!l[t]){let n=[];"SPN"===t?n.push("Splats\\SpawnData.slk"):"SPL"===t?n.push("Splats\\SplatData.slk"):"UBR"===t?n.push("Splats\\UberSplatData.slk"):"SND"===t&&(n.push("UI\\SoundInfo\\AnimSounds.slk"),i?n.push("UI\\SoundInfo\\DialogueHumanBase.slk","UI\\SoundInfo\\DialogueOrcBase.slk","UI\\SoundInfo\\DialogueUndeadBase.slk","UI\\SoundInfo\\DialogueNightElfBase.slk","UI\\SoundInfo\\DialogueNagaBase.slk","UI\\SoundInfo\\DialogueDemonBase.slk","UI\\SoundInfo\\DialogueCreepsBase.slk"):n.push("UI\\SoundInfo\\AnimLookups.slk"));let a=n.map((t=>e.loadGeneric(o(t,s),"text",p))),r=await Promise.all(a);for(let e of r)if(!e)return;l[t]=r}let u,c=l[t],d=c[0].data,h=[];if("SND"===t){if(i)u=d.findRow("AnimationEventCode",n);else{let e=c[1].data.getRow(n);e&&(u=d.getRow(e.SoundLabel))}if(u)for(let t of u.FileNames.split(",")){let n=this.getEventObjectSoundFile(t,i,a,c);n&&h.push(e.loadGeneric(o(n,s),"arrayBuffer",g))}}else u=d.getRow(n),u&&("SPN"===t?h.push(e.load(u.Model.replace(".mdl",".mdx"),o,s)):"SPL"!==t&&"UBR"!==t||h.push(e.load(`ReplaceableTextures\\Splats\\${u.file}${i?".dds":".blp"}`,o,s)));if(u&&h.length){let e=(await Promise.all(h)).filter((e=>e));if(e.length)return{row:u,resources:e}}}}},6305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{}t.default=r},3571:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1925),r=n(4513);class i extends a.default{constructor(e,t,n,a){super(e,t),this.textureId=0,this.blendSrc=0,this.blendDst=0,this.blended=!1,this.textureAnimation=null;let i=t.filterMode,l=t.textureAnimationId,s=e.viewer.gl;this.index=n,this.priorityPlane=a,i>6&&(i=2),this.filterMode=i,-1!==t.textureId&&(this.textureId=t.textureId),this.coordId=t.coordId,this.alpha=t.alpha;let o=t.flags;if(this.unshaded=1&o,this.sphereEnvironmentMap=2&o,this.twoSided=16&o,this.unfogged=32&o,this.noDepthTest=64&o,this.noDepthSet=128&o,this.depthMaskValue=0===i||1===i,i>1&&(this.blended=!0,[this.blendSrc,this.blendDst]=r.layerFilterMode(i,s)),-1!==l){let t=e.textureAnimations[l];t&&(this.textureAnimation=t)}this.addVariants("KMTA","alpha"),this.addVariants("KMTF","textureId")}bind(e){let t=this.model.viewer.gl;t.uniform1f(e.uniforms.u_filterMode,this.filterMode),this.blended?(t.enable(t.BLEND),t.blendFunc(this.blendSrc,this.blendDst)):t.disable(t.BLEND),this.twoSided?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),this.noDepthTest?t.disable(t.DEPTH_TEST):t.enable(t.DEPTH_TEST),this.noDepthSet?t.depthMask(!1):t.depthMask(this.depthMaskValue)}getAlpha(e,t,n,a){return this.getScalarValue(e,"KMTA",t,n,a,this.alpha)}getTextureId(e,t,n,a){return this.getScalarValue(e,"KMTF",t,n,a,this.textureId)}}t.default=i},1764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{constructor(e,t,n){super(e,t,n),this.type=t.type,this.attenuation=t.attenuation,this.color=t.color,this.intensity=t.intensity,this.ambientColor=t.ambientColor,this.ambientIntensity=t.ambientIntensity}getAttenuationStart(e,t,n,a){return this.getScalarValue(e,"KLAS",t,n,a,this.attenuation[0])}getAttenuationEnd(e,t,n,a){return this.getScalarValue(e,"KLAE",t,n,a,this.attenuation[1])}getIntensity(e,t,n,a){return this.getScalarValue(e,"KLAI",t,n,a,this.intensity)}getColor(e,t,n,a){return this.getVectorValue(e,"KLAC",t,n,a,this.color)}getAmbientIntensity(e,t,n,a){return this.getScalarValue(e,"KLBI",t,n,a,this.ambientIntensity)}getAmbientColor(e,t,n,a){return this.getVectorValue(e,"KLBC",t,n,a,this.ambientColor)}}t.default=r},8018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.model=e,this.shader=t,this.layers=n}}},3949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2071),r=n(3265),i=n(4217),l=n(6072),s=n(6208),o=n(3571),u=n(8018),c=n(5598),d=n(9406),h=n(9648),f=n(1764),_=n(6305),m=n(6762),p=n(8784),g=n(7439),b=n(7530),w=n(608),v=n(9249),A=n(2767),y=n(8803),L=n(5321),S=n(9511),T=n(1875);class E extends i.default{constructor(e,t){let n;if(super(t),this.reforged=!1,this.hd=!1,this.solverParams={},this.name="",this.sequences=[],this.globalSequences=[],this.materials=[],this.layers=[],this.textures=[],this.textureAnimations=[],this.geosets=[],this.geosetAnimations=[],this.bones=[],this.lights=[],this.helpers=[],this.attachments=[],this.pivotPoints=[],this.particleEmitters=[],this.particleEmitters2=[],this.ribbonEmitters=[],this.cameras=[],this.eventObjects=[],this.collisionShapes=[],this.hasLayerAnims=!1,this.hasGeosetAnims=!1,this.batches=[],this.genericObjects=[],this.sortedGenericObjects=[],this.hierarchy=[],this.opaqueGroups=[],this.translucentGroups=[],this.arrayBuffer=null,this.elementBuffer=null,this.skinDataType=0,this.bytesPerSkinElement=1,e instanceof a.default)n=e;else{n=new a.default;try{n.load(e)}catch(e){}}let i=this.viewer,S=this.pathSolver,E=this.solverParams,k=n.version>800,x=k?".dds":".blp",I=!1;this.reforged=k,this.name=n.name;let M=n.extent;this.bounds.fromExtents(M.min,M.max);for(let e of n.sequences)this.sequences.push(new r.default(e));for(let e of n.globalSequences)this.globalSequences.push(e);for(let e of n.textureAnimations)this.textureAnimations.push(new s.default(this,e));let U=0;for(let e of n.materials){let t=[];for(let n of e.layers){let a=new o.default(this,n,U++,e.priorityPlane);t.push(a),this.layers.push(a)}this.materials.push(new u.default(this,e.shader,t)),""!==e.shader&&(this.hd=!0)}k&&(E.reforged=!0),this.hd&&(E.hd=!0);let P=n.textures;for(let e=0,t=P.length;e<t;e++){let t=P[e],n=t.path,a=t.replaceableId,r=t.flags;0!==a&&(n=`ReplaceableTextures\\${d.default[a]}${x}`,1!==a&&2!==a||(I=!0));let l=new T.default(a,!!(1&r),!!(2&r));i.load(n,S,E).then((e=>{e&&(l.texture=e)})),this.textures[e]=l}for(let e of n.geosetAnimations)this.geosetAnimations.push(new c.default(this,e));this.pivotPoints=n.pivotPoints;let R=0;for(let e of n.bones)this.bones.push(new h.default(this,e,R++));for(let e of n.lights)this.lights.push(new f.default(this,e,R++));for(let e of n.helpers)this.helpers.push(new _.default(this,e,R++));for(let e of n.attachments)this.attachments.push(new m.default(this,e,R++));for(let e of n.particleEmitters)this.particleEmitters.push(new p.default(this,e,R++));for(let e of n.particleEmitters2){let t=new g.default(this,e,R++);this.particleEmitters2.push(t),t.teamColored&&(I=!0)}for(let e of n.ribbonEmitters)this.ribbonEmitters.push(new b.default(this,e,R++));for(let e of n.cameras)this.cameras.push(new w.default(this,e));for(let e of n.eventObjects)this.eventObjects.push(new v.default(this,e,R++));for(let e of n.collisionShapes)this.collisionShapes.push(new A.default(this,e,R++));this.genericObjects.push(...this.bones,...this.lights,...this.helpers,...this.attachments,...this.particleEmitters,...this.particleEmitters2,...this.ribbonEmitters,...this.eventObjects,...this.collisionShapes),y.default(this,n.geosets),L.default(this),this.setupHierarchy(-1);for(let e=0,t=this.genericObjects.length;e<t;e++)this.sortedGenericObjects[e]=this.genericObjects[this.hierarchy[e]];I&&l.default.loadTeamTextures(i)}addInstance(){return new S.default(this)}setupHierarchy(e){for(let t=0,n=this.genericObjects.length;t<n;t++){let n=this.genericObjects[t];n.parentId===e&&(this.hierarchy.push(t),this.setupHierarchy(n.objectId))}}}t.default=E},9511:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(9024),i=n(7290),l=n(7564),s=n(5639),o=n(2500),u=n(7811),c=n(6745),d=n(5337),h=n(395),f=n(1735),_=n(2534),m=n(6451),p=n(7874),g=new Float32Array(1),b=a.vec3.create(),w=a.quat.create(),v=a.vec3.create(),A=new Float32Array(3),y=new Float32Array(1),L=new Uint32Array(1);class S extends r.default{constructor(e){super(e),this.attachments=[],this.particleEmitters=[],this.particleEmitters2=[],this.ribbonEmitters=[],this.eventObjectEmitters=[],this.nodes=[],this.sortedNodes=[],this.frame=0,this.counter=0,this.sequence=-1,this.sequenceLoopMode=0,this.sequenceEnded=!1,this.teamColor=0,this.vertexColor=new Float32Array([1,1,1,1]),this.allowParticleSpawn=!1,this.forced=!0,this.geosetColors=[],this.layerAlphas=[],this.layerTextures=[],this.uvAnims=[],this.worldMatrices=null,this.boneTexture=null;for(let t=0,n=e.geosets.length;t<n;t++)this.geosetColors[t]=new Float32Array(4);for(let t=0,n=e.layers.length;t<n;t++)this.layerAlphas[t]=0,this.layerTextures[t]=0,this.uvAnims[t]=new Float32Array(5);let t=i.createSkeletalNodes(e.genericObjects.length,s.default),n=t.nodes,a=0;this.nodes.push(...n),this.worldMatrices=t.worldMatrices;for(let t of e.bones)this.initNode(n,n[a++],t);for(let t of e.lights)this.initNode(n,n[a++],t);for(let t of e.helpers)this.initNode(n,n[a++],t);for(let t of e.attachments){let e;t.internalModel&&(e=new o.default(this,t),this.attachments.push(e)),this.initNode(n,n[a++],t,e)}for(let t of e.particleEmitters){let e=new u.default(this,t);this.particleEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.particleEmitters2){let e=new c.default(this,t);this.particleEmitters2.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.ribbonEmitters){let e=new d.default(this,t);this.ribbonEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.eventObjects){let e,r=t.type;e="SPN"===r?new h.default(this,t):"SPL"===r?new f.default(this,t):"UBR"===r?new _.default(this,t):new m.default(this,t),this.eventObjectEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.collisionShapes)this.initNode(n,n[a++],t);let r=e.hierarchy;for(let e=0,t=n.length;e<t;e++)this.sortedNodes[e]=n[r[e]];e.bones.length&&(this.boneTexture=new l.default(e.viewer.gl,4,4*e.bones.length,1))}setTexture(e,t){this.overrideTexture(e,t)}setParticle2Texture(e,t){this.overrideTexture(p.EMITTER_PARTICLE2_TEXTURE_OFFSET+e,t)}setEventTexture(e,t){this.overrideTexture(p.EMITTER_EVENT_TEXTURE_OFFSET+e,t)}clearEmittedObjects(){for(let e of this.particleEmitters)e.clear();for(let e of this.particleEmitters2)e.clear();for(let e of this.ribbonEmitters)e.clear();for(let e of this.eventObjectEmitters)e.clear()}initNode(e,t,n,r){a.vec3.copy(t.pivot,n.pivot),-1===n.parentId?t.parent=this:t.parent=e[n.parentId],n.billboarded?t.billboarded=!0:n.billboardedX?t.billboardedX=!0:n.billboardedY?t.billboardedY=!0:n.billboardedZ&&(t.billboardedZ=!0),r&&(t.object=r)}hide(){super.hide(),this.resetAttachments()}updateNodes(e,t){let n=this.sequence,a=this.frame,r=this.counter,i=this.sortedNodes,l=this.model.sortedGenericObjects,s=this.scene;for(let o=0,u=i.length;o<u;o++){let u=l[o],c=i[o],d=c.parent,h=t||d.wasDirty||u.anyBillboarding,f=u.variants;(t||f.generic[n])&&(h=!0,(t||f.translation[n])&&u.getTranslation(c.localLocation,n,a,r),(t||f.rotation[n])&&u.getRotation(c.localRotation,n,a,r),(t||f.scale[n])&&u.getScale(c.localScale,n,a,r)),c.wasDirty=h,h&&c.recalculateTransformation(s),c.object&&(u.getVisibility(g,n,a,r),g[0]>0&&c.object.update(e));for(let t of c.children)h&&t.recalculateTransformation(),t.update(e)}}recalculateTransformation(){super.recalculateTransformation(),this.forced=!0}updateBatches(e){let t=this.sequence,n=this.frame,a=this.counter,r=this.model,i=r.geosets,l=r.layers,s=this.geosetColors,o=this.layerAlphas,u=this.layerTextures,c=this.uvAnims;for(let r=0,l=i.length;r<l;r++){let l=i[r].geosetAnimation,o=s[r];l?((e||l.variants.color[t])&&(l.getColor(A,t,n,a),o[0]=A[0],o[1]=A[1],o[2]=A[2]),(e||l.variants.alpha[t])&&(l.getAlpha(y,t,n,a),o[3]=y[0])):e&&(o[0]=1,o[1]=1,o[2]=1,o[3]=1)}for(let r=0,i=l.length;r<i;r++){let i=l[r],s=i.textureAnimation,d=c[r];(e||i.variants.alpha[t])&&(i.getAlpha(y,t,n,a),o[r]=y[0]),(e||i.variants.textureId[t])&&(i.getTextureId(L,t,n,a),u[r]=L[0]),s?((e||s.variants.translation[t])&&(s.getTranslation(b,t,n,a),d[0]=b[0],d[1]=b[1]),(e||s.variants.rotation[t])&&(s.getRotation(w,t,n,a),d[2]=w[2],d[3]=w[3]),(e||s.variants.scale[t])&&(s.getScale(v,t,n,a),d[4]=v[0])):e&&(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=1)}}updateBoneTexture(){this.boneTexture&&this.boneTexture.bindAndUpdate(this.worldMatrices)}renderOpaque(){let e=this.model;for(let t of e.opaqueGroups)t.render(this)}renderTranslucent(){let e=this.model;for(let t of e.translucentGroups)t.render(this)}updateAnimations(e){let t=this.model,n=this.sequence;if(-1!==n){let a=t.sequences[n],r=a.interval,i=1e3*e;this.frame+=i,this.counter+=i,this.allowParticleSpawn=!0,this.frame>=r[1]?(2===this.sequenceLoopMode||0===this.sequenceLoopMode&&0===a.flags?(this.frame=r[0],this.resetEventEmitters()):(this.frame=r[1],this.counter-=i,this.allowParticleSpawn=!1),this.sequenceEnded=!0):this.sequenceEnded=!1}let a=this.forced;(-1!==n||a)&&(this.updateNodes(e,a),this.updateBoneTexture(),this.updateBatches(a)),this.forced=!1}setTeamColor(e){return this.teamColor=e,this}setVertexColor(e){return this.vertexColor.set(e),this}setSequence(e){let t=this.model.sequences;return this.sequence=e,e<0||e>t.length-1?(this.sequence=-1,this.frame=0,this.allowParticleSpawn=!1):this.frame=t[e].interval[0],this.resetEventEmitters(),this.resetAttachments(),this.forced=!0,this}getBounds(){let e=this.model;if(-1===this.sequence)return e.bounds;let t=e.sequences[this.sequence].bounds;return 0===t.r?e.bounds:t}setSequenceLoopMode(e){return this.sequenceLoopMode=e,this}getAttachment(e){let t=this.model.attachments[e];if(t)return this.nodes[t.index]}resetEventEmitters(){for(let e of this.eventObjectEmitters)e.lastValue=0}resetAttachments(){for(let e of this.attachments)e.internalInstance.hide()}}t.default=S},5639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(7290);class i extends r.SkeletalNode{convertBasis(e){a.quat.rotateY(e,e,-Math.PI/2),a.quat.rotateX(e,e,-Math.PI/2)}}t.default=i},6578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(6269),l=n(7739),s=a.quat.create(),o=a.vec3.create(),u=new Float32Array(1),c=new Float32Array(1),d=new Float32Array(1),h=new Float32Array(1);class f extends l.default{constructor(e){super(e),this.velocity=a.vec3.create(),this.gravity=0;let t=e.emitterObject.internalModel;this.internalInstance=t.addInstance()}bind(){let e=this.emitter,t=e.instance,n=t.sequence,l=t.frame,o=t.counter,f=t.scene,_=e.emitterObject,m=t.nodes[_.index],p=this.internalInstance,g=m.worldScale,b=this.velocity;_.getLatitude(u,n,l,o),_.getLifeSpan(c,n,l,o),_.getGravity(d,n,l,o),_.getSpeed(h,n,l,o),this.health=c[0],this.gravity=d[0]*g[2],a.quat.identity(s),a.quat.rotateZ(s,s,i.randomInRange(-Math.PI,Math.PI)),a.quat.rotateY(s,s,i.randomInRange(-u[0],u[0])),a.vec3.transformQuat(b,r.VEC3_UNIT_Z,s),a.vec3.transformQuat(b,b,m.worldRotation),a.vec3.scale(b,b,h[0]),a.vec3.mul(b,b,g),p.setScene(f),p.setSequence(0),p.setTransformation(m.worldLocation,a.quat.setAxisAngle(s,r.VEC3_UNIT_Z,i.randomInRange(0,2*Math.PI)),m.worldScale),p.show()}update(e){let t=this.internalInstance;if(this.health-=e,this.health>0){let n=this.velocity;n[2]-=this.gravity*e,t.move(a.vec3.scale(o,n,e))}else t.hide()}}t.default=f},5142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(6269),l=n(7739),s=a.quat.create(),o=new Float32Array(1),u=new Float32Array(1),c=new Float32Array(1),d=new Float32Array(1),h=new Float32Array(1),f=new Float32Array(1);class _ extends l.default{constructor(){super(...arguments),this.tail=0,this.gravity=0,this.location=a.vec3.create(),this.velocity=a.vec3.create(),this.scale=a.vec3.create(),this.facing=0}bind(e){let t=this.emitter,n=t.instance,l=n.sequence,_=n.frame,m=n.counter,p=t.emitterObject;p.getWidth(o,l,_,m),p.getLength(u,l,_,m),p.getLatitude(c,l,_,m),p.getVariation(d,l,_,m),p.getSpeed(h,l,_,m),p.getGravity(f,l,_,m);let g=t.node,b=g.pivot,w=g.worldScale,v=.5*o[0],A=.5*u[0],y=i.degToRad(c[0]),L=d[0],S=h[0],T=this.location,E=this.velocity;this.health=p.lifeSpan,this.tail=e,this.gravity=f[0]*w[2],a.vec3.copy(this.scale,w),T[0]=b[0]+i.randomInRange(-v,v),T[1]=b[1]+i.randomInRange(-A,A),T[2]=b[2],p.modelSpace||a.vec3.transformMat4(T,T,g.worldMatrix),a.quat.identity(s),a.quat.rotateZ(s,s,Math.PI/2),a.quat.rotateY(s,s,i.randomInRange(-y,y)),p.lineEmitter||a.quat.rotateX(s,s,i.randomInRange(-y,y)),p.modelSpace||a.quat.mul(s,g.worldRotation,s),a.vec3.transformQuat(E,r.VEC3_UNIT_Z,s),a.vec3.scale(E,E,S*(1+i.randomInRange(-L,L))),p.modelSpace||a.vec3.mul(E,E,w),p.xYQuad&&(this.facing=Math.atan2(E[1],E[0])-Math.PI+Math.PI/8)}update(e){if(this.health-=e,this.health>0){let t=this.location,n=this.velocity;n[2]-=this.gravity*e,t[0]+=n[0]*e,t[1]+=n[1]*e,t[2]+=n[2]*e}}}t.default=_},7811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1769),r=n(6578),i=new Float32Array(1);class l extends a.default{updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){this.emitterObject.getEmissionRate(i,t.sequence,t.frame,t.counter),this.currentEmission+=i[0]*e}}emit(){this.emitObject()}createObject(){return new r.default(this)}}t.default=l},6745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1769),r=n(5142),i=new Float32Array(1);class l extends a.default{constructor(e,t){super(e,t),this.lastEmissionKey=-1,this.node=e.nodes[t.index]}updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){let n=this.emitterObject,a=n.getEmissionRate(i,t.sequence,t.frame,t.counter);n.squirt?(a!==this.lastEmissionKey&&(this.currentEmission+=i[0]),this.lastEmissionKey=a):this.currentEmission+=i[0]*e}}emit(){let e=this.emitterObject;e.head&&this.emitObject(0),e.tail&&this.emitObject(1)}createObject(){return new r.default(this)}}t.default=l},7439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641),r=n(4513),i=n(9406),l=n(7874),s=n(1875);class o extends a.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=l.EMITTER_PARTICLE2,this.teamColored=0,this.internalTexture=null,this.colors=[],this.ok=!0,this.width=t.width,this.length=t.length,this.speed=t.speed,this.latitude=t.latitude,this.gravity=t.gravity,this.emissionRate=t.emissionRate*l.SETTING_PARTICLES_HIGH,this.squirt=t.squirt,this.lifeSpan=t.lifeSpan,this.variation=t.variation,this.tailLength=t.tailLength,this.timeMiddle=t.timeMiddle;let a=t.replaceableId;if(this.columns=t.columns,this.rows=t.rows,1===a||2===a)this.teamColored=1;else if(a>2){let t=e.reforged?".dds":".blp";this.internalTexture=new s.default(a,!1,!1),e.viewer.load(`ReplaceableTextures\\${i.default[a]}${t}`,e.pathSolver,e.solverParams).then((e=>{e&&(this.internalTexture.texture=e)}))}this.replaceableId=t.replaceableId,this.textureId=t.textureId;let o=t.headOrTail;this.head=0===o||2===o,this.tail=1===o||2===o,this.cellWidth=1/t.columns,this.cellHeight=1/t.rows;let u=t.segmentColors,c=t.segmentAlphas;for(let e=0;e<3;e++){let t=u[e];this.colors[e]=new Float32Array([t[0],t[1],t[2],c[e]/255])}this.scaling=t.segmentScaling;let d=t.headIntervals,h=t.tailIntervals;this.intervals=[new Float32Array(d[0]),new Float32Array(d[1]),new Float32Array(h[0]),new Float32Array(h[1])];let f=r.emitterFilterMode(t.filterMode,this.model.viewer.gl);this.filterMode=t.filterMode,this.blendSrc=f[0],this.blendDst=f[1],this.priorityPlane=t.priorityPlane}getWidth(e,t,n,a){return this.getScalarValue(e,"KP2N",t,n,a,this.width)}getLength(e,t,n,a){return this.getScalarValue(e,"KP2W",t,n,a,this.length)}getSpeed(e,t,n,a){return this.getScalarValue(e,"KP2S",t,n,a,this.speed)}getLatitude(e,t,n,a){return this.getScalarValue(e,"KP2L",t,n,a,this.latitude)}getGravity(e,t,n,a){return this.getScalarValue(e,"KP2G",t,n,a,this.gravity)}getEmissionRate(e,t,n,a){return this.getScalarValue(e,"KP2E",t,n,a,this.emissionRate)}getVisibility(e,t,n,a){return this.getScalarValue(e,"KP2V",t,n,a,1)}getVariation(e,t,n,a){return this.getScalarValue(e,"KP2R",t,n,a,this.variation)}}t.default=o},8784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641);class r extends a.default{constructor(e,t,n){super(e,t,n),this.internalModel=null,this.ok=!1,this.speed=t.speed,this.latitude=t.latitude,this.longitude=t.longitude,this.lifeSpan=t.lifeSpan,this.gravity=t.gravity,this.emissionRate=t.emissionRate,e.viewer.load(t.path.replace(/\\/g,"/").toLowerCase().replace(".mdl",".mdx"),e.pathSolver,e.solverParams).then((e=>{e&&(this.internalModel=e,this.ok=!0)}))}getSpeed(e,t,n,a){return this.getScalarValue(e,"KPES",t,n,a,this.speed)}getLatitude(e,t,n,a){return this.getScalarValue(e,"KPLTV",t,n,a,this.latitude)}getLongitude(e,t,n,a){return this.getScalarValue(e,"KPLN",t,n,a,this.longitude)}getLifeSpan(e,t,n,a){return this.getScalarValue(e,"KPEL",t,n,a,this.lifeSpan)}getGravity(e,t,n,a){return this.getScalarValue(e,"KPEG",t,n,a,this.gravity)}getEmissionRate(e,t,n,a){return this.getScalarValue(e,"KPEE",t,n,a,this.emissionRate)}getVisibility(e,t,n,a){return this.getScalarValue(e,"KPEV",t,n,a,1)}}t.default=r},9406:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={1:"TeamColor/TeamColor00",2:"TeamGlow/TeamGlow00",11:"Cliff/Cliff0",21:"",31:"LordaeronTree/LordaeronSummerTree",32:"AshenvaleTree/AshenTree",33:"BarrensTree/BarrensTree",34:"NorthrendTree/NorthTree",35:"Mushroom/MushroomTree",36:"RuinsTree/RuinsTree",37:"OutlandMushroomTree/MushroomTree"}},7081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(7739),i=a.vec3.create(),l=a.vec3.create(),s=new Float32Array(3),o=new Float32Array(1),u=new Uint32Array(1);class c extends r.default{constructor(){super(...arguments),this.vertices=new Float32Array(6),this.color=new Uint8Array(4),this.slot=0,this.prev=null,this.next=null}bind(){let e=this.emitter,t=e.instance,n=t.sequence,r=t.frame,s=t.counter,o=e.emitterObject,u=t.nodes[o.index],[c,d,h]=u.pivot,f=u.worldMatrix,_=this.vertices;this.health=e.emitterObject.lifeSpan,o.getHeightBelow(i,n,r,s),o.getHeightAbove(l,n,r,s),i[1]=d-i[0],i[0]=c,i[2]=h,l[1]=d+l[0],l[0]=c,l[2]=h,a.vec3.transformMat4(i,i,f),a.vec3.transformMat4(l,l,f),_[0]=l[0],_[1]=l[1],_[2]=l[2],_[3]=i[0],_[4]=i[1],_[5]=i[2]}update(e){if(this.health-=e,this.health>0){let t=this.emitter,n=t.instance,a=n.sequence,r=n.frame,i=n.counter,l=t.emitterObject,c=this.color,d=this.vertices,h=l.gravity*e*e;l.getColor(s,a,r,i),l.getAlpha(o,a,r,i),l.getTextureSlot(u,a,r,i),d[1]-=h,d[4]-=h,c[0]=255*s[0],c[1]=255*s[1],c[2]=255*s[2],c[3]=255*o[0],this.slot=u[0]}}}t.default=c},5337:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1769),r=n(7081);class i extends a.default{constructor(){super(...arguments),this.first=null,this.last=null}updateEmission(e){if(this.instance.allowParticleSpawn){let t=this.emitterObject;this.currentEmission+=t.emissionRate*e}}emit(){let e=this.emitObject(),t=this.last;t?(t.next=e,e.prev=t):this.first=e,this.last=e}kill(e){super.kill(e);let t=e.prev,n=e.next;e===this.first&&(this.first=n),e===this.last&&(this.first=null,this.last=null),t&&(t.next=n),n&&(n.prev=t),e.prev=null,e.next=null}createObject(){return new r.default(this)}}t.default=i},7530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9641),r=n(7874);class i extends a.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=r.EMITTER_RIBBON,this.ok=!0,this.layer=e.materials[t.materialId].layers[0],this.heightAbove=t.heightAbove,this.heightBelow=t.heightBelow,this.alpha=t.alpha,this.color=t.color,this.lifeSpan=t.lifeSpan,this.textureSlot=t.textureSlot,this.emissionRate=t.emissionRate*r.SETTING_PARTICLES_HIGH,this.gravity=t.gravity,this.columns=t.columns,this.rows=t.rows}getHeightBelow(e,t,n,a){return this.getScalarValue(e,"KRHB",t,n,a,this.heightBelow)}getHeightAbove(e,t,n,a){return this.getScalarValue(e,"KRHA",t,n,a,this.heightAbove)}getTextureSlot(e,t,n,a){return this.getScalarValue(e,"KRTX",t,n,a,0)}getColor(e,t,n,a){return this.getVectorValue(e,"KRCO",t,n,a,this.color)}getAlpha(e,t,n,a){return this.getScalarValue(e,"KRAL",t,n,a,this.alpha)}getVisibility(e,t,n,a){let r=this.getAlpha(e,t,n,a);return 0===e[0]?r:this.getScalarValue(e,"KRVS",t,n,a,1)}}t.default=i},120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTypedSd=t.QuatSd=t.VectorSd=t.ScalarSd=t.Sd=void 0;const a=n(9234),r=n(6269),i=n(8272);class l{constructor(e,t,n,a,r){this.frames=[],this.values=[],this.inTans=[],this.outTans=[],this.constant=!1,this.sd=e,this.start=t,this.end=n;let i=e.interpolationType,l=a.frames,s=a.values,o=a.inTans,u=a.outTans,c=e.defval;r&&l[0]>n&&(this.frames[0]=l[0],this.values[0]=s[0]);for(let e=0,a=l.length;e<a;e++){let a=l[e];a>=t&&a<=n&&(this.frames.push(a),this.values.push(s[e]),i>1&&(this.inTans.push(o[e]),this.outTans.push(u[e])))}let d=this.frames.length;if(0===d)this.constant=!0,this.frames[0]=t,this.values[0]=c;else if(1===d)this.constant=!0;else{let e=this.values[0];this.constant=this.values.every((t=>e.every(((e,n)=>e===t[n]))))}}getValue(e,t){let n=this.frames.length;if(this.constant||t<this.start)return this.sd.copy(e,this.values[0]),-1;{let a=-1,r=-1,i=n-1;if(t<this.frames[0]||t>=this.frames[i])a=i,r=0;else for(let e=1;e<n;e++)if(this.frames[e]>t){a=e-1,r=e;break}let l=this.frames[a],s=this.frames[r],o=s-l;o<0&&(o+=this.end-this.start,t<l&&(l=s));let u=0==o?0:(t-l)/o;return this.sd.interpolate(e,this.values,this.inTans,this.outTans,a,r,u),a}}}const s={KLAV:0,KATV:0,KPEV:0,KP2V:0,KRVS:0},o=new Float32Array(1),u=new Uint32Array(1),c=new Float32Array([1]),d=a.vec3.create(),h=a.quat.create(),f=a.vec3.fromValues(1,1,1),_=d,m={KMTF:o,KMTA:c,KTAT:d,KTAR:h,KTAS:f,KGAO:c,KGAC:_,KLAS:o,KLAE:o,KLAC:_,KLAI:o,KLBI:o,KLBC:_,KLAV:c,KATV:c,KPEE:o,KPEG:o,KPLN:o,KPLT:o,KPEL:o,KPES:o,KPEV:c,KP2S:o,KP2R:o,KP2L:o,KP2G:o,KP2E:o,KP2N:o,KP2W:o,KP2V:c,KRHA:o,KRHB:o,KRAL:new Float32Array([0]),KRCO:_,KRTX:o,KRVS:c,KCTR:d,KTTR:d,KCRL:u,KGTR:d,KGRT:h,KGSC:f};class p{constructor(e,t){this.globalSequence=null,this.sequences=[];let n=e.globalSequences,a=t.globalSequenceId,r=s[t.name];if(this.model=e,this.name=t.name,this.defval=m[t.name],this.interpolationType=void 0!==r?r:t.interpolationType,-1!==a&&n)this.globalSequence=new l(this,0,n[a],t,!0);else for(let n of e.sequences){let e=n.interval;this.sequences.push(new l(this,e[0],e[1],t,!1))}}getValue(e,t,n,a){return this.globalSequence?this.globalSequence.getValue(e,a%this.globalSequence.end):this.sequences[t].getValue(e,n)}isVariant(e){return this.globalSequence?!this.globalSequence.constant:!this.sequences[e].constant}}t.Sd=p;class g extends p{copy(e,t){e[0]=t[0]}interpolate(e,t,n,a,i,l,s){let o=this.interpolationType,u=t[i][0];0===o?e[0]=u:1===o?e[0]=r.lerp(u,t[l][0],s):2===o?e[0]=r.hermite(u,a[i][0],n[l][0],t[l][0],s):3===o&&(e[0]=r.bezier(u,a[i][0],n[l][0],t[l][0],s))}}t.ScalarSd=g;class b extends p{copy(e,t){a.vec3.copy(e,t)}interpolate(e,t,n,r,i,l,s){let o=this.interpolationType;0===o?a.vec3.copy(e,t[i]):1===o?a.vec3.lerp(e,t[i],t[l],s):2===o?a.vec3.hermite(e,t[i],r[i],n[l],t[l],s):3===o&&a.vec3.bezier(e,t[i],r[i],n[l],t[l],s)}}t.VectorSd=b;class w extends p{copy(e,t){a.quat.copy(e,t)}interpolate(e,t,n,r,i,l,s){let o=this.interpolationType;0===o?a.quat.copy(e,t[i]):1===o?a.quat.slerp(e,t[i],t[l],s):2!==o&&3!==o||a.quat.sqlerp(e,t[i],r[i],n[l],t[l],s)}}t.QuatSd=w,t.createTypedSd=function(e,t){return t instanceof i.UintAnimation||t instanceof i.FloatAnimation?new g(e,t):t instanceof i.Vector3Animation?new b(e,t):new w(e,t)}},3265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3335);t.default=class{constructor(e){this.name=e.name,this.interval=e.interval,this.flags=e.flags,this.rarity=e.rarity,this.bounds=new a.default;let t=e.extent;this.bounds.fromExtents(t.min,t.max)}}},8803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8749),r=n(1643);t.default=function(e,t){if(t.length>0){let n=e.viewer.gl,i=0,l=0,s=0,o=0,u=0,c=[];for(let e=0,n=t.length;e<n;e++){let n=t[e];if(0===n.lod||-1===n.lod){let t=n.vertices.length/3;if(i+=12*t,l+=12*t,s+=n.uvSets.length*t*8,n.skin.length)o+=8*t,c[e]=2;else{let a=0;for(let e of n.matrixGroups)e>a&&(a=e);a>4?(o+=9*t,c[e]=1):(o+=5*t,c[e]=0)}u+=n.faces.byteLength}}let d=0,h=d+i,f=h+l,_=f+s,m=0,p=Uint8Array,g=n.UNSIGNED_BYTE;e.bones.length>255&&(o*=2,p=Uint16Array,g=n.UNSIGNED_SHORT),e.skinDataType=g,e.bytesPerSkinElement=p.BYTES_PER_ELEMENT,e.arrayBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.arrayBuffer),n.bufferData(n.ARRAY_BUFFER,_+o,n.STATIC_DRAW),e.elementBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.elementBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,u,n.STATIC_DRAW);for(let i=0,l=t.length;i<l;i++){let l=t[i];if(0===l.lod||-1===l.lod){let t,s=l.vertices,o=l.normals,u=l.uvSets,g=l.faces,b=l.vertices.length/3,w=c[i];if(2===w)t=l.skin;else{let e=l.matrixIndices,n=l.vertexGroups,a=[],r=0,i=4;1===w&&(i=8),t=new p(b*(i+1));for(let t of l.matrixGroups)a.push(e.subarray(r,r+t)),r+=t;for(let e=0;e<b;e++){let l=a[n[e]];if(r=e*(i+1),l){let e=Math.min(l.length,i);for(let n=0;n<e;n++)t[r+n]=l[n]+1;t[r+i]=e}}}let v=new a.default(e,e.geosets.length,d,h,f,_,m,b,g.length,l.faceTypeGroups[0]);e.geosets.push(v);let A=e.materials[l.materialId];if("Shader_HD_DefaultUnit"===A.shader)e.batches.push(new r.default(e.batches.length,v,A,2===w,!0));else{let t=1===w;for(let n of A.layers)e.batches.push(new r.default(e.batches.length,v,n,t,!1))}n.bufferSubData(n.ARRAY_BUFFER,d,s),d+=s.byteLength,n.bufferSubData(n.ARRAY_BUFFER,h,o),h+=o.byteLength;for(let e of u)n.bufferSubData(n.ARRAY_BUFFER,f,e),f+=e.byteLength;n.bufferSubData(n.ARRAY_BUFFER,_,t),_+=t.byteLength,n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,m,g),m+=g.byteLength}}}}},5321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1643),r=n(9562),i=n(2891),l=n(9641),s=n(7439),o=n(7530);function u(e){return e instanceof a.default||e instanceof o.default?e.layer.priorityPlane:e instanceof s.default?e.priorityPlane:0}function c(e,t){return e instanceof r.default?t instanceof a.default&&t.isExtendedOrUsingSkin===e.isExtendedOrUsingSkin&&t.isHd===e.isHd:t instanceof l.default}function d(e,t){return t instanceof a.default?new r.default(e,t.isExtendedOrUsingSkin,t.isHd):new i.default(e)}t.default=function(e){let t=[],n=[];for(let a of e.batches)a.layer.filterMode<2?t.push(a):n.push(a);let r=e.opaqueGroups,i=e.translucentGroups,l=null;for(let n of t)l&&c(l,n)||(l=d(e,n),r.push(l)),l.objects.push(n.index);let s=[...n,...e.eventObjects,...e.particleEmitters2,...e.ribbonEmitters].sort(((e,t)=>u(e)-u(t)));l=null;for(let t of s)(t instanceof a.default||-1!==t.geometryEmitterType)&&(l&&c(l,t)||(l=d(e,t),i.push(l)),l.objects.push(t.index))}},8779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\n${n(4531).default}\n\nuniform sampler2D u_diffuseMap;\nuniform sampler2D u_ormMap;\nuniform sampler2D u_teamColorMap;\nuniform float u_filterMode;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_layerAlpha;\n\nvoid main() {\n  vec4 texel = texture2D(u_diffuseMap, v_uv);\n  vec4 color = vec4(texel.rgb, texel.a * v_layerAlpha);\n\n  vec4 orma = texture2D(u_ormMap, v_uv);\n\n  if (orma.a > 0.1) {\n    color *= texture2D(u_teamColorMap, v_uv) * orma.a;\n  }\n\n  // 1bit Alpha\n  if (u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  gl_FragColor = color;\n}\n`;t.default=a},6993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7838),r=n(1483),i=`\nuniform mat4 u_VP;\nuniform float u_layerAlpha;\nuniform bool u_hasBones;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_layerAlpha;\n\n${a.default}\n\n#ifdef SKIN\nattribute vec4 a_bones;\nattribute vec4 a_weights;\n\nvoid transformSkin(inout vec3 position, inout vec3 normal) {\n  mat4 bone;\n\n  bone += fetchMatrix(a_bones[0], 0.0) * a_weights[0];\n  bone += fetchMatrix(a_bones[1], 0.0) * a_weights[1];\n  bone += fetchMatrix(a_bones[2], 0.0) * a_weights[2];\n  bone += fetchMatrix(a_bones[3], 0.0) * a_weights[3];\n\n  position = vec3(bone * vec4(position, 1.0));\n  normal = mat3(bone) * normal;\n}\n#else\n${r.default}\n#endif\n\nvoid main() {\n  vec3 position = a_position;\n  vec3 normal = a_normal;\n\n  if (u_hasBones) {\n    #ifdef SKIN\n      transformSkin(position, normal);\n    #else\n      transformVertexGroups(position, normal);\n    #endif\n  }\n\n  v_normal = normal;\n  v_uv = a_uv;\n  v_layerAlpha = u_layerAlpha;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=i},1506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\n${n(4531).default}\n\n#define EMITTER_PARTICLE2 0\n#define EMITTER_RIBBON 1\n\nuniform sampler2D u_texture;\nuniform highp int u_emitter;\nuniform float u_filterMode;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 texel = texture2D(u_texture, v_texcoord);\n  vec4 color = texel * v_color;\n\n  // 1bit Alpha, used by ribbon emitters.\n  if (u_emitter == EMITTER_RIBBON && u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  // "Close to 0 alpha"\n  if (u_emitter == EMITTER_PARTICLE2 && (u_filterMode == 2.0 || u_filterMode == 3.0) && color.a < 0.02) {\n    discard;\n  }\n\n  gl_FragColor = color;\n}\n`;t.default=a},8040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n#define EMITTER_PARTICLE2 0\n#define EMITTER_RIBBON 1\n#define EMITTER_SPLAT 2\n#define EMITTER_UBERSPLAT 3\n#define HEAD 0.0\n\nuniform mat4 u_VP;\nuniform int u_emitter;\n\n// Shared\nuniform vec4 u_colors[3];\nuniform vec3 u_vertices[4];\nuniform vec3 u_intervals[4];\nuniform float u_lifeSpan;\nuniform float u_columns;\nuniform float u_rows;\n\n// Particle2\nuniform vec3 u_scaling;\nuniform vec3 u_cameraZ;\nuniform float u_timeMiddle;\nuniform bool u_teamColored;\n\n// Splat and Uber.\nuniform vec3 u_intervalTimes;\n\n// Vertices\nattribute float a_position;\n\n// Instances\nattribute vec3 a_p0;\nattribute vec3 a_p1;\nattribute vec3 a_p2;\nattribute vec3 a_p3;\nattribute float a_health;\nattribute vec4 a_color;\nattribute float a_tail;\nattribute vec3 a_leftRightTop;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n\nfloat getCell(vec3 interval, float factor) {\n  float start = interval[0];\n  float end = interval[1];\n  float repeat = interval[2];\n  float spriteCount = end - start;\n\n  if (spriteCount > 0.0) {\n    // Repeating speeds up the sprite animation, which makes it effectively run N times in its interval.\n    // E.g. if repeat is 4, the sprite animation will be seen 4 times, and thus also run 4 times as fast.\n    // The sprite index is limited to the number of actual sprites.\n    return min(start + mod(floor(spriteCount * repeat * factor), spriteCount), u_columns * u_rows - 1.0);\n  }\n\n  return start;\n}\n\nvoid particle2() {\n  float factor = (u_lifeSpan - a_health) / u_lifeSpan;\n  int index = 0;\n\n  if (factor < u_timeMiddle) {\n    factor = factor / u_timeMiddle;\n    index = 0;\n  } else {\n    factor = (factor - u_timeMiddle) / (1.0 - u_timeMiddle);\n    index = 1;\n  }\n\n  factor = min(factor, 1.0);\n\n  float scale = mix(u_scaling[index], u_scaling[index + 1], factor);\n  vec4 color = mix(u_colors[index], u_colors[index + 1], factor);\n\n  float cell = 0.0;\n\n  if (u_teamColored) {\n    cell = a_leftRightTop[0];\n  } else {\n    vec3 interval;\n\n    if (a_tail == HEAD) {\n      interval = u_intervals[index];\n    } else {\n      interval = u_intervals[index + 2];\n    }\n\n    cell = getCell(interval, factor);\n  }\n\n  float left = floor(mod(cell, u_columns));\n  float top = floor(cell / u_columns);\n  float right = left + 1.0;\n  float bottom = top + 1.0;\n\n  left /= u_columns;\n  right /= u_columns;\n  top /= u_rows;\n  bottom /= u_rows;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(right, top);\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(left, top);\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(left, bottom);\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(right, bottom);\n  }\n\n  v_color = color;\n  \n  if (a_tail == HEAD) {\n    vec3 v = u_vertices[int(a_position)];\n    float cs = cos(a_p1.x);\n    float sn = sin(a_p1.x);\n\n    float x = v.x * cs - v.y * sn;\n    float y = v.x * sn + v.y * cs;\n\n    vec3 fv = vec3(\n      v.x * cs - v.y * sn,\n      v.x * sn + v.y * cs,\n      v.z);\n\n    gl_Position = u_VP * vec4(a_p0 + fv * scale, 1.0);\n  } else {\n    // Get the normal to the tail in camera space.\n    // This allows to build a 2D rectangle around the 3D tail.\n    vec3 normal = cross(u_cameraZ, normalize(a_p1 - a_p0));\n    vec3 boundary = normal * scale * a_p2[0];\n    vec3 position;\n\n    if (a_position == 0.0) {\n      position = a_p0 - boundary;\n    } else if (a_position == 1.0) {\n      position = a_p1 - boundary;\n    } else if (a_position == 2.0) {\n      position = a_p1 + boundary;\n    } else if (a_position == 3.0) {\n      position = a_p0 + boundary;\n    }\n\n    gl_Position = u_VP * vec4(position, 1.0);\n  }\n}\n\nvoid ribbon() {\n  vec3 position;\n  float left = a_leftRightTop[0] / 255.0;\n  float right = a_leftRightTop[1] / 255.0;\n  float top = a_leftRightTop[2] / 255.0;\n  float bottom = top + 1.0;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(right, top);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(right, bottom);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(left, bottom);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(left, top);\n    position = a_p3;\n  }\n\n  v_texcoord[0] /= u_columns;\n  v_texcoord[1] /= u_rows;\n\n  v_color = a_color;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid splat() {\n  float factor = u_lifeSpan - a_health;\n  int index;\n\n  if (factor < u_intervalTimes[0]) {\n    factor = factor / u_intervalTimes[0];\n    index = 0;\n  } else {\n    factor = (factor - u_intervalTimes[0]) / u_intervalTimes[1];\n    index = 1;\n  }\n\n  float cell = getCell(u_intervals[index], factor);\n  float left = floor(mod(cell, u_columns));\n  float top = floor(cell / u_columns);\n  float right = left + 1.0;\n  float bottom = top + 1.0;\n  vec3 position;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(left, top);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(left, bottom);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(right, bottom);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(right, top);\n    position = a_p3;\n  }\n\n  v_texcoord[0] /= u_columns;\n  v_texcoord[1] /= u_rows;\n\n  v_color = mix(u_colors[index], u_colors[index + 1], factor) / 255.0;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid ubersplat() {\n  float factor = u_lifeSpan - a_health;\n  vec4 color;\n\n  if (factor < u_intervalTimes[0]) {\n    color = mix(u_colors[0], u_colors[1], factor / u_intervalTimes[0]);\n  } else if (factor < u_intervalTimes[0] + u_intervalTimes[1]) {\n    color = u_colors[1];\n  } else {\n    color = mix(u_colors[1], u_colors[2], (factor - u_intervalTimes[0] - u_intervalTimes[1]) / u_intervalTimes[2]);\n  }\n\n  vec3 position;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(0.0, 0.0);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(0.0, 1.0);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(1.0, 1.0);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(1.0, 0.0);\n    position = a_p3;\n  }\n\n  v_color = color / 255.0;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid main() {\n  if (u_emitter == EMITTER_PARTICLE2) {\n    particle2();\n  } else if (u_emitter == EMITTER_RIBBON) {\n    ribbon();\n  } else if (u_emitter == EMITTER_SPLAT) {\n    splat();\n  } else if (u_emitter == EMITTER_UBERSPLAT) {\n    ubersplat();\n  }\n}\n"},533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4531),r=n(6020),i=`\n${a.default}\n\n${r.default}\n\nuniform sampler2D u_texture;\nuniform float u_filterMode;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\nvarying vec4 v_uvTransRot;\nvarying float v_uvScale;\n\nvoid main() {\n  vec2 uv = v_uv;\n\n  // Translation animation\n  uv += v_uvTransRot.xy;\n\n  // Rotation animation\n  uv = quat_transform(v_uvTransRot.zw, uv - 0.5) + 0.5;\n\n  // Scale animation\n  uv = v_uvScale * (uv - 0.5) + 0.5;\n\n  vec4 texel = texture2D(u_texture, uv);\n  vec4 color = texel * v_color;\n\n  // 1bit Alpha\n  if (u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  // "Close to 0 alpha"\n  if (u_filterMode >= 5.0 && color.a < 0.02) {\n    discard;\n  }\n\n  // if (!u_unshaded) {\n  //   color *= clamp(dot(v_normal, lightDirection) + 0.45, 0.0, 1.0);\n  // }\n\n  gl_FragColor = color;\n}\n`;t.default=i},8673:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7838),r=n(1483),i=`\nuniform mat4 u_VP;\nuniform vec4 u_vertexColor;\nuniform vec4 u_geosetColor;\nuniform float u_layerAlpha;\nuniform vec2 u_uvTrans;\nuniform vec2 u_uvRot;\nuniform float u_uvScale;\nuniform bool u_hasBones;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\nvarying vec4 v_uvTransRot;\nvarying float v_uvScale;\n\n${a.default}\n${r.default}\n\nvoid main() {\n  vec3 position = a_position;\n  vec3 normal = a_normal;\n\n  if (u_hasBones) {\n    transformVertexGroups(position, normal);\n  }\n\n  v_uv = a_uv;\n  v_color = u_vertexColor * u_geosetColor.bgra * vec4(1.0, 1.0, 1.0, u_layerAlpha);\n  v_uvTransRot = vec4(u_uvTrans, u_uvRot);\n  v_uvScale = u_uvScale;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=i},1483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nattribute vec4 a_bones;\n#ifdef EXTENDED_BONES\nattribute vec4 a_extendedBones;\n#endif\nattribute float a_boneNumber;\n\nvoid transformVertexGroups(inout vec3 position, inout vec3 normal) {\n  // For the broken models out there, since the game supports this.\n  if (a_boneNumber > 0.0) {\n    vec4 position4 = vec4(position, 1.0);\n    vec4 normal4 = vec4(normal, 0.0);\n    mat4 bone;\n    vec4 p;\n    vec4 n;\n\n    for (int i = 0; i < 4; i++) {\n      if (a_bones[i] > 0.0) {\n        bone = fetchMatrix(a_bones[i] - 1.0, 0.0);\n\n        p += bone * position4;\n        n += bone * normal4;\n      }\n    }\n\n    #ifdef EXTENDED_BONES\n      for (int i = 0; i < 4; i++) {\n        if (a_extendedBones[i] > 0.0) {\n          bone = fetchMatrix(a_extendedBones[i] - 1.0, 0.0);\n\n          p += bone * position4;\n          n += bone * normal4;\n        }\n      }\n    #endif\n\n    position = p.xyz / a_boneNumber;\n    normal = normalize(n.xyz);\n  }\n}\n"},1875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.texture=null,this.wrapS=33071,this.wrapT=33071,this.replaceableId=e,t&&(this.wrapS=10497),n&&(this.wrapT=10497)}}},6208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8533),r=n(1925);class i extends r.default{constructor(e,t){super(e,t),this.addVariants("KTAT","translation"),this.addVariants("KTAR","rotation"),this.addVariants("KTAS","scale")}getTranslation(e,t,n,r){return this.getVectorValue(e,"KTAT",t,n,r,a.VEC3_ZERO)}getRotation(e,t,n,r){return this.getQuatValue(e,"KTAR",t,n,r,a.QUAT_DEFAULT)}getScale(e,t,n,r){return this.getVectorValue(e,"KTAS",t,n,r,a.VEC3_ONE)}}t.default=i},7838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform sampler2D u_boneMap;\nuniform float u_vectorSize;\nuniform float u_rowSize;\n\nmat4 fetchMatrix(float column, float row) {\n  column *= u_vectorSize * 4.0;\n  row *= u_rowSize;\n  // Add in half a texel, to sample in the middle of the texel.\n  // Otherwise, since the sample is directly on the boundary, floating point errors can cause the sample to get the wrong pixel.\n  // This is most noticeable with NPOT textures, which the bone maps are.\n  column += 0.5 * u_vectorSize;\n  row += 0.5 * u_rowSize;\n\n  return mat4(texture2D(u_boneMap, vec2(column, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 2.0, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 3.0, row)));\n}\n"},4531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n"},6020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n// A 2D quaternion*vector.\n// q is the zw components of the original quaternion.\nvec2 quat_transform(vec2 q, vec2 v) {\n  vec2 uv = vec2(-q.x * v.y, q.x * v.x);\n  vec2 uuv = vec2(-q.x * uv.y, q.x * uv.x);\n\n  return v + 2.0 * (uv * q.y + uuv);\n}\n"},6899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(695),r=n(4163),i=n(8551);t.default={isValidSource:e=>e instanceof a.default||r.default(e),resource:i.default}},8551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(6269),r=n(695),i=n(1081);class l extends i.default{constructor(e,t){let n;super(t),e instanceof r.default?n=e:(n=new r.default,n.load(e));let i=n.width,l=n.height,s=this.viewer.gl,o=s.createTexture();s.bindTexture(s.TEXTURE_2D,o),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,n.data),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),a.isPowerOfTwo(i)&&a.isPowerOfTwo(l)?(s.generateMipmap(s.TEXTURE_2D),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_LINEAR)):s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),this.webglResource=o,this.width=i,this.height=l}}t.default=l},7634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(1175);class l extends i.Widget{constructor(e,t,n,i){super(e,t);let l=this.instance;l.move(i.location),l.rotateLocal(a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_Z,i.angle)),l.scale(i.scale),l.setScene(e.worldScene),this.instance=l,this.row=n}}t.default=l},3015:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(4234),i=n(3019),l=n(2647),s=n(7999),o=n(1049),u=n(8690),c=n(2498),d=n(4610),h=n(7634),f=n(7944),_=n(2588),m=n(3994),p=a.vec3.create(),g=a.vec3.create();t.default=class{constructor(e,t){this.buildVersion=0,this.solverParams={tileset:"a"},this.waterIndex=0,this.waterIncreasePerFrame=0,this.waterHeightOffset=0,this.waterTextures=[],this.maxDeepColor=new Float32Array(4),this.minDeepColor=new Float32Array(4),this.maxShallowColor=new Float32Array(4),this.minShallowColor=new Float32Array(4),this.anyReady=!1,this.terrainReady=!1,this.cliffsReady=!1,this.doodads=[],this.terrainDoodads=[],this.doodadsReady=!1,this.units=[],this.unitsReady=!1,this.tilesetTextures=[],this.cliffTextures=[],this.cliffModels=[],this.corners=[],this.centerOffset=new Float32Array(2),this.mapSize=new Int32Array(2),this.tilesets=[],this.blightTextureIndex=-1,this.cliffTilesets=[],this.columns=0,this.rows=0,this.vertexBuffer=null,this.faceBuffer=null,this.instanceBuffer=null,this.textureBuffer=null,this.variationBuffer=null,this.waterBuffer=null,this.heightMap=null,this.waterHeightMap=null,this.cliffHeightMap=null,this.viewer=e,this.worldScene=e.addScene(),this.map=new i.default,this.map.load(t,!0),this.loadMapInformation(),this.pathSolver=(t,n)=>{if("string"==typeof t){let a=t.replace(/\//g,"\\"),r=this.map.get(a);return r?r.arrayBuffer():e.wc3PathSolver(t,n)}return t},this.loadTerrainCliffsAndWater();let n=this.map.readModifications();this.applyModificationFile(e.doodadsData,e.doodadMetaData,n.w3d),this.applyModificationFile(e.doodadsData,e.destructableMetaData,n.w3b),this.applyModificationFile(e.unitsData,e.unitMetaData,n.w3u),this.applyModificationFile(e.unitsData,e.unitMetaData,n.w3t),this.loadDoodadsAndDestructibles(),this.loadUnitsAndItems()}die(){this.worldScene.detach()}load(e){return this.viewer.load(e,this.pathSolver,this.solverParams)}loadMapInformation(){let e=this.map.get("war3map.w3i");if(!e)return void console.warn("Attempted to load war3map.w3i but it is not there. Using default tileset A.");let t=new l.default;try{t.load(e.bytes())}catch(e){}this.solverParams.tileset=t.tileset.toLowerCase(),this.buildVersion=t.getBuildVersion(),this.buildVersion>131&&(this.solverParams.reforged=!0)}async loadTerrainCliffsAndWater(){let e=this.map.get("war3map.w3e");if(!e)return void console.warn("Attempted to load war3map.w3e, but it is not there.");let t=new s.default;try{t.load(e.bytes())}catch(e){return void console.warn(`Failed to load war3map.w3e: ${e}`)}let n=this.viewer,a=t.centerOffset,i=t.mapSize;this.corners=t.corners,this.centerOffset.set(a),this.mapSize.set(i),this.worldScene.grid=new o.default(a[0],a[1],128*i[0]-128,128*i[1]-128,2048,2048);let l=this.solverParams.reforged?".dds":".blp",d=t.tileset,h=[],f=[],_=[];for(let e of t.groundTilesets){let t=n.terrainData.getRow(e);this.tilesets.push(t),h.push(this.load(`${t.dir}\\${t.file}${l}`))}this.blightTextureIndex=this.tilesetTextures.length,h.push(this.load(`TerrainArt\\Blight\\${{A:"Ashen",B:"Barrens",C:"Felwood",D:"Cave",F:"Lordf",G:"Dungeon",I:"Ice",J:"DRuins",K:"Citadel",L:"Lords",N:"North",O:"Outland",Q:"VillageFall",V:"Village",W:"Lordw",X:"Village",Y:"Village",Z:"Ruins"}[d]}_Blight${l}`));for(let e of t.cliffTilesets){let t=n.cliffTypesData.getRow(e);this.cliffTilesets.push(t),f.push(this.load(`${t.texDir}\\${t.texFile}${l}`))}let m=n.waterData.getRow(`${d}Sha`);this.waterHeightOffset=m.height,this.waterIncreasePerFrame=m.texRate/60,this.waterTextures.length=0,this.maxDeepColor.set([m.Dmax_R,m.Dmax_G,m.Dmax_B,m.Dmax_A]),this.minDeepColor.set([m.Dmin_R,m.Dmin_G,m.Dmin_B,m.Dmin_A]),this.maxShallowColor.set([m.Smax_R,m.Smax_G,m.Smax_B,m.Smax_A]),this.minShallowColor.set([m.Smin_R,m.Smin_G,m.Smin_B,m.Smin_A]);for(let e=0,t=m.numTex;e<t;e++)_.push(this.load(`${m.texFile}${e<10?"0":""}${e}${l}`));this.tilesetTextures=await Promise.all(h),this.cliffTextures=await Promise.all(f),this.waterTextures=await Promise.all(_);let p=t.corners,[g,b]=this.mapSize,w=(g-1)*(b-1),v=new Float32Array(g*b),A=new Float32Array(g*b),y=new Float32Array(g*b),L=new Uint8Array(4*w),S=new Uint8Array(4*w),T=new Uint8Array(w),E=0,k={};this.columns=g-1,this.rows=b-1;for(let e=0;e<b;e++)for(let t=0;t<g;t++){let n=p[e][t],i=e*g+t;if(v[i]=n.groundHeight,A[i]=n.groundHeight+n.layerHeight-2,y[i]=n.waterHeight,e<b-1&&t<g-1){if(T[E]=this.isWater(t,e),this.isCliff(t,e)){let r=n.layerHeight,i=p[e][t+1].layerHeight,l=p[e+1][t].layerHeight,s=p[e+1][t+1].layerHeight,o=Math.min(r,i,l,s),c=this.cliffFileName(r,i,l,s,o);if("AAAA"!==c){let r=n.cliffTexture;15===r&&(r=1);let i=this.cliffTilesets[r].cliffModelDir,l=`Doodads\\Terrain\\${i}\\${i}${c}${u.default(i,c,n.cliffVariation)}.mdx`;k[l]||(k[l]={locations:[],textures:[]}),k[l].locations.push(128*(t+1)+a[0],128*e+a[1],128*(o-2)),k[l].textures.push(r)}}else{let a=this.cornerTexture(t,e),i=this.cornerTexture(t+1,e),l=this.cornerTexture(t,e+1),s=this.cornerTexture(t+1,e+1),o=r.default([a,i,l,s]).sort(),u=o[0];L[4*E]=u+1,S[4*E]=this.getVariation(u,n.groundVariation),o.shift();for(let e=0,t=o.length;e<t;e++){let t=0;u=o[e],i===u&&(t|=1),a===u&&(t|=2),s===u&&(t|=4),l===u&&(t|=8),L[4*E+1+e]=u+1,S[4*E+1+e]=t}}E+=1}}let x=this.viewer.gl,I=this.viewer.webgl;this.vertexBuffer=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,this.vertexBuffer),x.bufferData(x.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),x.STATIC_DRAW),this.faceBuffer=x.createBuffer(),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,this.faceBuffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,new Uint8Array([0,1,2,1,3,2]),x.STATIC_DRAW),this.cliffHeightMap=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.cliffHeightMap),I.setTextureMode(x.CLAMP_TO_EDGE,x.CLAMP_TO_EDGE,x.NEAREST,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,g,b,0,x.ALPHA,x.FLOAT,v),this.heightMap=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.heightMap),I.setTextureMode(x.CLAMP_TO_EDGE,x.CLAMP_TO_EDGE,x.NEAREST,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,g,b,0,x.ALPHA,x.FLOAT,A),this.waterHeightMap=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.waterHeightMap),I.setTextureMode(x.CLAMP_TO_EDGE,x.CLAMP_TO_EDGE,x.NEAREST,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,g,b,0,x.ALPHA,x.FLOAT,y),this.instanceBuffer=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,this.instanceBuffer),x.bufferData(x.ARRAY_BUFFER,new Float32Array(w).map(((e,t,n)=>t)),x.STATIC_DRAW),this.textureBuffer=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,this.textureBuffer),x.bufferData(x.ARRAY_BUFFER,L,x.STATIC_DRAW),this.variationBuffer=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,this.variationBuffer),x.bufferData(x.ARRAY_BUFFER,S,x.STATIC_DRAW),this.waterBuffer=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,this.waterBuffer),x.bufferData(x.ARRAY_BUFFER,T,x.STATIC_DRAW),this.terrainReady=!0,this.anyReady=!0;let M=n.cliffShader,U=Object.entries(k).map((async e=>{let t=e[0],{locations:a,textures:r}=e[1],i=await n.loadBaseFile(t,"arrayBuffer");if(i)return new c.default(this,i.data,a,r,M)})).filter((e=>e));this.cliffModels=await Promise.all(U),this.cliffsReady=!0}loadDoodadsAndDestructibles(){let e=this.map.get("war3map.doo");if(!e)return void console.warn("Attempted to load war3map.doo but it is not there");let t=new _.default;try{t.load(e.bytes(),this.buildVersion)}catch(e){return void console.warn(`Failed to load war3map.doo: ${e}`)}for(let e of t.doodads)try{let t=this.viewer.doodadsData.getRow(e.id),n=t.file;if(n){let a=t.numVar;n.endsWith(".mdl")&&(n=n.slice(0,-4));let r=n;n+=".mdx",a>1&&(r+=Math.min(e.variation,a-1)),r+=".mdx";let i,l=this.map.get(r)||this.map.get(n);i=l?this.load(l.name):this.load(r),i.then((n=>{n&&this.doodads.push(new h.default(this,n,t,e))}))}else console.log("Unknown doodad ID",e.id,e)}catch(t){console.warn(`Failed to load doodad/destructible ID ${e.id}: ${t}`)}for(let e of t.terrainDoodads)try{let t=this.viewer.doodadsData.getRow(e.id);this.load(`${t.file}.mdx`).then((n=>{n&&this.terrainDoodads.push(new f.default(this,n,t,e))}))}catch(t){console.warn(`Failed to load cliff/terrain doodad ID ${e.id}: ${t}`)}this.doodadsReady=!0,this.anyReady=!0}loadUnitsAndItems(){let e=this.map.get("war3mapUnits.doo");if(!e)return void console.warn("Attempted to load war3mapUnits.doo but it is not there");let t=new m.default;try{t.load(e.bytes(),this.buildVersion)}catch(e){return void console.warn(`Failed to load war3mapUnits.doo: ${e}`)}for(let e of t.units)try{let t,n;"sloc"===e.id?n="Objects\\StartLocation\\StartLocation.mdx":(t=this.viewer.unitsData.getRow(e.id),n=t.file,n&&(n.endsWith(".mdl")&&(n=n.slice(0,-4)),n+=".mdx")),n?this.load(n).then((n=>{n&&this.units.push(new d.default(this,n,t,e))})):console.log("Unknown unit ID",e.id,e)}catch(t){console.warn(`Failed to load unit/item ID ${e.id}: ${t}`)}this.unitsReady=!0,this.anyReady=!0}update(){if(this.anyReady){this.waterIndex+=this.waterIncreasePerFrame,this.waterIndex>=this.waterTextures.length&&(this.waterIndex=0);for(let e of this.doodads)e.update();for(let e of this.units)e.update()}}render(){if(this.anyReady){let e=this.worldScene;e.startFrame(),this.renderGround(),this.renderCliffs(),e.renderOpaque(),this.renderWater(),e.renderTranslucent()}}renderGround(){if(this.terrainReady){let e=this.viewer.gl,t=this.viewer.webgl,n=t.extensions.ANGLE_instanced_arrays,a=this.viewer.groundShader,r=a.uniforms,i=a.attribs,l=this.tilesetTextures,s=i.a_InstanceID,o=i.a_position,u=i.a_textures,c=i.a_variations,d=l.length;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.useShader(a),e.uniformMatrix4fv(r.u_VP,!1,this.worldScene.camera.viewProjectionMatrix),e.uniform2fv(r.u_offset,this.centerOffset),e.uniform2f(r.u_size,this.columns,this.rows),e.uniform1i(r.u_heightMap,15),e.activeTexture(e.TEXTURE15),e.bindTexture(e.TEXTURE_2D,this.heightMap),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.instanceBuffer),e.vertexAttribPointer(s,1,e.FLOAT,!1,0,0),n.vertexAttribDivisorANGLE(s,1),e.bindBuffer(e.ARRAY_BUFFER,this.textureBuffer),e.vertexAttribPointer(u,4,e.UNSIGNED_BYTE,!1,0,0),n.vertexAttribDivisorANGLE(u,1),e.bindBuffer(e.ARRAY_BUFFER,this.variationBuffer),e.vertexAttribPointer(c,4,e.UNSIGNED_BYTE,!1,0,0),n.vertexAttribDivisorANGLE(c,1),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.faceBuffer),e.uniform1f(r.u_baseTileset,0);for(let n=0,a=Math.min(d,15);n<a;n++){let a=l[n].width>l[n].height?1:0;e.uniform1f(r[`u_extended[${n}]`],a),e.uniform1i(r[`u_tilesets[${n}]`],n),t.bindTexture(l[n],n)}if(n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns),d>15){e.uniform1f(r.u_baseTileset,15);for(let n=0,a=d-15;n<a;n++){let a=l[n+15].width>l[n+15].height?1:0;e.uniform1f(r[`u_extended[${n}]`],a),t.bindTexture(l[n+15],n)}n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns)}n.vertexAttribDivisorANGLE(u,0),n.vertexAttribDivisorANGLE(c,0),n.vertexAttribDivisorANGLE(s,0)}}renderWater(){if(this.terrainReady){let e=this.viewer.gl,t=this.viewer.webgl,n=t.extensions.ANGLE_instanced_arrays,a=this.viewer.waterShader,r=a.uniforms,i=a.attribs,l=i.a_InstanceID,s=i.a_position,o=i.a_isWater;e.depthMask(!1),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.useShader(a),e.uniformMatrix4fv(r.u_VP,!1,this.worldScene.camera.viewProjectionMatrix),e.uniform2fv(r.u_offset,this.centerOffset),e.uniform2f(r.u_size,this.columns,this.rows),e.uniform1i(r.u_heightMap,0),e.uniform1i(r.u_waterHeightMap,1),e.uniform1i(r.u_waterTexture,2),e.uniform1f(r.u_offsetHeight,this.waterHeightOffset),e.uniform4fv(r.u_maxDeepColor,this.maxDeepColor),e.uniform4fv(r.u_minDeepColor,this.minDeepColor),e.uniform4fv(r.u_maxShallowColor,this.maxShallowColor),e.uniform4fv(r.u_minShallowColor,this.minShallowColor),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.heightMap),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.waterHeightMap),t.bindTexture(this.waterTextures[0|this.waterIndex],2),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(s,2,e.FLOAT,!1,8,0),e.bindBuffer(e.ARRAY_BUFFER,this.instanceBuffer),e.vertexAttribPointer(l,1,e.FLOAT,!1,4,0),n.vertexAttribDivisorANGLE(l,1),e.bindBuffer(e.ARRAY_BUFFER,this.waterBuffer),e.vertexAttribPointer(o,1,e.UNSIGNED_BYTE,!1,1,0),n.vertexAttribDivisorANGLE(o,1),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.faceBuffer),n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns),n.vertexAttribDivisorANGLE(o,0),n.vertexAttribDivisorANGLE(l,0)}}renderCliffs(){if(this.cliffsReady){let e=this.viewer.gl,t=this.viewer.webgl,n=t.extensions.ANGLE_instanced_arrays,a=t.extensions.OES_vertex_array_object,r=this.viewer.cliffShader,i=r.attribs,l=r.uniforms;e.disable(e.BLEND),r.use(),e.uniformMatrix4fv(l.u_VP,!1,this.worldScene.camera.viewProjectionMatrix),e.uniform1i(l.u_heightMap,0),e.uniform2f(l.u_pixel,1/(this.columns+1),1/(this.rows+1)),e.uniform2fv(l.u_centerOffset,this.centerOffset),e.uniform1i(l.u_texture1,1),e.uniform1i(l.u_texture2,2),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.cliffHeightMap),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.cliffTextures[0].webglResource),this.cliffTextures.length>1&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.cliffTextures[1].webglResource)),a||(n.vertexAttribDivisorANGLE(i.a_instancePosition,1),n.vertexAttribDivisorANGLE(i.a_instanceTexture,1));for(let e of this.cliffModels)e.render(r);a||(n.vertexAttribDivisorANGLE(i.a_instancePosition,0),n.vertexAttribDivisorANGLE(i.a_instanceTexture,0))}}cliffFileName(e,t,n,a,r){return String.fromCharCode(65+e-r)+String.fromCharCode(65+n-r)+String.fromCharCode(65+a-r)+String.fromCharCode(65+t-r)}getVariation(e,t){let n=this.tilesetTextures[e];return n.width>n.height?t<16?16+t:16===t?15:0:0===t?0:15}isCliff(e,t){if(e<1||e>this.columns-1||t<1||t>this.rows-1)return!1;let n=this.corners,a=n[t][e].layerHeight,r=n[t][e+1].layerHeight,i=n[t+1][e].layerHeight,l=n[t+1][e+1].layerHeight;return a!==r||a!==i||a!==l}isWater(e,t){let n=this.corners;return n[t][e].water||n[t][e+1].water||n[t+1][e].water||n[t+1][e+1].water}cliffGroundIndex(e){let t=this.cliffTilesets[e].groundTile,n=this.tilesets;for(let e=0,a=n.length;e<a;e++)if(n[e].tileID===t)return e}cornerTexture(e,t){let n=this.corners,a=this.columns,r=this.rows;for(let i=-1;i<1;i++)for(let l=-1;l<1;l++)if(e+l>0&&e+l<a-1&&t+i>0&&t+i<r-1&&this.isCliff(e+l,t+i)){let a=n[t+i][e+l].cliffTexture;return 15===a&&(a=1),this.cliffGroundIndex(a)}let i=n[t][e];return i.blight?this.blightTextureIndex:i.groundTexture}applyModificationFile(e,t,n){n&&(this.applyModificationTable(e,t,n.originalTable),this.applyModificationTable(e,t,n.customTable))}applyModificationTable(e,t,n){for(let a of n.objects){let n;""!==a.newId?(n=e.getRow(a.newId),n||(n=Object.assign({},e.getRow(a.oldId)),e.setRow(a.newId,n))):n=e.getRow(a.oldId);for(let e of a.modifications){let a=t.getRow(e.id);a?n[a.field]=e.value:console.warn("Unknown modification ID",e)}}}groundNormal(e,t,n){let r=this.centerOffset,i=this.mapSize,l=0|(t=(t-r[0])/128),s=0|(n=(n-r[1])/128);if(l>=0&&l<i[0]-1&&s>=0&&s<i[1]-1){let r=this.corners,i=r[s][l].groundHeight,o=r[s][l+1].groundHeight,u=r[s+1][l].groundHeight,c=r[s+1][l+1].groundHeight;t-l+(n-s)<1?(a.vec3.set(p,1,0,o-i),a.vec3.set(g,0,1,u-i)):(a.vec3.set(p,-1,0,c-u),a.vec3.set(g,0,1,c-o)),a.vec3.normalize(e,a.vec3.cross(e,p,g))}else a.vec3.set(e,0,0,1);return e}}},9025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\n// #extension GL_OES_standard_derivatives : enable\n\n${n(4531).default}\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_texture;\nvarying vec3 v_position;\n\n// const vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\n\nvec4 sample(float texture, vec2 uv) {\n  // int(0.0) == 0 is not always true.\n  int i = int(texture + 0.1);\n\n  if (i == 0) {\n    return texture2D(u_texture1, uv);\n  } else {\n    return texture2D(u_texture2, uv);\n  }\n}\n\nvoid main() {\n  vec4 color = sample(v_texture, v_uv);\n\n  // vec3 faceNormal = cross(dFdx(v_position), dFdy(v_position));\n  // vec3 normal = normalize((faceNormal + v_normal) * 0.5);\n\n  // color *= clamp(dot(normal, lightDirection) + 0.45, 0.1, 1.0);\n\n  gl_FragColor = color;\n}\n`;t.default=a},7430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform vec2 u_pixel;\nuniform vec2 u_centerOffset;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\nattribute vec3 a_instancePosition;\nattribute float a_instanceTexture;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_texture;\nvarying vec3 v_position;\n\nvoid main() {\n  // Half of a pixel in the cliff height map.\n  vec2 halfPixel = u_pixel * 0.5;\n\n  // The bottom left corner of the map tile this vertex is on.\n  vec2 corner = floor((a_instancePosition.xy - vec2(1.0, 0.0) - u_centerOffset.xy) / 128.0);\n\n  // Get the 4 closest heights in the height map.\n  float bottomLeft = texture2D(u_heightMap, corner * u_pixel + halfPixel).a;\n  float bottomRight = texture2D(u_heightMap, (corner + vec2(1.0, 0.0)) * u_pixel + halfPixel).a;\n  float topLeft = texture2D(u_heightMap, (corner + vec2(0.0, 1.0)) * u_pixel + halfPixel).a;\n  float topRight = texture2D(u_heightMap, (corner + vec2(1.0, 1.0)) * u_pixel + halfPixel).a;\n  \n  // Do a bilinear interpolation between the heights to get the final value.\n  float bottom = mix(bottomRight, bottomLeft, -a_position.x / 128.0);\n  float top = mix(topRight, topLeft, -a_position.x / 128.0);\n  float height = mix(bottom, top, a_position.y / 128.0);\n\n  v_normal = a_normal;\n  v_uv = a_uv;\n  v_texture = a_instanceTexture;\n  v_position = a_position + vec3(a_instancePosition.xy, a_instancePosition.z + height * 128.0);\n\n  gl_Position = u_VP * vec4(v_position, 1.0);\n}\n"},9823:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\n${n(4531).default}\n\nuniform sampler2D u_tilesets[15];\n\nvarying vec4 v_tilesets;\nvarying vec2 v_uv[4];\nvarying vec3 v_normal;\n\nconst vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\n\nvec4 sample(float tileset, vec2 uv) {\n  // 1.0 - 1.0 == 0.0 is not always true.\n  int i = int(tileset - 0.6);\n\n  if (i == 0) {\n    return texture2D(u_tilesets[0], uv);\n  } else if (i == 1) {\n    return texture2D(u_tilesets[1], uv);\n  } else if (i == 2) {\n    return texture2D(u_tilesets[2], uv);\n  } else if (i == 3) {\n    return texture2D(u_tilesets[3], uv);\n  } else if (i == 4) {\n    return texture2D(u_tilesets[4], uv);\n  } else if (i == 5) {\n    return texture2D(u_tilesets[5], uv);\n  } else if (i == 6) {\n    return texture2D(u_tilesets[6], uv);\n  } else if (i == 7) {\n    return texture2D(u_tilesets[7], uv);\n  } else if (i == 8) {\n    return texture2D(u_tilesets[8], uv);\n  } else if (i == 9) {\n    return texture2D(u_tilesets[9], uv);\n  } else if (i == 10) {\n    return texture2D(u_tilesets[10], uv);\n  } else if (i == 11) {\n    return texture2D(u_tilesets[11], uv);\n  } else if (i == 12) {\n    return texture2D(u_tilesets[12], uv);\n  } else if (i == 13) {\n    return texture2D(u_tilesets[13], uv);\n  } else if (i == 14) {\n    return texture2D(u_tilesets[14], uv);\n  }\n}\n\nvec4 blend(vec4 color, float tileset, vec2 uv) {\n  vec4 texel = sample(tileset, uv);\n\n  return mix(color, texel, texel.a);\n}\n\nvoid main() {\n  vec4 color = sample(v_tilesets[0], v_uv[0]);\n\n  if (v_tilesets[1] > 0.5) {\n    color = blend(color, v_tilesets[1], v_uv[1]);\n  }\n\n  if (v_tilesets[2] > 0.5) {\n    color = blend(color, v_tilesets[2], v_uv[2]);\n  }\n\n  if (v_tilesets[3] > 0.5) {\n    color = blend(color, v_tilesets[3], v_uv[3]);\n  }\n\n  //color *= clamp(dot(v_normal, lightDirection) + 0.45, 0.0, 1.0);\n\n  gl_FragColor = vec4(color.rgb, 1.0);\n}\n`;t.default=a},2259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform vec2 u_size;\nuniform vec2 u_offset;\nuniform bool u_extended[14];\nuniform float u_baseTileset;\n\nattribute vec2 a_position;\nattribute float a_InstanceID;\nattribute vec4 a_textures;\nattribute vec4 a_variations;\n\nvarying vec4 v_tilesets;\nvarying vec2 v_uv[4];\nvarying vec3 v_normal;\n\nvec2 getCell(float variation) {\n  if (variation < 16.0) {\n    return vec2(mod(variation, 4.0), floor(variation / 4.0));\n  } else {\n    variation -= 16.0;\n\n    return vec2(4.0 + mod(variation, 4.0), floor(variation / 4.0));\n  }\n}\n\nvec2 getUV(vec2 position, bool extended, float variation) {\n  vec2 cell = getCell(variation);\n  vec2 cellSize = vec2(extended ? 0.125 : 0.25, 0.25);\n  vec2 uv = vec2(position.x, 1.0 - position.y);\n  vec2 pixelSize = vec2(1.0 / 512.0, 1.0 / 256.0); /// Note: hardcoded to 512x256 for now.\n\n  return clamp((cell + uv) * cellSize, cell * cellSize + pixelSize, (cell + 1.0) * cellSize - pixelSize); \n}\n\nvoid main() {\n  vec4 textures = a_textures - u_baseTileset;\n  \n  if (textures[0] > 0.0 || textures[1] > 0.0 || textures[2] > 0.0 || textures[3] > 0.0) {\n    v_tilesets = textures;\n\n    v_uv[0] = getUV(a_position, u_extended[int(textures[0]) - 1], a_variations[0]);\n    v_uv[1] = getUV(a_position, u_extended[int(textures[1]) - 1], a_variations[1]);\n    v_uv[2] = getUV(a_position, u_extended[int(textures[2]) - 1], a_variations[2]);\n    v_uv[3] = getUV(a_position, u_extended[int(textures[3]) - 1], a_variations[3]);\n\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\n    vec2 base = corner + a_position;\n    float height = texture2D(u_heightMap, base / u_size).a;\n\n    float hL = texture2D(u_heightMap, vec2(base - vec2(1.0, 0.0)) / (u_size)).a;\n    float hR = texture2D(u_heightMap, vec2(base + vec2(1.0, 0.0)) / (u_size)).a;\n    float hD = texture2D(u_heightMap, vec2(base - vec2(0.0, 1.0)) / (u_size)).a;\n    float hU = texture2D(u_heightMap, vec2(base + vec2(0.0, 1.0)) / (u_size)).a;\n\n    v_normal = normalize(vec3(hL - hR, hD - hU, 2.0));\n\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, height * 128.0, 1.0);\n  } else {\n    v_tilesets = vec4(0.0);\n\n    v_uv[0] = vec2(0.0);\n    v_uv[1] = vec2(0.0);\n    v_uv[2] = vec2(0.0);\n    v_uv[3] = vec2(0.0);\n\n    v_normal = vec3(0.0);\n\n    gl_Position = vec4(0.0);\n  }\n}\n"},735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\n${n(4531).default}\n\nuniform sampler2D u_waterTexture;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_waterTexture, v_uv) * v_color;\n}\n`;t.default=a},5069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform sampler2D u_waterHeightMap;\nuniform vec2 u_size;\nuniform vec2 u_offset;\nuniform float u_offsetHeight;\nuniform vec4 u_minDeepColor;\nuniform vec4 u_maxDeepColor;\nuniform vec4 u_minShallowColor;\nuniform vec4 u_maxShallowColor;\n\nattribute vec2 a_position;\nattribute float a_InstanceID;\nattribute float a_isWater;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nconst float minDepth = 10.0 / 128.0;\nconst float deepLevel = 64.0 / 128.0;\nconst float maxDepth = 72.0 / 128.0;\n\nvoid main() {\n  if (a_isWater > 0.5) {\n    v_uv = a_position;\n\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\n    vec2 base = corner + a_position;\n    float height = texture2D(u_heightMap, base / u_size).a;\n    float waterHeight = texture2D(u_waterHeightMap, base / u_size).a + u_offsetHeight;\n    float value = clamp(waterHeight - height, 0.0, 1.0);\n\n    if (value <= deepLevel) {\n      value = max(0.0, value - minDepth) / (deepLevel - minDepth);\n      v_color = mix(u_minShallowColor, u_maxShallowColor, value) / 255.0;\n    } else {\n      value = clamp(value - deepLevel, 0.0, maxDepth - deepLevel) / (maxDepth - deepLevel);\n      v_color = mix(u_minDeepColor, u_maxDeepColor, value) / 255.0;\n    }\n\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, waterHeight * 128.0, 1.0);\n  } else {\n    v_uv = vec2(0.0);\n    v_color = vec4(0.0);\n\n    gl_Position = vec4(0.0);\n  }\n}\n"},7640:(e,t)=>{"use strict";function n(e,t){return e.sequence.rarity-t.sequence.rarity}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=function(e,t){let a=function(e,t){let n=[];for(let a=0,r=t.length;a<r;a++){let r=t[a];r.name.split("-")[0].replace(/\d/g,"").trim().toLowerCase()===e&&n.push({sequence:r,index:a})}return n}(e,t);a.sort(n);for(var r=0,i=a.length;r<i;r++){let e=a[r].sequence.rarity;if(0===e)break;if(10*Math.random()>e)return a[r]}let l=a.length-r;return a[r+Math.floor(Math.random()*l)]}("stand",e.model.sequences);t&&e.setSequence(t.index)}},7944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(6269),l=a.vec3.create();t.default=class{constructor(e,t,n,s){let o=e.centerOffset,u=t.addInstance();l[0]=128*s.location[0]+o[0]+128,l[1]=128*s.location[1]+o[1]+128,u.move(l),u.rotateLocal(a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_Z,i.degToRad(n.fixedRot))),u.setScene(e.worldScene),this.instance=u,this.row=n}}},2498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2071);t.default=class{constructor(e,t,n,r,i){let l=e.viewer.gl,s=e.viewer.webgl,o=s.extensions.ANGLE_instanced_arrays,u=s.extensions.OES_vertex_array_object,c=new a.default;c.load(t);let d=c.geosets[0],h=d.vertices,f=d.normals,_=d.uvSets[0],m=d.faces,p=h.byteLength,g=p+f.byteLength,b=null,w=i.attribs;u&&(b=u.createVertexArrayOES(),u.bindVertexArrayOES(b));let v=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,v),l.bufferData(l.ARRAY_BUFFER,g+_.byteLength,l.STATIC_DRAW),l.bufferSubData(l.ARRAY_BUFFER,0,h),l.bufferSubData(l.ARRAY_BUFFER,p,f),l.bufferSubData(l.ARRAY_BUFFER,g,_),u&&(l.vertexAttribPointer(w.a_position,3,l.FLOAT,!1,0,0),l.enableVertexAttribArray(w.a_position),l.vertexAttribPointer(w.a_normal,3,l.FLOAT,!1,0,p),l.enableVertexAttribArray(w.a_normal),l.vertexAttribPointer(w.a_uv,2,l.FLOAT,!1,0,g),l.enableVertexAttribArray(w.a_uv));let A=4*n.length,y=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,y),l.bufferData(l.ARRAY_BUFFER,A+r.length,l.STATIC_DRAW),l.bufferSubData(l.ARRAY_BUFFER,0,new Float32Array(n)),l.bufferSubData(l.ARRAY_BUFFER,A,new Uint8Array(r)),u&&(l.vertexAttribPointer(w.a_instancePosition,3,l.FLOAT,!1,0,0),l.enableVertexAttribArray(w.a_instancePosition),o.vertexAttribDivisorANGLE(w.a_instancePosition,1),l.vertexAttribPointer(w.a_instanceTexture,1,l.UNSIGNED_BYTE,!1,0,A),l.enableVertexAttribArray(w.a_instanceTexture),o.vertexAttribDivisorANGLE(w.a_instanceTexture,1));let L=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,L),l.bufferData(l.ELEMENT_ARRAY_BUFFER,m,l.STATIC_DRAW),u&&u.bindVertexArrayOES(null),this.map=e,this.vertexBuffer=v,this.faceBuffer=L,this.normalsOffset=p,this.uvsOffset=g,this.elements=m.length,this.locationAndTextureBuffer=y,this.texturesOffset=A,this.instances=n.length/3,this.vao=b}render(e){let t=this.map.viewer,n=t.gl,a=t.webgl,r=a.extensions.ANGLE_instanced_arrays,i=a.extensions.OES_vertex_array_object,l=e.attribs;i?i.bindVertexArrayOES(this.vao):(n.bindBuffer(n.ARRAY_BUFFER,this.locationAndTextureBuffer),n.vertexAttribPointer(l.a_instancePosition,3,n.FLOAT,!1,0,0),n.vertexAttribPointer(l.a_instanceTexture,1,n.UNSIGNED_BYTE,!1,0,this.texturesOffset),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(l.a_position,3,n.FLOAT,!1,0,0),n.vertexAttribPointer(l.a_normal,3,n.FLOAT,!1,0,this.normalsOffset),n.vertexAttribPointer(l.a_uv,2,n.FLOAT,!1,0,this.uvsOffset),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.faceBuffer)),r.drawElementsInstancedANGLE(n.TRIANGLES,this.elements,n.UNSIGNED_SHORT,0,this.instances),i&&i.bindVertexArrayOES(null)}}},4610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(8533),i=n(1175),l=a.vec3.create();class s extends i.Widget{constructor(e,t,n,i){super(e,t);let s=this.instance;s.move(i.location),s.rotateLocal(a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_Z,i.angle)),s.scale(i.scale),s.setTeamColor(i.player),s.setScene(e.worldScene),n&&(l[2]=n.moveHeight,s.move(l),s.setVertexColor([n.red/255,n.green/255,n.blue/255,1]),s.uniformScale(n.modelScale)),this.instance=s,this.row=n}}t.default=s},8690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={AAAB:1,AAAC:1,AABA:1,AABB:2,AABC:0,AACA:1,AACB:0,AACC:1,ABAA:1,ABAB:1,ABAC:0,ABBA:2,ABBB:1,ABBC:0,ABCA:0,ABCB:0,ABCC:0,ACAA:1,ACAB:0,ACAC:1,ACBA:0,ACBB:0,ACBC:0,ACCA:1,ACCB:0,ACCC:1,BAAA:1,BAAB:1,BAAC:0,BABA:1,BABB:1,BABC:0,BACA:0,BACB:0,BACC:0,BBAA:1,BBAB:1,BBAC:0,BBBA:1,BBCA:0,BCAA:0,BCAB:0,BCAC:0,BCBA:0,BCCA:0,CAAA:1,CAAB:0,CAAC:1,CABA:0,CABB:0,CABC:0,CACA:1,CACB:0,CACC:1,CBAA:0,CBAB:0,CBAC:0,CBBA:0,CBCA:0,CCAA:1,CCAB:0,CCAC:1,CCBA:0,CCCA:1},a={AAAB:2,AAAC:1,AABA:1,AABB:3,AABC:0,AACA:1,AACB:0,AACC:3,ABAA:1,ABAB:2,ABAC:0,ABBA:3,ABBB:0,ABBC:0,ABCA:0,ABCB:0,ABCC:0,ACAA:1,ACAB:0,ACAC:2,ACBA:0,ACBB:0,ACBC:0,ACCA:3,ACCB:0,ACCC:1,BAAA:1,BAAB:3,BAAC:0,BABA:2,BABB:0,BABC:0,BACA:0,BACB:0,BACC:0,BBAA:3,BBAB:1,BBAC:0,BBBA:1,BBCA:0,BCAA:0,BCAB:0,BCAC:0,BCBA:0,BCCA:0,CAAA:1,CAAB:0,CAAC:3,CABA:0,CABB:0,CABC:0,CACA:2,CACB:0,CACC:1,CBAA:0,CBAB:0,CBAC:0,CBBA:0,CBCA:0,CCAA:3,CCAB:0,CCAC:1,CCBA:0,CCCA:1};t.default=function(e,t,r){return"Cliffs"===e?Math.min(r,n[t]):Math.min(r,a[t])}},1090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8790),r=n(3519),i=n(6072),l=n(8858),s=n(6899),o=n(3420),u=n(2259),c=n(9823),d=n(5069),h=n(735),f=n(7430),_=n(9025),m=n(3015);class p extends r.default{constructor(e,t,n){super(e),this.terrainData=new a.MappedData,this.cliffTypesData=new a.MappedData,this.waterData=new a.MappedData,this.doodadsData=new a.MappedData,this.doodadMetaData=new a.MappedData,this.destructableMetaData=new a.MappedData,this.unitsData=new a.MappedData,this.unitMetaData=new a.MappedData,this.loadedBaseFiles=!1,this.map=null;let r=this.webgl;if(!r.ensureExtension("OES_texture_float"))throw new Error("War3MapViewer: No float texture support!");r.ensureExtension("OES_vertex_array_object")||console.warn("War3MapViewer: No vertex array object support! This might reduce performance."),this.on("error",(e=>console.log(e))),this.addHandler(i.default,t,n),this.addHandler(l.default),this.addHandler(s.default),this.addHandler(o.default),this.wc3PathSolver=t,this.isReforged=n,this.groundShader=this.webgl.createShader(u.default,c.default),this.waterShader=this.webgl.createShader(d.default,h.default),this.cliffShader=this.webgl.createShader(f.default,_.default),this.loadBaseFiles()}async loadBaseFiles(){let e,t=[this.loadBaseFile("TerrainArt\\Terrain.slk","text"),this.loadBaseFile("TerrainArt\\CliffTypes.slk","text"),this.loadBaseFile("TerrainArt\\Water.slk","text"),this.loadBaseFile("Doodads\\Doodads.slk","text"),this.loadBaseFile("Doodads\\DoodadMetaData.slk","text"),this.loadBaseFile("Units\\DestructableData.slk","text"),this.loadBaseFile("Units\\DestructableMetaData.slk","text"),this.loadBaseFile("Units\\UnitData.slk","text"),this.loadBaseFile("Units\\unitUI.slk","text"),this.loadBaseFile("Units\\ItemData.slk","text"),this.loadBaseFile("Units\\UnitMetaData.slk","text")];this.isReforged&&(e=[this.loadBaseFile("Doodads\\doodadSkins.txt","text"),this.loadBaseFile("Units\\destructableSkin.txt","text"),this.loadBaseFile("Units\\unitSkin.txt","text"),this.loadBaseFile("Units\\itemSkin.txt","text")]);let[n,a,r,i,l,s,o,u,c,d,h]=await Promise.all(t);if(!(n&&a&&r&&i&&l&&s&&o&&u&&c&&d&&h))throw new Error("Failed to load the base files");if(this.terrainData.load(n.data),this.cliffTypesData.load(a.data),this.waterData.load(r.data),this.doodadsData.load(i.data),this.doodadMetaData.load(l.data),this.doodadsData.load(s.data),this.destructableMetaData.load(o.data),this.unitsData.load(u.data),this.unitsData.load(c.data),this.unitsData.load(d.data),this.unitMetaData.load(h.data),e){let[t,n,a,r]=await Promise.all(e);if(!(t&&n&&a&&r))throw new Error("Failed to load the base Reforged files");this.doodadsData.load(t.data),this.doodadsData.load(n.data),this.unitsData.load(a.data),this.unitsData.load(r.data)}this.loadedBaseFiles=!0,this.emit("loadedbasefiles")}loadBaseFile(e,t){return super.loadGeneric(this.wc3PathSolver(e),t)}loadMap(e){this.loadedBaseFiles&&(this.map&&this.map.die(),this.map=new m.default(this,e))}update(){this.map&&(super.update(),this.map.update())}render(){this.map&&this.map.render()}}t.default=p},1175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.WidgetState=void 0;const a=n(7640);var r;!function(e){e[e.IDLE=0]="IDLE",e[e.WALK=1]="WALK"}(r=t.WidgetState||(t.WidgetState={}));t.Widget=class{constructor(e,t){this.state=r.IDLE,this.instance=t.addInstance(),this.instance.setScene(e.worldScene)}update(){(this.instance.sequenceEnded||-1===this.instance.sequence)&&this.state===r.IDLE&&a.default(this.instance)}}},6878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageTexture=t.detectMime=t.isImageSource=void 0;const a=n(6269),r=n(4614),i=n(1081);t.isImageSource=function(e){return e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement},t.detectMime=function(e){return r.isPng(e)?"image/png":r.isJpeg(e)?"image/jpeg":r.isGif(e)?"image/gif":r.isWebP(e)?"image/webp":""};class l extends i.default{constructor(e,t){super(t);let n=this.viewer.gl;this.webglResource=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.webglResource),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),a.isPowerOfTwo(e.width)&&a.isPowerOfTwo(e.height)?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.generateMipmap(n.TEXTURE_2D)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),this.width=e.width,this.height=e.height}}t.ImageTexture=l},2107:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(3519),r=n(9019),i=n(9894),l=n(6481),s=n(4217),o=n(9024),u=n(1081),c=n(5952),d=n(7091),h=n(78);t.default={ModelViewer:a.default,Scene:r.default,Camera:i.default,Node:l.Node,Model:s.default,ModelInstance:o.default,Texture:u.default,GenericResource:c.default,gl:d.default,handlers:h.default}},4217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5330),r=n(3335);class i extends a.HandlerResource{constructor(){super(...arguments),this.bounds=new r.default}}t.default=i},9024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8533),r=n(6481);class i extends r.Node{constructor(e){super(),this.scene=null,this.left=-1,this.right=-1,this.bottom=-1,this.top=-1,this.plane=-1,this.depth=0,this.updateFrame=0,this.timeScale=1,this.rendered=!0,this.textureOverrides=new Map,this.model=e}show(){this.rendered=!0}hide(){this.rendered=!1}shown(){return this.rendered}hidden(){return!this.rendered}detach(){return!!this.scene&&this.scene.removeInstance(this)}overrideTexture(e,t){t?this.textureOverrides.set(e,t):this.textureOverrides.delete(e)}getBounds(){return this.model.bounds}clearEmittedObjects(){}setScene(e){return e.addInstance(this)}recalculateTransformation(){super.recalculateTransformation(),this.scene&&this.scene.grid.moved(this)}update(e){let t=this.scene;t&&this.rendered&&this.isVisible(t.camera)&&(t.renderInstance(this),this.updateAnimations(e*this.timeScale),super.update(e))}updateAnimations(e){}renderOpaque(){}renderTranslucent(){}isVisible(e){let[t,n,r]=this.worldLocation,[i,l,s]=this.worldScale,o=this.getBounds(),u=e.planes;return l>i&&(i=l),s>i&&(i=s),this.plane=a.testSphere(u,t+o.x,n+o.y,r+o.z,o.r*i,this.plane),-1===this.plane&&(this.depth=a.distanceToPlane3(u[4],t,n,r),!0)}}t.default=i},6481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const a=n(9234),r=n(8533),i=a.vec3.create(),l=a.quat.create(),s=a.vec3.create();t.Node=class{constructor(){this.pivot=a.vec3.create(),this.localLocation=a.vec3.create(),this.localRotation=a.quat.create(),this.localScale=a.vec3.fromValues(1,1,1),this.worldLocation=a.vec3.create(),this.worldRotation=a.quat.create(),this.worldScale=a.vec3.fromValues(1,1,1),this.inverseWorldLocation=a.vec3.create(),this.inverseWorldRotation=a.quat.create(),this.inverseWorldScale=a.vec3.fromValues(1,1,1),this.localMatrix=a.mat4.create(),this.worldMatrix=a.mat4.create(),this.dontInheritTranslation=!1,this.dontInheritRotation=!1,this.dontInheritScaling=!0,this.parent=null,this.children=[]}setPivot(e){return a.vec3.copy(this.pivot,e),this.recalculateTransformation(),this}setLocation(e){return a.vec3.copy(this.localLocation,e),this.recalculateTransformation(),this}setRotation(e){return a.quat.copy(this.localRotation,e),this.recalculateTransformation(),this}setScale(e){return a.vec3.copy(this.localScale,e),this.recalculateTransformation(),this}setUniformScale(e){return a.vec3.set(this.localScale,e,e,e),this.recalculateTransformation(),this}setTransformation(e,t,n){let a=this.localLocation,r=this.localRotation,i=this.localScale;return a[0]=e[0],a[1]=e[1],a[2]=e[2],r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],i[0]=n[0],i[1]=n[1],i[2]=n[2],this.recalculateTransformation(),this}resetTransformation(){return a.vec3.copy(this.pivot,r.VEC3_ZERO),a.vec3.copy(this.localLocation,r.VEC3_ZERO),a.quat.copy(this.localRotation,r.QUAT_DEFAULT),a.vec3.copy(this.localScale,r.VEC3_ONE),this.recalculateTransformation(),this}movePivot(e){return a.vec3.add(this.pivot,this.pivot,e),this.recalculateTransformation(),this}move(e){return a.vec3.add(this.localLocation,this.localLocation,e),this.recalculateTransformation(),this}rotate(e){return a.quat.mul(this.localRotation,this.localRotation,e),this.recalculateTransformation(),this}rotateLocal(e){return a.quat.mul(this.localRotation,e,this.localRotation),this.recalculateTransformation(),this}scale(e){return a.vec3.mul(this.localScale,this.localScale,e),this.recalculateTransformation(),this}uniformScale(e){return a.vec3.scale(this.localScale,this.localScale,e),this.recalculateTransformation(),this}face(e,t){return a.quat.conjugate(this.localRotation,r.quatLookAt(this.localRotation,this.localLocation,e,t)),this.recalculateTransformation(),this}setParent(e){if(this.parent){let e=this.parent.children,t=e.indexOf(this);-1!==t&&e.splice(t,1)}return this.parent=e||null,e&&e.children.push(this),this.recalculateTransformation(),this}recalculateTransformation(){let e=this.parent,t=this.localMatrix,n=this.localLocation,r=this.localRotation,o=this.localScale,u=this.worldMatrix,c=this.worldLocation,d=this.worldRotation,h=this.worldScale,f=this.inverseWorldLocation,_=this.inverseWorldRotation,m=this.inverseWorldScale;if(e){let c,f,_,m=e.pivot;if(c=i,c[0]=n[0]+m[0],c[1]=n[1]+m[1],c[2]=n[2]+m[2],this.dontInheritRotation?(f=l,a.quat.mul(f,r,e.inverseWorldRotation)):f=r,this.dontInheritScaling){_=s;let t=e.inverseWorldScale;_[0]=t[0]*o[0],_[1]=t[1]*o[1],_[2]=t[2]*o[2],h[0]=o[0],h[1]=o[1],h[2]=o[2]}else{_=o;let t=e.worldScale;h[0]=t[0]*o[0],h[1]=t[1]*o[1],h[2]=t[2]*o[2]}a.mat4.fromRotationTranslationScale(t,f,c,_),a.mat4.mul(u,e.worldMatrix,t),a.quat.mul(d,e.worldRotation,f)}else a.mat4.fromRotationTranslationScale(t,r,n,o),u[0]=t[0],u[1]=t[1],u[2]=t[2],u[3]=t[3],u[4]=t[4],u[5]=t[5],u[6]=t[6],u[7]=t[7],u[8]=t[8],u[9]=t[9],u[10]=t[10],u[11]=t[11],u[12]=t[12],u[13]=t[13],u[14]=t[14],u[15]=t[15],d[0]=r[0],d[1]=r[1],d[2]=r[2],d[3]=r[3],h[0]=o[0],h[1]=o[1],h[2]=o[2];_[0]=-d[0],_[1]=-d[1],_[2]=-d[2],_[3]=d[3],m[0]=1/h[0],m[1]=1/h[1],m[2]=1/h[2],c[0]=u[12],c[1]=u[13],c[2]=u[14],f[0]=-c[0],f[1]=-c[1],f[2]=-c[2];for(let e of this.children)e.recalculateTransformation()}update(e){for(let t of this.children)t.update(e)}}},583:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;t.Resource=class{constructor(e){this.blockers=[],this.viewer=e.viewer,this.fetchUrl=e.fetchUrl}detach(){return this.viewer.unload(this)}}},9019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9234),r=n(9894),i=n(1049),l=n(823);t.default=class{constructor(e){this.camera=new r.default,this.grid=new i.default(-1e5,-1e5,2e5,2e5,2e5,2e5),this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0,this.audioEnabled=!1,this.audioContext=null,this.instances=[],this.emittedObjectUpdater=new l.default,this.alpha=!1,this.color=a.vec3.create(),this.viewport=a.vec4.create(),this.viewer=e;let t=e.canvas,n=t.width,s=t.height;this.viewport[2]=n,this.viewport[3]=s,this.camera.perspective(Math.PI/4,n/s,8,1e4)}async enableAudio(){return"function"==typeof AudioContext&&(this.audioContext||(this.audioContext=new AudioContext),"suspended"!==this.audioContext.state&&await this.audioContext.resume(),this.audioEnabled="running"===this.audioContext.state,this.audioEnabled)}disableAudio(){this.audioContext&&this.audioContext.suspend(),this.audioEnabled=!1}addInstance(e){return e.scene!==this&&(e.scene&&e.scene.removeInstance(e),e.scene=this,this.grid.moved(e),!0)}removeInstance(e){return e.scene===this&&(this.grid.remove(e),e.scene=null,!0)}clear(){for(let e of this.grid.cells)for(let t of e.instances)t.scene=null;this.grid.clear()}detach(){return!!this.viewer&&this.viewer.removeScene(this)}update(e){let t=this.camera;if(this.audioContext){let e=this.audioContext.listener,n=t.location,a=t.directionY,r=t.directionZ;e.positionX.value=-n[0],e.positionY.value=-n[1],e.positionZ.value=-n[2],e.forwardX.value=a[0],e.forwardY.value=a[1],e.forwardZ.value=a[2],e.upX.value=r[0],e.upY.value=r[1],e.upZ.value=r[2]}let n=this.viewer.frame,a=this.instances;this.visibleCells=0,this.visibleInstances=0;for(let a of this.grid.cells)if(a.isVisible(t)){this.visibleCells+=1;for(let t of a.instances)t.rendered&&t.updateFrame<n&&!t.parent&&(t.updateFrame=n,t.update(e))}a.length=this.visibleInstances,a.sort(((e,t)=>e.depth-t.depth)),this.emittedObjectUpdater.update(e),this.updatedParticles=this.emittedObjectUpdater.alive}renderInstance(e){this.instances[this.visibleInstances++]=e}startFrame(){let e=this.viewer.gl,t=this.viewport;if(e.viewport(t[0],t[1],t[2],t[3]),e.scissor(t[0],t[1],t[2],t[3]),!this.alpha){let t=this.color;e.depthMask(!0),e.clearColor(t[0],t[1],t[2],1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}}renderOpaque(){let e=this.instances;for(let t=0,n=e.length;t<n;t++)e[t].renderOpaque()}renderTranslucent(){let e=this.instances;for(let t=e.length-1;t>=0;t--)e[t].renderTranslucent()}render(){this.startFrame(),this.renderOpaque(),this.renderTranslucent()}clearEmittedObjects(){for(let e of this.emittedObjectUpdater.objects)e.health=0}}},7290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSkeletalNodes=t.SkeletalNode=void 0;const a=n(9234),r=n(8533),i=a.quat.create(),l=a.vec3.create(),s=a.vec3.create(),o=a.quat.create();class u{constructor(e,t,n,a,r,i,l,s,o,u,c,d){this.dontInheritTranslation=!1,this.dontInheritRotation=!1,this.dontInheritScaling=!1,this.billboarded=!1,this.billboardedX=!1,this.billboardedY=!1,this.billboardedZ=!1,this.dirty=!0,this.wasDirty=!1,this.parent=null,this.children=[],this.object=null,this.pivot=e,this.localLocation=t,this.localRotation=n,this.localScale=a,this.worldLocation=r,this.worldRotation=i,this.worldScale=l,this.inverseWorldLocation=s,this.inverseWorldRotation=o,this.inverseWorldScale=u,this.localMatrix=c,this.worldMatrix=d,this.localRotation[3]=1,this.localScale.fill(1),this.localMatrix[0]=1,this.localMatrix[5]=1,this.localMatrix[10]=1,this.localMatrix[15]=1}recalculateTransformation(e){let t,n,u=this.localMatrix,c=this.localRotation,d=this.localScale,h=this.worldMatrix,f=this.worldLocation,_=this.worldRotation,m=this.worldScale,p=this.pivot,g=this.inverseWorldLocation,b=this.inverseWorldRotation,w=this.inverseWorldScale,v=this.parent;if(this.dontInheritScaling){n=l;let e=v.inverseWorldScale;n[0]=e[0]*d[0],n[1]=e[1]*d[1],n[2]=e[2]*d[2],m[0]=d[0],m[1]=d[1],m[2]=d[2]}else{n=d;let e=v.worldScale;m[0]=e[0]*d[0],m[1]=e[1]*d[1],m[2]=e[2]*d[2]}if(this.billboarded)t=i,a.quat.copy(t,v.inverseWorldRotation),a.quat.mul(t,t,e.camera.inverseRotation),this.convertBasis(t),a.quat.mul(t,t,c);else{const{billboardedX:u,billboardedY:h,billboardedZ:f}=this;u||h||f?(u&&(n===d&&(n=l,a.vec3.copy(n,d)),n[2]*=-1),o[0]=-c[0],o[1]=-c[1],o[2]=-c[2],a.quat.mul(o,o,v.inverseWorldRotation),a.vec3.transformQuat(s,e.camera.billboardedVectors[6],o),u?a.quat.setAxisAngle(o,r.VEC3_UNIT_X,Math.atan2(s[2],s[1])):h?a.quat.setAxisAngle(o,r.VEC3_UNIT_Y,Math.atan2(-s[2],s[0])):a.quat.setAxisAngle(o,r.VEC3_UNIT_Z,Math.atan2(s[1],s[0])),t=i,a.quat.mul(t,c,o)):t=c}a.mat4.fromRotationTranslationScaleOrigin(u,t,this.localLocation,n,p),a.mat4.mul(h,v.worldMatrix,u),a.quat.mul(_,v.worldRotation,t),b[0]=-_[0],b[1]=-_[1],b[2]=-_[2],b[3]=_[3],w[0]=1/m[0],w[1]=1/m[1],w[2]=1/m[2];let A=p[0],y=p[1],L=p[2];f[0]=h[0]*A+h[4]*y+h[8]*L+h[12],f[1]=h[1]*A+h[5]*y+h[9]*L+h[13],f[2]=h[2]*A+h[6]*y+h[10]*L+h[14],g[0]=-f[0],g[1]=-f[1],g[2]=-f[2]}convertBasis(e){}}t.SkeletalNode=u;t.createSkeletalNodes=function(e,t=u){let n=new Float32Array(65*e),a=[],r=0,i=3*e,l=4*e,s=16*e,o=n.subarray(r,r+i);r+=i;let c=n.subarray(r,r+i);r+=i;let d=n.subarray(r,r+l);r+=l;let h=n.subarray(r,r+i);r+=i;let f=n.subarray(r,r+i);r+=i;let _=n.subarray(r,r+l);r+=l;let m=n.subarray(r,r+i);r+=i;let p=n.subarray(r,r+i);r+=i;let g=n.subarray(r,r+l);r+=l;let b=n.subarray(r,r+i);r+=i;let w=n.subarray(r,r+s);r+=s;let v=n.subarray(r,r+s);for(let n=0;n<e;n++){let e=3*n,r=e+3,i=4*n,l=i+4,s=16*n,u=s+16;a[n]=new t(o.subarray(e,r),c.subarray(e,r),d.subarray(i,l),h.subarray(e,r),f.subarray(e,r),_.subarray(i,l),m.subarray(e,r),p.subarray(e,r),g.subarray(i,l),b.subarray(e,r),w.subarray(s,u),v.subarray(s,u))}return{data:n,nodes:a,pivots:o,localLocations:c,localRotations:d,localScales:h,worldLocations:f,worldRotations:_,worldScales:m,inverseWorldLocations:p,invereseWorldRotations:g,inverseWorldScales:b,localMatrices:w,worldMatrices:v}}},1081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(5330);class r extends a.HandlerResource{constructor(){super(...arguments),this.webglResource=null,this.width=0,this.height=0}}t.default=r},3519:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7187),r=n(5291),i=n(8057),l=n(9019),s=n(583),o=n(5952),u=n(6878),c=n(5226);class d extends a.EventEmitter{constructor(e,t){super(),this.resources=[],this.resourceMap=new Map,this.promiseMap=new Map,this.handlers=new Set,this.scenes=[],this.frame=0,this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0,this.audioEnabled=!1,this.sharedCache=new Map,this.directLoadId=0;let n=new i.default(e,t),a=n.gl;this.canvas=e,this.gl=a,this.webgl=n,this.buffer=n.createClientBuffer(),a.depthFunc(a.LEQUAL),a.enable(a.DEPTH_TEST),a.enable(a.SCISSOR_TEST)}enableAudio(){return"function"==typeof AudioContext&&(this.audioEnabled=!0,!0)}addHandler(e,...t){if(e){let n=this.handlers;if(!n.has(e)){if(!e.isValidSource)return this.emit("error",{viewer:this,error:"Handler missing the isValidSource function",handler:e}),!1;if(e.load)try{e.load(this,...t)}catch(t){return this.emit("error",{viewer:this,error:"Handler failed to load",handler:e,reason:t}),!1}return n.add(e),!0}}return!1}addScene(){let e=new l.default(this);return this.scenes.push(e),e}removeScene(e){let t=this.scenes,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}clear(){this.scenes.length=0}async load(e,t,n){let a,i,l="";if(t)try{a=t(e,n)}catch(a){return void this.emit("error",{viewer:this,error:"Path solver failed",src:e,reason:a,pathSolver:t,solverParams:n})}else a=e;if(a){if(a instanceof Promise&&(a=await a),a instanceof s.Resource)return a;if("string"!=typeof a||this.detectFormat(a))l="__DIRECT_LOAD_"+this.directLoadId++,i=Promise.resolve(a);else{if(l=a,i=this.promiseMap.get(l),i)return i;let e=this.resourceMap.get(l);if(e)return e;i=r.fetchDataType(l,"arrayBuffer").then((e=>{if(e.ok)return e.data;this.emit("error",{viewer:this,error:`Failed to fetch a resource: ${e.error}`,fetchUrl:l,reason:e.data})}))}return i=i.then((async n=>{if(n){if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),u.isImageSource(n))return new u.ImageTexture(n,{viewer:this,fetchUrl:l,pathSolver:t});if(n instanceof Uint8Array){let e=u.detectMime(n);if(e.length)return new u.ImageTexture(await c.blobToImage(new Blob([n.buffer],{type:e})),{viewer:this,fetchUrl:l,pathSolver:t})}let a=this.detectFormat(n);if(a)try{let e=new a.resource(n,{viewer:this,fetchUrl:l,pathSolver:t});return await Promise.all(e.blockers),e.blockers.length=0,e}catch(t){this.emit("error",{viewer:this,error:"Failed to create a resource",fetchUrl:l,src:e,reason:t})}else this.emit("error",{viewer:this,error:"Source has no matching handler",fetchUrl:l,src:e})}})).then((e=>(this.promiseMap.delete(l),e&&(this.resourceMap.set(l,e),this.resources.push(e),this.emit("load",{viewer:this,fetchUrl:l,resource:e})),this.emit("loadend",{viewer:this,fetchUrl:l,resource:e}),this.checkLoadingStatus(),e))),this.promiseMap.set(l,i),this.emit("loadstart",{viewer:this,fetchUrl:l,promise:i}),i}}detectFormat(e){for(let t of this.handlers)if(t.isValidSource(e))return t}has(e){return this.resourceMap.has(e)}get(e){return this.resourceMap.get(e)}async loadGeneric(e,t,n){let a=this.promiseMap.get(e);if(a)return a;let i=this.resourceMap.get(e);if(i)return i;let l=r.fetchDataType(e,t).then((async t=>{let a;if(this.promiseMap.delete(e),t.ok){let r=t.data;n&&(r=await n(r)),a=new o.default(r,{viewer:this,fetchUrl:e}),this.resourceMap.set(e,a),this.resources.push(a),this.emit("load",{viewer:this,fetchUrl:e,resource:a})}else this.emit("error",{viewer:this,error:"Failed to fetch a generic resource",fetchUrl:e});return this.emit("loadend",{viewer:this,fetchUrl:e,resource:a}),this.checkLoadingStatus(),a}));return this.promiseMap.set(e,l),this.emit("loadstart",{viewer:this,fetchUrl:e}),l}unload(e){let t=e.fetchUrl;""!==t&&this.resourceMap.delete(t);let n=this.resources,a=n.indexOf(e);return-1!==a&&(n.splice(a,1),!0)}promise(){let e=Promise.resolve(void 0),t=`${performance.now()}`;return this.promiseMap.set(t,e),()=>{this.promiseMap.delete(t),this.checkLoadingStatus()}}checkLoadingStatus(){0===this.promiseMap.size&&setTimeout((()=>this.emit("idle")),0)}whenAllLoaded(e){let t=new Promise((e=>{0===this.promiseMap.size?e(this):this.once("idle",(()=>e(this)))}));if(!e)return t;t.then((()=>e(this)))}toBlob(e){let t=new Promise((e=>this.canvas.toBlob((t=>e(t)))));if(!e)return t;t.then((t=>e(t)))}updateAndRender(e=1e3/60){this.update(e),this.startFrame(),this.render()}update(e=1e3/60){e*=.001,this.frame+=1,this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0;for(let t of this.scenes)t.update(e),this.visibleCells+=t.visibleCells,this.visibleInstances+=t.visibleInstances,this.updatedParticles+=t.updatedParticles}startFrame(){let e=this.gl;e.depthMask(!0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}render(){for(let e of this.scenes)e.render()}clearEmittedObjects(){for(let e of this.scenes)e.clearEmittedObjects()}}t.default=d},8127:(e,t)=>{"use strict";let n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}(),r=function(){let e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,r=799,i=3406,l=2276,s=1567,o=3784,u=5793,c=2896;function d(){this.decodeTransform=null,this.colorTransform=-1}function h(e,t){let n,a,r=0,i=[],l=16;for(;l>0&&!e[l-1];)l--;i.push({children:[],index:0});let s,o=i[0];for(n=0;n<l;n++){for(a=0;a<e[n];a++){for(o=i.pop(),o.children[o.index]=t[r];o.index>0;)o=i.pop();for(o.index++,i.push(o);i.length<=n;)i.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s;r++}n+1<l&&(i.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s)}return i[0].children}function f(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function _(t,r,i,l,s,o,u,c,d){let h=i.mcusPerLine,_=i.progressive,m=r,p=0,b=0;function w(){if(b>0)return b--,p>>b&1;if(p=t[r++],255===p){let e=t[r++];if(e)throw new a("unexpected marker "+(p<<8|e).toString(16))}return b=7,p>>>7}function v(e){let t=e;for(;;){if(t=t[w()],"number"==typeof t)return t;if("object"!==(void 0===t?"undefined":n(t)))throw new a("invalid huffman sequence")}}function A(e){let t=0;for(;e>0;)t=t<<1|w(),e--;return t}function y(e){if(1===e)return 1===w()?1:-1;let t=A(e);return t>=1<<e-1?t:t+(-1<<e)+1}let L=0;let S,T=0;function E(e,t,n,a,r){let i=n%h;t(e,f(e,(n/h|0)*e.v+a,i*e.h+r))}function k(e,t,n){t(e,f(e,n/e.blocksPerLine|0,n%e.blocksPerLine))}let x,I,M,U,P,R,O=l.length;R=_?0===o?0===c?function(e,t){let n=v(e.huffmanTableDC),a=0===n?0:y(n)<<d;e.blockData[t]=e.pred+=a}:function(e,t){e.blockData[t]|=w()<<d}:0===c?function(t,n){if(L>0)return void L--;let a=o,r=u;for(;a<=r;){let r=v(t.huffmanTableAC),i=15&r,l=r>>4;if(0===i){if(l<15){L=A(l)+(1<<l)-1;break}a+=16;continue}a+=l;let s=e[a];t.blockData[n+s]=y(i)*(1<<d),a++}}:function(t,n){let r,i,l=o,s=u,c=0;for(;l<=s;){let s=e[l];switch(T){case 0:if(i=v(t.huffmanTableAC),r=15&i,c=i>>4,0===r)c<15?(L=A(c)+(1<<c),T=4):(c=16,T=1);else{if(1!==r)throw new a("invalid ACn encoding");S=y(r),T=c?2:3}continue;case 1:case 2:t.blockData[n+s]?t.blockData[n+s]+=w()<<d:(c--,0===c&&(T=2===T?3:0));break;case 3:t.blockData[n+s]?t.blockData[n+s]+=w()<<d:(t.blockData[n+s]=S<<d,T=0);break;case 4:t.blockData[n+s]&&(t.blockData[n+s]+=w()<<d)}l++}4===T&&(L--,0===L&&(T=0))}:function(t,n){let a=v(t.huffmanTableDC),r=0===a?0:y(a);t.blockData[n]=t.pred+=r;let i=1;for(;i<64;){let a=v(t.huffmanTableAC),r=15&a,l=a>>4;if(0===r){if(l<15)break;i+=16;continue}i+=l;let s=e[i];t.blockData[n+s]=y(r),i++}};let C,B,F,D,G=0;for(B=1===O?l[0].blocksPerLine*l[0].blocksPerColumn:h*i.mcusPerColumn;G<B;){let e=s?Math.min(B-G,s):B;for(I=0;I<O;I++)l[I].pred=0;if(L=0,1===O)for(x=l[0],P=0;P<e;P++)k(x,R,G),G++;else for(P=0;P<e;P++){for(I=0;I<O;I++)for(x=l[I],F=x.h,D=x.v,M=0;M<D;M++)for(U=0;U<F;U++)E(x,R,G,M,U);G++}b=0,C=g(t,r),C&&C.invalid&&(r=C.offset);let n=C&&C.marker;if(!n||n<=65280)throw new a("marker was not found");if(!(n>=65488&&n<=65495))break;r+=2}return C=g(t,r),C&&C.invalid&&(r=C.offset),r-m}function m(e,n,d){let h,f,_,m,p,g,b,w,v,A,y,L,S,T,E,k,x,I=e.quantizationTable,M=e.blockData;if(!I)throw new a("missing required Quantization Table.");for(let e=0;e<64;e+=8)v=M[n+e],A=M[n+e+1],y=M[n+e+2],L=M[n+e+3],S=M[n+e+4],T=M[n+e+5],E=M[n+e+6],k=M[n+e+7],v*=I[e],0!=(A|y|L|S|T|E|k)?(A*=I[e+1],y*=I[e+2],L*=I[e+3],S*=I[e+4],T*=I[e+5],E*=I[e+6],k*=I[e+7],h=u*v+128>>8,f=u*S+128>>8,_=y,m=E,p=c*(A-k)+128>>8,w=c*(A+k)+128>>8,g=L<<4,b=T<<4,h=h+f+1>>1,f=h-f,x=_*o+m*s+128>>8,_=_*s-m*o+128>>8,m=x,p=p+b+1>>1,b=p-b,w=w+g+1>>1,g=w-g,h=h+m+1>>1,m=h-m,f=f+_+1>>1,_=f-_,x=p*l+w*i+2048>>12,p=p*i-w*l+2048>>12,w=x,x=g*r+b*t+2048>>12,g=g*t-b*r+2048>>12,b=x,d[e]=h+w,d[e+7]=h-w,d[e+1]=f+b,d[e+6]=f-b,d[e+2]=_+g,d[e+5]=_-g,d[e+3]=m+p,d[e+4]=m-p):(x=u*v+512>>10,d[e]=x,d[e+1]=x,d[e+2]=x,d[e+3]=x,d[e+4]=x,d[e+5]=x,d[e+6]=x,d[e+7]=x);for(let e=0;e<8;++e)v=d[e],A=d[e+8],y=d[e+16],L=d[e+24],S=d[e+32],T=d[e+40],E=d[e+48],k=d[e+56],0!=(A|y|L|S|T|E|k)?(h=u*v+2048>>12,f=u*S+2048>>12,_=y,m=E,p=c*(A-k)+2048>>12,w=c*(A+k)+2048>>12,g=L,b=T,h=4112+(h+f+1>>1),f=h-f,x=_*o+m*s+2048>>12,_=_*s-m*o+2048>>12,m=x,p=p+b+1>>1,b=p-b,w=w+g+1>>1,g=w-g,h=h+m+1>>1,m=h-m,f=f+_+1>>1,_=f-_,x=p*l+w*i+2048>>12,p=p*i-w*l+2048>>12,w=x,x=g*r+b*t+2048>>12,g=g*t-b*r+2048>>12,b=x,v=h+w,k=h-w,A=f+b,E=f-b,y=_+g,T=_-g,L=m+p,S=m-p,v=v<16?0:v>=4080?255:v>>4,A=A<16?0:A>=4080?255:A>>4,y=y<16?0:y>=4080?255:y>>4,L=L<16?0:L>=4080?255:L>>4,S=S<16?0:S>=4080?255:S>>4,T=T<16?0:T>=4080?255:T>>4,E=E<16?0:E>=4080?255:E>>4,k=k<16?0:k>=4080?255:k>>4,M[n+e]=v,M[n+e+8]=A,M[n+e+16]=y,M[n+e+24]=L,M[n+e+32]=S,M[n+e+40]=T,M[n+e+48]=E,M[n+e+56]=k):(x=u*v+8192>>14,x=x<-2040?0:x>=2024?255:x+2056>>4,M[n+e]=x,M[n+e+8]=x,M[n+e+16]=x,M[n+e+24]=x,M[n+e+32]=x,M[n+e+40]=x,M[n+e+48]=x,M[n+e+56]=x)}function p(e,t){let n=t.blocksPerLine,a=t.blocksPerColumn,r=new Int16Array(64);for(let e=0;e<a;e++)for(let a=0;a<n;a++){m(t,f(t,e,a),r)}return t.blockData}function g(e,t,n){function a(t){return e[t]<<8|e[t+1]}let r=e.length-1,i=n<t?n:t;if(t>=r)return null;let l=a(t);if(l>=65472&&l<=65534)return{invalid:null,marker:l,offset:t};let s=a(i);for(;!(s>=65472&&s<=65534);){if(++i>=r)return null;s=a(i)}return{invalid:l.toString(16),marker:s,offset:i}}return d.prototype={parse:function(t){function n(){let e=t[l]<<8|t[l+1];return l+=2,e}function r(){let e=n(),a=l+e-2,r=g(t,a,l);r&&r.invalid&&(a=r.offset);let i=t.subarray(l,a);return l+=i.length,i}function i(e){let t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV);for(let a=0;a<e.components.length;a++){I=e.components[a];let r=Math.ceil(Math.ceil(e.samplesPerLine/8)*I.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*I.v/e.maxV),l=t*I.h,s=64*(n*I.v)*(l+1);I.blockData=new Int16Array(s),I.blocksPerLine=r,I.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=n}var l=0;let s,o,u=null,c=null,d=[],f=[],m=[],b=n();if(65496!==b)throw new a("SOI not found");for(b=n();65497!==b;){var w,v,A;switch(b){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=r();65504===b&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(u={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65518===b&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&(c={version:y[5]<<8|y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var L=n()+l-2;l<L;){let r=t[l++],i=new Uint16Array(64);if(r>>4==0)for(v=0;v<64;v++)i[e[v]]=t[l++];else{if(r>>4!=1)throw new a("DQT - invalid table spec");for(v=0;v<64;v++)i[e[v]]=n()}d[15&r]=i}break;case 65472:case 65473:case 65474:if(s)throw new a("Only single frame JPEGs supported");n(),s={},s.extended=65473===b,s.progressive=65474===b,s.precision=t[l++],s.scanLines=n(),s.samplesPerLine=n(),s.components=[],s.componentIds={};var S,T=t[l++],E=0,k=0;for(w=0;w<T;w++){S=t[l];let e=t[l+1]>>4,n=15&t[l+1];E<e&&(E=e),k<n&&(k=n);let a=t[l+2];A=s.components.push({h:e,v:n,quantizationId:a,quantizationTable:null}),s.componentIds[S]=A-1,l+=3}s.maxH=E,s.maxV=k,i(s);break;case 65476:var x=n();for(w=2;w<x;){let e=t[l++],n=new Uint8Array(16),a=0;for(v=0;v<16;v++,l++)a+=n[v]=t[l];let r=new Uint8Array(a);for(v=0;v<a;v++,l++)r[v]=t[l];w+=17+a,(e>>4==0?m:f)[15&e]=h(n,r)}break;case 65501:n(),o=n();break;case 65498:n();var I,M=t[l++],U=[];for(w=0;w<M;w++){let e=s.componentIds[t[l++]];I=s.components[e];let n=t[l++];I.huffmanTableDC=m[n>>4],I.huffmanTableAC=f[15&n],U.push(I)}var P=t[l++],R=t[l++],O=t[l++],C=_(t,l,s,U,o,P,R,O>>4,15&O);l+=C;break;case 65535:255!==t[l]&&l--;break;default:if(255===t[l-3]&&t[l-2]>=192&&t[l-2]<=254){l-=3;break}throw new a("unknown marker "+b.toString(16))}b=n()}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=u,this.adobe=c,this.components=[],w=0;w<s.components.length;w++){let e=d[(I=s.components[w]).quantizationId];e&&(I.quantizationTable=e),this.components.push({output:p(0,I),scaleX:I.h/s.maxH,scaleY:I.v/s.maxV,blocksPerLine:I.blocksPerLine,blocksPerColumn:I.blocksPerColumn})}this.numComponents=this.components.length},getData:function(e){let t=e.data,n=this.components,a=new Uint8Array((n[0].blocksPerLine<<3)*n[0].blocksPerColumn*8);[n[0],n[2]]=[n[2],n[0]];for(let e=0,s=n.length;e<s;e++){let o=n[e],u=o.blocksPerLine,c=o.blocksPerColumn,d=u<<3;var r,i,l=0;for(let e=0;e<c;e++){let t=e<<3;for(let n=0;n<u;n++){let s=f(o,e,n),u=0,c=n<<3;for(r=0;r<8;r++){l=(t+r)*d;for(i=0;i<8;i++)a[l+c+i]=o.output[s+u++]}}}let h=e;for(let e=0;e<this.height;e++)for(let n=0;n<this.width;n++)t[h]=a[e*d+n],h+=s}return t}},d}();t.JpegImage=r},1235:function(e,t){var n,a,r;!function(i,l){"use strict";a=[],void 0===(r="function"==typeof(n=function(){var e,t;e="undefined"!=typeof Image?Image:t.Image;var n="undefined"!=typeof window?window.document:{createElement:function(){return new t}},a={},r=a;function i(e){var t="warning resemble.outputSettings mutates global state, and will be removed in 3.0.0";return console.warn(t),r=e,this}var l=function(t){var i=1,l={red:255,green:0,blue:255,alpha:255},s={r:0,g:0,b:0,a:0};function o(e,t){return(Math.abs(e.r-t.r)+Math.abs(e.g-t.g)+Math.abs(e.b-t.b))/3}function u(e,t,n,a,r){return e>(r.left||0)&&e<(r.right||n)&&t>(r.top||0)&&t<(r.bottom||a)}function c(e,t,n,a){var r=!0;return void 0===h||u(e,t,n,a,h)||(r=!1),void 0!==f&&u(e,t,n,a,f)&&(r=!1),r}var d,h,f,_={flat:function(e,t){e[t]=l.red,e[t+1]=l.green,e[t+2]=l.blue,e[t+3]=l.alpha},movement:function(e,t,n,a){e[t]=(a.r*(l.red/255)+l.red)/2,e[t+1]=(a.g*(l.green/255)+l.green)/2,e[t+2]=(a.b*(l.blue/255)+l.blue)/2,e[t+3]=a.a},flatDifferenceIntensity:function(e,t,n,a){e[t]=l.red,e[t+1]=l.green,e[t+2]=l.blue,e[t+3]=o(n,a)},movementDifferenceIntensity:function(e,t,n,a){var r=o(n,a)/255*.8;e[t]=(1-r)*(a.r*(l.red/255))+r*l.red,e[t+1]=(1-r)*(a.g*(l.green/255))+r*l.green,e[t+2]=(1-r)*(a.b*(l.blue/255))+r*l.blue,e[t+3]=a.a},diffOnly:function(e,t,n,a){e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]=a.a}},m=_.flat,p=1200,g=!0,b={},w=[],v=[],A={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},y=!1,L=!1,S=!1;function T(){var e,t=v.length;for(e=0;e<t;e++)"function"==typeof v[e]&&v[e](b)}function E(e,t,n){var a,r;for(a=0;a<e;a++)for(r=0;r<t;r++)n(a,r)}function k(e,t,n){var a=0,r=0,i=0,l=0,s=0,o=0,u=0,c=0;E(t,n,(function(n,d){var h=4*(d*t+n),f=e[h],_=e[h+1],m=e[h+2],p=e[h+3],g=U(f,_,m);f===_&&f===m&&p&&(0===f?c++:255===f&&u++),a++,r+=f/255*100,i+=_/255*100,l+=m/255*100,s+=(255-p)/255*100,o+=g/255*100})),b.red=Math.floor(r/a),b.green=Math.floor(i/a),b.blue=Math.floor(l/a),b.alpha=Math.floor(s/a),b.brightness=Math.floor(o/a),b.white=Math.floor(u/a*100),b.black=Math.floor(c/a*100),T()}function x(t,a){var r,i=new e;i.setAttribute||(i.setAttribute=function(){}),g&&i.setAttribute("crossorigin","anonymous"),i.onerror=function(e){i.onload=null,i.onerror=null,w.push({error:e?e+"":"Image load error."}),a()},i.onload=function(){i.onload=null,i.onerror=null;var e,t=n.createElement("canvas"),r=i.width,l=i.height;S&&1===w.length&&(r=w[0].width,l=w[0].height),t.width=r,t.height=l,t.getContext("2d").drawImage(i,0,0,r,l),e=t.getContext("2d").getImageData(0,0,r,l),w.push(e),a(e,r,l)},"string"==typeof t?(i.src=t,i.complete&&i.naturalWidth>0&&i.onload()):void 0!==t.data&&"number"==typeof t.width&&"number"==typeof t.height?(w.push(t),a(t,t.width,t.height)):"undefined"!=typeof Buffer&&t instanceof Buffer?i.src=t:((r=new FileReader).onload=function(e){i.src=e.target.result},r.readAsDataURL(t))}function I(e,t,n){var a=Math.abs(e-t);return void 0!==e&&(void 0!==t&&(e===t||a<A[n]))}function M(e,t){var n=I(e.a,t.a,"alpha");return I(e.brightness,t.brightness,"minBrightness")&&n}function U(e,t,n){return.3*e+.59*t+.11*n}function P(e,t){var n=e.r===t.r,a=e.g===t.g,r=e.b===t.b;return n&&a&&r}function R(e,t){var n=I(e.r,t.r,"red"),a=I(e.g,t.g,"green"),r=I(e.b,t.b,"blue"),i=I(e.a,t.a,"alpha");return n&&a&&r&&i}function O(e,t){return Math.abs(e.brightness-t.brightness)>A.maxBrightness}function C(e,t,n){var a,r,i=e/255,l=t/255,s=n/255,o=Math.max(i,l,s),u=Math.min(i,l,s);if(o===u)a=0;else switch(r=o-u,o){case i:a=(l-s)/r+(l<s?6:0);break;case l:a=(s-i)/r+2;break;case s:a=(i-l)/r+4;break;default:a/=6}return a}function B(e,t,n,a,r,i){var l,o,u=1,c=0,d=0,h=0;for(V(e),l=-1*u;l<=u;l++)for(o=-1*u;o<=u;o++)if(0===l&&0===o);else{if(!G(s,t,4*((a+o)*i+(r+l)),n))continue;if(N(s),V(s),O(e,s)&&c++,P(e,s)&&h++,Math.abs(s.h-e.h)>.3&&d++,d>1||c>1)return!0}return h<2}function F(e,t,n){"diffOnly"!==d&&(e[t]=n.r,e[t+1]=n.g,e[t+2]=n.b,e[t+3]=n.a*i)}function D(e,t,n){"diffOnly"!==d&&(e[t]=n.brightness,e[t+1]=n.brightness,e[t+2]=n.brightness,e[t+3]=n.a*i)}function G(e,t,n){return t.length>n&&(e.r=t[n],e.g=t[n+1],e.b=t[n+2],e.a=t[n+3],!0)}function N(e){e.brightness=U(e.r,e.g,e.b)}function V(e){e.h=C(e.r,e.g,e.b)}function H(e,t,a,r){var i=n.createElement("canvas"),l=e.data,s=t.data;i.width=a,i.height=r;var o,u=i.getContext("2d"),d=u.createImageData(a,r),h=d.data,f=0,_={top:r,left:a,bottom:0,right:0},g=function(e,t){_.left=Math.min(e,_.left),_.right=Math.max(e,_.right),_.top=Math.min(t,_.top),_.bottom=Math.max(t,_.bottom)},w=Date.now();p&&y&&(a>p||r>p)&&(o=6);var v={r:0,g:0,b:0,a:0},A={r:0,g:0,b:0,a:0};E(a,r,(function(e,t){if(!o||t%o!=0&&e%o!=0){var n=4*(t*a+e),i=c(e,t,a,r);if(G(v,l,n,1)&&G(A,s,n,2))return L?(N(v),N(A),void(M(v,A)||!i?D(h,n,A):(m(h,n,v,A),f++,g(e,t)))):void(R(v,A)||!i?F(h,n,v):y&&(N(v),N(A),B(v,l,1,t,e,a)||B(A,s,2,t,e,a))&&(M(v,A)||!i)?D(h,n,A):(m(h,n,v,A),f++,g(e,t)))}})),b.rawMisMatchPercentage=f/(r*a)*100,b.misMatchPercentage=b.rawMisMatchPercentage.toFixed(2),b.diffBounds=_,b.analysisTime=Date.now()-w,b.getImageDataUrl=function(e){var t=0;return e&&(t=j(e,u,i)),u.putImageData(d,0,t),i.toDataURL("image/png")},i.toBuffer&&(b.getBuffer=function(n){if(n){var a=i.width+2;i.width=3*a,u.putImageData(e,0,0),u.putImageData(t,a,0),u.putImageData(d,2*a,0)}else u.putImageData(d,0,0);return i.toBuffer()})}function j(e,t,n){var a=2;t.font="12px sans-serif";var r=t.measureText(e).width+2*a,i=22;return r>n.width&&(n.width=r),n.height+=i,t.fillStyle="#666",t.fillRect(0,0,n.width,i-4),t.fillStyle="#fff",t.fillRect(0,i-4,n.width,4),t.fillStyle="#fff",t.textBaseline="top",t.font="12px sans-serif",t.fillText(e,a,1),i}function K(e,t,a){var r,i;return e.height<a||e.width<t?((r=n.createElement("canvas")).width=t,r.height=a,(i=r.getContext("2d")).putImageData(e,0,0),i.getImageData(0,0,t,a)):e}function z(e){var t;if(e.errorColor)for(t in e.errorColor)e.errorColor.hasOwnProperty(t)&&(l[t]=void 0===e.errorColor[t]?l[t]:e.errorColor[t]);e.errorType&&_[e.errorType]&&(m=_[e.errorType],d=e.errorType),e.errorPixel&&"function"==typeof e.errorPixel&&(m=e.errorPixel),i=isNaN(Number(e.transparency))?i:e.transparency,void 0!==e.largeImageThreshold&&(p=e.largeImageThreshold),void 0!==e.useCrossOrigin&&(g=e.useCrossOrigin),void 0!==e.boundingBox&&(h=e.boundingBox),void 0!==e.ignoredBox&&(f=e.ignoredBox)}function X(e,t){function n(){var e,t;if(2===w.length){if(w[0].error||w[1].error)return(b={}).error=w[0].error?w[0].error:w[1].error,void T();e=w[0].width>w[1].width?w[0].width:w[1].width,t=w[0].height>w[1].height?w[0].height:w[1].height,w[0].width===w[1].width&&w[0].height===w[1].height?b.isSameDimensions=!0:b.isSameDimensions=!1,b.dimensionDifference={width:w[0].width-w[1].width,height:w[0].height-w[1].height},H(K(w[0],e,t),K(w[1],e,t),e,t),T()}}r!==a&&z(r),w=[],x(e,n),x(t,n)}function J(e){var n,a="function"==typeof e;a||(n=e);var r={scaleToSameSize:function(){return S=!0,a&&e(),r},useOriginalSize:function(){return S=!1,a&&e(),r},ignoreNothing:function(){return A.red=0,A.green=0,A.blue=0,A.alpha=0,A.minBrightness=0,A.maxBrightness=255,y=!1,L=!1,a&&e(),r},ignoreLess:function(){return A.red=16,A.green=16,A.blue=16,A.alpha=16,A.minBrightness=16,A.maxBrightness=240,y=!1,L=!1,a&&e(),r},ignoreAntialiasing:function(){return A.red=32,A.green=32,A.blue=32,A.alpha=32,A.minBrightness=64,A.maxBrightness=96,y=!0,L=!1,a&&e(),r},ignoreColors:function(){return A.alpha=16,A.minBrightness=16,A.maxBrightness=240,y=!1,L=!0,a&&e(),r},ignoreAlpha:function(){return A.red=16,A.green=16,A.blue=16,A.alpha=255,A.minBrightness=16,A.maxBrightness=240,y=!1,L=!1,a&&e(),r},repaint:function(){return a&&e(),r},outputSettings:function(e){return z(e),r},onComplete:function(e){v.push(e);var a=function(){X(t,n)};return a(),J(a)}};return r}var Y={onComplete:function(e){v.push(e),x(t,(function(e,t,n){k(e.data,t,n)}))},compareTo:function(e){return J(e)},outputSettings:function(e){return z(e),Y}};return Y};function s(e,t){switch(t){case"nothing":e.ignoreNothing();break;case"less":e.ignoreLess();break;case"antialiasing":e.ignoreAntialiasing();break;case"colors":e.ignoreColors();break;case"alpha":e.ignoreAlpha();break;default:throw new Error("Invalid ignore: "+t)}}return l.compare=function(e,t,n,a){var r,i;"function"==typeof n?(r=n,i={}):(r=a,i=n||{});var o,u=l(e);i.output&&u.outputSettings(i.output),o=u.compareTo(t),i.scaleToSameSize&&o.scaleToSameSize(),"string"==typeof i.ignore?s(o,i.ignore):i.ignore&&i.ignore.forEach&&i.ignore.forEach((function(e){s(o,e)})),o.onComplete((function(e){e.error?r(e.error):r(null,e)}))},l.outputSettings=i,l})?n.apply(t,a):n)||(e.exports=r)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";var e=a;Object.defineProperty(e,"__esModule",{value:!0});const t=n(8412),r=n(20),i=n(6372),l=n(2107),s=n(5928);e.default={version:t.version,common:r.default,parsers:i.default,viewer:l.default,utils:s.default}})(),ModelViewer=a})();